AppApi:
  type: object
  description: Api used for an app
  required: [info]
  properties:
    info:
      $ref: '#/definitions/ApiInfo'
    actions:
      description: Actions associated with this app
      type: array
      items:
        $ref: '#/definitions/ActionApi'
    conditions:
      description: Conditions associated with this app
      type: array
      items:
        $ref: '#/definitions/ConditionApi'
    transforms:
      description: Transforms associated with this app
      type: array
      items:
        $ref: '#/definitions/TransformApi'
    devices:
      description: Devices associated with this app
      type: array
      items:
        $ref: '#/definitions/DeviceApi'
    tags:
      type: array
      items:
        $ref: '#/definitions/ApiTag'
      uniqueItems: true
    externalDocs:
      $ref: '#/definitions/ExternalDocs'
    
ApiInfo:
  type: object
  description: General information about the API
  required: [version, title]
  properties:
    title:
      type: string
      description: A unique and precise title of the API
      example: Splunk
    version:
      type: string
      description: A semantic version number of the API
    description:
      type: string
      description: A longer description of the API. Should be different from the title.
    termsOfService:
      type: string
      description: Terms of service for the API
    contact:
      $ref: '#/definitions/ApiContact'
    license:
      $ref: '#/definitions/ApiLicense'

ApiContact:
  type: object
  description: Contact information for the owners of this API
  properties:
    name:
      type: string
      description: The ame of the contact person or organization
    url:
      type: string
      description: The URL pointing to the contact information
      format: uri
    email:
      type: string
      description: The email address of the contact person/organization
      format: email

ApiLicense:
  type: object
  description: License information for this API
  required: [name]
  properties:
    name:
      type: string
      description: The name of the license type
    url:
      type: string
      description: The URL pointing to the license
      format: uri

ActionApi:
  type: object
  description: The api of an app's action
  required: [name, run, returns]
  properties:
    name:
      type: string
      description: unique name of the action
    run:
      type: string
      description: The path to the executable function
    returns:
      type: array
      items:
        $ref: '#/definitions/ReturnApi'
      description: The return types of this action
    parameters:
      type: array
      items:
        $ref: '#/definitions/ParameterApi'
      description: The parameters needed by this action
    event:
      type: string
      description: name of the event needed for this action to occur. Only used for event-driven actions.
    deprecated:
      type: boolean
      default: false
      description: Is this action deprecated?
    tags:
      type: array
      items:
        type: string
      description: tags for this action
      uniqueItems: true
    summary:
      type: string
      description: A brief summary of this action
    description:
      type: string
      description: A longer description of the operation
    externalDocs:
      $ref: '#/definitions/ExternalDocs'

ConditionApi:
  type: object
  description: The api of an app's condition
  required: [name, run, returns, dataIn]
  properties:
    name:
      type: string
      description: unique name of the action
    run:
      type: string
      description: The path to the executable function
    dataIn:
      type: string
      description: name of parameter which comes from executed step
    parameters:
      type: array
      items:
        $ref: '#/definitions/ParameterApi'
      description: The parameters needed by this action
    deprecated:
      type: boolean
      default: false
      description: Is this action deprecated?
    tags:
      type: array
      items:
        type: string
      description: tags for this action
      uniqueItems: true
    summary:
      type: string
      description: A brief summary of this action
    description:
      type: string
      description: A longer description of the operation
    externalDocs:
      $ref: '#/definitions/ExternalDocs'
    returns:
      type: array
      items:
        $ref: '#/definitions/ReturnApi'
      description: The return types of this action

TransformApi:
  type: object
  description: The api of an app's transform
  required: [name, run, dataIn]
  properties:
    name:
      type: string
      description: unique name of the action
    run:
      type: string
      description: The path to the executable function
    dataIn:
      type: string
      description: name of parameter which comes from executed step
    parameters:
      type: array
      items:
        $ref: '#/definitions/ParameterApi'
      description: The parameters needed by this action
    deprecated:
      type: boolean
      default: false
      description: Is this action deprecated?
    tags:
      type: array
      items:
        type: string
      description: tags for this action
      uniqueItems: true
    summary:
      type: string
      description: A brief summary of this action
    description:
      type: string
      description: A longer description of the operation
    externalDocs:
      $ref: '#/definitions/ExternalDocs'

DeviceApi:
  type: object
  required: [typename, fields]
  properties:
    typename:
      type: string
      description: Name of the device type
    description:
      type: string
    fields:
      type: array
      items:
        $ref: '#/definitions/DeviceFieldApi'

DeviceFieldApi:
  type: object
  required: [name, type]
  properties:
    name:
      type: string
    type:
      type: string
      enum: [string, number, integer, boolean]
    required:
      description: is the argument required
      type: boolean
      default: false
    description:
      type: string
      description: description of what the argument provides
    default:
      description: default value for the argument
    encrypted:
      type: boolean
      description: Is this field encrypted
      default: false
    schema:
      type: object
      description: The schema of the field

ParameterApi:
  type: object
  description: A parameter using for actions
  required: [name, schema]
  properties:
    name:
      type: string
    example:
      type: [number, integer, string, boolean]
    required:
      type: boolean
      enum: [true]
      description: Is this parameter required for the action
    description:
      type: string
      description: description of the parameter
    schema:
      type: object
      description: JSON schema of the expected type of this parameter

ReturnApi:
  type: object
  description: A specification of what an action returns
  required: [status]
  properties:
    status:
      type: string
      description: Status of the return
    description:
      type: string
      description: description of the return type
    schema:
      type: object
      description: The schema of the return value
    examples:
      description: An exaple of the returned type

ExternalDocs:
  type: object
  description: information about external documentation
  required: [url]
  properties:
    description:
      type: string
      description: Description of the documentation
    url:
      type: string
      description: Points to the external documentation
      format: uri

ApiTag:
  type: object
  description: A tag for a class of actions/conditions/transforms in this app
  required: [name]
  properties:
    name:
      type: string
      description: The name of the tag
    description:
      type: string
      description: Description of the tag
    externalDocs:
      $ref: '#/definitions/ExternalDocs'
      
