<!DOCTYPE html>
<html>
<title>WALKOFF-Automation for All</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../../w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/androidstudio.min.css">
<style>

body,h1,h2,h3,h4,h5,h6 {font-family: "Lato", sans-serif}
.w3-navbar,h1,button {font-family: "Montserrat", sans-serif}
.fa-graduation-cap,.fa-flask{font-size:200px}

#headerDiv{
    background-image:url("../../files/images/headerBackground2.png");
    background-size: 50% auto;
    background-repeat: no-repeat;
    background-position:50% 50%;
}

.imageList {
  list-style-type: none;
}

.topLevelList + h5{
  display:none;
}

.fa-circle, .fa-circle-o{
  font-size:12px;
  padding-right:10px;
}

.code{
    background-color:#edf0f4;
    padding:25px;
}


td{
    padding-right:10px;
    margin-bottom: 25px;
    margin-top:25px;
}

.image{
    text-align:center;
}

.image img{
    max-width:100%;
    max-height:100%;
}

.functionality_list li{
    margin-bottom:20px;
}

.tag{
    background-color:#edf0f4;
    text-align:center;
}

img.media-object.image{
    width:100%;
}

.tutorialTable td{
    border-bottom:1px solid black;
}

</style>
<body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
    
<!-- Navbar -->
<div class="w3-top">
  <div class="w3-bar w3-blue-grey w3-card-2 w3-left-align w3-large">
    <a class="w3-bar-item w3-button w3-hide-medium w3-hide-large w3-opennav w3-right w3-padding-large w3-hover-white w3-large w3-red" href="javascript:void(0);" onclick="myFunction()" title="Toggle Navigation Menu"><i class="fa fa-bars"></i></a>
    <a href="../../index.html" class="w3-bar-item w3-button w3-padding-large w3-white">Home</a>
    <a href="../../documentation/build/index.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Documentation</a>
    <a href="https://github.com/iadgov/WALKOFF" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Source</a>
    <a href="../../swagger/index.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">API</a>
    <a href="index.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Tutorials</a>
  </div>

  <!-- Navbar on small screens -->
  <div id="navDemo" class="w3-navblock w3-white w3-hide w3-hide-large w3-hide-medium w3-large">
    <a class="w3-padding-large" href="../../documentation/build/index.html">Documentation</a>
    <a class="w3-padding-large" href="https://github.com/iadgov/WALKOFF">Source</a>
    <a class="w3-padding-large" href="../../swagger/index.html">API</a>
    <a class="w3-padding-large" href="index.html">Tutorials</a>
  </div>
</div>

<!-- Header -->
<header id="headerDiv" class="w3-container w3-black w3-center w3-padding-64">
  <h1 class="headerText w3-margin w3-jumbo">WALKOFF</h1>
  <h5 class="headerText w3-margin w3-xxxlarge">Tutorials</h5>
</header>

<div class="w3-row-padding w3-padding-64 w3-container">
  <div class="w3-content">
    <div class="w3-twothird">
      <h1>App API schema</h1>

        <h4>Primitive type conversion</h4>
        <p>Primitive types are converted to the following Python data types</p>
        <table>
            <tr>
                <th>Schema Type</th>
                <th>Python Type</th>
            </tr>
            <tr>
                <td>string</td>
                <td>str</td>
            </tr>
            <tr>
                <td>integer</td>
                <td>int</td>
            </tr>
            <tr>
                <td>number</td>
                <td>float</td>
            </tr>
            <tr>
                <td>boolean</td>
                <td>bool</td>
            </tr>
        </table>

        <h3><b>In the following examples we use the app API schema to demonstrate schema validation capabilities</b></h3>

        <h4><b>Limiting numbers to minimum and maximum values</b></h4>
        <p>Type can be either <code>"number"</code> or <code>"integer"</code>. The limits of integer types, of course,
            must also be integers</p>
        <pre><code class="yaml">
actions:
  some action:
    run: the_name_of_the_method_of_the_action
    parameters:
      - name: value
        type: number
        minimum: 0.35
        maximum: 1000.36
        </code></pre>

        <h4><b>Limiting the length of a string</b></h4>
        <pre><code class="yaml">
actions:
  some action:
    run: the_name_of_the_method_of_the_action
    parameters:
      - name: password
        type: string
        minimumLength: 4
        maximumLength: 25
        </code></pre>

        <h4><b>Using enumerations</b></h4>
        <p>You can limit the input of an action to a set of values. These allowed inputs will be displayed as a drop-down
            menu in the workflow editor</p>
        <pre><code class="yaml">
actions:
  some action:
    run: the_name_of_the_method_of_the_action
    parameters:
      - name: status
        type: string
        enum: ['on', off, running, error]
        </code></pre>
        <p>Note: The "on" parameter is in quotations because it is a reserved keyword in YAML</p>
        <h4><b>Using arrays of primitive values</b></h4>
        <p>You can use arrays of primitive values as inputs. An array of numbers such as [7.5, 8,2, 3, 9,7] is specified
            in the following way:</p>
        <pre><code class="yaml">
actions:
  some action:
    run: the_name_of_the_method_of_the_action
    parameters:
      - name: status
        schema:
          type: array
          items:
            type: number
        </code></pre>

        <h4><b>Describing objects</b></h4>
        <p>You can use objects as inputs. This schema would define an object with fields
            <code>field1, field2, field3</code> with types <code>string, integer</code>, and <code>array</code> of
            strings</p>
        <pre><code class="yaml">
actions:
  some action:
    run: the_name_of_the_method_of_the_action
    parameters:
      - name: status
        schema:
          type: object
          properties:
            field1:
              type: string
            field2:
              type: integer
            field3:
              type: array
              items:
                type: string
        </code></pre>

        <h4><b>Describing arrays of objects</b></h4>
        <p>This schema would define an input which is an array of objects each with fields <code>field1, field2</code>
            with types <code>string, integer</code>.</p>
        <pre><code class="yaml">
actions:
  some action:
    run: the_name_of_the_method_of_the_action
    parameters:
      - name: status
        schema:
          type: array
          items:
            type: object
              properties:
                field1:
                  type: string
                field2:
                  type: integer
        </code></pre>

        <h4><b>Required parameters</b></h4>
        <p>By default, no parameter is required, and it defaults to <code>None</code>. To make a parameter required, you
            can mark it as required. </p>
        <pre><code class="yaml">
actions:
  some action:
    run: the_name_of_the_method_of_the_action
    parameters:
      - name: value
        type: number
        required: true
        </code></pre>
        <p>Note that <code>required: false</code> is a redundant and invalid specifier and will cause your api to be
            invalidated on initialization of the server.</p>

        <h4><b>Required object properties</b></h4>
        <p>You can set some properties of an object as required. This schema would define an object with fields
            <code>field1, field2, field3</code> of which only <code>field1</code> and <code>field2</code> are required.</p>
        <pre><code class="yaml">
actions:
  some action:
    run: the_name_of_the_method_of_the_action
    parameters:
      - name: status
        schema:
          type: object
          required: [field1, field2]
          properties:
            field1:
              type: string
            field2:
              type: integer
            field3:
              type: array
              items:
                type: string
        </code></pre>

        <h4><b>Using defaults</b></h4>
        <p>You can set a default parameter with the <code>default</code> field. The following schema sets the default to
            10.</p>
        <pre><code class="yaml">
actions:
  some action:
    run: the_name_of_the_method_of_the_action
    parameters:
      - name: status
        type: integer
        default: 10
        </code></pre>
        <p>This default will be displayed on the workflow editor.</p>

        <h4><b>Using default return codes</b></h4>
        <p>You can set a default return code with the <code>default_return</code> field. The following schema sets the
            default return code to "FileCreated".</p>
        <pre><code class="yaml">
actions:
  some action:
  run: the_name_of_the_method_of_the_action
  parameters:
  default_return: FileCreated
  returns:
    AlreadyExists:
      schema:
        type: boolean
    FileCreated:
      schema:
        type: boolean
    WriteError:
      schema:
        type: boolean
        </code></pre>
        <p>The default return code will be used to set the default return code in branch parameters in the playbook
            editor, as well as being the default return code if no return code was specified. If it is not specified,
            it will default to "Success," and if you do not specify a "Success" return code, the drop-down menu will
            default to the first return code specified.</p>

        <h4><b>Using failure return codes</b></h4>
        <p>You can mark a return code as a failure return code for easier diagnosis of errors in a workflow.</p>
        <pre><code class="yaml">
actions:
  some action:
  run: the_name_of_the_method_of_the_action
  parameters:
  default_return: FileCreated
  returns:
    AlreadyExists:
      failure: true
      schema:
        type: boolean
    FileCreated:
      schema:
        type: boolean
    WriteError:
      failure: true
      schema:
        type: boolean
        </code></pre>
        <p>A failure return code will be highlighted in red in branch parameters, and will cause the action to be
            highlighted in red in the playbook editor if it is returned.</p>

        <h4><b>Using giving hints</b></h4>
        <p>You can set a default parameter with the <code>default</code> field. The following schema sets the default to
            10.</p>
        <pre><code class="yaml">
actions:
  some action:
    run: the_name_of_the_method_of_the_action
    parameters:
      - name: status
        type: integer
        placeholder: enter your status here
        </code></pre>
        <p>This placeholder will be displayed on the workflow editor as a prompt for a user to enter some data.</p>
        <h4><b>More</b></h4>
        <ol>
            <li><a href="Develop_an_app.html">Develop an App</a></li>
            <li><a href="Develop_an_app_with_class.html">Develop an App with Devices</a></li>
            <li><a href="Develop_conditions_transforms.html">Develop Conditions and Transforms</a></li>
            <li><a href="Actions_with_multiple_return_codes.html">Action Return Codes</a></li>
            <li><a href="Manage_app_dependencies.html">Managing App Dependencies</a></li>
            <li><a href="Test_an_app.html">Testing an App</a></li>
        </ol>
    </div>

   <div class="w3-third w3-center">
      <i class="fa fa-graduation-cap w3-padding-64 w3-text-blue-grey"></i>
    </div>
  </div>
</div>
<div class="w3-container w3-black w3-center w3-opacity w3-padding-64">
    <h1 class="w3-margin w3-xlarge">Questions? Comments? </h1>
    <h1 class="w3-margin w3-xlarge"> Reach out to us at <a href="mailto:walkoff@nsa.gov"> walkoff@nsa.gov </a> </h1>
</div>

<!-- Footer -->
<footer class="w3-container w3-padding-64 w3-center w3-opacity">
 <!-- <p>Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank"> </a></p> -->
</footer>

<script src="../../files/plugins/jQuery/jQuery-2.1.4.min.js"></script>
<script>
// Used to toggle the menu on small screens when clicking on the menu button
function myFunction() {
    var x = document.getElementById("navDemo");
    if (x.className.indexOf("w3-show") == -1) {
        x.className += " w3-show";
    } else {
        x.className = x.className.replace(" w3-show", "");
    }
}
</script>
</body>
</html>
