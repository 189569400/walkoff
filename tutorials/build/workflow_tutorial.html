<!DOCTYPE html>
<html>
<title>WALKOFF-Automation for All</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../../w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/androidstudio.min.css">
<style>

body,h1,h2,h3,h4,h5,h6 {font-family: "Lato", sans-serif}
.w3-navbar,h1,button {font-family: "Montserrat", sans-serif}
.fa-graduation-cap,.fa-flask{font-size:200px}

#headerDiv{
    background-image:url("../../files/images/headerBackground2.png");
    background-size: 50% auto;
    background-repeat: no-repeat;
    background-position:50% 50%;
}

.imageList {
  list-style-type: none;
}

.topLevelList + h5{
  display:none;
}

.fa-circle, .fa-circle-o{
  font-size:12px;
  padding-right:10px;
}

.code{
    background-color:#edf0f4;
    padding:25px;
}


td{
    padding-right:10px;
    margin-bottom: 25px;
    margin-top:25px;
}

.image{
    text-align:center;
}

.image img{
    max-width:100%;
    max-height:100%;
}

.functionality_list li{
    margin-bottom:20px;
}

.tag{
    background-color:#edf0f4;
    text-align:center;
}

img.media-object.image{
    width:100%;
}

.tutorialTable td{
    border-bottom:1px solid black;
}

</style>
<body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
    
<!-- Navbar -->
<div class="w3-top">
  <div class="w3-bar w3-blue-grey w3-card-2 w3-left-align w3-large">
    <a class="w3-bar-item w3-button w3-hide-medium w3-hide-large w3-opennav w3-right w3-padding-large w3-hover-white w3-large w3-red" href="javascript:void(0);" onclick="myFunction()" title="Toggle Navigation Menu"><i class="fa fa-bars"></i></a>
    <a href="../../index.html" class="w3-bar-item w3-button w3-padding-large w3-white">Home</a>
    <a href="../../documentation/build/index.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Documentation</a>
    <a href="https://github.com/iadgov/WALKOFF" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Source</a>
    <a href="../../swagger/index.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">API</a>
    <a href="index.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Tutorials</a>
  </div>

  <!-- Navbar on small screens -->
  <div id="navDemo" class="w3-navblock w3-white w3-hide w3-hide-large w3-hide-medium w3-large">
    <a class="w3-padding-large" href="../../documentation/build/index.html">Documentation</a>
    <a class="w3-padding-large" href="https://github.com/iadgov/WALKOFF">Source</a>
    <a class="w3-padding-large" href="../../swagger/index.html">API</a>
    <a class="w3-padding-large" href="index.html">Tutorials</a>
  </div>
</div>

<!-- Header -->
<header id="headerDiv" class="w3-container w3-black w3-center w3-padding-64">
  <h1 class="headerText w3-margin w3-jumbo">WALKOFF</h1>
  <h5 class="headerText w3-margin w3-xxxlarge">Tutorials</h5>
</header>

<div class="w3-row-padding w3-padding-64 w3-container">
    <div class="w3-content">
        <div class="w3-twothird">
            <h1>How to Create a Simple Workflow</h1>
            <h3>In this tutorial, we will be creating a simple workflow to show how easy it is to use WALKOFF to do something very useful. Specifically, we will be using
                a combination of a SmartPlug device (which our router is plugged into) and Nmap to disconnect power to the router if a malicious user is found on our network.</h3>

            <h4>0. Ensure Python 2.7+, or Python 3.3+, pip and git are installed, as well as any other dependencies for the apps and devices.</h4>
            
            <h4>1. Open a terminal on linux or a command prompt on Windows, and run the command to start the server.</h4>
            <pre><code class="console">python startServer.py</code></pre>

            <h4>2. Open a browser and navigate to the pre-configured host and port for your deployment of WALKOFF (default is localhost:5000).</h4>

            <h4>3. Once you have logged in, on the sidebar, click on the "Devices" tab. Here we will be creating the necessary devices for this tutorial. We will only be 
                creating one device, for the SmartPlug app.</h4>

            <h4>4. First, fill out the parameters for your SmartPlug under the "Parameters" header. Name the device "SmartPlug_Device", and fill in the IP of the device.
                Although this information will not be used in this example, you still must input a value for username, password, and port (>1024). Once you have inputted all of that information, highlight the "SmartPlug" app on the left side of the page, and click "Add New Device". Now let's create our workflow.</h4>

            <h4>5. On the left sidebar, click on "Playbook" to create our workflow. Click the "blank page" icon in the edit toolbar to create a new workflow. Let's call the playbook 
                "SmartPlug_Playbook", and the workflow "SmartPlug_Workflow" (real original, I know), and hit "Create New Workflow". Next, click the "Load Workflow" button to load up
                your workflow in the graphical editor. Next, let's add some actions to this workflow!</h4>

            <h4>6. All of the available actions are located on the left side of the page. First, let's add an action to add a host to the whitelist. To do this, double-click on the action
                "add_host_to_whitelist" under the Nmap folder. It should appear in the center of the graphical editor. Click on the gray box (you may have to double click). Scroll down on
                the page, and you will realize that a new input box showed up, called "Node Parameters". At the bottom, there is one field, "host". This is the IP address that we want to
                add to the whitelist. Add your local IP address to that field (e.g. 192.168.1.184), check off the "Set as Start Node" checkbox. Make sure that the "action" selected in
                the drop down menu is "add_host_to_whitelist".</h4>

            <h4>7. Let's add another action to run the scan, and check whether or not there were any hosts that were found on the network that were not in the whitelist. Double-click on the
                action "run_scan_check_whitelist", and click on the gray box until it turns blue. Scroll down again to enter in our inputs for this scan. For the target, type in 
                your gateway in CIDR notation (e.g. 192.168.1.1/24) to scan all of the hosts on the network. Under options, input "-sP" to do a basic ping scan. Next, select the
                add_host_to_whitelist box and then click and drag from the red dot above that box to the run_scan_check_whitelist box to connect those two "steps" of the workflow. Next,
                we'll create our last step.</h4>

            <h4>8. We're almost done! Under the SmartPlug app, double click on the turn_off action. This action does not require any input, but we do need to select a device. Scroll down
                to where we inputted the fields for the previous actions, and select the "SmartPlug_Device" under the "Device" dropdown. Then scroll up and create an arrow leading from
                run_scan_check_whitelist to turn_off. </h4>

            <h4>9. Last step before we are done with the workflow. Since we do not want to cut power to the router if the scan returns True (meaning that the network is okay), we must add
                a Flag to the run_scan_check_whitelist step. So click on the run_scan_check_whitelist box, and you'll notice that a "Next Nodes" options showed up under the "Node 
                Parameters" tab at the bottom of the page. Click on the add next step flag button. Select the "count" flag, select 'ge' (greater than or equal to), and input '1' for the
                threshold. What we are doing here is telling the workflow to trigger the turn_off step only if the return value from the scan is greater than or equal to 1, meaning
                that it found at least 1 host on the network that was not in the whitelist. Finally, we save the workflow by clicking on the floppy disk save icon, and we're done!
                To execute the workflow, simply go to the Controller page, right click on our newly created workflow, and hit execute.</h4>
        </div>
    </div>
</div>
<div class="w3-container w3-black w3-center w3-opacity w3-padding-64">
    <h1 class="w3-margin w3-xlarge">Questions? Comments? </h1>
    <h1 class="w3-margin w3-xlarge"> Reach out to us at <a href="mailto:walkoff@nsa.gov"> walkoff@nsa.gov </a> </h1>
</div>

<!-- Footer -->
<footer class="w3-container w3-padding-64 w3-center w3-opacity">
 <!-- <p>Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank"> </a></p> -->
</footer>

<script src="../../files/plugins/jQuery/jQuery-2.1.4.min.js"></script>
<script>
// Used to toggle the menu on small screens when clicking on the menu button
function myFunction() {
    var x = document.getElementById("navDemo");
    if (x.className.indexOf("w3-show") == -1) {
        x.className += " w3-show";
    } else {
        x.className = x.className.replace(" w3-show", "");
    }
}
</script>
</body>
</html>
