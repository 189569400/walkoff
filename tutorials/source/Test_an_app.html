<div class="w3-row-padding w3-padding-64 w3-container">
  <div class="w3-content">
    <div class="">
      <h1>Test an app</h1>
        <p>WALKOFF can easily test your apps with a top-level app testing script</p>
        <h4><b>1. Create a Python package in your app package named "tests"</b></h4>
        <p>If you were testing your HelloWorld app described in the <a href="Develop_an_app.html">Develop an App</a>
        section, your directory structure will look like this:</p>
        <pre><code class="console">
WALKOFF
|-- apps
  |-- HelloWorld
    |-- tests
      |-- __init__.py
    |-- __init__.py
    |-- main.py
    |-- functions.json
  |-- [Other apps]
        </code></pre>
        <h4><b>2. Write your tests</b></h4>
        <p>Inside the test package, we then need to write some Python modules which use Python's builtin
            <code>unittest</code> package to test our module. We put the following code inside of a module named
            <code>test_main.py</code> inside our tests module</p>
        <pre><code class="python">
import unittest
from apps.HelloWorld import main

class TestMain(unittest.TestCase):
    def setUp(self):
        self.app = main.Main('TestApp', 'TestDevice')  # Arguments in this case are arbitrary

    def test_hello_world(self):
        message = self.app.hello_world()
        self.assertDictEqual(message, {"message": "Hello World"})

    def test_plus_one(self):
        # Note here. The values expected in the args dict are core.arguments.Argument objects.
        # These objects are callable and return a value. For almost all purposes you can mimic their behavior
        # for testing using an anonymous lambda function which returns the value you want to pass.
        # See below.
        args = {'number': (lambda: 4)}
        returned = self.app.plus_one(args)
        self.assertEqual(returned, '5')
        </code></pre>

        <p>The test needs to be registered in the module, so we'll modify out <code>__init__.py</code>:</p>
        <pre><code>
__all__ = ['test_main']
        </code></pre>

        <p>Each module containing tests will need to be registered in teh <code>__init__.py</code> y appending to this
        list</p>
        <h4><b>3. Run your tests</b></h4>

        <p>You can run your tests by running the <code>testapps.py</code> script included at the root of the WALKOFF
            repository</p>
            <pre><code class="console">
python testapps.py --apps HelloWorld
            </code></pre>
        <p>You can see more options using </p>
        <pre><code class="console">
python testapps.py --help
        </code></pre>
        <div align="center" style="border:1px solid blue">
            <h5><a href="Develop_an_app_interface.html"><< Prev</a></h5>
        </div>
    </div>

   <div class="w3-third w3-center">
      <i class="fa fa-graduation-cap w3-padding-64 w3-text-blue-grey"></i>
    </div>
  </div>
</div>
