(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["main"],{

/***/ "./node_modules/moment/locale sync recursive ^\\.\\/.*$":
/*!**************************************************!*\
  !*** ./node_modules/moment/locale sync ^\.\/.*$ ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./af": "./node_modules/moment/locale/af.js",
	"./af.js": "./node_modules/moment/locale/af.js",
	"./ar": "./node_modules/moment/locale/ar.js",
	"./ar-dz": "./node_modules/moment/locale/ar-dz.js",
	"./ar-dz.js": "./node_modules/moment/locale/ar-dz.js",
	"./ar-kw": "./node_modules/moment/locale/ar-kw.js",
	"./ar-kw.js": "./node_modules/moment/locale/ar-kw.js",
	"./ar-ly": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ly.js": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ma": "./node_modules/moment/locale/ar-ma.js",
	"./ar-ma.js": "./node_modules/moment/locale/ar-ma.js",
	"./ar-sa": "./node_modules/moment/locale/ar-sa.js",
	"./ar-sa.js": "./node_modules/moment/locale/ar-sa.js",
	"./ar-tn": "./node_modules/moment/locale/ar-tn.js",
	"./ar-tn.js": "./node_modules/moment/locale/ar-tn.js",
	"./ar.js": "./node_modules/moment/locale/ar.js",
	"./az": "./node_modules/moment/locale/az.js",
	"./az.js": "./node_modules/moment/locale/az.js",
	"./be": "./node_modules/moment/locale/be.js",
	"./be.js": "./node_modules/moment/locale/be.js",
	"./bg": "./node_modules/moment/locale/bg.js",
	"./bg.js": "./node_modules/moment/locale/bg.js",
	"./bm": "./node_modules/moment/locale/bm.js",
	"./bm.js": "./node_modules/moment/locale/bm.js",
	"./bn": "./node_modules/moment/locale/bn.js",
	"./bn.js": "./node_modules/moment/locale/bn.js",
	"./bo": "./node_modules/moment/locale/bo.js",
	"./bo.js": "./node_modules/moment/locale/bo.js",
	"./br": "./node_modules/moment/locale/br.js",
	"./br.js": "./node_modules/moment/locale/br.js",
	"./bs": "./node_modules/moment/locale/bs.js",
	"./bs.js": "./node_modules/moment/locale/bs.js",
	"./ca": "./node_modules/moment/locale/ca.js",
	"./ca.js": "./node_modules/moment/locale/ca.js",
	"./cs": "./node_modules/moment/locale/cs.js",
	"./cs.js": "./node_modules/moment/locale/cs.js",
	"./cv": "./node_modules/moment/locale/cv.js",
	"./cv.js": "./node_modules/moment/locale/cv.js",
	"./cy": "./node_modules/moment/locale/cy.js",
	"./cy.js": "./node_modules/moment/locale/cy.js",
	"./da": "./node_modules/moment/locale/da.js",
	"./da.js": "./node_modules/moment/locale/da.js",
	"./de": "./node_modules/moment/locale/de.js",
	"./de-at": "./node_modules/moment/locale/de-at.js",
	"./de-at.js": "./node_modules/moment/locale/de-at.js",
	"./de-ch": "./node_modules/moment/locale/de-ch.js",
	"./de-ch.js": "./node_modules/moment/locale/de-ch.js",
	"./de.js": "./node_modules/moment/locale/de.js",
	"./dv": "./node_modules/moment/locale/dv.js",
	"./dv.js": "./node_modules/moment/locale/dv.js",
	"./el": "./node_modules/moment/locale/el.js",
	"./el.js": "./node_modules/moment/locale/el.js",
	"./en-au": "./node_modules/moment/locale/en-au.js",
	"./en-au.js": "./node_modules/moment/locale/en-au.js",
	"./en-ca": "./node_modules/moment/locale/en-ca.js",
	"./en-ca.js": "./node_modules/moment/locale/en-ca.js",
	"./en-gb": "./node_modules/moment/locale/en-gb.js",
	"./en-gb.js": "./node_modules/moment/locale/en-gb.js",
	"./en-ie": "./node_modules/moment/locale/en-ie.js",
	"./en-ie.js": "./node_modules/moment/locale/en-ie.js",
	"./en-nz": "./node_modules/moment/locale/en-nz.js",
	"./en-nz.js": "./node_modules/moment/locale/en-nz.js",
	"./eo": "./node_modules/moment/locale/eo.js",
	"./eo.js": "./node_modules/moment/locale/eo.js",
	"./es": "./node_modules/moment/locale/es.js",
	"./es-do": "./node_modules/moment/locale/es-do.js",
	"./es-do.js": "./node_modules/moment/locale/es-do.js",
	"./es-us": "./node_modules/moment/locale/es-us.js",
	"./es-us.js": "./node_modules/moment/locale/es-us.js",
	"./es.js": "./node_modules/moment/locale/es.js",
	"./et": "./node_modules/moment/locale/et.js",
	"./et.js": "./node_modules/moment/locale/et.js",
	"./eu": "./node_modules/moment/locale/eu.js",
	"./eu.js": "./node_modules/moment/locale/eu.js",
	"./fa": "./node_modules/moment/locale/fa.js",
	"./fa.js": "./node_modules/moment/locale/fa.js",
	"./fi": "./node_modules/moment/locale/fi.js",
	"./fi.js": "./node_modules/moment/locale/fi.js",
	"./fo": "./node_modules/moment/locale/fo.js",
	"./fo.js": "./node_modules/moment/locale/fo.js",
	"./fr": "./node_modules/moment/locale/fr.js",
	"./fr-ca": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ca.js": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ch": "./node_modules/moment/locale/fr-ch.js",
	"./fr-ch.js": "./node_modules/moment/locale/fr-ch.js",
	"./fr.js": "./node_modules/moment/locale/fr.js",
	"./fy": "./node_modules/moment/locale/fy.js",
	"./fy.js": "./node_modules/moment/locale/fy.js",
	"./gd": "./node_modules/moment/locale/gd.js",
	"./gd.js": "./node_modules/moment/locale/gd.js",
	"./gl": "./node_modules/moment/locale/gl.js",
	"./gl.js": "./node_modules/moment/locale/gl.js",
	"./gom-latn": "./node_modules/moment/locale/gom-latn.js",
	"./gom-latn.js": "./node_modules/moment/locale/gom-latn.js",
	"./gu": "./node_modules/moment/locale/gu.js",
	"./gu.js": "./node_modules/moment/locale/gu.js",
	"./he": "./node_modules/moment/locale/he.js",
	"./he.js": "./node_modules/moment/locale/he.js",
	"./hi": "./node_modules/moment/locale/hi.js",
	"./hi.js": "./node_modules/moment/locale/hi.js",
	"./hr": "./node_modules/moment/locale/hr.js",
	"./hr.js": "./node_modules/moment/locale/hr.js",
	"./hu": "./node_modules/moment/locale/hu.js",
	"./hu.js": "./node_modules/moment/locale/hu.js",
	"./hy-am": "./node_modules/moment/locale/hy-am.js",
	"./hy-am.js": "./node_modules/moment/locale/hy-am.js",
	"./id": "./node_modules/moment/locale/id.js",
	"./id.js": "./node_modules/moment/locale/id.js",
	"./is": "./node_modules/moment/locale/is.js",
	"./is.js": "./node_modules/moment/locale/is.js",
	"./it": "./node_modules/moment/locale/it.js",
	"./it.js": "./node_modules/moment/locale/it.js",
	"./ja": "./node_modules/moment/locale/ja.js",
	"./ja.js": "./node_modules/moment/locale/ja.js",
	"./jv": "./node_modules/moment/locale/jv.js",
	"./jv.js": "./node_modules/moment/locale/jv.js",
	"./ka": "./node_modules/moment/locale/ka.js",
	"./ka.js": "./node_modules/moment/locale/ka.js",
	"./kk": "./node_modules/moment/locale/kk.js",
	"./kk.js": "./node_modules/moment/locale/kk.js",
	"./km": "./node_modules/moment/locale/km.js",
	"./km.js": "./node_modules/moment/locale/km.js",
	"./kn": "./node_modules/moment/locale/kn.js",
	"./kn.js": "./node_modules/moment/locale/kn.js",
	"./ko": "./node_modules/moment/locale/ko.js",
	"./ko.js": "./node_modules/moment/locale/ko.js",
	"./ky": "./node_modules/moment/locale/ky.js",
	"./ky.js": "./node_modules/moment/locale/ky.js",
	"./lb": "./node_modules/moment/locale/lb.js",
	"./lb.js": "./node_modules/moment/locale/lb.js",
	"./lo": "./node_modules/moment/locale/lo.js",
	"./lo.js": "./node_modules/moment/locale/lo.js",
	"./lt": "./node_modules/moment/locale/lt.js",
	"./lt.js": "./node_modules/moment/locale/lt.js",
	"./lv": "./node_modules/moment/locale/lv.js",
	"./lv.js": "./node_modules/moment/locale/lv.js",
	"./me": "./node_modules/moment/locale/me.js",
	"./me.js": "./node_modules/moment/locale/me.js",
	"./mi": "./node_modules/moment/locale/mi.js",
	"./mi.js": "./node_modules/moment/locale/mi.js",
	"./mk": "./node_modules/moment/locale/mk.js",
	"./mk.js": "./node_modules/moment/locale/mk.js",
	"./ml": "./node_modules/moment/locale/ml.js",
	"./ml.js": "./node_modules/moment/locale/ml.js",
	"./mr": "./node_modules/moment/locale/mr.js",
	"./mr.js": "./node_modules/moment/locale/mr.js",
	"./ms": "./node_modules/moment/locale/ms.js",
	"./ms-my": "./node_modules/moment/locale/ms-my.js",
	"./ms-my.js": "./node_modules/moment/locale/ms-my.js",
	"./ms.js": "./node_modules/moment/locale/ms.js",
	"./mt": "./node_modules/moment/locale/mt.js",
	"./mt.js": "./node_modules/moment/locale/mt.js",
	"./my": "./node_modules/moment/locale/my.js",
	"./my.js": "./node_modules/moment/locale/my.js",
	"./nb": "./node_modules/moment/locale/nb.js",
	"./nb.js": "./node_modules/moment/locale/nb.js",
	"./ne": "./node_modules/moment/locale/ne.js",
	"./ne.js": "./node_modules/moment/locale/ne.js",
	"./nl": "./node_modules/moment/locale/nl.js",
	"./nl-be": "./node_modules/moment/locale/nl-be.js",
	"./nl-be.js": "./node_modules/moment/locale/nl-be.js",
	"./nl.js": "./node_modules/moment/locale/nl.js",
	"./nn": "./node_modules/moment/locale/nn.js",
	"./nn.js": "./node_modules/moment/locale/nn.js",
	"./pa-in": "./node_modules/moment/locale/pa-in.js",
	"./pa-in.js": "./node_modules/moment/locale/pa-in.js",
	"./pl": "./node_modules/moment/locale/pl.js",
	"./pl.js": "./node_modules/moment/locale/pl.js",
	"./pt": "./node_modules/moment/locale/pt.js",
	"./pt-br": "./node_modules/moment/locale/pt-br.js",
	"./pt-br.js": "./node_modules/moment/locale/pt-br.js",
	"./pt.js": "./node_modules/moment/locale/pt.js",
	"./ro": "./node_modules/moment/locale/ro.js",
	"./ro.js": "./node_modules/moment/locale/ro.js",
	"./ru": "./node_modules/moment/locale/ru.js",
	"./ru.js": "./node_modules/moment/locale/ru.js",
	"./sd": "./node_modules/moment/locale/sd.js",
	"./sd.js": "./node_modules/moment/locale/sd.js",
	"./se": "./node_modules/moment/locale/se.js",
	"./se.js": "./node_modules/moment/locale/se.js",
	"./si": "./node_modules/moment/locale/si.js",
	"./si.js": "./node_modules/moment/locale/si.js",
	"./sk": "./node_modules/moment/locale/sk.js",
	"./sk.js": "./node_modules/moment/locale/sk.js",
	"./sl": "./node_modules/moment/locale/sl.js",
	"./sl.js": "./node_modules/moment/locale/sl.js",
	"./sq": "./node_modules/moment/locale/sq.js",
	"./sq.js": "./node_modules/moment/locale/sq.js",
	"./sr": "./node_modules/moment/locale/sr.js",
	"./sr-cyrl": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr-cyrl.js": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr.js": "./node_modules/moment/locale/sr.js",
	"./ss": "./node_modules/moment/locale/ss.js",
	"./ss.js": "./node_modules/moment/locale/ss.js",
	"./sv": "./node_modules/moment/locale/sv.js",
	"./sv.js": "./node_modules/moment/locale/sv.js",
	"./sw": "./node_modules/moment/locale/sw.js",
	"./sw.js": "./node_modules/moment/locale/sw.js",
	"./ta": "./node_modules/moment/locale/ta.js",
	"./ta.js": "./node_modules/moment/locale/ta.js",
	"./te": "./node_modules/moment/locale/te.js",
	"./te.js": "./node_modules/moment/locale/te.js",
	"./tet": "./node_modules/moment/locale/tet.js",
	"./tet.js": "./node_modules/moment/locale/tet.js",
	"./th": "./node_modules/moment/locale/th.js",
	"./th.js": "./node_modules/moment/locale/th.js",
	"./tl-ph": "./node_modules/moment/locale/tl-ph.js",
	"./tl-ph.js": "./node_modules/moment/locale/tl-ph.js",
	"./tlh": "./node_modules/moment/locale/tlh.js",
	"./tlh.js": "./node_modules/moment/locale/tlh.js",
	"./tr": "./node_modules/moment/locale/tr.js",
	"./tr.js": "./node_modules/moment/locale/tr.js",
	"./tzl": "./node_modules/moment/locale/tzl.js",
	"./tzl.js": "./node_modules/moment/locale/tzl.js",
	"./tzm": "./node_modules/moment/locale/tzm.js",
	"./tzm-latn": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm-latn.js": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm.js": "./node_modules/moment/locale/tzm.js",
	"./uk": "./node_modules/moment/locale/uk.js",
	"./uk.js": "./node_modules/moment/locale/uk.js",
	"./ur": "./node_modules/moment/locale/ur.js",
	"./ur.js": "./node_modules/moment/locale/ur.js",
	"./uz": "./node_modules/moment/locale/uz.js",
	"./uz-latn": "./node_modules/moment/locale/uz-latn.js",
	"./uz-latn.js": "./node_modules/moment/locale/uz-latn.js",
	"./uz.js": "./node_modules/moment/locale/uz.js",
	"./vi": "./node_modules/moment/locale/vi.js",
	"./vi.js": "./node_modules/moment/locale/vi.js",
	"./x-pseudo": "./node_modules/moment/locale/x-pseudo.js",
	"./x-pseudo.js": "./node_modules/moment/locale/x-pseudo.js",
	"./yo": "./node_modules/moment/locale/yo.js",
	"./yo.js": "./node_modules/moment/locale/yo.js",
	"./zh-cn": "./node_modules/moment/locale/zh-cn.js",
	"./zh-cn.js": "./node_modules/moment/locale/zh-cn.js",
	"./zh-hk": "./node_modules/moment/locale/zh-hk.js",
	"./zh-hk.js": "./node_modules/moment/locale/zh-hk.js",
	"./zh-tw": "./node_modules/moment/locale/zh-tw.js",
	"./zh-tw.js": "./node_modules/moment/locale/zh-tw.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) { // check for number or string
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return id;
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/moment/locale sync recursive ^\\.\\/.*$";

/***/ }),

/***/ "./src/$$_lazy_route_resource lazy recursive":
/*!**********************************************************!*\
  !*** ./src/$$_lazy_route_resource lazy namespace object ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncaught exception popping up in devtools
	return Promise.resolve().then(function() {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = "./src/$$_lazy_route_resource lazy recursive";

/***/ }),

/***/ "./src/app/auth/auth.service.ts":
/*!**************************************!*\
  !*** ./src/app/auth/auth.service.ts ***!
  \**************************************/
/*! exports provided: AuthService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AuthService", function() { return AuthService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _auth0_angular_jwt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @auth0/angular-jwt */ "./node_modules/@auth0/angular-jwt/index.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _models_accessToken__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../models/accessToken */ "./src/app/models/accessToken.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var REFRESH_TOKEN_NAME = 'refresh_token';
var ACCESS_TOKEN_NAME = 'access_token';
var AuthService = /** @class */ (function () {
    function AuthService(http, utils) {
        this.http = http;
        this.utils = utils;
        this.jwtHelper = new _auth0_angular_jwt__WEBPACK_IMPORTED_MODULE_1__["JwtHelperService"]();
    }
    //TODO: not currently used, eventually should be used on the login
    AuthService.prototype.login = function (username, password) {
        return this.http.post('/api/auth', { username: username, password: password })
            .toPromise()
            .then(function (tokens) {
            sessionStorage.setItem(ACCESS_TOKEN_NAME, tokens.access_token);
            sessionStorage.setItem(REFRESH_TOKEN_NAME, tokens.refresh_token);
            location.href = '/';
        })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Logs the user out on the server and clears the tokens in session storage.
     */
    AuthService.prototype.logout = function () {
        var _this = this;
        var headers = { 'Authorization': "Bearer " + this.getAccessToken() };
        return this.http.post('/api/auth/logout', { refresh_token: sessionStorage.getItem(REFRESH_TOKEN_NAME) }, { headers: headers })
            .toPromise()
            .then(function () {
            _this.clearTokens();
        })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Clears our JWTs from session storage. Used when logging out.
     */
    AuthService.prototype.clearTokens = function () {
        sessionStorage.removeItem(ACCESS_TOKEN_NAME);
        sessionStorage.removeItem(REFRESH_TOKEN_NAME);
    };
    //TODO: figure out how roles are going to be stored
    //stub method until we figure out how we're going to handle client side authorization stuff.
    AuthService.prototype.canAccess = function (resourceName, actionName) {
        return false;
    };
    /**
     * Grabs the refresh JWT string from session storage.
     */
    AuthService.prototype.getRefreshToken = function () {
        return sessionStorage.getItem(REFRESH_TOKEN_NAME);
    };
    /**
     * Grabs the access JWT string from session storage.
     */
    AuthService.prototype.getAccessToken = function () {
        return sessionStorage.getItem(ACCESS_TOKEN_NAME);
    };
    /**
     * Returns true if access token is expired
     */
    AuthService.prototype.isAccessTokenExpired = function () {
        return this.getAccessToken() && this.jwtHelper.isTokenExpired(this.getAccessToken());
    };
    /**
     * Returns true is refresh token is expired
     */
    AuthService.prototype.isRefreshTokenExpired = function () {
        return this.getRefreshToken() && this.jwtHelper.isTokenExpired(this.getRefreshToken());
    };
    /**
     * Asynchronously checks if the access token needs to be refreshed, and refreshes it if necessary.
     * Will return a promise of the existing access token or the newly refreshed access token.
     */
    AuthService.prototype.getAccessTokenRefreshed = function () {
        if (!this.isAccessTokenExpired())
            return Promise.resolve(this.getAccessToken());
        if (this.isRefreshTokenExpired()) {
            sessionStorage.removeItem('access_token');
            sessionStorage.removeItem('refresh_token');
            //TODO: figure out a better way of handling this... maybe incorporate login into the main component somehow
            location.href = '/login';
            return Promise.reject('Refresh token does not exist or has expired. Please log in again.');
        }
        var headers = { 'Authorization': "Bearer " + this.getRefreshToken() };
        return this.http.post('/api/auth/refresh', {}, { headers: headers })
            .toPromise()
            .then(function (res) {
            var accessToken = res.access_token;
            sessionStorage.setItem('access_token', accessToken);
            return accessToken;
        })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Returns an AccessToken object, decoded from the refresh token in session storage.
     */
    AuthService.prototype.getAndDecodeRefreshToken = function () {
        return Object(class_transformer__WEBPACK_IMPORTED_MODULE_3__["plainToClass"])(_models_accessToken__WEBPACK_IMPORTED_MODULE_4__["AccessToken"], this.jwtHelper.decodeToken(this.getRefreshToken()));
    };
    /**
     * Returns an AccessToken object, decoded from the access token in session storage.
     */
    AuthService.prototype.getAndDecodeAccessToken = function () {
        return Object(class_transformer__WEBPACK_IMPORTED_MODULE_3__["plainToClass"])(_models_accessToken__WEBPACK_IMPORTED_MODULE_4__["AccessToken"], this.jwtHelper.decodeToken(this.getAccessToken()));
    };
    /**
     * Checks if the access token is 'fresh'.
     * Freshness is determined if this is the access token from our actual authentication,
     * or if it is a token that was supplied using the /api/auth/refresh endpoint.
     */
    AuthService.prototype.isAccessTokenFresh = function () {
        return !!this.getAndDecodeAccessToken().fresh;
    };
    AuthService.prototype.getEventSource = function (url) {
        //return Promise.resolve(new AuthEventSource(url, this));
        return this.getAccessTokenRefreshed().then(function (authToken) {
            var eventSource = new EventSourcePolyfill(url, { headers: { 'Authorization': "Bearer " + authToken } });
            eventSource.onerror = function (err) { return console.error(err); };
            return eventSource;
        });
    };
    AuthService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpClient"], _utilities_service__WEBPACK_IMPORTED_MODULE_5__["UtilitiesService"]])
    ], AuthService);
    return AuthService;
}());

// export class AuthEventSource {
// 	eventSource: any;
// 	timeout: any;
// 	listeners: any[] = [];
// 	errorHandler: any = (err: Error) => console.error(err);
// 	constructor(private url, private authService: AuthService) {
// 		this._create();
// 	}
// 	private _getConfig() {
// 		return this.authService.getAccessTokenRefreshed().then(authToken => ({ headers: { 'Authorization': `Bearer ${ authToken }` }}));
// 	}
// 	private _create() {
// 		this._getConfig().then(config => {
// 			this.eventSource = new EventSourcePolyfill(this.url, config);
// 			this.eventSource.onopen = (e) => this._restartTimeout();
// 			this.eventSource.onmessage = (e) => this._restartTimeout();
// 			this.eventSource.onerror = this.errorHandler;
// 			this.listeners.forEach(listener => this.eventSource.addEventListener(listener.event, listener.handler));
// 		})
// 	}
// 	private _restartTimeout() {
// 		console.log('restarting timer');
// 		if (this.timeout) clearTimeout(this.timeout);
// 		this.timeout = setTimeout(() => {
// 			console.log(`Restarting EventSource: ${ this.url }`)
// 			this.close();
// 			this._create();
// 		}, 30000)
// 	}
// 	addEventListener(event, handler) {
// 		this.listeners.push({ event, handler })
// 		if (this.eventSource) this.eventSource.addEventListener(event, handler);
// 	}
// 	onerror(handler) {
// 		this.errorHandler = handler;
// 		if (this.eventSource) this.eventSource.onerror = handler;
// 	}
// 	close() {
// 		if (this.timeout) clearTimeout(this.timeout);
// 		if (this.eventSource) this.eventSource.close();
// 	}
// }


/***/ }),

/***/ "./src/app/buckets/buckets.component.ts":
/*!**********************************************!*\
  !*** ./src/app/buckets/buckets.component.ts ***!
  \**********************************************/
/*! exports provided: BucketsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BucketsComponent", function() { return BucketsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var ngx_toastr__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngx-toastr */ "./node_modules/ngx-toastr/fesm5/ngx-toastr.js");
/* harmony import */ var rxjs_add_operator_debounceTime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/add/operator/debounceTime */ "./node_modules/rxjs-compat/_esm5/add/operator/debounceTime.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
/* harmony import */ var _buckets_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./buckets.service */ "./src/app/buckets/buckets.service.ts");
/* harmony import */ var _buckets_modal_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./buckets.modal.component */ "./src/app/buckets/buckets.modal.component.ts");
/* harmony import */ var _triggers_modal_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./triggers.modal.component */ "./src/app/buckets/triggers.modal.component.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};










var BucketsComponent = /** @class */ (function () {
    function BucketsComponent(bucketsService, modalService, toastrService, utils) {
        this.bucketsService = bucketsService;
        this.modalService = modalService;
        this.toastrService = toastrService;
        this.utils = utils;
        this.buckets = [];
        this.filterQuery = new _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormControl"]();
        this.availableWorkflows = [];
    }
    /**
     * On component initialization, get the scheduler status for display/actioning.
     * Get workflow names to add to a scheduled task.
     * Get scheduled tasks to display in the data table.
     * Initialize the search filter input to filter scheduled tasks.
     */
    BucketsComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.getWorkflows();
        this.bucketsService.bucketsChange.subscribe(function (buckets) { return _this.buckets = buckets; });
        for (var b in this.buckets) {
            this.buckets[b].triggersChange = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Observable"](function (observer) {
                _this.buckets[b].observer = observer;
                _this.bucketsService.getAllTriggers().then(function (triggers) { return _this.buckets[b].observer.next(triggers); });
            });
            this.buckets[b].triggersChange.subscribe(function (triggers) { return _this.buckets[b].triggers = triggers; });
        }
    };
    Object.defineProperty(BucketsComponent.prototype, "filterBuckets", {
        /**
           * Based on the search filter input, filter out the buckets based on matching some parameters (name, desc.).
           */
        get: function () {
            var searchFilter = this.filterQuery.value ? this.filterQuery.value.toLocaleLowerCase() : '';
            return this.buckets.filter(function (bucket) {
                return bucket.name.toLocaleLowerCase().includes(searchFilter) ||
                    bucket.description.toLocaleLowerCase().includes(searchFilter) ||
                    (bucket.description && bucket.description.toLocaleLowerCase().includes(searchFilter));
            });
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Spawns a modal for adding a new bucket. Passes in our workflow names for usage in the modal.
     */
    BucketsComponent.prototype.addBucket = function () {
        var _this = this;
        var modalRef = this.modalService.open(_buckets_modal_component__WEBPACK_IMPORTED_MODULE_8__["BucketsModalComponent"], { size: 'lg' });
        modalRef.componentInstance.title = 'Create a new Bucket';
        modalRef.componentInstance.submitText = 'Add Bucket';
        modalRef.result.then(function (bucket) {
            _this.bucketsService.addBucket(bucket).then(function () {
                _this.toastrService.success("Added <b>" + bucket.name + "</b>");
            });
        }, function () { return null; });
    };
    BucketsComponent.prototype.editBucket = function (bucket) {
        var _this = this;
        var modalRef = this.modalService.open(_buckets_modal_component__WEBPACK_IMPORTED_MODULE_8__["BucketsModalComponent"], { size: 'lg' });
        modalRef.componentInstance.existing = true;
        modalRef.componentInstance.title = 'Edit Bucket';
        modalRef.componentInstance.submitText = 'Edit Bucket';
        modalRef.componentInstance.bucket = bucket.clone();
        modalRef.result.then(function (bucket) {
            _this.bucketsService.editBucket(bucket).then(function () {
                _this.toastrService.success("Added <b>" + bucket.name + "</b>");
            });
        }, function () { return null; });
    };
    BucketsComponent.prototype.deleteBucket = function (bucketToDelete) {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.utils.confirm("Are you sure you want to delete <b>" + bucketToDelete.name + "</b>?")];
                    case 1:
                        _a.sent();
                        this.bucketsService
                            .deleteBucket(bucketToDelete)
                            .then(function () { return _this.toastrService.success("Deleted <b>" + bucketToDelete.name + "</b>"); })
                            .catch(function (e) { return _this.toastrService.error("Error deleting <b>" + e.message + "</b>"); });
                        return [2 /*return*/];
                }
            });
        });
    };
    BucketsComponent.prototype.addTrigger = function (bucket) {
        var _this = this;
        var modalRef = this.modalService.open(_triggers_modal_component__WEBPACK_IMPORTED_MODULE_9__["TriggersModalComponent"], { size: 'lg' });
        modalRef.componentInstance.title = 'Create a new Trigger';
        modalRef.componentInstance.submitText = 'Add Trigger';
        modalRef.componentInstance.availableWorkflows = this.availableWorkflows;
        modalRef.result.then(function (trigger) {
            console.log(trigger);
            _this.bucketsService.addTrigger(bucket, trigger).then(function () {
                _this.toastrService.success("Added Trigger");
            });
        }, function () { return null; });
    };
    BucketsComponent.prototype.editTrigger = function (trigger_to_edit) {
        var _this = this;
        var modalRef = this.modalService.open(_triggers_modal_component__WEBPACK_IMPORTED_MODULE_9__["TriggersModalComponent"], { size: 'lg' });
        modalRef.componentInstance.title = 'Edit a Trigger';
        modalRef.componentInstance.submitText = 'Edit Trigger';
        modalRef.componentInstance.availableWorkflows = this.availableWorkflows;
        var bucket = this.buckets.find(function (obj) { return obj.id == trigger_to_edit["parent"]; });
        modalRef.result.then(function (trigger) {
            _this.bucketsService.editTrigger(bucket, trigger, trigger_to_edit["id"]).then(function () {
                _this.toastrService.success("Added Trigger");
            });
        }, function () { return null; });
    };
    BucketsComponent.prototype.deleteTrigger = function (trigger) {
        return __awaiter(this, void 0, void 0, function () {
            var bucket;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        bucket = this.buckets.find(function (obj) { return obj.id == trigger["parent"]; });
                        return [4 /*yield*/, this.utils.confirm("Are you sure you want to delete <b>" + trigger.id + "</b>?")];
                    case 1:
                        _a.sent();
                        this.bucketsService
                            .deleteTrigger(bucket, trigger)
                            .then(function () { return _this.toastrService.success("Deleted <b>" + trigger.id + "</b>"); })
                            .catch(function (e) { return _this.toastrService.error("Error deleting <b>" + e.message + "</b>"); });
                        return [2 /*return*/];
                }
            });
        });
    };
    BucketsComponent.prototype.toggleExpandRow = function (row) {
        //    console.log('Toggled Expand Row!', row);
        this.table.rowDetail.toggleExpandRow(row);
    };
    BucketsComponent.prototype.onDetailToggle = function (event) {
        //    console.log('Detail Toggled', event);
    };
    /**
       * Grabs an array of playbooks/workflows from the server (id, name pairs).
       * From this array, creates an array of Select2Option data with the id and playbook/workflow name.
       */
    BucketsComponent.prototype.getWorkflows = function () {
        var _this = this;
        this.bucketsService
            .getWorkflows()
            .then(function (workflows) {
            workflows.forEach(function (workflow) {
                _this.availableWorkflows.push({
                    id: workflow.id,
                    text: "" + workflow.name,
                });
            });
        });
    };
    /**
     * Converts the workflow ids array of a scheduled task into a readable string for display in the datatable.
     * @param scheduledTask Scheduled task to convert the workflows of
     */
    BucketsComponent.prototype.getFriendlyWorkflows = function (trigger) {
        if (!this.availableWorkflows || !trigger.workflow) {
            return '';
        }
        return this.availableWorkflows.filter(function (workflow) {
            return trigger.workflow;
        }).map(function (workflow) { return workflow.text; }).join(', ');
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('bucketsTable'),
        __metadata("design:type", Object)
    ], BucketsComponent.prototype, "table", void 0);
    BucketsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'buckets-component',
            template: __webpack_require__(/*! ./buckets.html */ "./src/app/buckets/buckets.html"),
            styles: [__webpack_require__(/*! ./buckets.scss */ "./src/app/buckets/buckets.scss"), __webpack_require__(/*! ../../../node_modules/ng-pick-datetime/styles/picker.min.css */ "./node_modules/ng-pick-datetime/styles/picker.min.css")],
            encapsulation: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewEncapsulation"].None,
        }),
        __metadata("design:paramtypes", [_buckets_service__WEBPACK_IMPORTED_MODULE_7__["BucketsService"],
            _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbModal"],
            ngx_toastr__WEBPACK_IMPORTED_MODULE_3__["ToastrService"],
            _utilities_service__WEBPACK_IMPORTED_MODULE_6__["UtilitiesService"]])
    ], BucketsComponent);
    return BucketsComponent;
}());



/***/ }),

/***/ "./src/app/buckets/buckets.html":
/*!**************************************!*\
  !*** ./src/app/buckets/buckets.html ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div id=\"main\" class=\"bucketsMain container-fluid\">\r\n\t<h1>Buckets</h1>\r\n  <div class=\"row align-items-center mb-3\">\r\n    <div class=\"col\">\r\n\t\t\t<button (click)=\"addBucket()\" class=\"btn btn-outline-primary\"><i class=\"fa fa-plus\"></i> Add Bucket</button>\r\n\t\t</div>\r\n    <div class=\"col-4\"></div>\r\n    <div class=\"col-4\">\r\n\t\t\t<input class=\"form-control\" placeholder=\"Filter Results...\" [formControl]=\"filterQuery\" />\r\n\t\t</div>\r\n  </div>\r\n  <ngx-datatable #bucketsTable class='material expandable bucketsTable' [columnMode]=\"'flex'\" [rows]=\"buckets\"\r\n\t [sorts]=\"[{prop: 'name', dir: 'asc'}]\" [sortType]=\"'multi'\" [headerHeight]=\"50\" [footerHeight]=\"50\" [rowHeight]=\"undefined\" [limit]=\"25\">\r\n\r\n    <ngx-datatable-row-detail [rowHeight]=\"undefined\" #triggerRow (toggle)=\"onDetailToggle($event)\">\r\n        <ng-template let-row=\"row\" let-expanded=\"expanded\" ngx-datatable-row-detail-template>\r\n          <div style=\"padding-left:35px;\">\r\n\r\n            <!-- TRIGGER SUB-Table -->\r\n<!--            <div><strong>Address</strong></div>-->\r\n                <ngx-datatable #triggersTable class='material expandable triggersTable' [columnMode]=\"'flex'\" [rows]=\"row.triggers\"\r\n\t                [sorts]=\"[{prop: 'id', dir: 'asc'}]\" [sortType]=\"'multi'\" [headerHeight]=\"50\" [footerHeight]=\"50\" [rowHeight]=\"undefined\" [limit]=\"25\">\r\n\r\n                      <ngx-datatable-column name=\"id\" prop=\"id\" [flexGrow]=\"1\">\r\n                        <ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n                          <span title=\"{{row.id}}\">{{row.id}}</span>\r\n                        </ng-template>\r\n                      </ngx-datatable-column>\r\n\r\n                      <ngx-datatable-column name=\"type\" prop=\"type\" [flexGrow]=\"4\">\r\n                        <ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n                          <span title=\"{{row.type}}\">{{row.event_type}}</span>\r\n                        </ng-template>\r\n                      </ngx-datatable-column>\r\n\r\n                      <ngx-datatable-column name=\"workflow\" prop=\"workflow\" [flexGrow]=\"4\">\r\n                        <ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n                          <span title=\"{{row.workflow}}\">{{row.workflow}}</span>\r\n                        </ng-template>\r\n                      </ngx-datatable-column>\r\n\r\n                      <ngx-datatable-column name=\"prefix\" prop=\"prefix\" [flexGrow]=\"4\">\r\n                        <ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n                          <span title=\"{{row.prefix}}\">{{row.prefix}}</span>\r\n                        </ng-template>\r\n                      </ngx-datatable-column>\r\n\r\n                      <ngx-datatable-column name=\"suffix\" prop=\"suffix\" [flexGrow]=\"4\">\r\n                        <ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n                          <span title=\"{{row.suffix}}\">{{row.suffix}}</span>\r\n                        </ng-template>\r\n                      </ngx-datatable-column>\r\n\r\n                      <ngx-datatable-column name=\"actions\" [resizeable]=\"false\" [sortable]=\"false\" [draggable]=\"false\" [flexGrow]=\"1\">\r\n                        <ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n                          <button (click)=\"editTrigger(row)\" class=\"mr-1 btn btn-primary\" title=\"Edit Trigger\">\r\n                            <i class=\"fa fa-edit\"></i>\r\n                          </button>\r\n                          <button (click)=\"deleteTrigger(row)\" class=\"mr-1 btn btn-danger\" title=\"Delete Trigger\">\r\n                            <i class=\"fa fa-times\"></i>\r\n                          </button>\r\n                        </ng-template>\r\n                    </ngx-datatable-column>\r\n\r\n                </ngx-datatable>\r\n          </div>\r\n        </ng-template>\r\n    </ngx-datatable-row-detail>\r\n\r\n    <ngx-datatable-column [width]=\"50\" [resizeable]=\"false\" [sortable]=\"false\" [draggable]=\"false\" [canAutoResize]=\"false\">\r\n      <ng-template let-row=\"row\" let-expanded=\"expanded\" ngx-datatable-cell-template>\r\n        <a href=\"javascript:void(0)\" [class.datatable-icon-right]=\"!expanded\" [class.datatable-icon-down]=\"expanded\" title=\"Expand/Collapse Row\" (click)=\"toggleExpandRow(row)\"></a>\r\n      </ng-template>\r\n    </ngx-datatable-column>\r\n\r\n    <ngx-datatable-column name=\"Name\" prop=\"name\" [flexGrow]=\"1\">\r\n      <ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n\t\t\t\t<span title=\"{{row.description}}\">{{row.name}}</span>\r\n\t\t\t</ng-template>\r\n    </ngx-datatable-column>\r\n\t\t<ngx-datatable-column name=\"Description\" prop=\"description\" [flexGrow]=\"4\">\r\n      <ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n\t\t\t\t<span title=\"{{row.description}}\">{{row.description}}</span>\r\n\t\t\t</ng-template>\r\n    </ngx-datatable-column>\r\n\r\n    <ngx-datatable-column name=\"Actions\" [resizeable]=\"false\" [sortable]=\"false\" [draggable]=\"false\" [flexGrow]=\"1\">\r\n      <ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n        <button (click)=\"editBucket(row)\" class=\"mr-1 btn btn-primary\" title=\"Edit Bucket\">\r\n\t\t\t\t\t<i class=\"fa fa-edit\"></i>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button (click)=\"deleteBucket(row)\" class=\"mr-1 btn btn-danger\" title=\"Delete Bucket\">\r\n\t\t\t\t\t<i class=\"fa fa-times\"></i>\r\n\t\t\t\t</button>\r\n      </ng-template>\r\n    </ngx-datatable-column>\r\n\r\n     <ngx-datatable-column name=\"Triggers\" [resizeable]=\"false\" [sortable]=\"false\" [draggable]=\"false\" [flexGrow]=\"1\">\r\n      <ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n        <button (click)=\"addTrigger(row)\" class=\"mr-1 btn btn-primary\" title=\"Add Trigger\">\r\n\t\t\t\t\t<i class=\"fa fa-plus\"></i>\r\n\t\t\t\t</button>\r\n      </ng-template>\r\n    </ngx-datatable-column>\r\n\r\n\t</ngx-datatable>\r\n</div>\r\n\r\n"

/***/ }),

/***/ "./src/app/buckets/buckets.modal.component.ts":
/*!****************************************************!*\
  !*** ./src/app/buckets/buckets.modal.component.ts ***!
  \****************************************************/
/*! exports provided: BucketsModalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BucketsModalComponent", function() { return BucketsModalComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var ngx_toastr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngx-toastr */ "./node_modules/ngx-toastr/fesm5/ngx-toastr.js");
/* harmony import */ var _buckets_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./buckets.service */ "./src/app/buckets/buckets.service.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
/* harmony import */ var _models_buckets_bucket__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../models/buckets/bucket */ "./src/app/models/buckets/bucket.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var BucketsModalComponent = /** @class */ (function () {
    function BucketsModalComponent(bucketsService, activeModal, toastrService, cdr) {
        this.bucketsService = bucketsService;
        this.activeModal = activeModal;
        this.toastrService = toastrService;
        this.cdr = cdr;
        this.bucket = new _models_buckets_bucket__WEBPACK_IMPORTED_MODULE_5__["Bucket"]();
        this.existing = false;
    }
    BucketsModalComponent.prototype.ngOnInit = function () {
    };
    BucketsModalComponent.prototype.ngAfterViewInit = function () {
        this.cdr.detectChanges();
    };
    /**
     * Submits the add/edit bucket modal.
     */
    BucketsModalComponent.prototype.submit = function () {
        if (!this.isBasicInfoValid()) {
            return;
        }
    };
    BucketsModalComponent.prototype.isBasicInfoValid = function () {
        if (this.bucket.name && this.bucket.name.trim()) {
            return true;
        }
        return false;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _models_buckets_bucket__WEBPACK_IMPORTED_MODULE_5__["Bucket"])
    ], BucketsModalComponent.prototype, "bucket", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], BucketsModalComponent.prototype, "title", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], BucketsModalComponent.prototype, "submitText", void 0);
    BucketsModalComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'buckets-modal',
            template: __webpack_require__(/*! ./buckets.modal.html */ "./src/app/buckets/buckets.modal.html"),
            styles: [__webpack_require__(/*! ./buckets.scss */ "./src/app/buckets/buckets.scss")],
            providers: [_buckets_service__WEBPACK_IMPORTED_MODULE_3__["BucketsService"], _utilities_service__WEBPACK_IMPORTED_MODULE_4__["UtilitiesService"]],
        }),
        __metadata("design:paramtypes", [_buckets_service__WEBPACK_IMPORTED_MODULE_3__["BucketsService"], _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__["NgbActiveModal"],
            ngx_toastr__WEBPACK_IMPORTED_MODULE_2__["ToastrService"], _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"]])
    ], BucketsModalComponent);
    return BucketsModalComponent;
}());



/***/ }),

/***/ "./src/app/buckets/buckets.modal.html":
/*!********************************************!*\
  !*** ./src/app/buckets/buckets.modal.html ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal-header\">\r\n\t<h4 class=\"modal-title\">{{title}}</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n\t<div class=\"container-fluid\">\r\n\t\t<form id=\"bucketForm\" #bucketForm=\"ngForm\" (ngSubmit)=\"submit()\">\r\n\t\t\t<div class=\"row\">\r\n\r\n\t\t\t\t<div class=\"col-6\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"name\">Name<i class=\"fa fa-asterisk required\" title=\"This field is required.\"></i></label>\r\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" [(ngModel)]=\"bucket.name\" #name=\"ngModel\" name=\"name\" required tabindex=\"1\">\r\n\t\t\t\t\t\t<div *ngIf=\"name.errors && (name.dirty || name.touched)\" class=\"alert alert-danger\">\r\n\t\t\t\t\t\t\t<div [hidden]=\"!name.errors.required\">\r\n\t\t\t\t\t\t\t\tName is required.\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n        </div>\r\n\r\n\t\t\t\t<div class=\"col-6\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"description\">Description</label>\r\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" [(ngModel)]=\"bucket.description\" name=\"description\" tabindex=\"2\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n      </div>\r\n\t\t</form>\r\n\t</div>\r\n</div>\r\n<div class=\"modal-footer\">\r\n\t<button type=\"button\" class=\"btn btn-secondary\" (click)=\"activeModal.dismiss()\">Undo Changes and Close</button>\r\n\t<button type=\"button\" class=\"btn btn-primary\" [disabled]=\"!isBasicInfoValid()\" (click)=\"activeModal.close(bucket)\">{{submitText}}</button>\r\n</div>\r\n"

/***/ }),

/***/ "./src/app/buckets/buckets.scss":
/*!**************************************!*\
  !*** ./src/app/buckets/buckets.scss ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "/* @import '/client/node_modules/ng-pick-datetime/styles/picker.min.css'; */\n.bucketsMain {\n  padding: 10px 15px; }\n.bucketsMain #bucketsStatus {\n  display: inline-block; }\n.bucketsMain ngx-datatable datatable-body datatable-body-row datatable-body-cell .datatable-body-cell-label {\n  white-space: initial; }\n"

/***/ }),

/***/ "./src/app/buckets/buckets.service.ts":
/*!********************************************!*\
  !*** ./src/app/buckets/buckets.service.ts ***!
  \********************************************/
/*! exports provided: BucketsService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BucketsService", function() { return BucketsService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var rxjs_add_operator_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs/add/operator/map */ "./node_modules/rxjs-compat/_esm5/add/operator/map.js");
/* harmony import */ var rxjs_add_operator_toPromise__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/add/operator/toPromise */ "./node_modules/rxjs-compat/_esm5/add/operator/toPromise.js");
/* harmony import */ var rxjs_add_operator_toPromise__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(rxjs_add_operator_toPromise__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _models_buckets_bucket__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../models/buckets/bucket */ "./src/app/models/buckets/bucket.ts");
/* harmony import */ var _models_buckets_trigger__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../models/buckets/trigger */ "./src/app/models/buckets/trigger.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var _models_playbook_workflow__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../models/playbook/workflow */ "./src/app/models/playbook/workflow.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var BucketsService = /** @class */ (function () {
    function BucketsService(http, utils) {
        var _this = this;
        this.http = http;
        this.utils = utils;
        this.bucketsChange = new rxjs__WEBPACK_IMPORTED_MODULE_8__["Observable"](function (observer) {
            _this.observer = observer;
            _this.getAllBuckets().then(function (buckets) { return _this.observer.next(buckets); });
        });
    }
    BucketsService.prototype.getAllBuckets = function () {
        return this.utils.paginateAll(this.getBuckets.bind(this));
    };
    BucketsService.prototype.getAllTriggers = function () {
        return this.getBuckets.bind(this);
    };
    BucketsService.prototype.getTriggers = function (bucket) {
        return this.http.get("/api/buckets/" + bucket.id + "/triggers")
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_5__["plainToClass"])(_models_buckets_trigger__WEBPACK_IMPORTED_MODULE_7__["BucketTrigger"], data); })
            .catch(this.utils.handleResponseError);
    };
    BucketsService.prototype.emitChange = function (data) {
        var _this = this;
        if (this.observer)
            this.getAllBuckets().then(function (buckets) { return _this.observer.next(buckets); });
        return data;
    };
    BucketsService.prototype.getBuckets = function (page) {
        if (page === void 0) { page = 1; }
        return this.http.get("/api/buckets?page=" + page)
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_5__["plainToClass"])(_models_buckets_bucket__WEBPACK_IMPORTED_MODULE_6__["Bucket"], data); })
            .catch(this.utils.handleResponseError);
    };
    BucketsService.prototype.addBucket = function (bucket) {
        var _this = this;
        return this.http.post('/api/buckets', Object(class_transformer__WEBPACK_IMPORTED_MODULE_5__["classToPlain"])(bucket))
            .toPromise()
            .then(function (data) { return _this.emitChange(data); })
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_5__["plainToClass"])(_models_buckets_bucket__WEBPACK_IMPORTED_MODULE_6__["Bucket"], data); })
            .catch(this.utils.handleResponseError);
    };
    BucketsService.prototype.editBucket = function (bucket) {
        var _this = this;
        return this.http.put("/api/buckets/" + bucket.id, Object(class_transformer__WEBPACK_IMPORTED_MODULE_5__["classToPlain"])(bucket))
            .toPromise()
            .then(function (data) { return _this.emitChange(data); })
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_5__["plainToClass"])(_models_buckets_bucket__WEBPACK_IMPORTED_MODULE_6__["Bucket"], data); })
            .catch(this.utils.handleResponseError);
    };
    BucketsService.prototype.deleteBucket = function (bucket) {
        var _this = this;
        return this.http.delete("/api/buckets/" + bucket.id)
            .toPromise()
            .then(function (data) { return _this.emitChange(data); })
            .then(function () { return null; })
            .catch(this.utils.handleResponseError);
    };
    BucketsService.prototype.addTrigger = function (bucket, trigger) {
        var _this = this;
        return this.http.post("/api/buckets/" + bucket.id + "/triggers", Object(class_transformer__WEBPACK_IMPORTED_MODULE_5__["classToPlain"])(trigger))
            .toPromise()
            .then(function (data) { return bucket.emitTriggerChange(_this, data); })
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_5__["plainToClass"])(_models_buckets_trigger__WEBPACK_IMPORTED_MODULE_7__["BucketTrigger"], data); })
            .catch(this.utils.handleResponseError);
    };
    BucketsService.prototype.editTrigger = function (bucket, trigger, trigger_id) {
        var _this = this;
        console.log(trigger);
        return this.http.put("/api/buckets/" + bucket.id + "/triggers/" + trigger_id, Object(class_transformer__WEBPACK_IMPORTED_MODULE_5__["classToPlain"])(trigger))
            .toPromise()
            .then(function (data) { return bucket.emitTriggerChange(_this, data); })
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_5__["plainToClass"])(_models_buckets_trigger__WEBPACK_IMPORTED_MODULE_7__["BucketTrigger"], data); })
            .catch(this.utils.handleResponseError);
    };
    BucketsService.prototype.deleteTrigger = function (bucket, trigger) {
        var _this = this;
        return this.http.delete("/api/buckets/" + bucket.id + "/triggers/" + trigger.id)
            .toPromise()
            .then(function (data) { return bucket.emitTriggerChange(_this, data); })
            .then(function () { return null; })
            .catch(this.utils.handleResponseError);
    };
    BucketsService.prototype.getWorkflows = function () {
        return this.http.get('/api/workflows')
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_5__["plainToClass"])(_models_playbook_workflow__WEBPACK_IMPORTED_MODULE_9__["Workflow"], data); })
            .catch(this.utils.handleResponseError);
    };
    BucketsService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])({
            providedIn: 'root'
        }),
        __metadata("design:paramtypes", [_angular_common_http__WEBPACK_IMPORTED_MODULE_1__["HttpClient"], _utilities_service__WEBPACK_IMPORTED_MODULE_4__["UtilitiesService"]])
    ], BucketsService);
    return BucketsService;
}());



/***/ }),

/***/ "./src/app/buckets/triggers.modal.component.ts":
/*!*****************************************************!*\
  !*** ./src/app/buckets/triggers.modal.component.ts ***!
  \*****************************************************/
/*! exports provided: TriggersModalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TriggersModalComponent", function() { return TriggersModalComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var ngx_toastr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngx-toastr */ "./node_modules/ngx-toastr/fesm5/ngx-toastr.js");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
/* harmony import */ var _buckets_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./buckets.service */ "./src/app/buckets/buckets.service.ts");
/* harmony import */ var _models_buckets_trigger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../models/buckets/trigger */ "./src/app/models/buckets/trigger.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var TriggersModalComponent = /** @class */ (function () {
    function TriggersModalComponent(bucketsService, activeModal, toastrService, cdr) {
        this.bucketsService = bucketsService;
        this.activeModal = activeModal;
        this.toastrService = toastrService;
        this.cdr = cdr;
        this.trigger = new _models_buckets_trigger__WEBPACK_IMPORTED_MODULE_5__["BucketTrigger"]();
        this.availableWorkflows = [];
        this.existing = false;
    }
    TriggersModalComponent.prototype.ngOnInit = function () {
        this.trigger.workflow = "";
        this.workflowSelectConfig = {
            width: '100%',
            multiple: false,
            allowClear: true,
            placeholder: 'Select workflow to run on trigger...',
            closeOnSelect: false,
        };
    };
    TriggersModalComponent.prototype.ngAfterViewInit = function () {
    };
    /**
     * Submits the add/edit bucket modal.
     */
    TriggersModalComponent.prototype.submit = function () {
        if (!this.isBasicInfoValid()) {
            return;
        }
    };
    TriggersModalComponent.prototype.isBasicInfoValid = function () {
        if (this.trigger.event_type && this.trigger.workflow.length) {
            return true;
        }
        return false;
    };
    /**
     * Updates the working scheduled task's workflows from the event value.
     * @param event JS Event from workflows select2
     */
    TriggersModalComponent.prototype.workflowsSelectChanged = function (event) {
        this.trigger.workflow = event.value;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _models_buckets_trigger__WEBPACK_IMPORTED_MODULE_5__["BucketTrigger"])
    ], TriggersModalComponent.prototype, "trigger", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], TriggersModalComponent.prototype, "title", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], TriggersModalComponent.prototype, "submitText", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], TriggersModalComponent.prototype, "availableWorkflows", void 0);
    TriggersModalComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'triggers-modal',
            template: __webpack_require__(/*! ./triggers.modal.html */ "./src/app/buckets/triggers.modal.html"),
            styles: [__webpack_require__(/*! ./buckets.scss */ "./src/app/buckets/buckets.scss")],
            providers: [_utilities_service__WEBPACK_IMPORTED_MODULE_3__["UtilitiesService"]],
        }),
        __metadata("design:paramtypes", [_buckets_service__WEBPACK_IMPORTED_MODULE_4__["BucketsService"], _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__["NgbActiveModal"],
            ngx_toastr__WEBPACK_IMPORTED_MODULE_2__["ToastrService"], _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"]])
    ], TriggersModalComponent);
    return TriggersModalComponent;
}());



/***/ }),

/***/ "./src/app/buckets/triggers.modal.html":
/*!*********************************************!*\
  !*** ./src/app/buckets/triggers.modal.html ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal-header\">\r\n\t<h4 class=\"modal-title\">{{title}}</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n\t<div class=\"container-fluid\">\r\n\t\t<form id=\"triggerForm\" #triggerForm=\"ngForm\" (ngSubmit)=\"submit()\">\r\n\t\t\t<div class=\"row\">\r\n\r\n        <div class=\"col-6\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"event_type\">Event Type</label>\r\n            <select class=\"form-control\" [(ngModel)]=\"trigger.event_type\" name=\"event_type\" tabindex=\"4\">\r\n              <option value=\"s3:ObjectCreated:*\">s3:ObjectCreated:*</option>\r\n              <option value=\"s3:ObjectAccessed:*\">s3:ObjectAccessed:*</option>\r\n              <option value=\"s3:ObjectRemoved:*\">s3:ObjectRemoved:*</option>\r\n            </select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n        <div class=\"col-6\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"workflow\">Workflow</label>\r\n            <select2 [data]=\"availableWorkflows\" [value]=\"undefined\"  [options]=\"workflowSelectConfig\"\r\n\t\t\t\t      name=\"workflow\" tabindex=\"2\" (valueChanged)=\"workflowsSelectChanged($event)\"></select2>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n        <div class=\"col-6\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"suffix\">Suffix</label>\r\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" [(ngModel)]=\"trigger.suffix\" name=\"suffix\" tabindex=\"2\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n        <div class=\"col-6\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"prefix\">Prefix</label>\r\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" [(ngModel)]=\"trigger.prefix\" name=\"prefix\" tabindex=\"2\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n      </div>\r\n\t\t</form>\r\n\t</div>\r\n</div>\r\n<div class=\"modal-footer\">\r\n\t<button type=\"button\" class=\"btn btn-secondary\" (click)=\"activeModal.dismiss()\">Undo Changes and Close</button>\r\n\t<button type=\"button\" class=\"btn btn-primary\" [disabled]=\"!isBasicInfoValid()\" (click)=\"activeModal.close(trigger)\">{{submitText}}</button>\r\n</div>\r\n"

/***/ }),

/***/ "./src/app/dashboards/dashboard.service.ts":
/*!*************************************************!*\
  !*** ./src/app/dashboards/dashboard.service.ts ***!
  \*************************************************/
/*! exports provided: DashboardService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DashboardService", function() { return DashboardService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var _models_dashboard_dashboard__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../models/dashboard/dashboard */ "./src/app/models/dashboard/dashboard.ts");
/* harmony import */ var _execution_execution_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../execution/execution.service */ "./src/app/execution/execution.service.ts");
/* harmony import */ var csvtojson__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! csvtojson */ "./node_modules/csvtojson/browser/browser.js");
/* harmony import */ var csvtojson__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(csvtojson__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};








var DashboardService = /** @class */ (function () {
    function DashboardService(http, utils, executionService) {
        var _this = this;
        this.http = http;
        this.utils = utils;
        this.executionService = executionService;
        this.dashboardsChange = new rxjs__WEBPACK_IMPORTED_MODULE_7__["Observable"](function (observer) {
            _this.observer = observer;
            _this.getDashboards().then(function (dashboards) { return _this.observer.next(dashboards); });
        });
    }
    DashboardService.prototype.emitChange = function (data) {
        var _this = this;
        if (this.observer)
            this.getDashboards().then(function (dashboards) { return _this.observer.next(dashboards); });
        return data;
    };
    DashboardService.prototype.newDashboard = function (dashboard) {
        var _this = this;
        return this.http.post('api/dashboards', Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["classToPlain"])(dashboard))
            .toPromise()
            .then(function (data) { return _this.emitChange(data); })
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["plainToClass"])(_models_dashboard_dashboard__WEBPACK_IMPORTED_MODULE_4__["Dashboard"], data); })
            .catch(this.utils.handleResponseError);
    };
    DashboardService.prototype.updateDashboard = function (dashboard) {
        var _this = this;
        return this.http.put('api/dashboards', Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["classToPlain"])(dashboard))
            .toPromise()
            .then(function (data) { return _this.emitChange(data); })
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["plainToClass"])(_models_dashboard_dashboard__WEBPACK_IMPORTED_MODULE_4__["Dashboard"], data); })
            .catch(this.utils.handleResponseError);
    };
    DashboardService.prototype.deleteDashboard = function (dashboard) {
        var _this = this;
        return this.http.delete("/api/dashboards/" + dashboard.id)
            .toPromise()
            .then(function (data) { return _this.emitChange(data); })
            .catch(this.utils.handleResponseError);
    };
    DashboardService.prototype.getDashboards = function () {
        return this.http.get('/api/dashboards')
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["plainToClass"])(_models_dashboard_dashboard__WEBPACK_IMPORTED_MODULE_4__["Dashboard"], data); })
            .catch(this.utils.handleResponseError);
    };
    DashboardService.prototype.getDashboard = function (id) {
        return this.http.get("/api/dashboards/" + id)
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["plainToClass"])(_models_dashboard_dashboard__WEBPACK_IMPORTED_MODULE_4__["Dashboard"], data); })
            .catch(this.utils.handleResponseError);
    };
    DashboardService.prototype.getDashboardWithMetadata = function (id) {
        return __awaiter(this, void 0, void 0, function () {
            var theDashboard;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getDashboard(id)];
                    case 1:
                        theDashboard = _a.sent();
                        return [4 /*yield*/, Promise.all(theDashboard.widgets.map(function (widget) { return _this.getWidgetMetadata(widget); }))];
                    case 2:
                        _a.sent();
                        return [2 /*return*/, theDashboard];
                }
            });
        });
    };
    DashboardService.prototype.getWidgetMetadata = function (widget) {
        return __awaiter(this, void 0, void 0, function () {
            var testData, _a, _b, options, workflowStatus, _c, nodeStatus, _d, _e;
            return __generator(this, function (_f) {
                switch (_f.label) {
                    case 0:
                        testData = "A,B,C\n1,2,3\n4,5,6\n1,2,3\n4,5,6\n1,2,3\n4,5,6\n1,2,3\n4,5,6\n1,2,3\n4,5,6\n1,2,3\n4,5,6\n1,2,3\n4,5,6\n1,2,3\n4,5,6";
                        _b = (_a = widget).setMetadata;
                        return [4 /*yield*/, this.parseResult(testData)];
                    case 1: return [2 /*return*/, _b.apply(_a, [_f.sent()])];
                    case 2:
                        _c = _f.sent();
                        return [3 /*break*/, 5];
                    case 3: return [4 /*yield*/, this.executionService.getWorkflowStatus(options.execution)];
                    case 4:
                        _c = _f.sent();
                        _f.label = 5;
                    case 5:
                        workflowStatus = _c;
                        nodeStatus = workflowStatus.node_statuses.find(function (status) { return status.node_id == options.action; });
                        if (!nodeStatus) return [3 /*break*/, 7];
                        _e = (_d = widget).setMetadata;
                        return [4 /*yield*/, this.parseResult(nodeStatus.result)];
                    case 6:
                        _e.apply(_d, [_f.sent()]);
                        _f.label = 7;
                    case 7: return [2 /*return*/];
                }
            });
        });
    };
    DashboardService.prototype.parseResult = function (result) {
        return __awaiter(this, void 0, void 0, function () {
            var headers;
            return __generator(this, function (_a) {
                headers = [];
                return [2 /*return*/, csvtojson__WEBPACK_IMPORTED_MODULE_6__()
                        .fromString(result)
                        .on('header', function (row) { return headers = row; })
                        .then(function (data) { return ({
                        headers: headers,
                        rows: data.map(Object.values),
                        data: data
                    }); }, function (err) {
                        console.log(err);
                        return result;
                    })];
            });
        });
    };
    DashboardService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])({
            providedIn: 'root'
        }),
        __metadata("design:paramtypes", [_angular_common_http__WEBPACK_IMPORTED_MODULE_3__["HttpClient"], _utilities_service__WEBPACK_IMPORTED_MODULE_2__["UtilitiesService"], _execution_execution_service__WEBPACK_IMPORTED_MODULE_5__["ExecutionService"]])
    ], DashboardService);
    return DashboardService;
}());



/***/ }),

/***/ "./src/app/dashboards/dashboards.component.ts":
/*!****************************************************!*\
  !*** ./src/app/dashboards/dashboards.component.ts ***!
  \****************************************************/
/*! exports provided: DashboardsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DashboardsComponent", function() { return DashboardsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var ngx_toastr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngx-toastr */ "./node_modules/ngx-toastr/fesm5/ngx-toastr.js");
/* harmony import */ var jspdf__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jspdf */ "./node_modules/jspdf/dist/jspdf.min.js");
/* harmony import */ var jspdf__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jspdf__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var html2canvas__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! html2canvas */ "./node_modules/html2canvas/dist/npm/index.js");
/* harmony import */ var html2canvas__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(html2canvas__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../auth/auth.service */ "./src/app/auth/auth.service.ts");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var _dashboard_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./dashboard.service */ "./src/app/dashboards/dashboard.service.ts");
/* harmony import */ var angular_gridster2__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! angular-gridster2 */ "./node_modules/angular-gridster2/fesm5/angular-gridster2.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var DashboardsComponent = /** @class */ (function () {
    function DashboardsComponent(route, toastrService, http, dashboardService) {
        this.route = route;
        this.toastrService = toastrService;
        this.http = http;
        this.dashboardService = dashboardService;
        this.gridRows = 0;
        this.gridColumns = 8;
        this.gridColSize = 125;
        this.gridGutterSize = 10;
        this.gridDefaultCols = 3;
    }
    /**
     * On init, get our dashboard name from the route params and grab the dashboard.
     */
    DashboardsComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.paramsSub = this.route.params.subscribe(function (params) {
            _this.dashboardId = params.dashboardId;
            _this.getDashboard().then(function () { return _this.initGrid(); });
        });
    };
    DashboardsComponent.prototype.initGrid = function () {
        var _this = this;
        this.gridRows = 0;
        this.dashboard.widgets.forEach(function (item) {
            var widgetRows = item.y + item.rows;
            if (widgetRows > _this.gridRows)
                _this.gridRows = widgetRows;
        });
        this.options = {
            gridType: angular_gridster2__WEBPACK_IMPORTED_MODULE_8__["GridType"].Fixed,
            compactType: angular_gridster2__WEBPACK_IMPORTED_MODULE_8__["CompactType"].None,
            pushItems: true,
            draggable: {
                enabled: false
            },
            resizable: {
                enabled: false
            },
            fixedColWidth: this.gridColSize * 4 / 3,
            fixedRowHeight: this.gridColSize * 3 / 4,
            minCols: this.gridColumns,
            maxCols: this.gridColumns,
            minRows: 1,
            maxRows: this.gridRows,
            maxItemCols: this.gridColumns,
            minItemCols: 1,
            maxItemRows: this.gridRows,
            minItemRows: 1,
            defaultItemCols: this.gridDefaultCols,
            defaultItemRows: 1
        };
    };
    /**
     * Gets the dashboard by the name specified in the route params.
     * Loads the dashboard into an iframe currently.
     */
    DashboardsComponent.prototype.getDashboard = function () {
        var _this = this;
        this.clearDashboard();
        return this.dashboardService.getDashboardWithMetadata(this.dashboardId).then(function (savedDashboard) {
            (savedDashboard) ? _this.dashboard = savedDashboard : _this.getCustomDashboard();
        });
    };
    DashboardsComponent.prototype.clearDashboard = function () {
        this.dashboard = null;
        if (this.activeIFrame) {
            this.main.nativeElement.removeChild(this.activeIFrame);
            this.activeIFrame = null;
        }
    };
    DashboardsComponent.prototype.getCustomDashboard = function () {
        var _this = this;
        this.http
            .get("customdashboards/" + this.dashboardName + "/", { responseType: 'text' })
            .toPromise()
            .then(function (data) {
            _this.activeIFrame = document.createElement('iframe');
            _this.activeIFrame.srcdoc = data;
            _this.activeIFrame.src = 'data:text/html;charset=utf-8,' + data;
            _this.main.nativeElement.appendChild(_this.activeIFrame);
        })
            .catch(function (e) { return _this.toastrService.error("Error retrieving dashboard: " + e.message); });
    };
    DashboardsComponent.prototype.getGridWidth = function () {
        //return '900px';
        return this.gridColumns * Math.ceil(this.gridColSize * 4 / 3 + this.gridGutterSize) + this.gridGutterSize + 'px';
    };
    DashboardsComponent.prototype.getGridHeight = function () {
        //return '980px';
        return this.gridRows * Math.ceil(this.gridColSize * 3 / 4 + this.gridGutterSize) + this.gridGutterSize + 'px';
    };
    DashboardsComponent.prototype.savePDF = function () {
        return window.print();
        var el = $('#main'); //document.getElementById('grid');
        var HTML_Width = el.width();
        var HTML_Height = el.height();
        var top_left_margin = 15;
        var PDF_Width = HTML_Width + (top_left_margin * 2);
        var PDF_Height = (PDF_Width * 1.5) + (top_left_margin * 2);
        var canvas_image_width = HTML_Width;
        var canvas_image_height = HTML_Height;
        var totalPDFPages = Math.ceil(HTML_Height / PDF_Height) - 1;
        html2canvas__WEBPACK_IMPORTED_MODULE_4__(el[0], { allowTaint: true }).then(function (canvas) {
            canvas.getContext('2d');
            console.log(canvas.height + "  " + canvas.width);
            var imgData = canvas.toDataURL("image/jpeg", 1.0);
            var pdf = new jspdf__WEBPACK_IMPORTED_MODULE_3__('p', 'pt', [PDF_Width, PDF_Height]);
            pdf.addImage(imgData, 'JPG', top_left_margin, top_left_margin, canvas_image_width, canvas_image_height);
            for (var i = 1; i <= totalPDFPages; i++) {
                pdf.addPage(PDF_Width, PDF_Height);
                pdf.addImage(imgData, 'JPG', top_left_margin, -(PDF_Height * i) + (top_left_margin * 4), canvas_image_width, canvas_image_height);
            }
            pdf.save("HTML-Document.pdf");
        });
        // html2canvas(document.getElementById('grid')).then(canvas => {
        // 	// var img = canvas.toDataURL("image/png");
        // 	// var doc = new jsPDF();
        // 	// doc.addImage(img, 'JPEG', 5, 20);
        // 	// doc.save(`${ this.dashboardName } - report.pdf`);
        // 	// var width = canvas.width;
        // 	// var height = canvas.height;
        // 	// var millimeters: any = {};
        // 	// millimeters.width = Math.floor(width * 0.264583);
        // 	// millimeters.height = Math.floor(height * 0.264583);
        // 	// var imgData = canvas.toDataURL(
        // 	// 	'image/png');
        // 	// var doc = new jsPDF("p", "mm", "a4");
        // 	// doc.deletePage(1);
        // 	// doc.addPage(millimeters.width, millimeters.height);
        // 	// doc.addImage(imgData, 'PNG', 0, 0);
        // 	// doc.save(`${ this.dashboardName } - report.pdf`);
        // 	//! MAKE YOUR PDF
        // 	var pdf = new jsPDF('p', 'pt', 'letter');
        // 	console.log(document.getElementById('grid').clientHeight)
        //     for (var i = 0; i <= document.getElementById('grid').clientHeight/980; i++) {
        //         //! This is all just html2canvas stuff
        //         var srcImg  = canvas;
        //         var sX      = 0;
        //         var sY      = 980*i; // start 980 pixels down for every new page
        //         var sWidth  = 900;
        //         var sHeight = 980;
        //         var dX      = 0;
        //         var dY      = 0;
        //         var dWidth  = 900;
        //         var dHeight = 980;
        //         var onePageCanvas = document.createElement("canvas");
        //         onePageCanvas.setAttribute('width', '900');
        //         onePageCanvas.setAttribute('height', '980');
        //         var ctx = onePageCanvas.getContext('2d');
        //         // details on this usage of this function: 
        //         // https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Using_images#Slicing
        //         ctx.drawImage(srcImg,sX,sY,sWidth,sHeight,dX,dY,dWidth,dHeight);
        //         // document.body.appendChild(canvas);
        //         var canvasDataURL = onePageCanvas.toDataURL("image/png", 1.0);
        //         // var width         = onePageCanvas.width;
        // 		// var height        = onePageCanvas.clientHeight;
        // 		var width = pdf.internal.pageSize.getWidth();
        // 		var height = pdf.internal.pageSize.getHeight();
        // 		console.log(width, height);
        //         //! If we're on anything other than the first page,
        //         // add another page
        //         if (i > 0) {
        //             pdf.addPage(612, 792); //8.5" x 11" in pts (in*72)
        //         }
        //         //! now we declare that we're working on that page
        //         pdf.setPage(i+1);
        //         //! now we add content to that page!
        //         pdf.addImage(canvasDataURL, 'JPEG', 0, 0, (width*1), (height*1));
        //     }
        //     //! after the for loop is finished running, we save the pdf.
        //     pdf.save('Test.pdf');
        //});
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('dashboardsMain'),
        __metadata("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"])
    ], DashboardsComponent.prototype, "main", void 0);
    DashboardsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'dashboards-component',
            template: __webpack_require__(/*! ./dashboards.html */ "./src/app/dashboards/dashboards.html"),
            styles: [__webpack_require__(/*! ./dashboards.scss */ "./src/app/dashboards/dashboards.scss")],
            providers: [_auth_auth_service__WEBPACK_IMPORTED_MODULE_5__["AuthService"]],
        }),
        __metadata("design:paramtypes", [_angular_router__WEBPACK_IMPORTED_MODULE_1__["ActivatedRoute"], ngx_toastr__WEBPACK_IMPORTED_MODULE_2__["ToastrService"],
            _angular_common_http__WEBPACK_IMPORTED_MODULE_6__["HttpClient"], _dashboard_service__WEBPACK_IMPORTED_MODULE_7__["DashboardService"]])
    ], DashboardsComponent);
    return DashboardsComponent;
}());



/***/ }),

/***/ "./src/app/dashboards/dashboards.html":
/*!********************************************!*\
  !*** ./src/app/dashboards/dashboards.html ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div id=\"main\" class=\"dashboardsMain\" [ngClass]=\"{ customDashboard: !dashboard }\" #dashboardsMain>\r\n\t<!-- dashboard iframe goes here -->\r\n\t<div *ngIf=\"dashboard\">\r\n\t\t<div class=\"pl-3\">\r\n\t\t\t<h1 class=\"mb-0\">\r\n\t\t\t\t{{ dashboard.name }}\r\n\t\t\t\t<div class=\"float-right d-print-none\" data-html2canvas-ignore>\r\n\t\t\t\t\t<a class=\"btn btn-primary btn-sm mr-1\" [routerLink]=\"['/dashboard', dashboardId, 'edit']\">Edit</a>\r\n\t\t\t\t\t<button class=\"btn btn-primary btn-sm\" (click)=\"savePDF()\">Save as PDF</button>\r\n\t\t\t\t</div>\r\n\t\t\t</h1>\r\n\t\t</div>\r\n\t\t<div class=\"row\">\r\n\t\t\t<div class=\"col-12\">\r\n\t\t\t\t<div id=\"grid\" class=\"gridster-container m-auto\" [style.width]=\"getGridWidth()\" [style.height]=\"getGridHeight()\">\r\n\t\t\t\t\t<gridster class=\"displayGrid\" [options]=\"options\">\r\n\t\t\t\t\t\t<gridster-item [item]=\"item\" *ngFor=\"let item of dashboard.widgets\" class=\"p-3\">\r\n\t\t\t\t\t\t\t<!-- your content here -->\r\n\t\t\t\t\t\t\t<div class=\"widget\">\r\n\t\t\t\t\t\t\t\t<div *ngIf=\"item.name\" class=\"widget-header\">\r\n\t\t\t\t\t\t\t\t\t<h3 class=\"text-center\">{{ item.name }}</h3>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"widget-content\" *ngIf=\"item.metadata; let metadata\">\r\n\r\n\t\t\t\t\t\t\t\t\t<ng-container *ngIf=\"item.type == 'bar'\">\r\n\t\t\t\t\t\t\t\t\t\t<canvas baseChart [datasets]=\"metadata.chartData\" [labels]=\"metadata.chartLabels\" [options]=\"item.chartOptions\" [legend]=\"item.showLegend\"\r\n\t\t\t\t\t\t\t\t\t\t[chartType]=\"'bar'\">\r\n\t\t\t\t\t\t\t\t\t\t</canvas>\r\n\t\t\t\t\t\t\t\t\t</ng-container>\r\n\r\n\t\t\t\t\t\t\t\t\t<ng-container *ngIf=\"item.type == 'line'\">\r\n\t\t\t\t\t\t\t\t\t\t<canvas baseChart [datasets]=\"metadata.chartData\" [labels]=\"metadata.chartLabels\" [options]=\"item.chartOptions\" [legend]=\"item.showLegend\"\r\n\t\t\t\t\t\t\t\t\t\t[chartType]=\"'line'\">\r\n\t\t\t\t\t\t\t\t\t\t</canvas>\r\n\t\t\t\t\t\t\t\t\t</ng-container>\r\n\r\n\t\t\t\t\t\t\t\t\t<ng-container *ngIf=\"item.type == 'pie'\">\r\n\t\t\t\t\t\t\t\t\t\t<canvas baseChart [data]=\"metadata.chartData\" [labels]=\"metadata.chartLabels\" [chartType]=\"'pie'\" [legend]=\"item.showLegend\">\r\n\t\t\t\t\t\t\t\t\t\t</canvas>\r\n\t\t\t\t\t\t\t\t\t</ng-container>\r\n\r\n\t\t\t\t\t\t\t\t\t<ng-container *ngIf=\"item.type == 'text'\">\r\n\t\t\t\t\t\t\t\t\t\t<p *ngIf=\"item.options.text\">{{ item.options.text }}</p>\r\n\t\t\t\t\t\t\t\t\t</ng-container>\r\n\r\n\t\t\t\t\t\t\t\t\t<ng-container *ngIf=\"item.type == 'table'\">\r\n\t\t\t\t\t\t\t\t\t\t<ngx-datatable class=\"material widget-fullscreen\" headerHeight=\"45\" rowHeight=\"45\" [columnMode]=\"'force'\" [rows]=\"metadata.rows\" [columns]=\"metadata.columns\"></ngx-datatable>\r\n\t\t\t\t\t\t\t\t\t</ng-container>\r\n\r\n\t\t\t\t\t\t\t\t\t<ng-container *ngIf=\"item.type == 'kibana'\">\r\n\t\t\t\t\t\t\t\t\t\t<iframe class=\"widget-fullscreen\" [src]=\"item.options.embedUrl | safeEmbed\"></iframe>\r\n\t\t\t\t\t\t\t\t\t</ng-container>\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\t\r\n\t\t\t\t\t\t</gridster-item>\r\n\t\t\t\t\t</gridster>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>"

/***/ }),

/***/ "./src/app/dashboards/dashboards.scss":
/*!********************************************!*\
  !*** ./src/app/dashboards/dashboards.scss ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "#main.customDashboard {\n  position: absolute;\n  top: 50px;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden; }\n\n#main.customDashboard iframe {\n  position: absolute;\n  border: none;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%; }\n\n#main.dashboardsMain {\n  padding: 10px 15px; }\n\ngridster.displayGrid {\n  background: none; }\n\n.widget {\n  display: flex;\n  flex-direction: column;\n  height: 100%; }\n\n.widget-header {\n  flex-basis: content; }\n\n.widget-content {\n  flex: 1;\n  position: relative; }\n\n.widget-fullscreen {\n  overflow-y: scroll !important;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  bottom: 0; }\n"

/***/ }),

/***/ "./src/app/dashboards/manage.dashboards.component.html":
/*!*************************************************************!*\
  !*** ./src/app/dashboards/manage.dashboards.component.html ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div id=\"main\" class=\"manageDashboardMain\">\r\n    <h1>{{ (existingDashboard) ? 'Edit' : 'New' }} Dashboard\r\n        <!-- <input type=\"text\" class=\"my-auto mr-3\" [(ngModel)]=\"dashboard.name\" name=\"dashboardName\" placeholder=\"Dashboard Name\" required> -->\r\n        <button *ngIf=\"existingDashboard\" class=\"btn btn-danger btn-lg float-right\" (click)=\"delete()\"><i\r\n                class=\"fa fa-trash\"></i></button>\r\n    </h1>\r\n    <div class=\"row\">\r\n        <div class=\"col-12\">\r\n            <div class=\"float-left\">\r\n                <div class=\"form-group col-12\">\r\n                    <form #myForm=\"ngForm\" [class.was-validated]=\"submitted\" novalidate>\r\n                        <div class=\"d-flex\">\r\n                            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"dashboard.name\" name=\"dashboardName\"\r\n                                placeholder=\"Dashboard Name\" required>\r\n                            <button class=\"btn btn-primary ml-3\" (click)=\"save()\">Save</button>\r\n                        </div>\r\n                        <div class=\"invalid-feedback\" [class.d-block]=\"!myForm.form.valid && submitted\">\r\n                            Please enter a name for the dashboard.\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n                <div class=\"form-group col-12\">\r\n                    <div class=\"panel-group\" id=\"accordion\" #accordion>\r\n                        <div class=\"card card-default my-1\">\r\n                            <div class=\"card-heading playbook-heading\" title=\"Widgets\">\r\n                                <h5 class=\"card-title my-auto py-2 ml-3\">Add Widget</h5>\r\n                            </div>\r\n                            <div class=\"card-collapse action-panel\">\r\n                                <div class=\"card-body my-auto p-3\">\r\n                                    <div *ngFor=\"let widget of widgets\" class=\"card card-default actionPanel my-1\"\r\n                                        dnd-draggable [dragEnabled]=\"true\" [dragData]=\"widget\"\r\n                                        (dblclick)=\"addWidget(widget.name)\" [title]=\"widget.label\">\r\n                                        <div class=\"card-body my-auto p-2\">\r\n                                            <span>{{ widget.label }}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div id=\"grid\" class=\"gridster-container\" [style.width]=\"getGridWidth()\" [style.height]=\"getGridHeight()\">\r\n                <gridster class=\"rounded\" [options]=\"options\" dnd-droppable (onDropSuccess)=\"addWidget($event.dragData.name)\">\r\n                    <gridster-item [item]=\"item\" *ngFor=\"let item of dashboard.widgets\" class=\"p-3 rounded\">\r\n                        <!-- your content here -->\r\n                        <div class=\"widget\">\r\n                            <div class=\"widget-header\">\r\n                                <a class=\"text-secondary float-left\" href=\"#\" (click)=\"editWidget($event, item)\"><i\r\n                                        class=\"fa fa-gear\"></i></a>\r\n\r\n                                <button type=\"button\" class=\"close\" (click)=\"removeWidget($event, item)\"\r\n                                    aria-label=\"Close\">\r\n                                    <span aria-hidden=\"true\">&times;</span>\r\n                                </button>\r\n\r\n                                <h5 *ngIf=\"item.name\" class=\"text-center\">{{ item.name }}</h5>\r\n                            </div>\r\n\r\n                            <div class=\"widget-content\" *ngIf=\"item.metadata; let metadata\">\r\n                                <div *ngIf=\"item.type == 'bar'\">\r\n                                    <canvas baseChart [datasets]=\"metadata.chartData\" [labels]=\"metadata.chartLabels\"\r\n                                        [options]=\"item.chartOptions\" [legend]=\"item.showLegend\" [chartType]=\"'bar'\">\r\n                                    </canvas>\r\n                                </div>\r\n\r\n                                <div *ngIf=\"item.type == 'line'\">\r\n                                    <canvas baseChart [datasets]=\"metadata.chartData\" [labels]=\"metadata.chartLabels\"\r\n                                        [options]=\"item.chartOptions\" [legend]=\"item.showLegend\" [chartType]=\"'line'\">\r\n                                    </canvas>\r\n                                </div>\r\n\r\n                                <div *ngIf=\"item.type == 'pie'\">\r\n                                    <canvas baseChart [data]=\"metadata.chartData\" [labels]=\"metadata.chartLabels\"\r\n                                        [chartType]=\"'pie'\" [legend]=\"item.showLegend\">\r\n                                    </canvas>\r\n                                </div>\r\n\r\n                                <div *ngIf=\"item.type == 'text'\">\r\n                                    <p *ngIf=\"item.options.text\">{{ item.options.text }}</p>\r\n                                </div>\r\n\r\n                                <div *ngIf=\"item.type == 'table'\">\r\n                                    <ngx-datatable class=\"material widget-fullscreen\" headerHeight=\"45\" rowHeight=\"45\"\r\n                                        [columnMode]=\"'force'\" [rows]=\"metadata.rows\" [columns]=\"metadata.columns\">\r\n                                    </ngx-datatable>\r\n                                </div>\r\n\r\n                                <div *ngIf=\"item.type == 'kibana'\">\r\n                                    <iframe class=\"widget-fullscreen\"\r\n                                        [src]=\"item.options.embedUrl | safeEmbed\"></iframe>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </gridster-item>\r\n                </gridster>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>"

/***/ }),

/***/ "./src/app/dashboards/manage.dashboards.component.scss":
/*!*************************************************************!*\
  !*** ./src/app/dashboards/manage.dashboards.component.scss ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".manageDashboardMain {\n  padding: 10px 15px; }\n\n.manageDashboardMain .card-default > .card-heading {\n  background-color: #eaf2f6;\n  font-weight: bolder; }\n\n.gridster-container {\n  margin: auto; }\n\n.widget {\n  display: flex;\n  flex-direction: column;\n  height: 100%; }\n\n.widget-header {\n  flex-basis: content; }\n\n.widget-content {\n  flex: 1;\n  position: relative; }\n\n.widget-fullscreen {\n  overflow-y: scroll;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  bottom: 0; }\n"

/***/ }),

/***/ "./src/app/dashboards/manage.dashboards.component.ts":
/*!***********************************************************!*\
  !*** ./src/app/dashboards/manage.dashboards.component.ts ***!
  \***********************************************************/
/*! exports provided: ManageDashboardsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ManageDashboardsComponent", function() { return ManageDashboardsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var angular_gridster2__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! angular-gridster2 */ "./node_modules/angular-gridster2/fesm5/angular-gridster2.js");
/* harmony import */ var _models_dashboard_dashboardWidget__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../models/dashboard/dashboardWidget */ "./src/app/models/dashboard/dashboardWidget.ts");
/* harmony import */ var _models_dashboard_dashboard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../models/dashboard/dashboard */ "./src/app/models/dashboard/dashboard.ts");
/* harmony import */ var _dashboard_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./dashboard.service */ "./src/app/dashboards/dashboard.service.ts");
/* harmony import */ var ngx_toastr__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ngx-toastr */ "./node_modules/ngx-toastr/fesm5/ngx-toastr.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var _widget_modal_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./widget.modal.component */ "./src/app/dashboards/widget.modal.component.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};










var ManageDashboardsComponent = /** @class */ (function () {
    function ManageDashboardsComponent(dashboardService, toastrService, activeRoute, router, modalService, utils) {
        this.dashboardService = dashboardService;
        this.toastrService = toastrService;
        this.activeRoute = activeRoute;
        this.router = router;
        this.modalService = modalService;
        this.utils = utils;
        this.dashboard = new _models_dashboard_dashboard__WEBPACK_IMPORTED_MODULE_3__["Dashboard"]();
        this.existingDashboard = false;
        this.submitted = false;
        this.gridRows = 16;
        this.gridColumns = 8;
        this.gridColSize = 75;
        this.gridGutterSize = 10;
        this.gridDefaultCols = 3;
        this.widgets = [
            { name: 'text', label: 'Text Widget' },
            { name: 'table', label: 'Table Widget' },
            { name: 'bar', label: 'Bar Graph' },
            { name: 'line', label: 'Line Graph' },
            { name: 'pie', label: 'Pie Graph' },
            { name: 'kibana', label: 'Kibana Embed' },
        ];
    }
    ManageDashboardsComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.activeRoute.params.subscribe(function (params) {
            if (params.dashboardId) {
                _this.existingDashboard = true;
                _this.dashboardService.getDashboardWithMetadata(params.dashboardId).then(function (dashboard) {
                    _this.dashboard = dashboard;
                });
            }
            _this.initGrid();
        });
    };
    ManageDashboardsComponent.prototype.initGrid = function () {
        this.options = {
            gridType: angular_gridster2__WEBPACK_IMPORTED_MODULE_1__["GridType"].Fixed,
            compactType: angular_gridster2__WEBPACK_IMPORTED_MODULE_1__["CompactType"].None,
            pushItems: true,
            draggable: {
                enabled: true
            },
            resizable: {
                enabled: true
            },
            fixedColWidth: this.gridColSize * 4 / 3,
            fixedRowHeight: this.gridColSize * 3 / 4,
            minCols: this.gridColumns,
            maxCols: this.gridColumns,
            minRows: 1,
            maxRows: this.gridRows,
            maxItemCols: this.gridColumns,
            minItemCols: 1,
            maxItemRows: this.gridRows,
            minItemRows: 1,
            defaultItemCols: this.gridDefaultCols,
            defaultItemRows: 1
        };
    };
    ManageDashboardsComponent.prototype.getGridWidth = function () {
        return this.gridColumns * Math.ceil(this.gridColSize * 4 / 3 + this.gridGutterSize) + this.gridGutterSize + 'px';
    };
    ManageDashboardsComponent.prototype.getGridHeight = function () {
        return this.gridRows * Math.ceil(this.gridColSize * 3 / 4 + this.gridGutterSize) + this.gridGutterSize + 'px';
    };
    ManageDashboardsComponent.prototype.changedOptions = function () {
        this.options.api.optionsChanged();
    };
    ManageDashboardsComponent.prototype.editWidget = function ($event, widget) {
        $event.preventDefault();
        var modalRef = this.modalService.open(_widget_modal_component__WEBPACK_IMPORTED_MODULE_8__["WidgetModalComponent"]);
        modalRef.componentInstance.widget = widget;
    };
    ManageDashboardsComponent.prototype.removeWidget = function ($event, widget) {
        $event.preventDefault();
        this.dashboard.widgets.splice(this.dashboard.widgets.indexOf(widget), 1);
    };
    ManageDashboardsComponent.prototype.addWidget = function (type) {
        var _this = this;
        var widget;
        switch (type) {
            case "bar":
                widget = new _models_dashboard_dashboardWidget__WEBPACK_IMPORTED_MODULE_2__["BarChartWidget"]();
                break;
            case "line":
                widget = new _models_dashboard_dashboardWidget__WEBPACK_IMPORTED_MODULE_2__["LineChartWidget"]();
                break;
            case "pie":
                widget = new _models_dashboard_dashboardWidget__WEBPACK_IMPORTED_MODULE_2__["PieChartWidget"]();
                break;
            case "text":
                widget = new _models_dashboard_dashboardWidget__WEBPACK_IMPORTED_MODULE_2__["TextWidget"]();
                break;
            case "table":
                widget = new _models_dashboard_dashboardWidget__WEBPACK_IMPORTED_MODULE_2__["TableWidget"]();
                break;
            case "kibana":
                widget = new _models_dashboard_dashboardWidget__WEBPACK_IMPORTED_MODULE_2__["KibanaWidget"]();
                break;
        }
        var modalRef = this.modalService.open(_widget_modal_component__WEBPACK_IMPORTED_MODULE_8__["WidgetModalComponent"]);
        modalRef.componentInstance.widget = widget;
        modalRef.componentInstance.typeLabel = this.widgets.find(function (w) { return w.name == type; }).label;
        modalRef.result.then(function (addedWidget) {
            _this.dashboard.widgets.push(addedWidget);
        }).catch(function () { return null; });
    };
    ManageDashboardsComponent.prototype.save = function () {
        if (!this.dashboard.name)
            return this.submitted = true;
        (this.existingDashboard) ? this.dashboardService.updateDashboard(this.dashboard) : this.dashboardService.newDashboard(this.dashboard);
        this.toastrService.success("\"" + this.dashboard.name + "\" Saved");
        this.router.navigate(['/dashboard', this.dashboard.id]);
    };
    ManageDashboardsComponent.prototype.delete = function () {
        return __awaiter(this, void 0, void 0, function () {
            var dashboardName;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.utils.confirm("Are you sure you want to delete this dashboard?")];
                    case 1:
                        _a.sent();
                        dashboardName = this.dashboard.name;
                        this.dashboardService.deleteDashboard(this.dashboard);
                        this.toastrService.success("\"" + dashboardName + "\" Deleted");
                        this.router.navigate(['/dashboard/new']);
                        return [2 /*return*/];
                }
            });
        });
    };
    ManageDashboardsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'manage-dashboards-component',
            template: __webpack_require__(/*! ./manage.dashboards.component.html */ "./src/app/dashboards/manage.dashboards.component.html"),
            styles: [__webpack_require__(/*! ./manage.dashboards.component.scss */ "./src/app/dashboards/manage.dashboards.component.scss")]
        }),
        __metadata("design:paramtypes", [_dashboard_service__WEBPACK_IMPORTED_MODULE_4__["DashboardService"],
            ngx_toastr__WEBPACK_IMPORTED_MODULE_5__["ToastrService"],
            _angular_router__WEBPACK_IMPORTED_MODULE_6__["ActivatedRoute"],
            _angular_router__WEBPACK_IMPORTED_MODULE_6__["Router"],
            _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_7__["NgbModal"],
            _utilities_service__WEBPACK_IMPORTED_MODULE_9__["UtilitiesService"]])
    ], ManageDashboardsComponent);
    return ManageDashboardsComponent;
}());



/***/ }),

/***/ "./src/app/dashboards/widget.modal.component.html":
/*!********************************************************!*\
  !*** ./src/app/dashboards/widget.modal.component.html ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal-header\">\r\n    <h4 class=\"modal-title\">Configure {{ typeLabel }}</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n    <div class=\"container-fluid\">\r\n        <div class=\"row\">\r\n            <div class=\"col-12\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"title\">Title</label>\r\n                    <input label=\"title\" type=\"text\" [(ngModel)]=\"widget.name\" class=\"form-control\" placeholder=\"Title (Optional)\">\r\n                </div>\r\n            </div>\r\n            <div *ngIf=\"!['text', 'kibana'].includes(widget.type)\" class=\"col-12\">\r\n              <div class=\"form-group\">\r\n                  <label for=\"workflow\">Workflow</label>\r\n                  <div>\r\n                      <select [(ngModel)]=\"widget.options.workflow\" class=\"custom-select\" (change)=\"updateExecutions()\">\r\n                          <option *ngFor=\"let x of workflows\" [value]=\"x.id\">{{x.text}}</option>\r\n                      </select>\r\n                  </div>\r\n              </div>\r\n            </div>\r\n            <div *ngIf=\"widget.options.workflow\" class=\"col-12\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"workflow\">Execution</label>\r\n                    <div>\r\n                        <select [(ngModel)]=\"widget.options.execution\" class=\"custom-select\" (change)=\"updateNodeResults()\">\r\n                            <option *ngFor=\"let x of executions\" [value]=\"x.id\">{{x.text}}</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div *ngIf=\"widget.options.execution\" class=\"col-12\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"action\">Action</label>\r\n                    <div>\r\n                        <select [(ngModel)]=\"widget.options.action\" class=\"custom-select\">\r\n                            <option *ngFor=\"let x of nodeResults\" [value]=\"x.id\">{{x.text}}</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div *ngIf=\"widget.type == 'text'\" class=\"col-12\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"text\">Text</label>\r\n                    <textarea name=\"text\" rows=\"4\" [(ngModel)]=\"widget.options.text\" class=\"form-control\"></textarea>\r\n                </div>\r\n            </div>\r\n            <div *ngIf=\"widget.type == 'kibana'\" class=\"col-12\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"embedUrl\">Embed Url</label>\r\n                    <input label=\"embedUrl\" type=\"text\" [(ngModel)]=\"widget.options.embedUrl\" class=\"form-control\">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"modal-footer\">\r\n    <button type=\"button\" class=\"btn btn-secondary\" (click)=\"activeModal.dismiss()\">Close</button>\r\n    <button type=\"button\" class=\"btn btn-primary\" (click)=\"activeModal.close(widget)\">Save</button>\r\n</div>\r\n"

/***/ }),

/***/ "./src/app/dashboards/widget.modal.component.scss":
/*!********************************************************!*\
  !*** ./src/app/dashboards/widget.modal.component.scss ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ""

/***/ }),

/***/ "./src/app/dashboards/widget.modal.component.ts":
/*!******************************************************!*\
  !*** ./src/app/dashboards/widget.modal.component.ts ***!
  \******************************************************/
/*! exports provided: WidgetModalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WidgetModalComponent", function() { return WidgetModalComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var _models_dashboard_dashboardWidget__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../models/dashboard/dashboardWidget */ "./src/app/models/dashboard/dashboardWidget.ts");
/* harmony import */ var _execution_execution_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../execution/execution.service */ "./src/app/execution/execution.service.ts");
/* harmony import */ var _playbook_playbook_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../playbook/playbook.service */ "./src/app/playbook/playbook.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};





var WidgetModalComponent = /** @class */ (function () {
    function WidgetModalComponent(activeModal, executionService, playbookService) {
        this.activeModal = activeModal;
        this.executionService = executionService;
        this.playbookService = playbookService;
        this.typeLabel = 'Widget';
        this.workflows = [];
        this.executions = [];
        this.nodeResults = [];
    }
    WidgetModalComponent.prototype.ngOnInit = function () {
        this.updateWorkflows();
        if (this.widget.options.workflow) {
            this.updateExecutions();
        }
    };
    WidgetModalComponent.prototype.updateWorkflows = function () {
        return __awaiter(this, void 0, void 0, function () {
            var workflows, workflowOptions;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.executionService.getWorkflows()];
                    case 1:
                        workflows = _a.sent();
                        workflowOptions = [];
                        workflows.forEach(function (workflow) {
                            workflowOptions.push({
                                id: workflow.id,
                                text: workflow.name,
                            });
                        });
                        this.workflows = workflowOptions;
                        return [2 /*return*/];
                }
            });
        });
    };
    WidgetModalComponent.prototype.updateExecutions = function () {
        return __awaiter(this, void 0, void 0, function () {
            var workflowId, workflowStatuses;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        workflowId = this.widget.options.workflow;
                        return [4 /*yield*/, this.executionService.getAllWorkflowStatuses()];
                    case 1:
                        workflowStatuses = _a.sent();
                        this.executions = [{ id: 'latest', text: 'Latest' }].concat(workflowStatuses
                            .filter(function (status) { return status.workflow_id == workflowId && status.status == 'completed'; })
                            .map(function (status) { return ({ id: status.execution_id, text: status.completed_at_local }); }));
                        this.widget.options.execution = 'latest';
                        this.updateNodeResults();
                        return [2 /*return*/];
                }
            });
        });
    };
    WidgetModalComponent.prototype.updateNodeResults = function () {
        return __awaiter(this, void 0, void 0, function () {
            var workflowId, executionId, workflow, workflowStatus;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        workflowId = this.widget.options.workflow;
                        executionId = this.widget.options.execution;
                        if (!(executionId == 'latest')) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.playbookService.loadWorkflow(workflowId)];
                    case 1:
                        workflow = _a.sent();
                        this.nodeResults = workflow.actions.map(function (action) { return ({ id: action.id, text: action.name }); });
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, this.executionService.getWorkflowStatus(executionId)];
                    case 3:
                        workflowStatus = _a.sent();
                        this.nodeResults = workflowStatus.node_statuses.map(function (status) { return ({ id: status.node_id, text: status.name }); });
                        _a.label = 4;
                    case 4:
                        if (this.nodeResults.length > 0)
                            this.widget.options.action = this.nodeResults[0].id;
                        return [2 /*return*/];
                }
            });
        });
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _models_dashboard_dashboardWidget__WEBPACK_IMPORTED_MODULE_2__["DashboardWidget"])
    ], WidgetModalComponent.prototype, "widget", void 0);
    WidgetModalComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'widget-modal-component',
            template: __webpack_require__(/*! ./widget.modal.component.html */ "./src/app/dashboards/widget.modal.component.html"),
            styles: [__webpack_require__(/*! ./widget.modal.component.scss */ "./src/app/dashboards/widget.modal.component.scss")]
        }),
        __metadata("design:paramtypes", [_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__["NgbActiveModal"], _execution_execution_service__WEBPACK_IMPORTED_MODULE_3__["ExecutionService"], _playbook_playbook_service__WEBPACK_IMPORTED_MODULE_4__["PlaybookService"]])
    ], WidgetModalComponent);
    return WidgetModalComponent;
}());



/***/ }),

/***/ "./src/app/execution/execution.component.ts":
/*!**************************************************!*\
  !*** ./src/app/execution/execution.component.ts ***!
  \**************************************************/
/*! exports provided: ExecutionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionComponent", function() { return ExecutionComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var ngx_toastr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngx-toastr */ "./node_modules/ngx-toastr/fesm5/ngx-toastr.js");
/* harmony import */ var _swimlane_ngx_datatable__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @swimlane/ngx-datatable */ "./node_modules/@swimlane/ngx-datatable/release/index.js");
/* harmony import */ var _swimlane_ngx_datatable__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_swimlane_ngx_datatable__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_add_operator_debounceTime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/add/operator/debounceTime */ "./node_modules/rxjs-compat/_esm5/add/operator/debounceTime.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var _execution_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./execution.service */ "./src/app/execution/execution.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../auth/auth.service */ "./src/app/auth/auth.service.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
/* harmony import */ var _models_execution_workflowStatus__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../models/execution/workflowStatus */ "./src/app/models/execution/workflowStatus.ts");
/* harmony import */ var _models_execution_workflowStatusEvent__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../models/execution/workflowStatusEvent */ "./src/app/models/execution/workflowStatusEvent.ts");
/* harmony import */ var _models_execution_nodeStatusEvent__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../models/execution/nodeStatusEvent */ "./src/app/models/execution/nodeStatusEvent.ts");
/* harmony import */ var _models_execution_nodeStatus__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../models/execution/nodeStatus */ "./src/app/models/execution/nodeStatus.ts");
/* harmony import */ var _execution_variable_modal_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./execution.variable.modal.component */ "./src/app/execution/execution.variable.modal.component.ts");
/* harmony import */ var _models_execution_nodeStatusSummary__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../models/execution/nodeStatusSummary */ "./src/app/models/execution/nodeStatusSummary.ts");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_18__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



















var ExecutionComponent = /** @class */ (function () {
    function ExecutionComponent(executionService, authService, cdr, toastrService, utils, modalService, router) {
        this.executionService = executionService;
        this.authService = authService;
        this.cdr = cdr;
        this.toastrService = toastrService;
        this.utils = utils;
        this.modalService = modalService;
        this.router = router;
        this.workflowStatuses = [];
        this.displayWorkflowStatuses = [];
        this.workflows = [];
        this.availableWorkflows = [];
        this.workflowStatusStartedRelativeTimes = {};
        this.workflowStatusCompletedRelativeTimes = {};
        this.nodeStatusStartedRelativeTimes = {};
        this.nodeStatusCompletedRelativeTimes = {};
        this.filterQuery = new _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormControl"]();
    }
    /**
     * On component init, set up our workflow select2 config.
     * Also get workflows to select, workflow statuses to display in the datatable.
     * Set up SSEs for workflow status and action status to add/update data in our datatables.
     */
    ExecutionComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.workflowSelectConfig = {
            width: '100%',
            placeholder: 'Select a Workflow',
        };
        this.workflowStatusActions = {
            resume: 'resume',
            pause: 'pause',
            abort: 'abort',
        };
        this.getWorkflows();
        this.getWorkflowStatuses();
        this.getWorkflowStatusSSE();
        this.getNodeStatusSSE();
        this.filterQuery
            .valueChanges
            .debounceTime(500)
            .subscribe(function (event) { return _this.filterWorkflowStatuses(); });
        Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["interval"])(30000).subscribe(function () {
            _this.recalculateRelativeTimes();
        });
        this.recalculateTableCallback = function (e) {
            if (_this.nodeStatusTable && _this.nodeStatusTable.recalculate) {
                if (Array.isArray(_this.nodeStatusTable.rows))
                    _this.nodeStatusTable.rows = _this.nodeStatusTable.rows.slice();
                _this.nodeStatusTable.recalculate();
            }
        };
        $(document).on('shown.bs.modal', '.nodeStatusModal', this.recalculateTableCallback);
    };
    /**
     * This angular function is used primarily to recalculate column widths for execution results table.
     */
    ExecutionComponent.prototype.ngAfterViewChecked = function () {
        // Check if the table size has changed, and recalculate.
        if (this.nodeStatusTable && this.nodeStatusTable.recalculate &&
            (this.nodeStatusContainer.nativeElement.clientWidth !== this.nodeStatusComponentWidth)) {
            this.nodeStatusComponentWidth = this.nodeStatusContainer.nativeElement.clientWidth;
            this.nodeStatusTable.recalculate();
            this.cdr.detectChanges();
        }
    };
    /**
     * Closes our SSEs on component destroy.
     */
    ExecutionComponent.prototype.ngOnDestroy = function () {
        if (this.workflowStatusEventSource && this.workflowStatusEventSource.close) {
            this.workflowStatusEventSource.close();
        }
        if (this.nodeStatusEventSource && this.nodeStatusEventSource.close) {
            this.nodeStatusEventSource.close();
        }
        if (this.recalculateTableCallback) {
            $(document).off('shown.bs.modal', '.nodeStatusModal', this.recalculateTableCallback);
        }
    };
    /**
     * Filters out the workflow statuses based on the value in the search/filter box.
     * Checks against various parameters on the workflow statuses to set our display workflow statuses.
     */
    ExecutionComponent.prototype.filterWorkflowStatuses = function () {
        var searchFilter = this.filterQuery.value ? this.filterQuery.value.toLocaleLowerCase() : '';
        this.displayWorkflowStatuses = this.workflowStatuses.filter(function (s) {
            return s.name.toLocaleLowerCase().includes(searchFilter) ||
                s.status.toLocaleLowerCase().includes(searchFilter) ||
                (s.node_status &&
                    (s.node_status.name.toLocaleLowerCase().includes(searchFilter) ||
                        s.node_status.label.toLocaleLowerCase().includes(searchFilter) ||
                        s.node_status.app_name.toLocaleLowerCase().includes(searchFilter)));
        });
    };
    /**
     * Gets a list of workflow statuses from the server for initial population.
     */
    ExecutionComponent.prototype.getWorkflowStatuses = function () {
        var _this = this;
        this.executionService
            .getAllWorkflowStatuses()
            .then(function (workflowStatuses) {
            workflowStatuses.forEach(function (workflowStatus) {
                _this.calculateLocalizedTimes(workflowStatus);
            });
            _this.displayWorkflowStatuses = _this.workflowStatuses = workflowStatuses;
            _this.recalculateRelativeTimes();
        })
            .catch(function (e) { return _this.toastrService.error("Error retrieving workflow statuses: " + e.message); });
    };
    /**
     * Initiates an EventSource for workflow statuses from the server. Binds various events to the event handler.
     */
    ExecutionComponent.prototype.getWorkflowStatusSSE = function () {
        var _this = this;
        this.authService.getEventSource('/api/streams/workflowqueue/workflow_status')
            .then(function (eventSource) {
            _this.workflowStatusEventSource = eventSource;
            _this.workflowStatusEventSource.onerror = function (e) { return _this.statusEventErrorHandler(e); };
            Object.values(_models_execution_workflowStatus__WEBPACK_IMPORTED_MODULE_11__["WorkflowStatuses"])
                .forEach(function (status) { return _this.workflowStatusEventSource.addEventListener(status, function (e) { return _this.workflowStatusEventHandler(e); }); });
        });
    };
    /**
     * Handles an EventSource message for Workflow Status.
     * Updates existing workflow statuses for status updates or adds new ones to the list for display.
     * @param message EventSource message for workflow status
     */
    ExecutionComponent.prototype.workflowStatusEventHandler = function (message) {
        var _this = this;
        var workflowStatusEvent = Object(class_transformer__WEBPACK_IMPORTED_MODULE_6__["plainToClass"])(_models_execution_workflowStatusEvent__WEBPACK_IMPORTED_MODULE_12__["WorkflowStatusEvent"], JSON.parse(message.data));
        console.log(workflowStatusEvent);
        var matchingWorkflowStatus = this.workflowStatuses.find(function (ws) { return ws.execution_id === workflowStatusEvent.execution_id; });
        if (matchingWorkflowStatus) {
            matchingWorkflowStatus.status = workflowStatusEvent.status;
            switch (message.type) {
                case _models_execution_workflowStatus__WEBPACK_IMPORTED_MODULE_11__["WorkflowStatuses"].PENDING:
                    delete matchingWorkflowStatus.node_status;
                    break;
                case _models_execution_workflowStatus__WEBPACK_IMPORTED_MODULE_11__["WorkflowStatuses"].EXECUTING:
                    if (!matchingWorkflowStatus.started_at) {
                        matchingWorkflowStatus.started_at = workflowStatusEvent.started_at;
                        this.workflowStatusStartedRelativeTimes[matchingWorkflowStatus.execution_id] =
                            this.utils.getRelativeLocalTime(workflowStatusEvent.started_at);
                    }
                    matchingWorkflowStatus.user = workflowStatusEvent.user;
                    matchingWorkflowStatus.node_status = workflowStatusEvent.node_status;
                    break;
                case _models_execution_workflowStatus__WEBPACK_IMPORTED_MODULE_11__["WorkflowStatuses"].PAUSED:
                case _models_execution_workflowStatus__WEBPACK_IMPORTED_MODULE_11__["WorkflowStatuses"].AWAITING_DATA:
                    //case 'resumed':
                    //case 'triggered':
                    matchingWorkflowStatus.node_status = workflowStatusEvent.node_status;
                    break;
                case _models_execution_workflowStatus__WEBPACK_IMPORTED_MODULE_11__["WorkflowStatuses"].COMPLETED:
                    // Add a delay to ensure completed status is updated in quick executing workflows
                    setTimeout(function () {
                        matchingWorkflowStatus.completed_at = workflowStatusEvent.completed_at;
                        _this.workflowStatusCompletedRelativeTimes[matchingWorkflowStatus.execution_id] =
                            _this.utils.getRelativeLocalTime(workflowStatusEvent.completed_at);
                        delete matchingWorkflowStatus.node_status;
                    }, 250);
                    break;
                case _models_execution_workflowStatus__WEBPACK_IMPORTED_MODULE_11__["WorkflowStatuses"].ABORTED:
                    matchingWorkflowStatus.completed_at = workflowStatusEvent.completed_at;
                    this.workflowStatusCompletedRelativeTimes[matchingWorkflowStatus.execution_id] =
                        this.utils.getRelativeLocalTime(workflowStatusEvent.completed_at);
                    break;
                default:
                    this.toastrService.warning("Unknown Workflow Status SSE Type: " + message.type + ".");
                    break;
            }
            this.calculateLocalizedTimes(matchingWorkflowStatus);
        }
        else {
            var newWorkflowStatus = workflowStatusEvent.toNewWorkflowStatus();
            this.calculateLocalizedTimes(newWorkflowStatus);
            this.workflowStatuses.push(newWorkflowStatus);
            // Induce change detection by slicing array
            this.workflowStatuses = this.workflowStatuses.slice();
        }
        this.filterWorkflowStatuses();
    };
    /**
     * Initiates an EventSource for action statuses from the server. Binds various events to the event handler.
     */
    ExecutionComponent.prototype.getNodeStatusSSE = function (workflowExecutionId) {
        var _this = this;
        if (workflowExecutionId === void 0) { workflowExecutionId = null; }
        if (this.nodeStatusEventSource)
            this.nodeStatusEventSource.close();
        var url = "/api/streams/workflowqueue/actions?summary=true";
        if (workflowExecutionId)
            url += "&workflow_execution_id=" + workflowExecutionId;
        this.authService.getEventSource(url)
            .then(function (eventSource) {
            _this.nodeStatusEventSource = eventSource;
            _this.nodeStatusEventSource.onerror = function (e) { return _this.statusEventErrorHandler(e); };
            Object.values(_models_execution_nodeStatus__WEBPACK_IMPORTED_MODULE_14__["NodeStatuses"])
                .forEach(function (status) { return _this.nodeStatusEventSource.addEventListener(status, function (e) { return _this.nodeStatusEventHandler(e); }); });
        });
    };
    /**
     * Handles an EventSource message for Action Status.
     * Updates the parent workflow status' current_node if applicable.
     * Will add/update action statuses for display if the parent workflow execution is 'loaded' in the modal.
     * @param message EventSource message for action status
     */
    ExecutionComponent.prototype.nodeStatusEventHandler = function (message) {
        var nodeStatusEvent = Object(class_transformer__WEBPACK_IMPORTED_MODULE_6__["plainToClass"])(_models_execution_nodeStatusEvent__WEBPACK_IMPORTED_MODULE_13__["NodeStatusEvent"], JSON.parse(message.data));
        console.log(nodeStatusEvent);
        // if we have a matching workflow status, update the current app/action info.
        var matchingWorkflowStatus = this.workflowStatuses
            .find(function (ws) { return ws.execution_id === nodeStatusEvent.execution_id; });
        if (matchingWorkflowStatus) {
            matchingWorkflowStatus.node_status = Object(class_transformer__WEBPACK_IMPORTED_MODULE_6__["plainToClass"])(_models_execution_nodeStatusSummary__WEBPACK_IMPORTED_MODULE_16__["NodeStatusSummary"], {
                execution_id: nodeStatusEvent.execution_id,
                id: nodeStatusEvent.node_id,
                name: nodeStatusEvent.name,
                app_name: nodeStatusEvent.app_name,
                label: nodeStatusEvent.label,
            });
        }
        // also add this to the modal if possible, or update the existing data.
        if (this.loadedWorkflowStatus && this.loadedWorkflowStatus.execution_id === nodeStatusEvent.execution_id) {
            var matchingNodeStatus = this.loadedWorkflowStatus.node_statuses
                .find(function (r) { return r.execution_id === nodeStatusEvent.execution_id; });
            if (matchingNodeStatus) {
                matchingNodeStatus.status = nodeStatusEvent.status;
                switch (message.type) {
                    case _models_execution_nodeStatus__WEBPACK_IMPORTED_MODULE_14__["NodeStatuses"].EXECUTING:
                        matchingNodeStatus.started_at = nodeStatusEvent.started_at;
                        this.nodeStatusStartedRelativeTimes[matchingNodeStatus.execution_id] =
                            this.utils.getRelativeLocalTime(nodeStatusEvent.started_at);
                        break;
                    case _models_execution_nodeStatus__WEBPACK_IMPORTED_MODULE_14__["NodeStatuses"].SUCCESS:
                    case _models_execution_nodeStatus__WEBPACK_IMPORTED_MODULE_14__["NodeStatuses"].FAILURE:
                        matchingNodeStatus.completed_at = nodeStatusEvent.completed_at;
                        matchingNodeStatus.result = nodeStatusEvent.result;
                        this.nodeStatusCompletedRelativeTimes[matchingNodeStatus.execution_id] =
                            this.utils.getRelativeLocalTime(nodeStatusEvent.completed_at);
                        break;
                    case _models_execution_nodeStatus__WEBPACK_IMPORTED_MODULE_14__["NodeStatuses"].AWAITING_DATA:
                        // don't think anything needs to happen here
                        break;
                    default:
                        this.toastrService.warning("Unknown Action Status SSE Type: " + message.type + ".");
                        break;
                }
                this.calculateLocalizedTimes(matchingNodeStatus);
            }
            else {
                var newNodeStatus = nodeStatusEvent.toNewNodeStatus();
                this.calculateLocalizedTimes(newNodeStatus);
                this.loadedWorkflowStatus.node_statuses.push(newNodeStatus);
                // Induce change detection by slicing array
                this.loadedWorkflowStatus.node_statuses = this.loadedWorkflowStatus.node_statuses.slice();
            }
        }
        this.filterWorkflowStatuses();
    };
    ExecutionComponent.prototype.statusEventErrorHandler = function (e) {
        if (this.nodeStatusEventSource && this.nodeStatusEventSource.close)
            this.nodeStatusEventSource.close();
        if (this.workflowStatusEventSource && this.workflowStatusEventSource.close)
            this.workflowStatusEventSource.close();
        var options = { backdrop: undefined, closeButton: false, buttons: { ok: { label: 'Reload Page' } } };
        this.utils
            .alert('The server stopped responding. Reload the page to try again.', options)
            .then(function () { return location.reload(true); });
    };
    /**
     * Calls the workflow status endpoint to command a non-finished workflow to perform some action.
     * @param workflowStatus WorkflowStatus to perform the action
     * @param actionName Name of action to take (e.g. pause, resume, abort)
     */
    ExecutionComponent.prototype.performWorkflowStatusAction = function (workflowStatus, actionName) {
        var _this = this;
        this.executionService
            .performWorkflowStatusAction(workflowStatus.execution_id, actionName)
            .then(function () { return _this.toastrService.success("Successfully told " + workflowStatus.name + " to  " + actionName); })
            .catch(function (e) { return _this.toastrService.error("Error performing " + actionName + " on workflow: " + e.message); });
    };
    /**
     * Gets a list of playbooks and workflows from the server and compiles them into a list for selection.
     */
    ExecutionComponent.prototype.getWorkflows = function () {
        var _this = this;
        this.executionService
            .getWorkflows()
            .then(function (workflows) {
            // Map all of the playbook's workflows and collapse them into a single top-level array.
            _this.workflows = workflows;
            var workflowSelectData = [{ id: '', text: '' }];
            workflows.forEach(function (workflow) {
                workflowSelectData.push({
                    id: workflow.id,
                    text: "" + workflow.name,
                });
            });
            _this.availableWorkflows = workflowSelectData;
        });
    };
    /**
     * Executes a given workflow. Uses the selected workflow (specified via the select2 box).
     */
    ExecutionComponent.prototype.executeSelectedWorkflow = function (environmentVariables) {
        var _this = this;
        if (environmentVariables === void 0) { environmentVariables = []; }
        this.executionService.addWorkflowToQueue(this.selectedWorkflow.id, null, environmentVariables)
            .then(function (workflowStatus) {
            _this.toastrService.success("Starting <b>" + _this.selectedWorkflow.name + "</b>");
        })
            .catch(function (e) { return _this.toastrService.error("Error executing workflow: " + e.message); });
    };
    /**
     * Specifies the selected workflow from the select2. Used because in at least the version of select2 component we have,
     * There is no two-way data binding available.
     * @param event Event fired from the workflow select2 change.
     */
    ExecutionComponent.prototype.workflowSelectChange = function (event) {
        var _this = this;
        if (!event.value || event.value === '') {
            this.selectedWorkflow = null;
        }
        else {
            this.selectedWorkflow = this.workflows.find(function (w) { return w.id === event.value; });
            this.executionService.loadWorkflow(this.selectedWorkflow.id).then(function (workflow) {
                if (_this.selectedWorkflow.id == workflow.id)
                    _this.selectedWorkflow = workflow;
            });
        }
    };
    ExecutionComponent.prototype.openVariableModal = function () {
        var _this = this;
        var modalRef = this.modalService.open(_execution_variable_modal_component__WEBPACK_IMPORTED_MODULE_15__["ExecutionVariableModalComponent"]);
        modalRef.componentInstance.workflow = this.selectedWorkflow;
        modalRef.result.then(function (variables) {
            _this.executeSelectedWorkflow(variables);
        }).catch(function () { return null; });
    };
    /**
     * Opens a modal that contains the action results for a given workflow status.
     * @param event JS Event from the hyperlink click
     * @param workflowStatus Workflow Status to get action results for
     */
    ExecutionComponent.prototype.openNodeStatusModal = function (event, workflowStatus) {
        var _this = this;
        event.preventDefault();
        var nodeResultsPromise;
        if (this.loadedWorkflowStatus && this.loadedWorkflowStatus.execution_id === workflowStatus.execution_id) {
            nodeResultsPromise = Promise.resolve();
        }
        else {
            nodeResultsPromise = this.executionService.getWorkflowStatus(workflowStatus.execution_id)
                .then(function (fullWorkflowStatus) {
                _this.calculateLocalizedTimes(fullWorkflowStatus);
                fullWorkflowStatus.node_statuses.forEach(function (nodeStatus) {
                    _this.calculateLocalizedTimes(nodeStatus);
                });
                _this.loadedWorkflowStatus = fullWorkflowStatus;
                _this.recalculateRelativeTimes();
            })
                .catch(function (e) {
                _this.toastrService.error("Error loading action results for \"" + workflowStatus.name + "\": " + e.message);
            });
        }
        nodeResultsPromise.then(function () {
            $('.nodeStatusModal').modal('show');
        });
    };
    /**
     * Converts an input object/value to a friendly string for display in the workflow status table.
     * @param input Input object / value to convert
     */
    ExecutionComponent.prototype.getFriendlyJSON = function (input) {
        if (!input) {
            return 'N/A';
        }
        var out = JSON.stringify(input, null, 1);
        out = out.replace(/[\{\[\}\]"]/g, '').trim();
        if (!out) {
            return 'N/A';
        }
        return out;
    };
    /**
     * Converts an input argument array to a friendly string for display in the workflow status table.
     * @param args Array of arguments to convert
     */
    ExecutionComponent.prototype.getFriendlyArguments = function (args) {
        if (!args || !args.length) {
            return 'N/A';
        }
        var obj = {};
        args.forEach(function (element) {
            if (element.value) {
                obj[element.name] = element.value;
            }
        });
        var out = JSON.stringify(obj, null, 1);
        out = out.replace(/[\{\}"]/g, '');
        return out;
    };
    /**
     * Gets the app name from a current node object or returns N/A if undefined.
     * @param nodeStatusSummary NodeStatusSummary to use as input
     */
    ExecutionComponent.prototype.getAppName = function (nodeStatusSummary) {
        if (!nodeStatusSummary) {
            return 'N/A';
        }
        return nodeStatusSummary.app_name;
    };
    /**
     * Gets the action name from a current node object or returns N/A if undefined.
     * @param nodeStatusSummary NodeStatusSummary to use as input
     */
    ExecutionComponent.prototype.getActionName = function (nodeStatusSummary) {
        if (!nodeStatusSummary) {
            return 'N/A';
        }
        var output = nodeStatusSummary.label;
        if (output !== nodeStatusSummary.name) {
            output = output + " (" + nodeStatusSummary.name + ")";
        }
        return output;
    };
    /**
     * Simple comparator function for the datatable sort on the app name column.
     * @param propA Left side NodeStatusSummary
     * @param propB Right side NodeStatusSummary
     */
    ExecutionComponent.prototype.appNameComparator = function (propA, propB) {
        if (!propA) {
            return 1;
        }
        if (!propB) {
            return -1;
        }
        if (propA.app_name.toLowerCase() < propB.app_name.toLowerCase()) {
            return -1;
        }
        if (propA.app_name.toLowerCase() > propB.app_name.toLowerCase()) {
            return 1;
        }
    };
    /**
     * Simple comparator function for the datatable sort on a date column.
     * @param propA Left side NodeStatusSummary
     * @param propB Right side NodeStatusSummary
     */
    ExecutionComponent.prototype.dateComparator = function (propA, propB) {
        if (!propA && !propB)
            return 0;
        if (!propA)
            return 1;
        if (!propB)
            return -1;
        return moment__WEBPACK_IMPORTED_MODULE_18__(propA).diff(moment__WEBPACK_IMPORTED_MODULE_18__(propB));
    };
    /**
     * Simple comparator function for the datatable sort on the action name column.
     * @param propA Left side NodeStatusSummary
     * @param propB Right side NodeStatusSummary
     */
    ExecutionComponent.prototype.actionNameComparator = function (propA, propB) {
        if (!propA) {
            return 1;
        }
        if (!propB) {
            return -1;
        }
        if (propA.name.toLowerCase() < propB.name.toLowerCase()) {
            return -1;
        }
        if (propA.name.toLowerCase() > propB.name.toLowerCase()) {
            return 1;
        }
    };
    /**
     * Recalculates the relative times shown for start/end date timestamps (e.g. '5 hours ago').
     */
    ExecutionComponent.prototype.recalculateRelativeTimes = function () {
        var _this = this;
        if (!this.workflowStatuses || !this.workflowStatuses.length) {
            return;
        }
        this.workflowStatuses.forEach(function (workflowStatus) {
            if (workflowStatus.started_at) {
                _this.workflowStatusStartedRelativeTimes[workflowStatus.execution_id] =
                    _this.utils.getRelativeLocalTime(workflowStatus.started_at);
            }
            if (workflowStatus.completed_at) {
                _this.workflowStatusCompletedRelativeTimes[workflowStatus.execution_id] =
                    _this.utils.getRelativeLocalTime(workflowStatus.completed_at);
            }
        });
        if (!this.loadedWorkflowStatus || !this.loadedWorkflowStatus.node_statuses ||
            !this.loadedWorkflowStatus.node_statuses.length) {
            return;
        }
        this.loadedWorkflowStatus.node_statuses.forEach(function (nodeStatus) {
            if (nodeStatus.started_at) {
                _this.nodeStatusStartedRelativeTimes[nodeStatus.execution_id] =
                    _this.utils.getRelativeLocalTime(nodeStatus.started_at);
            }
            if (nodeStatus.completed_at) {
                _this.nodeStatusCompletedRelativeTimes[nodeStatus.execution_id] =
                    _this.utils.getRelativeLocalTime(nodeStatus.completed_at);
            }
        });
    };
    /**
     * Adds/updates localized time strings to a status object.
     * @param status Workflow or Action Status to mutate
     */
    ExecutionComponent.prototype.calculateLocalizedTimes = function (status) {
        if (status.started_at) {
            status.localized_started_at = this.utils.getLocalTime(status.started_at);
        }
        if (status.completed_at) {
            status.localized_completed_at = this.utils.getLocalTime(status.completed_at);
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('nodeStatusContainer'),
        __metadata("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"])
    ], ExecutionComponent.prototype, "nodeStatusContainer", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('nodeStatusTable'),
        __metadata("design:type", _swimlane_ngx_datatable__WEBPACK_IMPORTED_MODULE_3__["DatatableComponent"])
    ], ExecutionComponent.prototype, "nodeStatusTable", void 0);
    ExecutionComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'execution-component',
            template: __webpack_require__(/*! ./execution.html */ "./src/app/execution/execution.html"),
            styles: [__webpack_require__(/*! ./execution.scss */ "./src/app/execution/execution.scss")],
            encapsulation: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewEncapsulation"].None,
            providers: [_auth_auth_service__WEBPACK_IMPORTED_MODULE_9__["AuthService"]],
        }),
        __metadata("design:paramtypes", [_execution_service__WEBPACK_IMPORTED_MODULE_8__["ExecutionService"], _auth_auth_service__WEBPACK_IMPORTED_MODULE_9__["AuthService"], _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"],
            ngx_toastr__WEBPACK_IMPORTED_MODULE_2__["ToastrService"], _utilities_service__WEBPACK_IMPORTED_MODULE_10__["UtilitiesService"],
            _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_7__["NgbModal"], _angular_router__WEBPACK_IMPORTED_MODULE_17__["Router"]])
    ], ExecutionComponent);
    return ExecutionComponent;
}());



/***/ }),

/***/ "./src/app/execution/execution.html":
/*!******************************************!*\
  !*** ./src/app/execution/execution.html ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div id=\"main\" class=\"executionMain\">\r\n\t<h1>Execution Control</h1>\r\n\r\n\t<div class=\"row align-items-center mb-3\">\r\n\t\t<div class=\"col-lg-4 my-1 my-lg-none\">\r\n\t\t\t<select2 [data]=\"availableWorkflows\" [options]=\"workflowSelectConfig\" (valueChanged)=\"workflowSelectChange($event)\"></select2>\r\n\t\t</div>\r\n\t\t<div class=\"col-lg-auto mr-auto my-1 my-lg-none\">\r\n\t\t\t<button *ngIf=\"selectedWorkflow\" (click)=\"executeSelectedWorkflow()\" title=\"Execute Workflow\" class=\"btn btn-outline-primary mx-1\">\r\n\t\t\t\t<i class=\"fa fa-play\"></i>\r\n\t\t\t\tExecute Workflow\r\n\t\t\t</button>\r\n\t\t\t<button *ngIf=\"selectedWorkflow && selectedWorkflow.referenced_variables.length > 0\" (click)=\"openVariableModal()\" title=\"Edit Workflow Variables\" class=\"btn btn-outline-primary mx-1\">\r\n\t\t\t\t<i class=\"fa fa-cog\"></i>\r\n\t\t\t\tEdit Workflow Variables\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<div class=\"col col-lg-4 my-1 my-lg-none\">\r\n\t\t\t<input class=\"form-control\" placeholder=\"Filter Results...\" [formControl]=\"filterQuery\" />\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<ngx-datatable #workflowStatusTable class='material expandable workflowStatusTable' [columnMode]=\"'flex'\" [rows]=\"displayWorkflowStatuses\"\r\n\t [sorts]=\"[{prop: 'started_at', dir: 'desc'}]\" [sortType]=\"'multi'\" [headerHeight]=\"50\" [footerHeight]=\"50\" [rowHeight]=\"undefined\" [limit]=\"25\">\r\n\t\t<!-- Column Templates -->\r\n\t\t<ngx-datatable-column name=\"Name\" prop=\"name\" [flexGrow]=\"1\">\r\n\t\t\t<ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n\t\t\t\t<a href=\"#\" (click)=\"openNodeStatusModal($event, row)\" placement=\"bottom-left\" ngbTooltip=\"View Action Results\">{{row.name}}</a>\r\n\t\t\t</ng-template>\r\n\t\t</ngx-datatable-column>\r\n\t\t<ngx-datatable-column name=\"ID\" prop=\"execution_id\" [flexGrow]=\"2\"></ngx-datatable-column>\r\n\t\t<ngx-datatable-column name=\"User\" prop=\"user\" [flexGrow]=\"1\"></ngx-datatable-column>\r\n\t\t<ngx-datatable-column name=\"Started At\" prop=\"started_at\" [comparator]=\"dateComparator\" [flexGrow]=\"1\">\r\n\t\t\t<ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n\t\t\t\t<span [title]=\"row.localized_started_at\">\r\n\t\t\t\t\t{{workflowStatusStartedRelativeTimes[row.execution_id]}}\r\n\t\t\t\t</span>\r\n\t\t\t</ng-template>\r\n\t\t</ngx-datatable-column>\r\n\t\t<ngx-datatable-column name=\"Completed At\" prop=\"completed_at\" [comparator]=\"dateComparator\" [flexGrow]=\"1\">\r\n\t\t\t<ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n\t\t\t\t<span [title]=\"row.localized_completed_at\">\r\n\t\t\t\t\t{{workflowStatusCompletedRelativeTimes[row.execution_id]}}\r\n\t\t\t\t</span>\r\n\t\t\t</ng-template>\r\n\t\t</ngx-datatable-column>\r\n\t\t<ngx-datatable-column name=\"Status\" prop=\"status\" [flexGrow]=\"1\"></ngx-datatable-column>\r\n\t\t<ngx-datatable-column name=\"Current App\" prop=\"current_node\" [comparator]=\"appNameComparator\" [flexGrow]=\"1\">\r\n\t\t\t<ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n\t\t\t\t{{getAppName(row.current_node)}}\r\n\t\t\t</ng-template>\r\n\t\t</ngx-datatable-column>\r\n\t\t<ngx-datatable-column name=\"Current Node\" prop=\"current_node\" [comparator]=\"actionNameComparator\" [flexGrow]=\"1\">\r\n\t\t\t<ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n\t\t\t\t{{getActionName(row.current_node)}}\r\n\t\t\t</ng-template>\r\n\t\t</ngx-datatable-column>\r\n\t\t<ngx-datatable-column name=\"Actions\" [resizeable]=\"false\" [sortable]=\"false\" [draggable]=\"false\" [flexGrow]=\"1\">\r\n\t\t\t<ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n\t\t\t\t<button *ngIf=\"row.status.toLowerCase() === 'paused'\" (click)=\"performWorkflowStatusAction(row, workflowStatusActions.resume)\" ngbTooltip=\"Start Scheduled Task\"\r\n\t\t\t\t class=\"btn btn-primary mx-1\">\r\n\t\t\t\t\t<i class=\"fa fa-play\"></i>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button *ngIf=\"row.status.toLowerCase() === 'running'\" (click)=\"performWorkflowStatusAction(row, workflowStatusActions.pause)\" ngbTooltip=\"Pause Scheduled Task\"\r\n\t\t\t\t class=\"btn btn-warning mx-1\">\r\n\t\t\t\t\t<i class=\"fa fa-pause\"></i>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button *ngIf=\"!(row.status.toLowerCase() === 'completed' || row.status.toLowerCase() === 'aborted')\" (click)=\"performWorkflowStatusAction(row, workflowStatusActions.abort)\"\r\n\t\t\t\t ngbTooltip=\"Abort Scheduled Task\" class=\"btn btn-danger mx-1\">\r\n\t\t\t\t\t<i class=\"fa fa-stop\"></i>\r\n\t\t\t\t</button>\r\n\t\t\t</ng-template>\r\n\t\t</ngx-datatable-column>\r\n\t</ngx-datatable>\r\n\r\n\t<div class=\"modal fade nodeStatusModal\" role=\"dialog\" aria-labelledby=\"nodeStatusModalTitle\" aria-hidden=\"true\">\r\n\t\t<div class=\"modal-dialog\" role=\"document\">\r\n\t\t\t<div *ngIf=\"loadedWorkflowStatus\" class=\"modal-content\">\r\n\t\t\t\t<div class=\"modal-header\">\r\n\t\t\t\t\t<h5 class=\"modal-title\" id=\"nodeStatusModalTitle\">Action Statuses for {{loadedWorkflowStatus.name}}</h5>\r\n\t\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n\t\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"modal-body\" #nodeStatusContainer>\r\n\t\t\t\t\t<ngx-datatable #nodeStatusTable class='material expandable' [columnMode]=\"'flex'\" [rows]=\"loadedWorkflowStatus.node_statuses\"\r\n\t\t\t\t\t [sortType]=\"'multi'\" [headerHeight]=\"50\" [footerHeight]=\"50\" [rowHeight]=\"undefined\" [sorts]=\"[{prop: 'started_at', dir: 'desc'}]\"\r\n\t\t\t\t\t [limit]=\"10\">\r\n\t\t\t\t\t\t<!-- Column Templates -->\r\n\t\t\t\t\t\t<ngx-datatable-column name=\"ID\" prop=\"node_id\" [flexGrow]=\"3\"></ngx-datatable-column>\r\n\t\t\t\t\t\t<ngx-datatable-column name=\"App Name\" prop=\"app_name\" [flexGrow]=\"1\"></ngx-datatable-column>\r\n\t\t\t\t\t\t<ngx-datatable-column name=\"Action Name\" prop=\"name\" [flexGrow]=\"1\"></ngx-datatable-column>\r\n\t\t\t\t\t\t<ngx-datatable-column name=\"Started At\" prop=\"started_at\" [flexGrow]=\"1\">\r\n\t\t\t\t\t\t\t<ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n\t\t\t\t\t\t\t\t<span [title]=\"row.localized_started_at\">\r\n\t\t\t\t\t\t\t\t\t{{nodeStatusStartedRelativeTimes[row.execution_id]}}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</ng-template>\r\n\t\t\t\t\t\t</ngx-datatable-column>\r\n\t\t\t\t\t\t<ngx-datatable-column name=\"Completed At\" prop=\"completed_at\" [flexGrow]=\"1\">\r\n\t\t\t\t\t\t\t<ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n\t\t\t\t\t\t\t\t<span [title]=\"row.localized_completed_at\">\r\n\t\t\t\t\t\t\t\t\t{{nodeStatusCompletedRelativeTimes[row.execution_id]}}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</ng-template>\r\n\t\t\t\t\t\t</ngx-datatable-column>\r\n\t\t\t\t\t\t<ngx-datatable-column name=\"Status\" prop=\"status\" [flexGrow]=\"1\"></ngx-datatable-column>\r\n\t\t\t\t\t\t<ngx-datatable-column name=\"Arguments\" [sortable]=\"false\" [flexGrow]=\"1\">\r\n\t\t\t\t\t\t\t<ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n\t\t\t\t\t\t\t\t{{getFriendlyArguments(row.arguments)}}\r\n\t\t\t\t\t\t\t</ng-template>\r\n\t\t\t\t\t\t</ngx-datatable-column>\r\n\t\t\t\t\t\t<ngx-datatable-column name=\"Result\" [sortable]=\"false\" [flexGrow]=\"4\">\r\n\t\t\t\t\t\t\t<ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n\t\t\t\t\t\t\t\t{{getFriendlyJSON(row.result)}}\r\n\t\t\t\t\t\t\t</ng-template>\r\n\t\t\t\t\t\t</ngx-datatable-column>\r\n\t\t\t\t\t</ngx-datatable>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n"

/***/ }),

/***/ "./src/app/execution/execution.scss":
/*!******************************************!*\
  !*** ./src/app/execution/execution.scss ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".executionMain {\n  padding: 10px 15px; }\n\n.executionMain ngx-datatable datatable-body datatable-body-row datatable-body-cell .datatable-body-cell-label {\n  white-space: initial; }\n\n.nodeStatusModal > .modal-dialog {\n  max-width: 95%; }\n"

/***/ }),

/***/ "./src/app/execution/execution.service.ts":
/*!************************************************!*\
  !*** ./src/app/execution/execution.service.ts ***!
  \************************************************/
/*! exports provided: ExecutionService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionService", function() { return ExecutionService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var rxjs_add_operator_toPromise__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs/add/operator/toPromise */ "./node_modules/rxjs-compat/_esm5/add/operator/toPromise.js");
/* harmony import */ var rxjs_add_operator_toPromise__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(rxjs_add_operator_toPromise__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var _models_execution_workflowStatus__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../models/execution/workflowStatus */ "./src/app/models/execution/workflowStatus.ts");
/* harmony import */ var _models_playbook_playbook__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../models/playbook/playbook */ "./src/app/models/playbook/playbook.ts");
/* harmony import */ var _models_playbook_workflow__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../models/playbook/workflow */ "./src/app/models/playbook/workflow.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};








var ExecutionService = /** @class */ (function () {
    function ExecutionService(http, utils) {
        this.http = http;
        this.utils = utils;
    }
    /**
     * Asyncronously adds a workflow (by ID) to the queue to be executed.
     * Returns the new workflow status for the workflow execution.
     * @param workflowId Workflow Id to queue
     */
    ExecutionService.prototype.addWorkflowToQueue = function (workflow_id, execution_id, variables) {
        if (execution_id === void 0) { execution_id = null; }
        if (variables === void 0) { variables = []; }
        var data = { workflow_id: workflow_id };
        if (execution_id)
            data.execution_id = execution_id;
        if (variables.length > 0)
            data.workflow_variables = Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["classToPlain"])(variables);
        return this.http.post('api/workflowqueue', data)
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["plainToClass"])(_models_execution_workflowStatus__WEBPACK_IMPORTED_MODULE_4__["WorkflowStatus"], data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * For a given executing workflow, asyncronously perform some action to change its status.
     * Only returns success
     * @param executionId Execution ID to act upon
     * @param action Action to take (e.g. abort, resume, pause)
     */
    ExecutionService.prototype.performWorkflowStatusAction = function (executionId, action) {
        return this.http.patch("api/workflowqueue/" + executionId, { status: action })
            .toPromise()
            .then(function () { return null; })
            .catch(this.utils.handleResponseError);
    };
    /**
     * For a given executing workflow, asyncronously perform some action to change its status.
     * Only returns success
     * @param executionId Execution ID to act upon
     * @param action Action to take (e.g. abort, resume, pause)
     */
    ExecutionService.prototype.performWorkflowTrigger = function (executionId, trigger, data) {
        if (data === void 0) { data = {}; }
        return this.http.patch("api/workflowqueue/" + executionId, { status: 'trigger', trigger_id: trigger, trigger_data: data })
            .toPromise()
            .then(function () { return null; })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Asyncronously gets an array of workflow statuses from the server.
     */
    ExecutionService.prototype.getAllWorkflowStatuses = function () {
        return this.utils.paginateAll(this.getWorkflowStatuses.bind(this));
    };
    /**
     * Asyncronously gets an array of workflow statuses from the server.
     */
    ExecutionService.prototype.getWorkflowStatuses = function (page) {
        if (page === void 0) { page = 1; }
        return this.http.get("api/workflowqueue?page=" + page)
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["plainToClass"])(_models_execution_workflowStatus__WEBPACK_IMPORTED_MODULE_4__["WorkflowStatus"], data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Asyncronously gets the full information for a given workflow status, including action statuses.
     * @param workflowExecutionId Workflow Status to query
     */
    ExecutionService.prototype.getWorkflowStatus = function (workflowExecutionId) {
        return this.http.get("api/workflowqueue/" + workflowExecutionId)
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["plainToClass"])(_models_execution_workflowStatus__WEBPACK_IMPORTED_MODULE_4__["WorkflowStatus"], data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Asyncryonously gets arrays of all playbooks and workflows (id, name pairs only).
     */
    ExecutionService.prototype.getPlaybooks = function () {
        return this.http.get('/api/playbooks')
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["plainToClass"])(_models_playbook_playbook__WEBPACK_IMPORTED_MODULE_5__["Playbook"], data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Returns all playbooks and their child workflows in minimal form (id, name).
     */
    ExecutionService.prototype.getWorkflows = function () {
        return this.http.get('/api/workflows')
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["plainToClass"])(_models_playbook_workflow__WEBPACK_IMPORTED_MODULE_6__["Workflow"], data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Loads the data of a given workflow under a given playbook.
     * @param workflowId ID of the workflow to load
     */
    ExecutionService.prototype.loadWorkflow = function (workflowId) {
        return this.http.get("/api/workflows/" + workflowId)
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["plainToClass"])(_models_playbook_workflow__WEBPACK_IMPORTED_MODULE_6__["Workflow"], data); })
            .catch(this.utils.handleResponseError);
    };
    ExecutionService.prototype.getLatestExecution = function (workflowId) {
        return __awaiter(this, void 0, void 0, function () {
            var workflowStatuses, workflowStatus;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getAllWorkflowStatuses()];
                    case 1:
                        workflowStatuses = _a.sent();
                        workflowStatus = workflowStatuses.filter(function (status) { return status.workflow_id = workflowId && status.completed_at_local; }).find(function (e) { return !!e; });
                        return [2 /*return*/, this.getWorkflowStatus(workflowStatus.execution_id)];
                }
            });
        });
    };
    ExecutionService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])({
            providedIn: 'root'
        }),
        __metadata("design:paramtypes", [_angular_common_http__WEBPACK_IMPORTED_MODULE_3__["HttpClient"], _utilities_service__WEBPACK_IMPORTED_MODULE_7__["UtilitiesService"]])
    ], ExecutionService);
    return ExecutionService;
}());



/***/ }),

/***/ "./src/app/execution/execution.variable.modal.component.ts":
/*!*****************************************************************!*\
  !*** ./src/app/execution/execution.variable.modal.component.ts ***!
  \*****************************************************************/
/*! exports provided: ExecutionVariableModalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionVariableModalComponent", function() { return ExecutionVariableModalComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var _models_playbook_workflow__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../models/playbook/workflow */ "./src/app/models/playbook/workflow.ts");
/* harmony import */ var _models_playbook_environmentVariable__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../models/playbook/environmentVariable */ "./src/app/models/playbook/environmentVariable.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var ExecutionVariableModalComponent = /** @class */ (function () {
    function ExecutionVariableModalComponent(activeModal) {
        this.activeModal = activeModal;
    }
    ExecutionVariableModalComponent.prototype.execute = function (form) {
        var variables = [];
        this.workflow.referenced_variables.forEach(function (variable) {
            if (form.value[variable.id] && form.value[variable.id] != '') {
                var newV = new _models_playbook_environmentVariable__WEBPACK_IMPORTED_MODULE_3__["EnvironmentVariable"]();
                newV.id = variable.id;
                newV.name = variable.name;
                newV.value = form.value[variable.id];
                variables.push(newV);
            }
        });
        this.activeModal.close(variables);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _models_playbook_workflow__WEBPACK_IMPORTED_MODULE_2__["Workflow"])
    ], ExecutionVariableModalComponent.prototype, "workflow", void 0);
    ExecutionVariableModalComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'execution-variable-modal-component',
            template: __webpack_require__(/*! ./execution.variable.modal.html */ "./src/app/execution/execution.variable.modal.html"),
        }),
        __metadata("design:paramtypes", [_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__["NgbActiveModal"]])
    ], ExecutionVariableModalComponent);
    return ExecutionVariableModalComponent;
}());



/***/ }),

/***/ "./src/app/execution/execution.variable.modal.html":
/*!*********************************************************!*\
  !*** ./src/app/execution/execution.variable.modal.html ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal-header\">\r\n    <h4 class=\"modal-title\">Edit Environment Variables</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n    <div class=\"container\">\r\n        <form #variableForm=\"ngForm\" (ngSubmit)=\"execute(variableForm)\">\r\n        <div class=\"row\">\r\n                <div *ngFor=\"let v of workflow.referenced_variables\" class=\"col-12\">\r\n                    <div class=\"form-group\">\r\n                        <label [for]=\"v.id\">{{ v.name }}</label>\r\n                        <input [name]=\"v.id\" [id]=\"v.id\" type=\"text\" class=\"form-control\" [placeholder]=\"v.value\" ngModel>\r\n                        <p *ngIf=\"v.description\" class=\"help-block\"><i>{{ v.description }}</i></p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>\r\n<div class=\"modal-footer\">\r\n    <button type=\"button\" class=\"btn btn-secondary\" (click)=\"activeModal.dismiss()\">Close</button>\r\n    <button type=\"button\" class=\"btn btn-primary\" (click)=\"execute(variableForm)\">Execute Workflow</button>\r\n</div>"

/***/ }),

/***/ "./src/app/globals/globals.component.ts":
/*!**********************************************!*\
  !*** ./src/app/globals/globals.component.ts ***!
  \**********************************************/
/*! exports provided: GlobalsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GlobalsComponent", function() { return GlobalsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var ngx_toastr__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngx-toastr */ "./node_modules/ngx-toastr/fesm5/ngx-toastr.js");
/* harmony import */ var _variable_modal_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./variable.modal.component */ "./src/app/globals/variable.modal.component.ts");
/* harmony import */ var _globals_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./globals.service */ "./src/app/globals/globals.service.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};







var GlobalsComponent = /** @class */ (function () {
    function GlobalsComponent(globalsService, modalService, toastrService, utils) {
        this.globalsService = globalsService;
        this.modalService = modalService;
        this.toastrService = toastrService;
        this.utils = utils;
        //Global Data Table params
        this.globals = [];
        this.filterQuery = new _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormControl"]();
    }
    /**
     * On component init, initialize the app select2 config, grab globals and global apis from the server.
     * Set up the search filter to filter globals after 500 ms of inactivity.
     */
    GlobalsComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.globalsService.globalsChange.subscribe(function (globals) { return _this.globals = globals; });
    };
    Object.defineProperty(GlobalsComponent.prototype, "filteredGlobals", {
        /**
         * Filters globals based on the selected apps select2, and the value of the search filter input box.
         * If no apps are selected, assume all apps should be returned.
         */
        get: function () {
            var searchFilter = this.filterQuery.value ? this.filterQuery.value.toLocaleLowerCase() : '';
            return this.globals.filter(function (global) {
                return global.name.toLocaleLowerCase().includes(searchFilter) ||
                    global.value.toLocaleLowerCase().includes(searchFilter) ||
                    (global.description && global.description.toLocaleLowerCase().includes(searchFilter));
            });
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Spawns a modal for adding a new global. Passes in the app names and apis for usage in the modal.
     */
    GlobalsComponent.prototype.addGlobal = function () {
        var _this = this;
        var modalRef = this.modalService.open(_variable_modal_component__WEBPACK_IMPORTED_MODULE_4__["VariableModalComponent"]);
        modalRef.componentInstance.isGlobal = true;
        modalRef.result.then(function (variable) {
            _this.globalsService.addGlobal(variable).then(function () {
                _this.toastrService.success("Added <b>" + variable.name + "</b>");
            });
        }, function () { return null; });
    };
    /**
     * Spawns a modal for editing an existing global. Passes in the app names and apis for usage in the modal.
     */
    GlobalsComponent.prototype.editGlobal = function (global) {
        var _this = this;
        var modalRef = this.modalService.open(_variable_modal_component__WEBPACK_IMPORTED_MODULE_4__["VariableModalComponent"]);
        modalRef.componentInstance.isGlobal = true;
        modalRef.componentInstance.existing = true;
        modalRef.componentInstance.variable = global.clone();
        modalRef.result.then(function (variable) {
            _this.globalsService.editGlobal(variable).then(function () {
                _this.toastrService.success("Updated <b>" + variable.name + "</b>");
            });
        }, function () { return null; });
    };
    /**
     * After user confirmation, will delete a given global from the database.
     * Removes it from our list of globals to display.
     * @param globalToDelete Global to delete
     */
    GlobalsComponent.prototype.deleteGlobal = function (globalToDelete) {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.utils.confirm("Are you sure you want to delete <b>" + globalToDelete.name + "</b>?")];
                    case 1:
                        _a.sent();
                        this.globalsService
                            .deleteGlobal(globalToDelete)
                            .then(function () { return _this.toastrService.success("Deleted <b>" + globalToDelete.name + "</b>"); })
                            .catch(function (e) { return _this.toastrService.error("Error deleting <b>" + e.message + "</b>"); });
                        return [2 /*return*/];
                }
            });
        });
    };
    GlobalsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'globals-component',
            template: __webpack_require__(/*! ./globals.html */ "./src/app/globals/globals.html"),
            styles: [__webpack_require__(/*! ./globals.scss */ "./src/app/globals/globals.scss")],
            encapsulation: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewEncapsulation"].None,
        }),
        __metadata("design:paramtypes", [_globals_service__WEBPACK_IMPORTED_MODULE_5__["GlobalsService"], _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbModal"],
            ngx_toastr__WEBPACK_IMPORTED_MODULE_3__["ToastrService"], _utilities_service__WEBPACK_IMPORTED_MODULE_6__["UtilitiesService"]])
    ], GlobalsComponent);
    return GlobalsComponent;
}());



/***/ }),

/***/ "./src/app/globals/globals.html":
/*!**************************************!*\
  !*** ./src/app/globals/globals.html ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div id=\"main\" class=\"globalsMain\">\r\n    <h1>Global Variables</h1>\r\n\r\n    <div class=\"row align-items-center mb-3\">\r\n        <div class=\"col\">\r\n            <button (click)=\"addGlobal()\" class=\"btn btn-outline-primary\"><i class=\"fa fa-plus\"></i> Add Global</button>\r\n        </div>\r\n        <div class=\"col-4\">\r\n            <!-- <select2 [data]=\"availableApps\" [options]=\"appSelectConfig\" (valueChanged)=\"appSelectChange($event)\"></select2> -->\r\n        </div>\r\n        <div class=\"col-4\">\r\n            <input class=\"form-control\" placeholder=\"Filter Globals...\" [formControl]=\"filterQuery\" />\r\n        </div>\r\n    </div>\r\n\r\n    <ngx-datatable #globalTable class='material expandable' [columnMode]=\"'flex'\" [rows]=\"filteredGlobals\"\r\n        [sortType]=\"'multi'\" [headerHeight]=\"50\" [footerHeight]=\"25\" [rowHeight]=\"undefined\" [limit]=\"25\">\r\n        <!-- Column Templates -->\r\n        <ngx-datatable-column name=\"Name\" prop=\"name\" [flexGrow]=\"2\"></ngx-datatable-column>\r\n        <ngx-datatable-column name=\"ID\" prop=\"id\" [flexGrow]=\"2\"></ngx-datatable-column>\r\n        <ngx-datatable-column name=\"Value\" prop=\"value\" [flexGrow]=\"3\" [sortable]=\"false\">\r\n            <ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n                <div class=\"d-flex align-items-center\">\r\n                    <span [class.pt-2]=\"row.isHidden\">{{ row.isHidden ? '********************' : row.value }}</span>\r\n                    <button (click)=\"row.isHidden = !row.isHidden\" class=\"btn btn-link mx-1 p-0\">\r\n                        <i class=\"fa\" [class.fa-eye]=\"row.isHidden\" [class.fa-eye-slash]=\"!row.isHidden\" \r\n                            [ngbTooltip]=\"row.isHidden ? 'Show Value' : 'Hide Value'\"></i>\r\n                    </button>\r\n                </div>\r\n            </ng-template>\r\n        </ngx-datatable-column>\r\n        <ngx-datatable-column name=\"Description\" prop=\"description\" [flexGrow]=\"3\"></ngx-datatable-column>\r\n        <ngx-datatable-column name=\"Actions\" [resizeable]=\"false\" [sortable]=\"false\" [draggable]=\"false\" [flexGrow]=\"1\">\r\n            <ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n                <button (click)=\"editGlobal(row)\" class=\"btn btn-primary mx-1\" ngbTooltip=\"Edit\"><i\r\n                        class=\"fa fa-edit\"></i></button>\r\n                <button (click)=\"deleteGlobal(row)\" class=\"btn btn-danger mx-1\" ngbTooltip=\"Delete\"><i\r\n                        class=\"fa fa-times\"></i></button>\r\n            </ng-template>\r\n        </ngx-datatable-column>\r\n    </ngx-datatable>\r\n</div>"

/***/ }),

/***/ "./src/app/globals/globals.modal.component.ts":
/*!****************************************************!*\
  !*** ./src/app/globals/globals.modal.component.ts ***!
  \****************************************************/
/*! exports provided: GlobalsModalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GlobalsModalComponent", function() { return GlobalsModalComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var ngx_toastr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngx-toastr */ "./node_modules/ngx-toastr/fesm5/ngx-toastr.js");
/* harmony import */ var _globals_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./globals.service */ "./src/app/globals/globals.service.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
/* harmony import */ var _models_workingGlobal__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../models/workingGlobal */ "./src/app/models/workingGlobal.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var GlobalsModalComponent = /** @class */ (function () {
    function GlobalsModalComponent(globalsService, activeModal, toastrService, cdr) {
        this.globalsService = globalsService;
        this.activeModal = activeModal;
        this.toastrService = toastrService;
        this.cdr = cdr;
        this.workingGlobal = new _models_workingGlobal__WEBPACK_IMPORTED_MODULE_5__["WorkingGlobal"]();
        this.appNames = [];
        this.appApis = [];
        // @ViewChild('globalForm') form: FormGroup
        this.globalTypesForApp = [];
        // save global type fields on saving/loading so we don't clear all progress if we switch global type
        // e.g. { 'router': { 'ip': '127.0.0.1', ... }, ... }
        this.globalTypeFields = {};
        this.validationErrors = {};
        this.encryptedConfirmFields = {};
        this.encryptedFieldsToBeCleared = {};
    }
    GlobalsModalComponent.prototype.ngOnInit = function () {
    };
    GlobalsModalComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        //For an existing global, set our available global types and store the known fields for our global type
        if (this.workingGlobal.app_name) {
            this.globalTypesForApp = this.appApis.find(function (app) { return app.name === _this.workingGlobal.app_name; }).device_apis;
        }
        //Detect changes beforehand so the select box is updated
        this.cdr.detectChanges();
        if (this.workingGlobal.type) {
            this.globalTypeFields[this.workingGlobal.type] = this.workingGlobal.fields;
            this.typeRef.nativeElement.value = this.workingGlobal.type;
            this.handleGlobalTypeSelection(null, this.workingGlobal.type);
        }
        //Detect changes once more to actually use the selected global type
        this.cdr.detectChanges();
    };
    /**
     * On selecting an app in the app select, get the GlobalTypes for the app from our App Apis.
     * Also clear global type data if needed.
     * @param event JS event fired from app select
     * @param appName App name from the selection
     */
    GlobalsModalComponent.prototype.handleAppSelection = function (event, appName) {
        this.workingGlobal.app_name = appName;
        this.globalTypesForApp = this.appApis.find(function (a) { return a.name === appName; }).device_apis;
        if (this.selectedGlobalType) {
            this._clearGlobalTypeData();
        }
    };
    /**
     * On selecting a global type in the global type select, grab the DeviceApi from our AppApis.
     * Get the default or existing values for our global based on the Global Api.
     * @param event JS event fired from global type select
     * @param globalType Global type from the selection
     */
    GlobalsModalComponent.prototype.handleGlobalTypeSelection = function (event, globalType) {
        var _this = this;
        // If we just cleared our global type selection,
        // clear our global type data from the working global and any temp storage
        if (!globalType) {
            this._clearGlobalTypeData();
            return;
        }
        // Grab the first global type that matches our app and newly selected type
        this.selectedGlobalType = this.appApis.find(function (a) { return a.name === _this.workingGlobal.app_name; })
            .device_apis.find(function (d) { return d.name === globalType; });
        // Set the type on our working global
        this.workingGlobal.type = globalType;
        // Set our fields to whatever's stored or a new object
        this.workingGlobal.fields =
            this.globalTypeFields[globalType] =
                this.globalTypeFields[globalType] || this._getDefaultValues(this.selectedGlobalType);
        this._getEncryptedConfirmFields(this.selectedGlobalType);
        this.validationErrors = {};
    };
    /**
     * On checking/unchecking an encrypted field clear box, we are marking if it is to be cleared on save.
     * This is needed because we need a distinction between passing empty string and null.
     * @param fieldName Name of field to toggle
     * @param isChecked Determine if we're clearing this field on save.
     */
    GlobalsModalComponent.prototype.handleEncryptedFieldClear = function (fieldName, isChecked) {
        this.encryptedFieldsToBeCleared[fieldName] = isChecked;
    };
    /**
     * Submits the add/edit global modal.
     * If we're editing a global, we also want to handle removing
     * encrypted fields by setting them as '' rather than just passing null.
     * Calls POST/PUT based upon add/edit and returns the added/updated global from the server.
     */
    GlobalsModalComponent.prototype.submit = function () {
        if (!this.validate()) {
            return;
        }
        // const toSubmit = WorkingGlobal.toGlobal(this.workingGlobal);
        // //If global has an ID, global already exists, call update
        // if (this.workingGlobal.id) {
        // 	toSubmit.fields.forEach((field, index, array) => {
        // 		const ftype = this.selectedGlobalType.fields.find(ft => ft.name === field.name);
        // 		if (!ftype.encrypted) { return; }
        // 		//If we are to be clearing our value, please set it to empty string and return
        // 		if (this.encryptedFieldsToBeCleared[field.name]) { 
        // 			field.value = '';
        // 		} else if ((typeof(field.value) === 'string' && !field.value.trim()) ||
        // 			(typeof(field.value) === 'number' && !field.value)) { array.splice(index, 1); }
        // 	});
        // 	this.globalsService
        // 		.editGlobal(toSubmit)
        // 		.then(global => this.activeModal.close({
        // 			global,
        // 			isEdit: true,
        // 		}))
        // 		.catch(e => this.toastrService.error(e.message));
        // } else {
        // 	this.globalsService
        // 		.addGlobal(toSubmit)
        // 		.then(global => this.activeModal.close({
        // 			global,
        // 			isEdit: false,
        // 		}))
        // 		.catch(e => this.toastrService.error(e.message));
        // }
    };
    /**
     * Checks if basic info on the top level global params is valid (specified).
     */
    GlobalsModalComponent.prototype.isBasicInfoValid = function () {
        if (this.workingGlobal.name && this.workingGlobal.name.trim() &&
            this.workingGlobal.app_name && this.workingGlobal.type) {
            return true;
        }
        return false;
    };
    /**
     * Performs validation on each Global field based on the matching ParameterSchema for the DeviceApi.
     */
    GlobalsModalComponent.prototype.validate = function () {
        var _this = this;
        this.validationErrors = {};
        var inputs = this.workingGlobal.fields;
        //Trim whitespace out of our inputs first
        Object.keys(inputs).forEach(function (key) {
            if (typeof (inputs[key]) === 'string') {
                inputs[key] = inputs[key].trim();
                //Also trim encrypted confirm fields if necessary
                if (_this.encryptedConfirmFields[key]) {
                    _this.encryptedConfirmFields[key] = _this.encryptedConfirmFields[key].trim();
                }
            }
        });
        this.selectedGlobalType.fields.forEach(function (field) {
            // if we have a required field, and this field is NOT an edit to an encrypted field,
            // check if we have a value specified
            if (field.required && !(_this.workingGlobal.id && field.encrypted)) {
                if (inputs[field.name] == null ||
                    (typeof inputs[field.name] === 'string' && !inputs[field.name]) ||
                    (typeof inputs[field.name] === 'number' && inputs[field.name] === null)) {
                    _this.validationErrors[field.name] = "You must enter a value for " + field.name + ".";
                    return;
                }
            }
            switch (field.schema.type) {
                //For strings, check against min/max length, regex pattern, or enum constraints
                case 'string':
                    if (inputs[field.name] == null) {
                        inputs[field.name] = '';
                    }
                    if (field.encrypted &&
                        !_this.encryptedFieldsToBeCleared[field.name] &&
                        _this.encryptedConfirmFields[field.name] !== inputs[field.name]) {
                        _this._concatValidationMessage(field.name, "The values for " + field.name + " do not match.");
                    }
                    if (field.schema.enum) {
                        var enumArray = field.schema.enum.slice(0);
                        if (!field.required) {
                            enumArray.push('');
                        }
                        if (enumArray.indexOf(inputs[field.name]) < 0) {
                            _this._concatValidationMessage(field.name, 'You must select a value from the list.');
                        }
                    }
                    //We're past the required check; Don't do any more validation if we have an empty string as input
                    if (!inputs[field.name]) {
                        break;
                    }
                    if (field.schema.minLength !== undefined && inputs[field.name].length < field.schema.minLength) {
                        _this._concatValidationMessage(field.name, "Must be at least " + field.schema.minLength + " characters.");
                    }
                    if (field.schema.maxLength !== undefined && inputs[field.name].length > field.schema.maxLength) {
                        _this._concatValidationMessage(field.name, "Must be at most " + field.schema.minLength + " characters.");
                    }
                    if (field.schema.pattern && !new RegExp(field.schema.pattern).test(inputs[field.name])) {
                        _this._concatValidationMessage(field.name, "Input must match a given pattern: " + field.schema.pattern + ".");
                    }
                    break;
                //For numbers, check against min/max and multipleOf constraints
                case 'number':
                case 'integer':
                    //We're past the required check; if number is null, don't do any more validation
                    if (inputs[field.name] == null) {
                        break;
                    }
                    var min = _this.getMin(field.schema);
                    var max = _this.getMax(field.schema);
                    if (min !== null && inputs[field.name] < min) {
                        _this._concatValidationMessage(field.name, "The minimum value is " + min + ".");
                    }
                    if (max !== null && inputs[field.name] > max) {
                        _this._concatValidationMessage(field.name, "The maximum value is " + max + ".");
                    }
                    if (field.schema.multipleOf !== undefined && inputs[field.name] % field.schema.multipleOf) {
                        _this._concatValidationMessage(field.name, "The value must be a multiple of " + field.schema.multipleOf + ".");
                    }
                    break;
                //For booleans, just initialize the value to false if it doesn't exist
                case 'boolean':
                    inputs[field.name] = inputs[field.name] || false;
                    break;
                default:
                    _this._concatValidationMessage(field.name, "The type specified for field " + field.name + " is invalid.");
                    break;
            }
        });
        if (Object.keys(this.validationErrors).length) {
            return false;
        }
        return true;
    };
    /**
     * Returns the minimum value based on a ParameterSchema's minimum and exclusiveMinimum fields.
     * @param schema ParameterSchema to check against
     */
    GlobalsModalComponent.prototype.getMin = function (schema) {
        if (schema.minimum === undefined) {
            return null;
        }
        if (schema.exclusiveMinimum) {
            return schema.minimum + 1;
        }
        return schema.minimum;
    };
    /**
     * Returns the maximum value based on a ParameterSchema's maximum and exclusiveMaximum fields.
     * @param schema ParameterSchema to check against
     */
    GlobalsModalComponent.prototype.getMax = function (schema) {
        if (schema.maximum === undefined) {
            return null;
        }
        if (schema.exclusiveMaximum) {
            return schema.maximum - 1;
        }
        return schema.maximum;
    };
    /**
     * Sets a component variable to track confirm fields for encrypted values.
     * This is so we can allow the form to have encrypted values entered twice such that a user doesn't fat finger it.
     * @param globalType DeviceApi to check for encrypted fields.
     */
    GlobalsModalComponent.prototype._getEncryptedConfirmFields = function (globalType) {
        var _this = this;
        this.encryptedConfirmFields = {};
        globalType.fields.forEach(function (field) {
            if (field.encrypted) {
                _this.encryptedConfirmFields[field.name] = '';
            }
        });
    };
    /**
     * Returns a field with the default value specified if possible.
     * @param deviceApi Global Api to check against
     */
    GlobalsModalComponent.prototype._getDefaultValues = function (deviceApi) {
        var out = {};
        deviceApi.fields.forEach(function (field) {
            if (field.schema.default) {
                out[field.name] = field.schema.default;
            }
            else {
                out[field.name] = null;
            }
        });
        return out;
    };
    /**
     * Clears all of our global type data. Used if we switch global types or selected app.
     */
    GlobalsModalComponent.prototype._clearGlobalTypeData = function () {
        this.selectedGlobalType = null;
        this.workingGlobal.type = null;
        this.workingGlobal.fields = null;
        this.validationErrors = {};
        this.encryptedConfirmFields = {};
    };
    /**
     * For a given field key in our validationErrors object, add message to the end of the existing message.
     * @param field Field name to concat validation messages for
     * @param message Message to concat
     */
    GlobalsModalComponent.prototype._concatValidationMessage = function (field, message) {
        if (this.validationErrors[field]) {
            this.validationErrors[field] += '\n' + message;
        }
        else {
            this.validationErrors[field] = message;
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _models_workingGlobal__WEBPACK_IMPORTED_MODULE_5__["WorkingGlobal"])
    ], GlobalsModalComponent.prototype, "workingGlobal", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], GlobalsModalComponent.prototype, "title", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], GlobalsModalComponent.prototype, "submitText", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], GlobalsModalComponent.prototype, "appNames", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], GlobalsModalComponent.prototype, "appApis", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('typeRef'),
        __metadata("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"])
    ], GlobalsModalComponent.prototype, "typeRef", void 0);
    GlobalsModalComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'global-modal',
            template: __webpack_require__(/*! ./globals.modal.html */ "./src/app/globals/globals.modal.html"),
            styles: [__webpack_require__(/*! ./globals.scss */ "./src/app/globals/globals.scss")],
            providers: [_globals_service__WEBPACK_IMPORTED_MODULE_3__["GlobalsService"], _utilities_service__WEBPACK_IMPORTED_MODULE_4__["UtilitiesService"]],
        }),
        __metadata("design:paramtypes", [_globals_service__WEBPACK_IMPORTED_MODULE_3__["GlobalsService"], _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__["NgbActiveModal"],
            ngx_toastr__WEBPACK_IMPORTED_MODULE_2__["ToastrService"], _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"]])
    ], GlobalsModalComponent);
    return GlobalsModalComponent;
}());



/***/ }),

/***/ "./src/app/globals/globals.modal.html":
/*!********************************************!*\
  !*** ./src/app/globals/globals.modal.html ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal-header\">\r\n\t<h4 class=\"modal-title\">{{title}}</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n\t<div class=\"container-fluid\">\r\n\t\t<form id=\"globalForm\" #globalForm=\"ngForm\" (ngSubmit)=\"submit()\">\r\n\t\t\t<div class=\"row\">\r\n\t\t\t\t<div class=\"col-6\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"name\">Name<i class=\"fa fa-asterisk required\" title=\"This field is required.\"></i></label>\r\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" [(ngModel)]=\"workingGlobal.name\" #name=\"ngModel\" name=\"name\" required tabindex=\"1\">\r\n\t\t\t\t\t\t<div *ngIf=\"name.errors && (name.dirty || name.touched)\" class=\"alert alert-danger\">\r\n\t\t\t\t\t\t\t<div [hidden]=\"!name.errors.required\">\r\n\t\t\t\t\t\t\t\tName is required.\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"app_name\">Associated App<i class=\"fa fa-asterisk required\" title=\"This field is required.\"></i></label>\r\n\t\t\t\t\t\t<select class=\"form-control\" [ngModel]=\"workingGlobal.app_name\" #app=\"ngModel\" (change)=\"handleAppSelection($event, $event.target.value)\" \r\n\t\t\t\t\t\t [disabled]=\"workingGlobal.id\" name=\"app_name\" tabindex=\"3\" required>\r\n\t\t\t\t\t\t\t<option value=\"\"></option>\r\n\t\t\t\t\t\t\t<option *ngFor=\"let i of appNames\" [value]=\"i\" [label]=\"i\">{{i}}</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t<div *ngIf=\"app.errors && (app.dirty || app.touched)\" class=\"alert alert-danger\">\r\n\t\t\t\t\t\t\t<div [hidden]=\"!app.errors.required\">\r\n\t\t\t\t\t\t\t\tApp is required.\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"col-6\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"description\">Description</label>\r\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" [(ngModel)]=\"workingGlobal.description\" name=\"ip\" tabindex=\"2\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"type\">Global Type<i class=\"fa fa-asterisk required\" title=\"This field is required.\"></i></label>\r\n\t\t\t\t\t\t<select class=\"form-control\" [ngModel]=\"workingGlobal.type\" #typeRef #type=\"ngModel\" (change)=\"handleGlobalTypeSelection(null, $event.target.value)\"\r\n\t\t\t\t\t\t name=\"type\" tabindex=\"4\" required>\r\n\t\t\t\t\t\t\t<option value=\"\"></option>\r\n\t\t\t\t\t\t\t<option *ngFor=\"let i of globalTypesForApp\" [value]=\"i.name\" [label]=\"i.name\">{{i.name}}</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t<div *ngIf=\"type.errors && (type.dirty || type.touched)\" class=\"alert alert-danger\">\r\n\t\t\t\t\t\t\t<div [hidden]=\"!type.errors.required\">\r\n\t\t\t\t\t\t\t\tGlobal type is required.\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<ng-container *ngIf=\"selectedGlobalType\">\r\n\t\t\t\t<div *ngFor=\"let i of selectedGlobalType.fields\" class=\"form-group\">\r\n\t\t\t\t\t<label for=\"{{i.name}}\">\r\n\t\t\t\t\t\t{{i.name}}\r\n\t\t\t\t\t\t<i *ngIf=\"i.description != null\" class=\"fa fa-info-circle\" [title]=\"i.description\"></i>\r\n\t\t\t\t\t\t<i *ngIf=\"i.required\" class=\"fa fa-asterisk required\" title=\"This field is required.\"></i>\r\n\t\t\t\t\t\t<i *ngIf=\"i.encrypted\" class=\"fa fa-lock\"\r\n\t\t\t\t\t\t title=\"This field will be encrypted at rest and will not be returned to the client for viewing or editing.\"></i>\r\n\t\t\t\t\t\t<!-- If we have an encrypted field AND this is an edit AND there is an encrypted value on the server, allow the user to clear it if it's not required -->\r\n\t\t\t\t\t\t<div *ngIf=\"workingGlobal.id && i.encrypted && workingGlobal.fields[i.name] !== undefined\" class=\"form-check form-check-inline\">\r\n\t\t\t\t\t\t\t<label class=\"form-check-label\">\r\n\t\t\t\t\t\t\t\tClear Existing Value\r\n\t\t\t\t\t\t\t\t<input class=\"form-check-input\" type=\"checkbox\" id=\"inlineCheckbox1\" value=\"option1\" \r\n\t\t\t\t\t\t\t\t(change)=\"handleEncryptedFieldClear(i.name, $event.target.checked)\">\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t<!-- Normal string text entries -->\r\n\t\t\t\t\t<input *ngIf=\"i.schema.type === 'string' && !i.schema.enum\" class=\"form-control\" name=\"{{i.name}}\" [(ngModel)]=\"workingGlobal.fields[i.name]\"\r\n\t\t\t\t\t [attr.type]=\"i.encrypted ? 'password' : 'text'\" [attr.minlength]=\"i.schema.minLength > 0 ? i.schema.minLength : null\"\r\n\t\t\t\t\t [attr.maxlength]=\"i.schema.maxLength > 0 ? i.schema.maxLength : null\"\r\n\t\t\t\t\t [attr.pattern]=\"i.schema.pattern ? i.schema.pattern : null\" [attr.required]=\"i.required\"\r\n\t\t\t\t\t [disabled]=\"encryptedFieldsToBeCleared[i.name]\" [attr.placeholder]=\"i.placeholder\">\r\n\r\n\t\t\t\t\t<!-- Enum types, make a select box -->\r\n\t\t\t\t\t<select *ngIf=\"i.schema.enum\" class=\"form-control\" name=\"{{i.name}}\" [(ngModel)]=\"workingGlobal.fields[i.name]\"\r\n\t\t\t\t\t[attr.required]=\"i.required\">\r\n\t\t\t\t\t\t<option *ngIf=\"!i.required\" value=\"\"></option>\r\n\t\t\t\t\t\t<option *ngFor=\"let i of i.schema.enum\" [value]=\"i\" [label]=\"i\">{{i}}</option>\r\n\t\t\t\t\t</select>\r\n\r\n\t\t\t\t\t<!-- For numbers enter number info -->\r\n\t\t\t\t\t<input *ngIf=\"i.schema.type === 'number' || i.schema.type === 'integer'\" class=\"form-control\" name=\"{{i.name}}\"\r\n\t\t\t\t\t [(ngModel)]=\"workingGlobal.fields[i.name]\" type=\"number\" [attr.min]=\"getMin(i.schema)\" [attr.max]=\"getMax(i.schema)\"\r\n\t\t\t\t\t [attr.step]=\"i.schema.multipleOf > 0 ? i.schema.multipleOf : null\" [attr.required]=\"i.required\"\r\n\t\t\t\t\t [attr.placeholder]=\"i.placeholder\">\r\n\r\n\t\t\t\t\t<!-- Checkbox for boolean values -->\r\n\t\t\t\t\t<input *ngIf=\"i.schema.type === 'boolean'\" type=\"checkbox\" class=\"form-control\" name=\"{{i.name}}\" [(ngModel)]=\"workingGlobal.fields[i.name]\">\r\n\r\n\t\t\t\t\t<!-- Repeat input for encrypted fields -->\r\n\t\t\t\t\t<ng-container *ngIf=\"encryptedConfirmFields[i.name] !== undefined\">\r\n\t\t\t\t\t\t<label for=\"_{{i.name}}\" class=\"confirmLabel\">Repeat {{i.name}}</label>\r\n\t\t\t\t\t\t<input type=\"password\" class=\"form-control\" name=\"_{{i.name}}\" [(ngModel)]=\"encryptedConfirmFields[i.name]\"\r\n\t\t\t\t\t\t[disabled]=\"encryptedFieldsToBeCleared[i.name]\" placeholder=\"Enter the value for {{i.name}} again\" required>\r\n\t\t\t\t\t</ng-container>\r\n\r\n\t\t\t\t\t<!-- Validation errors go here if they exist -->\r\n\t\t\t\t\t<div *ngIf=\"validationErrors[i.name]\" class=\"alert alert-danger\">\r\n\t\t\t\t\t\t{{validationErrors[i.name]}}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</ng-container>\r\n\t\t</form>\r\n\t</div>\r\n</div>\r\n<div class=\"modal-footer\">\r\n\t<button type=\"button\" class=\"btn btn-secondary\" (click)=\"activeModal.dismiss()\">Undo Changes and Close</button>\r\n\t<button type=\"button\" class=\"btn btn-primary\" [disabled]=\"!isBasicInfoValid()\" (click)=\"submit()\">{{submitText}}</button>\r\n</div>"

/***/ }),

/***/ "./src/app/globals/globals.scss":
/*!**************************************!*\
  !*** ./src/app/globals/globals.scss ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "#main.globalsMain {\n  padding: 10px 15px; }\n\n.globalsMain ngx-datatable datatable-body datatable-body-row datatable-body-cell .datatable-body-cell-label {\n  white-space: initial; }\n\n#globalForm input[type=checkbox].form-control {\n  width: 34px;\n  margin: 0 5px; }\n\n#globalForm .confirmLabel {\n  margin-top: 15px; }\n\n#globalForm .required {\n  color: crimson; }\n\n#globalForm .fa {\n  margin-left: 5px; }\n"

/***/ }),

/***/ "./src/app/globals/globals.service.ts":
/*!********************************************!*\
  !*** ./src/app/globals/globals.service.ts ***!
  \********************************************/
/*! exports provided: GlobalsService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GlobalsService", function() { return GlobalsService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _models_api_appApi__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../models/api/appApi */ "./src/app/models/api/appApi.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var _models_variable__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../models/variable */ "./src/app/models/variable.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var GlobalsService = /** @class */ (function () {
    function GlobalsService(http, utils) {
        var _this = this;
        this.http = http;
        this.utils = utils;
        this.globalsChange = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Observable"](function (observer) {
            _this.observer = observer;
            _this.getAllGlobals().then(function (globals) { return _this.observer.next(globals); });
        });
    }
    GlobalsService.prototype.emitChange = function (data) {
        var _this = this;
        if (this.observer)
            this.getAllGlobals().then(function (globals) { return _this.observer.next(globals); });
        return data;
    };
    /**
     * Asynchronously returns an array of all existing globals from the server.
     */
    GlobalsService.prototype.getAllGlobals = function () {
        return this.utils.paginateAll(this.getGlobals.bind(this));
    };
    /**
     * Asynchronously returns an array of existing globals from the server.
     */
    GlobalsService.prototype.getGlobals = function (page) {
        if (page === void 0) { page = 1; }
        return this.http.get("/api/globals?page=" + page)
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["plainToClass"])(_models_variable__WEBPACK_IMPORTED_MODULE_6__["Variable"], data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Asynchronously sends a global to be added to the DB and returns the added global.
     * @param global Global to add
     */
    GlobalsService.prototype.addGlobal = function (global) {
        var _this = this;
        return this.http.post('/api/globals', Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["classToPlain"])(global))
            .toPromise()
            .then(function (data) { return _this.emitChange(data); })
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["plainToClass"])(_models_variable__WEBPACK_IMPORTED_MODULE_6__["Variable"], data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Asynchronously sends a global to be updated within the DB and returns the edited global.
     * @param global Global to edit
     */
    GlobalsService.prototype.editGlobal = function (global) {
        var _this = this;
        return this.http.put("/api/globals/" + global.id, Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["classToPlain"])(global))
            .toPromise()
            .then(function (data) { return _this.emitChange(data); })
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["plainToClass"])(_models_variable__WEBPACK_IMPORTED_MODULE_6__["Variable"], data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Asyncronously deletes a global from the DB and simply returns success.
     * @param global Global to delete
     */
    GlobalsService.prototype.deleteGlobal = function (global) {
        var _this = this;
        return this.http.delete("/api/globals/" + global.id)
            .toPromise()
            .then(function (data) { return _this.emitChange(data); })
            .then(function () { return null; })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Asynchronously returns a list of AppApi objects for all our loaded Apps.
     * AppApi objects are scoped to only contain global apis.
     */
    GlobalsService.prototype.getGlobalApis = function () {
        return this.http.get('api/apps/apis?field_name=device_apis')
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["plainToClass"])(_models_api_appApi__WEBPACK_IMPORTED_MODULE_3__["AppApi"], data); })
            // Clear out any apps without global apis
            .then(function (appApis) { return appApis.filter(function (a) { return a.device_apis && a.device_apis.length; }); })
            .catch(this.utils.handleResponseError);
    };
    GlobalsService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])({
            providedIn: 'root'
        }),
        __metadata("design:paramtypes", [_angular_common_http__WEBPACK_IMPORTED_MODULE_1__["HttpClient"], _utilities_service__WEBPACK_IMPORTED_MODULE_4__["UtilitiesService"]])
    ], GlobalsService);
    return GlobalsService;
}());



/***/ }),

/***/ "./src/app/globals/variable.modal.component.ts":
/*!*****************************************************!*\
  !*** ./src/app/globals/variable.modal.component.ts ***!
  \*****************************************************/
/*! exports provided: VariableModalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VariableModalComponent", function() { return VariableModalComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var _models_variable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../models/variable */ "./src/app/models/variable.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var VariableModalComponent = /** @class */ (function () {
    function VariableModalComponent(activeModal) {
        this.activeModal = activeModal;
        this.variable = new _models_variable__WEBPACK_IMPORTED_MODULE_2__["Variable"]();
        this.isGlobal = false;
        this.existing = false;
    }
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _models_variable__WEBPACK_IMPORTED_MODULE_2__["Variable"])
    ], VariableModalComponent.prototype, "variable", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean)
    ], VariableModalComponent.prototype, "isGlobal", void 0);
    VariableModalComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'variable-modal-component',
            template: __webpack_require__(/*! ./variable.modal.html */ "./src/app/globals/variable.modal.html"),
        }),
        __metadata("design:paramtypes", [_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__["NgbActiveModal"]])
    ], VariableModalComponent);
    return VariableModalComponent;
}());



/***/ }),

/***/ "./src/app/globals/variable.modal.html":
/*!*********************************************!*\
  !*** ./src/app/globals/variable.modal.html ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal-header\">\r\n    <h4 class=\"modal-title\">{{ existing ? 'Edit' : 'Add' }} {{ isGlobal ? 'Global' : 'Workflow' }} Variable</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n    <div class=\"container-fluid\">\r\n        <div class=\"row\">\r\n            <div class=\"col-12\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"name\">Name</label>\r\n                    <input name=\"name\" type=\"text\" [(ngModel)]=\"variable.name\" class=\"form-control\">\r\n                </div>\r\n            </div>\r\n            <div class=\"col-12\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"value\">{{ isGlobal ? 'Value' : 'Default Value'}}</label>\r\n                    <input name=\"value\" type=\"text\" [(ngModel)]=\"variable.value\" class=\"form-control\">\r\n                </div>\r\n            </div>\r\n            <div class=\"col-12\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"description\">Description (optional)</label>\r\n                    <textarea name=\"description\" rows=\"4\" [(ngModel)]=\"variable.description\" class=\"form-control\"></textarea>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"modal-footer\">\r\n    <button type=\"button\" class=\"btn btn-secondary\" (click)=\"activeModal.dismiss()\">Close</button>\r\n    <button type=\"button\" class=\"btn btn-primary\" (click)=\"activeModal.close(variable)\">Save</button>\r\n</div>"

/***/ }),

/***/ "./src/app/main.module.ts":
/*!********************************!*\
  !*** ./src/app/main.module.ts ***!
  \********************************/
/*! exports provided: MainModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MainModule", function() { return MainModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var _swimlane_ngx_datatable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @swimlane/ngx-datatable */ "./node_modules/@swimlane/ngx-datatable/release/index.js");
/* harmony import */ var _swimlane_ngx_datatable__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_swimlane_ngx_datatable__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var ng2_select2__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ng2-select2 */ "./node_modules/ng2-select2/ng2-select2.js");
/* harmony import */ var ng2_select2__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(ng2_select2__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var ngx_clipboard__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-clipboard */ "./node_modules/ngx-clipboard/fesm5/ngx-clipboard.js");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./auth/auth.service */ "./src/app/auth/auth.service.ts");
/* harmony import */ var _auth0_angular_jwt__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @auth0/angular-jwt */ "./node_modules/@auth0/angular-jwt/index.js");
/* harmony import */ var _refresh_token_interceptor__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./refresh-token-interceptor */ "./src/app/refresh-token-interceptor.ts");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var ng_pick_datetime__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ng-pick-datetime */ "./node_modules/ng-pick-datetime/picker.module.js");
/* harmony import */ var ng_pick_datetime__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(ng_pick_datetime__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var ng2_dnd__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ng2-dnd */ "./node_modules/ng2-dnd/ng2-dnd.es5.js");
/* harmony import */ var _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/platform-browser/animations */ "./node_modules/@angular/platform-browser/fesm5/animations.js");
/* harmony import */ var ngx_toastr__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ngx-toastr */ "./node_modules/ngx-toastr/fesm5/ngx-toastr.js");
/* harmony import */ var angular_gridster2__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! angular-gridster2 */ "./node_modules/angular-gridster2/fesm5/angular-gridster2.js");
/* harmony import */ var ng2_charts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ng2-charts */ "./node_modules/ng2-charts/index.js");
/* harmony import */ var ng2_charts__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(ng2_charts__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var ang_jsoneditor__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ang-jsoneditor */ "./node_modules/ang-jsoneditor/fesm5/ang-jsoneditor.js");
/* harmony import */ var _ctrl_ngx_codemirror__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @ctrl/ngx-codemirror */ "./node_modules/@ctrl/ngx-codemirror/fesm5/ctrl-ngx-codemirror.js");
/* harmony import */ var codemirror_mode_shell_shell__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! codemirror/mode/shell/shell */ "./node_modules/codemirror/mode/shell/shell.js");
/* harmony import */ var codemirror_mode_shell_shell__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(codemirror_mode_shell_shell__WEBPACK_IMPORTED_MODULE_19__);
/* harmony import */ var codemirror_mode_python_python__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! codemirror/mode/python/python */ "./node_modules/codemirror/mode/python/python.js");
/* harmony import */ var codemirror_mode_python_python__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(codemirror_mode_python_python__WEBPACK_IMPORTED_MODULE_20__);
/* harmony import */ var codemirror_addon_display_placeholder__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! codemirror/addon/display/placeholder */ "./node_modules/codemirror/addon/display/placeholder.js");
/* harmony import */ var codemirror_addon_display_placeholder__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(codemirror_addon_display_placeholder__WEBPACK_IMPORTED_MODULE_21__);
/* harmony import */ var _routing__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./routing */ "./src/app/routing.ts");
/* harmony import */ var _main_main_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./main/main.component */ "./src/app/main/main.component.ts");
/* harmony import */ var _scheduler_scheduler_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./scheduler/scheduler.component */ "./src/app/scheduler/scheduler.component.ts");
/* harmony import */ var _playbook_playbook_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./playbook/playbook.component */ "./src/app/playbook/playbook.component.ts");
/* harmony import */ var _globals_globals_component__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./globals/globals.component */ "./src/app/globals/globals.component.ts");
/* harmony import */ var _messages_messages_component__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./messages/messages.component */ "./src/app/messages/messages.component.ts");
/* harmony import */ var _metrics_metrics_component__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./metrics/metrics.component */ "./src/app/metrics/metrics.component.ts");
/* harmony import */ var _settings_settings_component__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./settings/settings.component */ "./src/app/settings/settings.component.ts");
/* harmony import */ var _dashboards_dashboards_component__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./dashboards/dashboards.component */ "./src/app/dashboards/dashboards.component.ts");
/* harmony import */ var _execution_execution_component__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./execution/execution.component */ "./src/app/execution/execution.component.ts");
/* harmony import */ var _buckets_buckets_component__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./buckets/buckets.component */ "./src/app/buckets/buckets.component.ts");
/* harmony import */ var _buckets_triggers_modal_component__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./buckets/triggers.modal.component */ "./src/app/buckets/triggers.modal.component.ts");
/* harmony import */ var _scheduler_scheduler_modal_component__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./scheduler/scheduler.modal.component */ "./src/app/scheduler/scheduler.modal.component.ts");
/* harmony import */ var _globals_globals_modal_component__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./globals/globals.modal.component */ "./src/app/globals/globals.modal.component.ts");
/* harmony import */ var _buckets_buckets_modal_component__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./buckets/buckets.modal.component */ "./src/app/buckets/buckets.modal.component.ts");
/* harmony import */ var _globals_variable_modal_component__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./globals/variable.modal.component */ "./src/app/globals/variable.modal.component.ts");
/* harmony import */ var _settings_settings_user_modal_component__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./settings/settings.user.modal.component */ "./src/app/settings/settings.user.modal.component.ts");
/* harmony import */ var _settings_settings_roles_modal_component__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./settings/settings.roles.modal.component */ "./src/app/settings/settings.roles.modal.component.ts");
/* harmony import */ var _settings_settings_timeout_modal_component__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./settings/settings.timeout.modal.component */ "./src/app/settings/settings.timeout.modal.component.ts");
/* harmony import */ var _execution_execution_variable_modal_component__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./execution/execution.variable.modal.component */ "./src/app/execution/execution.variable.modal.component.ts");
/* harmony import */ var _playbook_playbook_environment_variable_modal_component__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./playbook/playbook.environment.variable.modal.component */ "./src/app/playbook/playbook.environment.variable.modal.component.ts");
/* harmony import */ var _playbook_playbook_argument_component__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./playbook/playbook.argument.component */ "./src/app/playbook/playbook.argument.component.ts");
/* harmony import */ var _playbook_playbook_conditions_component__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./playbook/playbook.conditions.component */ "./src/app/playbook/playbook.conditions.component.ts");
/* harmony import */ var _playbook_playbook_transforms_component__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./playbook/playbook.transforms.component */ "./src/app/playbook/playbook.transforms.component.ts");
/* harmony import */ var _playbook_playbook_conditional_expression_component__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./playbook/playbook.conditional.expression.component */ "./src/app/playbook/playbook.conditional.expression.component.ts");
/* harmony import */ var _settings_settings_roles_component__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./settings/settings.roles.component */ "./src/app/settings/settings.roles.component.ts");
/* harmony import */ var _messages_messages_modal_component__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./messages/messages.modal.component */ "./src/app/messages/messages.modal.component.ts");
/* harmony import */ var _pipes_keys_pipe__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ./pipes/keys.pipe */ "./src/app/pipes/keys.pipe.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./utilities.service */ "./src/app/utilities.service.ts");
/* harmony import */ var _dashboards_manage_dashboards_component__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./dashboards/manage.dashboards.component */ "./src/app/dashboards/manage.dashboards.component.ts");
/* harmony import */ var _dashboards_widget_modal_component__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ./dashboards/widget.modal.component */ "./src/app/dashboards/widget.modal.component.ts");
/* harmony import */ var _pipes_safeEmbed_pipe__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ./pipes/safeEmbed.pipe */ "./src/app/pipes/safeEmbed.pipe.ts");
/* harmony import */ var _playbook_workflow_editor_component__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ./playbook/workflow.editor.component */ "./src/app/playbook/workflow.editor.component.ts");
/* harmony import */ var _playbook_metadata_modal_component__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ./playbook/metadata.modal.component */ "./src/app/playbook/metadata.modal.component.ts");
/* harmony import */ var _playbook_import_modal_component__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ./playbook/import.modal.component */ "./src/app/playbook/import.modal.component.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};






















// Custom routing module



































var MainModule = /** @class */ (function () {
    function MainModule() {
    }
    MainModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"])({
            imports: [
                _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormsModule"],
                _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__["BrowserModule"],
                _angular_common_http__WEBPACK_IMPORTED_MODULE_10__["HttpClientModule"],
                _angular_forms__WEBPACK_IMPORTED_MODULE_2__["ReactiveFormsModule"],
                _auth0_angular_jwt__WEBPACK_IMPORTED_MODULE_8__["JwtModule"].forRoot({
                    config: {
                        tokenGetter: _refresh_token_interceptor__WEBPACK_IMPORTED_MODULE_9__["jwtTokenGetter"],
                        blacklistedRoutes: ['/login', '/api/auth', '/api/auth/logout', '/api/auth/refresh']
                    }
                }),
                _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_3__["NgbModule"],
                _routing__WEBPACK_IMPORTED_MODULE_22__["RoutingModule"],
                ng2_select2__WEBPACK_IMPORTED_MODULE_5__["Select2Module"],
                ngx_clipboard__WEBPACK_IMPORTED_MODULE_6__["ClipboardModule"],
                _swimlane_ngx_datatable__WEBPACK_IMPORTED_MODULE_4__["NgxDatatableModule"],
                ng_pick_datetime__WEBPACK_IMPORTED_MODULE_11__["DateTimePickerModule"],
                ng2_dnd__WEBPACK_IMPORTED_MODULE_12__["DndModule"].forRoot(),
                _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_13__["BrowserAnimationsModule"],
                ngx_toastr__WEBPACK_IMPORTED_MODULE_14__["ToastrModule"].forRoot({ positionClass: 'toast-bottom-right', enableHtml: true, onActivateTick: true }),
                angular_gridster2__WEBPACK_IMPORTED_MODULE_15__["GridsterModule"],
                ng2_charts__WEBPACK_IMPORTED_MODULE_16__["ChartsModule"],
                _ctrl_ngx_codemirror__WEBPACK_IMPORTED_MODULE_18__["CodemirrorModule"],
                ang_jsoneditor__WEBPACK_IMPORTED_MODULE_17__["NgJsonEditorModule"]
            ],
            declarations: [
                //Main component
                _main_main_component__WEBPACK_IMPORTED_MODULE_23__["MainComponent"],
                //Router module components
                _playbook_playbook_component__WEBPACK_IMPORTED_MODULE_25__["PlaybookComponent"],
                _playbook_workflow_editor_component__WEBPACK_IMPORTED_MODULE_54__["WorkflowEditorComponent"],
                _scheduler_scheduler_component__WEBPACK_IMPORTED_MODULE_24__["SchedulerComponent"],
                _globals_globals_component__WEBPACK_IMPORTED_MODULE_26__["GlobalsComponent"],
                _messages_messages_component__WEBPACK_IMPORTED_MODULE_27__["MessagesComponent"],
                _metrics_metrics_component__WEBPACK_IMPORTED_MODULE_28__["MetricsComponent"],
                _settings_settings_component__WEBPACK_IMPORTED_MODULE_29__["SettingsComponent"],
                _dashboards_dashboards_component__WEBPACK_IMPORTED_MODULE_30__["DashboardsComponent"],
                _execution_execution_component__WEBPACK_IMPORTED_MODULE_31__["ExecutionComponent"],
                _buckets_buckets_component__WEBPACK_IMPORTED_MODULE_32__["BucketsComponent"],
                //Modals
                _scheduler_scheduler_modal_component__WEBPACK_IMPORTED_MODULE_34__["SchedulerModalComponent"],
                _globals_globals_modal_component__WEBPACK_IMPORTED_MODULE_35__["GlobalsModalComponent"],
                _buckets_buckets_modal_component__WEBPACK_IMPORTED_MODULE_36__["BucketsModalComponent"],
                _globals_variable_modal_component__WEBPACK_IMPORTED_MODULE_37__["VariableModalComponent"],
                _settings_settings_user_modal_component__WEBPACK_IMPORTED_MODULE_38__["SettingsUserModalComponent"],
                _settings_settings_roles_modal_component__WEBPACK_IMPORTED_MODULE_39__["SettingsRoleModalComponent"],
                _settings_settings_timeout_modal_component__WEBPACK_IMPORTED_MODULE_40__["SettingsTimeoutModalComponent"],
                _messages_messages_modal_component__WEBPACK_IMPORTED_MODULE_48__["MessagesModalComponent"],
                _playbook_playbook_environment_variable_modal_component__WEBPACK_IMPORTED_MODULE_42__["PlaybookEnvironmentVariableModalComponent"],
                _playbook_metadata_modal_component__WEBPACK_IMPORTED_MODULE_55__["MetadataModalComponent"],
                _playbook_import_modal_component__WEBPACK_IMPORTED_MODULE_56__["ImportModalComponent"],
                _execution_execution_variable_modal_component__WEBPACK_IMPORTED_MODULE_41__["ExecutionVariableModalComponent"],
                _buckets_triggers_modal_component__WEBPACK_IMPORTED_MODULE_33__["TriggersModalComponent"],
                // Other subcomponents
                _playbook_playbook_argument_component__WEBPACK_IMPORTED_MODULE_43__["PlaybookArgumentComponent"],
                _playbook_playbook_conditions_component__WEBPACK_IMPORTED_MODULE_44__["PlaybookConditionsComponent"],
                _playbook_playbook_transforms_component__WEBPACK_IMPORTED_MODULE_45__["PlaybookTransformsComponent"],
                _playbook_playbook_conditional_expression_component__WEBPACK_IMPORTED_MODULE_46__["PlaybookConditionalExpressionComponent"],
                _settings_settings_roles_component__WEBPACK_IMPORTED_MODULE_47__["SettingsRolesComponent"],
                // Pipes
                _pipes_keys_pipe__WEBPACK_IMPORTED_MODULE_49__["KeysPipe"],
                _dashboards_manage_dashboards_component__WEBPACK_IMPORTED_MODULE_51__["ManageDashboardsComponent"],
                _pipes_safeEmbed_pipe__WEBPACK_IMPORTED_MODULE_53__["SafeEmbedPipe"],
                _dashboards_widget_modal_component__WEBPACK_IMPORTED_MODULE_52__["WidgetModalComponent"],
            ],
            providers: [
                _utilities_service__WEBPACK_IMPORTED_MODULE_50__["UtilitiesService"],
                _auth_auth_service__WEBPACK_IMPORTED_MODULE_7__["AuthService"],
                _auth0_angular_jwt__WEBPACK_IMPORTED_MODULE_8__["JwtInterceptor"],
                {
                    provide: _angular_common_http__WEBPACK_IMPORTED_MODULE_10__["HTTP_INTERCEPTORS"],
                    useExisting: _auth0_angular_jwt__WEBPACK_IMPORTED_MODULE_8__["JwtInterceptor"],
                    multi: true
                },
                {
                    provide: _angular_common_http__WEBPACK_IMPORTED_MODULE_10__["HTTP_INTERCEPTORS"],
                    useClass: _refresh_token_interceptor__WEBPACK_IMPORTED_MODULE_9__["RefreshTokenInterceptor"],
                    multi: true
                }
            ],
            entryComponents: [
                _scheduler_scheduler_modal_component__WEBPACK_IMPORTED_MODULE_34__["SchedulerModalComponent"],
                _globals_globals_modal_component__WEBPACK_IMPORTED_MODULE_35__["GlobalsModalComponent"],
                _globals_variable_modal_component__WEBPACK_IMPORTED_MODULE_37__["VariableModalComponent"],
                _buckets_buckets_modal_component__WEBPACK_IMPORTED_MODULE_36__["BucketsModalComponent"],
                _buckets_triggers_modal_component__WEBPACK_IMPORTED_MODULE_33__["TriggersModalComponent"],
                _settings_settings_user_modal_component__WEBPACK_IMPORTED_MODULE_38__["SettingsUserModalComponent"],
                _settings_settings_roles_modal_component__WEBPACK_IMPORTED_MODULE_39__["SettingsRoleModalComponent"],
                _settings_settings_timeout_modal_component__WEBPACK_IMPORTED_MODULE_40__["SettingsTimeoutModalComponent"],
                _messages_messages_modal_component__WEBPACK_IMPORTED_MODULE_48__["MessagesModalComponent"],
                _execution_execution_variable_modal_component__WEBPACK_IMPORTED_MODULE_41__["ExecutionVariableModalComponent"],
                _playbook_playbook_environment_variable_modal_component__WEBPACK_IMPORTED_MODULE_42__["PlaybookEnvironmentVariableModalComponent"],
                _playbook_import_modal_component__WEBPACK_IMPORTED_MODULE_56__["ImportModalComponent"],
                _playbook_metadata_modal_component__WEBPACK_IMPORTED_MODULE_55__["MetadataModalComponent"],
                _dashboards_widget_modal_component__WEBPACK_IMPORTED_MODULE_52__["WidgetModalComponent"]
            ],
            bootstrap: [_main_main_component__WEBPACK_IMPORTED_MODULE_23__["MainComponent"]],
        })
    ], MainModule);
    return MainModule;
}());



/***/ }),

/***/ "./src/app/main/main.component.ts":
/*!****************************************!*\
  !*** ./src/app/main/main.component.ts ***!
  \****************************************/
/*! exports provided: MainComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MainComponent", function() { return MainComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var ngx_toastr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngx-toastr */ "./node_modules/ngx-toastr/fesm5/ngx-toastr.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _messages_messages_modal_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../messages/messages.modal.component */ "./src/app/messages/messages.modal.component.ts");
/* harmony import */ var _main_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./main.service */ "./src/app/main/main.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../auth/auth.service */ "./src/app/auth/auth.service.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
/* harmony import */ var _models_message_messageUpdate__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../models/message/messageUpdate */ "./src/app/models/message/messageUpdate.ts");
/* harmony import */ var _models_message_messageListing__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../models/message/messageListing */ "./src/app/models/message/messageListing.ts");
/* harmony import */ var _dashboards_dashboard_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../dashboards/dashboard.service */ "./src/app/dashboards/dashboard.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











var MAX_READ_MESSAGES = 5;
var MAX_TOTAL_MESSAGES = 20;
var MainComponent = /** @class */ (function () {
    function MainComponent(mainService, authService, modalService, toastrService, utils, dashboardService) {
        this.mainService = mainService;
        this.authService = authService;
        this.modalService = modalService;
        this.toastrService = toastrService;
        this.utils = utils;
        this.dashboardService = dashboardService;
        this.dashboards = [];
        this.messageListings = [];
        this.newMessagesCount = 0;
        this.notificationRelativeTimes = {};
        /* Hack along with styles.scss for modal animations in ng-bootstrap */
        _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__["NgbModalRef"].prototype['c'] = _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__["NgbModalRef"].prototype.close;
        _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__["NgbModalRef"].prototype.close = function (reason) {
            var _this = this;
            document.querySelector('.modal-backdrop').classList.remove('show');
            document.querySelector('.modal.show').classList.remove('show');
            setTimeout(function () {
                _this['c'](reason);
            }, 250);
        };
        _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__["NgbModalRef"].prototype['d'] = _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__["NgbModalRef"].prototype.dismiss;
        _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__["NgbModalRef"].prototype.dismiss = function (reason) {
            var _this = this;
            document.querySelector('.modal-backdrop').classList.remove('show');
            document.querySelector('.modal.show').classList.remove('show');
            setTimeout(function () {
                _this['d'](reason);
            }, 250);
        };
    }
    /**
     * On init, set the current user from our JWT.
     * Get a list of interface names that are installed. Get initial notifications for display.
     * Set up an SSE for handling new notifications.
     */
    MainComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.currentUser = this.authService.getAndDecodeAccessToken().user_claims.username;
        this.dashboardService.dashboardsChange.subscribe(function (dashboards) { return _this.dashboards = dashboards; });
        // this.getInitialNotifications();
        // this.getNotificationsSSE();
    };
    /**
     * Closes our SSEs on component destroy.
     */
    MainComponent.prototype.ngOnDestroy = function () {
        if (this.eventSource && this.eventSource.close) {
            this.eventSource.close();
        }
    };
    /**
     * Grabs a list of message listings for unread notifications (or some amount of read notifications).
     */
    MainComponent.prototype.getInitialNotifications = function () {
        var _this = this;
        this.mainService.getInitialNotifications()
            .then(function (messageListings) {
            _this.messageListings = messageListings.concat(_this.messageListings);
            _this._recalculateNewMessagesCount();
        })
            .catch(function (e) { return _this.toastrService.error("Error retrieving notifications: " + e.message); });
    };
    /**
     * Sets up an SSE for notifications. On new messages, add a notification to the notifications dropdown.
     * For existing messages, if they were responded to, remove the ! icon.
     */
    MainComponent.prototype.getNotificationsSSE = function () {
        var _this = this;
        this.authService.getEventSource('/api/streams/messages/notifications')
            .then(function (eventSource) {
            _this.eventSource = eventSource;
            _this.eventSource.addEventListener('created', function (message) {
                var newMessage = Object(class_transformer__WEBPACK_IMPORTED_MODULE_3__["plainToClass"])(_models_message_messageListing__WEBPACK_IMPORTED_MODULE_9__["MessageListing"], JSON.parse(message.data));
                var existingMessage = _this.messageListings.find(function (m) { return m.id === newMessage.id; });
                var index = _this.messageListings.indexOf(existingMessage);
                // If an existing message exists, replace it with the incoming message. Otherwise add it to the top of the array.
                if (index > -1) {
                    _this.messageListings[index] = newMessage;
                }
                else {
                    _this.messageListings.unshift(newMessage);
                }
                // Remove the oldest message that is read if we have too many (>5) read messages or too many total (>20)
                if (_this.messageListings.filter(function (m) { return m.is_read; }).length > MAX_READ_MESSAGES ||
                    _this.messageListings.length > MAX_TOTAL_MESSAGES) {
                    _this.messageListings.pop();
                }
                _this._recalculateNewMessagesCount();
                _this.recalculateRelativeTimes();
            });
            // TODO: re-enable this if we can figure out why componentInstance is throwing an error on get
            // eventSource.addEventListener('read', (message: any) => {
            // const update = plainToClass(MessageUpdate, (JSON.parse(message.data) as object));
            // 	if (!this.messageModalRef || !this.messageModalRef.componentInstance) { return; }
            // 	if (this.messageModalRef.componentInstance.message.id === update.id) {
            // 		(this.messageModalRef.componentInstance.message as Message).read_by.push(update.username);
            // 	}
            // });
            _this.eventSource.addEventListener('responded', function (message) {
                var update = Object(class_transformer__WEBPACK_IMPORTED_MODULE_3__["plainToClass"])(_models_message_messageUpdate__WEBPACK_IMPORTED_MODULE_8__["MessageUpdate"], JSON.parse(message.data));
                var existingMessage = _this.messageListings.find(function (m) { return m.id === update.id; });
                if (existingMessage) {
                    existingMessage.awaiting_response = false;
                }
                // TODO: re-enable this if we can figure out why componentInstance is throwing an error on get
                // if (!this.messageModalRef || !this.messageModalRef.componentInstance) { return; }
                // if (this.messageModalRef.componentInstance.message.id === update.id) {
                // 	(this.messageModalRef.componentInstance.message as Message).responded_at = update.timestamp;
                // 	(this.messageModalRef.componentInstance.message as Message).responded_by = update.username;
                // 	(this.messageModalRef.componentInstance.message as Message).awaiting_response = false;
                // }
            });
        });
    };
    /**
     * Calls the auth service logout method and redirects to login
     * TODO: should likely roll login into the main component so we don't need to do the location.href.
     */
    MainComponent.prototype.logout = function () {
        this.authService.logout()
            .then(function () { return location.href = '/login'; })
            .catch(function (e) { return console.error(e); });
    };
    /**
     * Gets the full message detail from the server and displays the message in a new modal.
     * @param event JS event fired from clicking the message link
     * @param messageListing Message Listing object to query.
     */
    MainComponent.prototype.openMessage = function (event, messageListing) {
        var _this = this;
        event.preventDefault();
        this.mainService.getMessage(messageListing.id)
            .then(function (message) {
            messageListing.is_read = true;
            messageListing.last_read_at = _this.utils.getCurrentIsoString();
            _this._recalculateNewMessagesCount();
            _this.messageModalRef = _this.modalService.open(_messages_messages_modal_component__WEBPACK_IMPORTED_MODULE_4__["MessagesModalComponent"]);
            _this.messageModalRef.componentInstance.message = _this.utils.cloneDeep(message);
            _this._handleModalClose(_this.messageModalRef);
        })
            .catch(function (e) { return _this.toastrService.error("Error opening message: " + e.message); });
    };
    /**
     * Recalculates the relative times displayed for notifications (e.g. "a minute ago").
     * Called when a new message is received and every time the notifications dropdown is opened/closed.
     */
    MainComponent.prototype.recalculateRelativeTimes = function () {
        var _this = this;
        this.messageListings.forEach(function (ml) {
            _this.notificationRelativeTimes[ml.id] = _this.utils.getRelativeLocalTime(ml.created_at);
        });
    };
    /**
     * Recalculates the number of new notifications to display.
     */
    MainComponent.prototype._recalculateNewMessagesCount = function () {
        this.newMessagesCount = this.messageListings.filter(function (m) { return !m.is_read; }).length;
    };
    /**
     * Doesn't do anything if the message modal is closed normally. Shows an error if the modal is dismissed erroneously.
     * @param modalRef Modal reference that is being closed
     */
    MainComponent.prototype._handleModalClose = function (modalRef) {
        var _this = this;
        modalRef.result
            .then(function (result) { return null; }, function (error) { if (error) {
            _this.toastrService.error(error.message);
        } });
    };
    MainComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'main-component',
            template: __webpack_require__(/*! ./main.html */ "./src/app/main/main.html"),
            styles: [__webpack_require__(/*! ./main.scss */ "./src/app/main/main.scss")],
            providers: [_main_service__WEBPACK_IMPORTED_MODULE_5__["MainService"], _auth_auth_service__WEBPACK_IMPORTED_MODULE_6__["AuthService"], _utilities_service__WEBPACK_IMPORTED_MODULE_7__["UtilitiesService"]],
        }),
        __metadata("design:paramtypes", [_main_service__WEBPACK_IMPORTED_MODULE_5__["MainService"], _auth_auth_service__WEBPACK_IMPORTED_MODULE_6__["AuthService"],
            _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__["NgbModal"], ngx_toastr__WEBPACK_IMPORTED_MODULE_2__["ToastrService"],
            _utilities_service__WEBPACK_IMPORTED_MODULE_7__["UtilitiesService"], _dashboards_dashboard_service__WEBPACK_IMPORTED_MODULE_10__["DashboardService"]])
    ], MainComponent);
    return MainComponent;
}());



/***/ }),

/***/ "./src/app/main/main.html":
/*!********************************!*\
  !*** ./src/app/main/main.html ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"wrapper\">\r\n\r\n  <!-- Main Header -->\r\n  <header>\r\n    <nav id=\"walkoffNav\" class=\"navbar navbar-expand-md navbar-dark\">\r\n      <a class=\"navbar-brand\" href=\"#\"><b>WALK</b>OFF</a>\r\n      <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarCollapse\" aria-controls=\"navbarCollapse\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n      </button>\r\n      <div class=\"collapse navbar-collapse\" id=\"navbarCollapse\">\r\n        <ul class=\"navbar-nav mr-auto\">\r\n          <li class=\"nav-item\">\r\n            <a class=\"nav-link\" routerLink=\"/workflows\" routerLinkActive=\"active\"><i class=\"fa fa-sitemap\"></i><span class=\"navLink\">Workflows</span></a>\r\n          </li>\r\n          <li class=\"nav-item dropdown\" routerLinkActive=\"active\">\r\n            <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"navbarDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n              <i class=\"fa fa-area-chart\"></i><span class=\"navLink\">Dashboards</span>\r\n            </a>\r\n            <div class=\"dropdown-menu border-0\" aria-labelledby=\"navbarDropdown\">\r\n              <a *ngFor=\"let dashboard of dashboards\" class=\"dropdown-item installedDashboard\" routerLink=\"/dashboard/{{dashboard.id}}\">\r\n                <span>{{ dashboard.name }}</span>\r\n              </a>\r\n              <div *ngIf=\"dashboards && dashboards.length > 0\" class=\"dropdown-divider\"></div>\r\n              <a class=\"dropdown-item installedDashboard\" routerLink=\"/dashboard/new\">\r\n                <span><i>Create New Dashboard...</i></span>\r\n              </a>\r\n            </div>\r\n          </li>\r\n          <li class=\"nav-item\">\r\n            <a class=\"nav-link\" routerLink=\"/execution\" routerLinkActive=\"active\"><i class=\"fa fa-play-circle\"></i><span class=\"navLink\">Execution</span></a>\r\n          </li>\r\n          <li class=\"nav-item\">\r\n            <a class=\"nav-link\" routerLink=\"/globals\" routerLinkActive=\"active\"><i class=\"fa fa-globe\"></i><span class=\"navLink\">Globals</span></a>\r\n          </li>\r\n          <li class=\"nav-item\">\r\n            <a class=\"nav-link\" routerLink=\"/scheduler\" routerLinkActive=\"active\"><i class=\"fa fa-calendar-o\"></i><span class=\"navLink\">Scheduler</span></a>\r\n          </li>\r\n          <li class=\"nav-item\">\r\n            <a class=\"nav-link\" routerLink=\"/buckets\" routerLinkActive=\"active\"><i class=\"fa fa-folder\"></i><span class=\"navLink\">Buckets</span></a>\r\n          </li>\r\n          <!-- <li class=\"nav-item\">\r\n            <a class=\"nav-link\" routerLink=\"/messages\" routerLinkActive=\"active\"><i class=\"fa fa-envelope-o\"></i><span class=\"navLink\">Messages</span></a>\r\n          </li> -->\r\n          <!-- <li class=\"nav-item\">\r\n            <a class=\"nav-link\" routerLink=\"/metrics\" routerLinkActive=\"active\"><i class=\"fa fa-pie-chart\"></i><span class=\"navLink\">Metrics</span></a>\r\n          </li> -->\r\n          <!-- <li class=\"nav-item\">\r\n            <a class=\"nav-link\" routerLink=\"/settings\" routerLinkActive=\"active\"><i class=\"fa fa-store\"></i><span class=\"navLink\">Marketplace</span></a>\r\n          </li> -->\r\n          <li class=\"nav-item\">\r\n            <a class=\"nav-link\" routerLink=\"/settings\" routerLinkActive=\"active\"><i class=\"fa fa-gear\"></i><span class=\"navLink\">Settings</span></a>\r\n          </li>\r\n        </ul>\r\n        <!-- <form class=\"form-inline mt-2 mt-md-0\">\r\n          <input class=\"form-control mr-sm-2\" type=\"text\" placeholder=\"Search\" aria-label=\"Search\">\r\n          <button class=\"btn btn-outline-success my-2 my-sm-0\" type=\"submit\">Search</button>\r\n        </form> -->\r\n        <!-- Navbar Right Menu -->\r\n        <ul class=\"navbar-nav\">\r\n          <!-- <li class=\"nav-item dropdown messages messages-menu\">\r\n            <a class=\"nav-link\" [class.newMessages]=\"newMessagesCount\" href=\"#\" id=\"messageDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" (click)=\"recalculateRelativeTimes()\">\r\n              <i class=\"fa\" [ngClass]=\"{ 'fa-envelope': newMessagesCount, 'fa-envelope-open-o': !newMessagesCount }\"></i>\r\n              <span> {{newMessagesCount}}</span>\r\n            </a>\r\n            <div class=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"messageDropdown\">\r\n              <span *ngIf=\"!messageListings.length\" class=\"noMessages\">You have no messages.</span>\r\n                <table class=\"messageTable\">\r\n                  <tr *ngFor=\"let messageListing of messageListings\" [class.oldMessage]=\"messageListing.is_read\">\r\n                    <td>\r\n                        <i *ngIf=\"messageListing.awaiting_response\" class=\"fa fa-exclamation required\" title=\"This message is awaiting response.\"></i>\r\n                    </td>\r\n                    <td>\r\n                        <a class=\"dropdown-item\" href=\"#\" (click)=\"openMessage($event, messageListing)\">{{utils.getTruncatedString(messageListing.subject, 25, '(no subject)')}}</a>    \r\n                    </td>\r\n                    <td [title]=\"utils.getLocalTime(messageListing.created_at)\">{{notificationRelativeTimes[messageListing.id]}}</td>\r\n                  </tr>\r\n                </table>\r\n            </div>\r\n          </li> -->\r\n          <li class=\"nav-item\">\r\n              <a class=\"nav-link\" href=\"https://walkoff.readthedocs.io\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i><span class=\"navLink\">Documentation</span></a>\r\n            </li>\r\n            <!-- <li class=\"nav-item\">\r\n              <a class=\"nav-link\" href=\"http://localhost:9020\" target=\"_blank\"><i class=\"fa fa-cloud\"></i><span class=\"navLink\">Manage Stack</span></a>\r\n            </li> -->\r\n          <li class=\"nav-item dropdown user user-menu\" routerLinkActive=\"active\">\r\n            <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"navbarUserDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n              <!-- The user image in the navbar-->\r\n              <img src=\"client/dist/assets/img/genericUser.png\" class=\"user-image\" alt=\"User Image\">\r\n              <!-- hidden-xs hides the username on small devices so only the image appears. -->\r\n              <span class=\"userName\">{{currentUser}}</span>\r\n            </a>\r\n            <div class=\"dropdown-menu dropdown-menu-right border-0\" aria-labelledby=\"navbarUserDropdown\">\r\n              <a class=\"dropdown-item installedDashboard\" href=\"/login\" (click)=\"logout()\">Sign Out</a>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </nav>\r\n  </header>\r\n\r\n  <main role=\"main\">\r\n    <section>\r\n      <div>\r\n        <router-outlet></router-outlet>\r\n        <!--Modal container for ng-bootstrap, should remove if upgrading to bootstrap 4 / ng-bootstrap 1.0.0-alpha.18+-->\r\n        <template ngbModalContainer></template>\r\n      </div>\r\n    </section>\r\n    <div></div>\r\n  </main>\r\n\r\n  <!--<footer class=\"footer\">\r\n    <strong>WALKOFF</strong>\r\n  </footer>-->\r\n</div>\r\n"

/***/ }),

/***/ "./src/app/main/main.scss":
/*!********************************!*\
  !*** ./src/app/main/main.scss ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "/* @import '~@swimlane/ngx-datatable/release/index.css';\r\n@import '~@swimlane/ngx-datatable/release/themes/material.css';\r\n@import '~@swimlane/ngx-datatable/release/assets/icons.css';\r\n@import '~bootstrap/dist/css/bootstrap.min.css';\r\n@import '~font-awesome/css/font-awesome.min.css';\r\n@import '~ng2-toasty/style-bootstrap.css';\r\n@import '~select2/dist/css/select2.min.css'; */\n/* h1 {\r\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif, sans-serif;\r\n  font-weight: bold;\r\n  font-size: 30px;\r\n  color: #255876;\r\n}\r\n\r\nh3 {\r\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif, sans-serif;\r\n  font-weight: bold;\r\n} */\n.contentContainer {\n  position: relative;\n  padding-bottom: 56.25%;\n  /* 16:9 */\n  padding-top: 25px;\n  height: 0; }\n/* .contentContainer iframe {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n} */\n#walkoffNav {\n  background-color: #3c8dbc; }\n/* #walkoffNav a {\r\n  color: #f6f6f6;\r\n} */\n#walkoffNav a .navLink {\n  margin-left: 5px; }\n/* #walkoffNav .dropdown-item {\r\n  color: #333333;\r\n} */\n#walkoffNav {\n  margin-bottom: 0;\n  border: none;\n  border-radius: 0; }\n#walkoffNav .user-image {\n  float: left;\n  width: 25px;\n  height: 25px;\n  border-radius: 50%;\n  margin-right: 10px;\n  margin-top: -2px; }\n@media (max-width: 767px) {\n  #walkoffNav .user-image {\n    float: none;\n    margin-right: 0;\n    margin-top: -8px;\n    line-height: 10px; } }\n#walkoffNav .navbar-nav .dropdown .dropdown-menu {\n  background-color: #3c8dbc; }\n#walkoffNav .navbar-nav .dropdown .dropdown-menu .installedDashboard {\n  color: white; }\n#walkoffNav .navbar-nav .dropdown .dropdown-menu .installedDashboard:hover {\n  color: #3c8dbc; }\n#walkoffNav .navbar-nav .dropdown .dropdown-menu .installedDashboard span {\n  margin-left: 5px; }\n#walkoffNav .navbar-nav > .open > a {\n  color: #3c8dbc; }\n#walkoffNav .navbar-nav .newMessages {\n  color: orange;\n  font-weight: bold; }\n#walkoffNav .navbar-nav .required {\n  color: crimson; }\n#walkoffNav .navbar-nav .messages-menu table,\n#walkoffNav .navbar-nav .messages-menu table a {\n  width: 320px;\n  color: white;\n  margin: 5px; }\n#walkoffNav .navbar-nav .messages-menu table .oldMessage,\n#walkoffNav .navbar-nav .messages-menu table .oldMessage a {\n  color: #DDD;\n  font-style: italic; }\n#walkoffNav .navbar-nav .messages-menu .noMessages {\n  color: #DDD;\n  font-style: italic;\n  margin-left: 10px; }\n#walkoffNav .navbar-nav .messages-menu table tr {\n  border-bottom: 1px solid #AAA; }\n#walkoffNav .navbar-nav .messages-menu table tr:last-child {\n  border-bottom: none; }\n.footer {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 51px;\n  background-color: #e7e7e7;\n  padding: 15px; }\n"

/***/ }),

/***/ "./src/app/main/main.service.ts":
/*!**************************************!*\
  !*** ./src/app/main/main.service.ts ***!
  \**************************************/
/*! exports provided: MainService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MainService", function() { return MainService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _models_message_message__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../models/message/message */ "./src/app/models/message/message.ts");
/* harmony import */ var _models_message_messageListing__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../models/message/messageListing */ "./src/app/models/message/messageListing.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var MainService = /** @class */ (function () {
    function MainService(http, utils) {
        this.http = http;
        this.utils = utils;
    }
    /**
     * Asyncryonously returns a list of imported interface names from the server.
     */
    MainService.prototype.getInterfaceNames = function () {
        return this.http.get('/api/dashboards')
            .toPromise()
            .catch(this.utils.handleResponseError);
    };
    /**
     * Asyncronously returns a listing of initial notifications for the initial WALKOFF page load.
     * Should return only a subset of notifications if many unread notifications exist.
     * Will fill up to 5 read notifications if unread notifications do not exist.
     */
    MainService.prototype.getInitialNotifications = function () {
        return this.http.get('/api/notifications')
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["plainToClass"])(_models_message_messageListing__WEBPACK_IMPORTED_MODULE_4__["MessageListing"], data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Asyncronouly retrieves a message by ID, marks it as read, and returns the message data.
     * @param messageId DB ID of message to retrieve
     */
    MainService.prototype.getMessage = function (messageId) {
        return this.http.get("/api/messages/" + messageId)
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["plainToClass"])(_models_message_message__WEBPACK_IMPORTED_MODULE_3__["Message"], data); })
            .catch(this.utils.handleResponseError);
    };
    MainService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_angular_common_http__WEBPACK_IMPORTED_MODULE_1__["HttpClient"], _utilities_service__WEBPACK_IMPORTED_MODULE_5__["UtilitiesService"]])
    ], MainService);
    return MainService;
}());



/***/ }),

/***/ "./src/app/messages/messages.component.ts":
/*!************************************************!*\
  !*** ./src/app/messages/messages.component.ts ***!
  \************************************************/
/*! exports provided: MessagesComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessagesComponent", function() { return MessagesComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var ngx_toastr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngx-toastr */ "./node_modules/ngx-toastr/fesm5/ngx-toastr.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var _messages_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./messages.service */ "./src/app/messages/messages.service.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
/* harmony import */ var _messages_modal_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./messages.modal.component */ "./src/app/messages/messages.modal.component.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var MessagesComponent = /** @class */ (function () {
    function MessagesComponent(messagesService, modalService, toastrService, utils) {
        this.messagesService = messagesService;
        this.modalService = modalService;
        this.toastrService = toastrService;
        this.utils = utils;
        //Device Data Table params
        this.messages = [];
        this.displayMessages = [];
        this.filterQuery = new _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormControl"]();
        this.selectMapping = {};
        this.messageRelativeTimes = {};
    }
    /**
     * On component init, get a list of messages to display in our datatable and bind our search filter input.
     */
    MessagesComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.listMessages();
        this.filterQuery
            .valueChanges
            .debounceTime(500)
            .subscribe(function (event) { return _this.filterMessages(); });
    };
    /**
     * Filters the messages displayed based upon what is entered in the search filter input.
     * Filters based on the subject line and also recalculates the relative time of when the message was created.
     */
    MessagesComponent.prototype.filterMessages = function () {
        var _this = this;
        var searchFilter = this.filterQuery.value ? this.filterQuery.value.toLocaleLowerCase() : '';
        this.displayMessages = this.messages.filter(function (message) {
            // Update our relative time first
            _this.messageRelativeTimes[message.id] = _this.utils.getRelativeLocalTime(message.created_at);
            return (message.subject.toLocaleLowerCase().includes(searchFilter));
        });
    };
    /**
     * Grabs an array of message listings from the server to display and performs the initial filter.
     */
    MessagesComponent.prototype.listMessages = function () {
        var _this = this;
        this.messagesService.getAllMessageListings()
            .then(function (messages) {
            _this.messages = messages;
            _this.filterMessages();
        })
            .catch(function (e) { return _this.toastrService.error("Error retrieving messages: " + e.message); });
    };
    /**
     * Grabs a full message object from the server based upon a Message Listing and opens a message modal.
     *
     * @param event JS Event fired from clicking the link
     * @param messageListing Message Listing to open/query
     */
    MessagesComponent.prototype.openMessage = function (event, messageListing) {
        var _this = this;
        event.preventDefault();
        this.messagesService.getMessage(messageListing.id)
            .then(function (message) {
            messageListing.is_read = true;
            messageListing.last_read_at = _this.utils.getCurrentIsoString();
            var modalRef = _this.modalService.open(_messages_modal_component__WEBPACK_IMPORTED_MODULE_6__["MessagesModalComponent"]);
            modalRef.componentInstance.message = _this.utils.cloneDeep(message);
            _this._handleModalClose(modalRef);
        })
            .catch(function (e) { return _this.toastrService.error("Error opening message: " + e.message); });
    };
    /**
     * After confirmation, will instruct the server to delete the message IDs that are selected.
     * Will then remove these from our display and perform the filter action once more.
     */
    MessagesComponent.prototype.deleteSelected = function () {
        var _this = this;
        var idsToDelete = this._getSelectedIds();
        if (!confirm("Are you sure you want to delete " + idsToDelete.length + " messages?")) {
            return;
        }
        this.messagesService.performActionOnMessages(idsToDelete, 'delete')
            .then(function () {
            _this.messages = _this.messages.filter(function (message) { return idsToDelete.indexOf(message.id) === -1; });
            idsToDelete.forEach(function (id) {
                _this.selectMapping[id] = false;
            });
            _this.filterMessages();
        })
            .catch(function (e) { return _this.toastrService.error("Error deleting messages: " + e.message); });
    };
    /**
     * Instructs the server to mark the message IDs that are selected as read.
     * Will then mark them as read within the data table.
     */
    MessagesComponent.prototype.markSelectedAsRead = function () {
        var _this = this;
        var idsToRead = this._getSelectedIds();
        this.messagesService.performActionOnMessages(idsToRead, 'read')
            .then(function () {
            _this.messages.forEach(function (message) {
                if (idsToRead.indexOf(message.id) !== -1) {
                    message.is_read = true;
                    message.last_read_at = _this.utils.getCurrentIsoString();
                }
            });
        })
            .catch(function (e) { return _this.toastrService.error("Error marking messages as read: " + e.message); });
    };
    /**
     * Instructs the server to mark the message IDs that are selected as unread.
     * Will then mark them as unread within the data table.
     */
    MessagesComponent.prototype.markSelectedAsUnread = function () {
        var _this = this;
        var idsToUnread = this._getSelectedIds();
        this.messagesService.performActionOnMessages(idsToUnread, 'unread')
            .then(function () {
            _this.messages.forEach(function (message) {
                if (idsToUnread.indexOf(message.id) !== -1) {
                    message.is_read = false;
                    message.last_read_at = null;
                }
            });
        })
            .catch(function (e) { return _this.toastrService.error("Error marking messages as unread: " + e.message); });
    };
    /**
     * Gets an array of all IDs that are selected (checkboxes checked in the data table).
     */
    MessagesComponent.prototype._getSelectedIds = function () {
        var _this = this;
        var ids = [];
        Object.keys(this.selectMapping).forEach(function (id) {
            if (_this.selectMapping[id]) {
                ids.push(+id);
            }
        });
        return ids;
    };
    /**
     * On normal message modal close, do nothing. Only show an error if something goes awry.
     * @param modalRef Modal reference that is being closed
     */
    MessagesComponent.prototype._handleModalClose = function (modalRef) {
        var _this = this;
        modalRef.result
            .then(function (result) { return null; }, function (error) { if (error) {
            _this.toastrService.error(error.message);
        } });
    };
    MessagesComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'messages-component',
            template: __webpack_require__(/*! ./messages.html */ "./src/app/messages/messages.html"),
            styles: [__webpack_require__(/*! ./messages.scss */ "./src/app/messages/messages.scss")],
            providers: [_messages_service__WEBPACK_IMPORTED_MODULE_4__["MessagesService"]],
        }),
        __metadata("design:paramtypes", [_messages_service__WEBPACK_IMPORTED_MODULE_4__["MessagesService"], _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_3__["NgbModal"],
            ngx_toastr__WEBPACK_IMPORTED_MODULE_2__["ToastrService"],
            _utilities_service__WEBPACK_IMPORTED_MODULE_5__["UtilitiesService"]])
    ], MessagesComponent);
    return MessagesComponent;
}());



/***/ }),

/***/ "./src/app/messages/messages.html":
/*!****************************************!*\
  !*** ./src/app/messages/messages.html ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div id=\"main\" class=\"messagesMain\">\r\n\t<h1>Messages</h1>\r\n\r\n\t<div class=\"row align-items-center mb-3\">\r\n\t\t<div class=\"col\">\r\n\t\t\t<button (click)=\"deleteSelected()\" class=\"btn btn-outline-primary mx-1\" title=\"Delete Selected\">\r\n\t\t\t\t<i class=\"fa fa-trash-o\"></i>\r\n\t\t\t</button>\r\n\t\t\t<button (click)=\"markSelectedAsRead()\" class=\"btn btn-outline-primary mx-1\" title=\"Mark Selected as Read\">\r\n\t\t\t\t<i class=\"fa fa-envelope-open-o\"></i>\r\n\t\t\t</button>\r\n\t\t\t<button (click)=\"markSelectedAsUnread()\" class=\"btn btn-outline-primary mx-1\" title=\"Mark Selected as Unread\">\r\n\t\t\t\t<i class=\"fa fa-envelope-o\"></i>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<div class=\"col-4\">\r\n\t\t\t<div class=\"row\">\r\n\t\t\t\t<label class=\"col-auto col-form-label\">Search Filter</label>\r\n\t\t\t\t<div class=\"col\">\r\n\t\t\t\t\t<input class=\"form-control\" [formControl]=\"filterQuery\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<template ngbModalContainer></template>\r\n\t<ngx-datatable #messagesTable class='material expandable' [columnMode]=\"'flex'\" [rows]=\"displayMessages\" [sortType]=\"'multi'\"\r\n\t [headerHeight]=\"50\" [footerHeight]=\"50\" [rowHeight]=\"undefined\" [sorts]=\"[{prop: 'created_at', dir: 'desc'}]\" [limit]=\"25\">\r\n\t\t<!-- Column Templates -->\r\n\t\t<ngx-datatable-column name=\"\" [resizeable]=\"false\" [sortable]=\"false\" [draggable]=\"false\" [flexGrow]=\"0\">\r\n\t\t\t<ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n\t\t\t\t<input type=\"checkbox\" [(ngModel)]=\"selectMapping[row.id]\">\r\n\t\t\t</ng-template>\r\n\t\t</ngx-datatable-column>\r\n\t\t<ngx-datatable-column name=\"Subject\" prop=\"subject\" [flexGrow]=\"2\">\r\n\t\t\t<ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<i *ngIf=\"row.awaiting_response\" class=\"fa fa-exclamation required\" title=\"This message is awaiting response.\"></i>\r\n\t\t\t\t\t<a href=\"#\" class=\"messageLink\" [class.unread]=\"!row.is_read\" (click)=\"openMessage($event, row)\">\r\n\t\t\t\t\t\t{{utils.getDefaultString(row.subject, '(no subject)')}}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t</ng-template>\r\n\t\t</ngx-datatable-column>\r\n\t\t<ngx-datatable-column name=\"Sent\" prop=\"created_at\" [flexGrow]=\"1\">\r\n\t\t\t<ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n\t\t\t\t<span [title]=\"utils.getLocalTime(row.created_at)\">\r\n\t\t\t\t\t{{messageRelativeTimes[row.id]}}\r\n\t\t\t\t</span>\r\n\t\t\t</ng-template>\r\n\t\t</ngx-datatable-column>\r\n\t</ngx-datatable>\r\n</div>"

/***/ }),

/***/ "./src/app/messages/messages.modal.component.ts":
/*!******************************************************!*\
  !*** ./src/app/messages/messages.modal.component.ts ***!
  \******************************************************/
/*! exports provided: MessagesModalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessagesModalComponent", function() { return MessagesModalComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var ngx_toastr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngx-toastr */ "./node_modules/ngx-toastr/fesm5/ngx-toastr.js");
/* harmony import */ var _messages_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./messages.service */ "./src/app/messages/messages.service.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
/* harmony import */ var _models_message_message__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../models/message/message */ "./src/app/models/message/message.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var MessagesModalComponent = /** @class */ (function () {
    function MessagesModalComponent(messagesService, activeModal, toastrService, utils) {
        this.messagesService = messagesService;
        this.activeModal = activeModal;
        this.toastrService = toastrService;
        this.utils = utils;
    }
    MessagesModalComponent.prototype.ngOnInit = function () {
    };
    /**
     * Performs a given action against a message (e.g. accept, decline).
     * Removes the "awaiting_response" flag and updates the responded_at within the view.
     * @param action Action to perform against the message
     */
    MessagesModalComponent.prototype.performMessageAction = function (action) {
        var _this = this;
        this.messagesService.respondToMessage(this.message.workflow_execution_id, action)
            .then(function () {
            _this.message.awaiting_response = false;
            _this.message.responded_at = _this.utils.getCurrentIsoString();
            _this.toastrService.success("Successfully performed \"" + action + "\" on message.");
        })
            .catch(function (e) { return _this.toastrService.error("Error performing " + action + " on message: " + e.message); });
    };
    /**
     * Dismisses this modal.
     */
    MessagesModalComponent.prototype.dismiss = function () {
        this.activeModal.dismiss();
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _models_message_message__WEBPACK_IMPORTED_MODULE_5__["Message"])
    ], MessagesModalComponent.prototype, "message", void 0);
    MessagesModalComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'messages-modal',
            template: __webpack_require__(/*! ./messages.modal.html */ "./src/app/messages/messages.modal.html"),
            styles: [__webpack_require__(/*! ./messages.scss */ "./src/app/messages/messages.scss")],
            providers: [_messages_service__WEBPACK_IMPORTED_MODULE_3__["MessagesService"], _utilities_service__WEBPACK_IMPORTED_MODULE_4__["UtilitiesService"]],
        }),
        __metadata("design:paramtypes", [_messages_service__WEBPACK_IMPORTED_MODULE_3__["MessagesService"], _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__["NgbActiveModal"],
            ngx_toastr__WEBPACK_IMPORTED_MODULE_2__["ToastrService"], _utilities_service__WEBPACK_IMPORTED_MODULE_4__["UtilitiesService"]])
    ], MessagesModalComponent);
    return MessagesModalComponent;
}());



/***/ }),

/***/ "./src/app/messages/messages.modal.html":
/*!**********************************************!*\
  !*** ./src/app/messages/messages.modal.html ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal-header\">\r\n\t<h4 class=\"modal-title\">\r\n\t\t{{message.subject}}\r\n\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (click)=\"dismiss()\">\r\n\t\t  <span aria-hidden=\"true\">&times;</span>\r\n\t\t</button>\r\n\t</h4>\r\n</div>\r\n<div id=\"messageModalBody\" class=\"modal-body\">\r\n\t<div class=\"container-fluid\">\r\n\t\t<div *ngIf=\"message.read_by && message.read_by.length\">\r\n\t\t\t<i>Read by: {{message.read_by.join(', ')}}</i>\r\n\t\t</div>\r\n\t\t<div *ngIf=\"message.responded_by\">\r\n\t\t\t<i>\r\n\t\t\t\tResponded by: {{message.responded_by}}\r\n\t\t\t\t<span [title]=\"utils.getLocalTime(message.responded_at)\">({{utils.getRelativeLocalTime(message.responded_at)}})</span>\r\n\t\t\t</i>\r\n\t\t</div>\r\n\t\t<div *ngFor=\"let body of message.body\">\r\n\t\t\t<p *ngIf=\"body.type === 'text'\">{{body.data.text}}</p>\r\n\t\t\t<a *ngIf=\"body.type === 'url'\" [href]=\"body.data.url\">{{body.data.title ? body.data.title : body.data.url}}</a>\r\n\t\t\t<div *ngIf=\"body.type === 'accept_decline'\">\r\n\t\t\t\t<button type=\"button\" class=\"btn btn-secondary\" (click)=\"performMessageAction('decline')\" [disabled]=\"!message.awaiting_response\">Decline</button>\r\n\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" (click)=\"performMessageAction('accept')\" [disabled]=\"!message.awaiting_response\">Accept</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n<!-- <div class=\"modal-footer\">\r\n\t<button type=\"button\" class=\"btn btn-secondary\" (click)=\"dismiss()\">Undo Changes and Close</button>\r\n\t<button type=\"button\" class=\"btn btn-primary\" [disabled]=\"!roleForm.form.valid\" (click)=\"submit()\">{{submitText}}</button>\r\n</div> -->"

/***/ }),

/***/ "./src/app/messages/messages.scss":
/*!****************************************!*\
  !*** ./src/app/messages/messages.scss ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".messagesMain {\n  padding: 10px 15px; }\n\n.messagesMain .unread {\n  font-weight: bold; }\n\n.messagesMain .required {\n  color: crimson; }\n"

/***/ }),

/***/ "./src/app/messages/messages.service.ts":
/*!**********************************************!*\
  !*** ./src/app/messages/messages.service.ts ***!
  \**********************************************/
/*! exports provided: MessagesService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessagesService", function() { return MessagesService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var _models_message_message__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../models/message/message */ "./src/app/models/message/message.ts");
/* harmony import */ var _models_message_messageListing__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../models/message/messageListing */ "./src/app/models/message/messageListing.ts");
/* harmony import */ var _models_playbook_argument__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../models/playbook/argument */ "./src/app/models/playbook/argument.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var MessagesService = /** @class */ (function () {
    function MessagesService(http, utils) {
        this.http = http;
        this.utils = utils;
    }
    /**
     * Grabs an array of all message listings from the server.
     */
    MessagesService.prototype.getAllMessageListings = function () {
        return this.utils.paginateAll(this.getMessageListings.bind(this));
    };
    /**
     * Grabs an array of message listings from the server.
     */
    MessagesService.prototype.getMessageListings = function (page) {
        if (page === void 0) { page = 1; }
        return this.http.get("/api/messages?page=" + page)
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["plainToClass"])(_models_message_messageListing__WEBPACK_IMPORTED_MODULE_4__["MessageListing"], data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Queries a given message by ID.
     * @param messageId ID of message to query
     */
    MessagesService.prototype.getMessage = function (messageId) {
        return this.http.get("/api/messages/" + messageId)
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["plainToClass"])(_models_message_message__WEBPACK_IMPORTED_MODULE_3__["Message"], data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Performs a given action against a given message or messages by ID.
     * @param messageIds ID or IDs array to perform action against
     * @param action Action to perform on the message (e.g. read, unread, delete)
     */
    MessagesService.prototype.performActionOnMessages = function (messageIds, action) {
        if (!Array.isArray(messageIds)) {
            messageIds = [messageIds];
        }
        return this.http.put('/api/messages', { ids: messageIds, action: action })
            .toPromise()
            .then(function () { return null; })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Responds to a message by calling a trigger endpoint for a given workflow's execution ID.
     * @param workflow_execution_id Execution ID of workflow to trigger
     * @param action Action to send to trigger endpoint
     */
    MessagesService.prototype.respondToMessage = function (workflow_execution_id, action) {
        var arg = new _models_playbook_argument__WEBPACK_IMPORTED_MODULE_5__["Argument"]();
        arg.name = 'action';
        arg.value = action;
        var body = {
            execution_ids: [workflow_execution_id],
            data_in: action,
            arguments: [arg],
        };
        return this.http.put('/api/triggers/send_data', body)
            .toPromise()
            .catch(this.utils.handleResponseError);
    };
    MessagesService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpClient"], _utilities_service__WEBPACK_IMPORTED_MODULE_6__["UtilitiesService"]])
    ], MessagesService);
    return MessagesService;
}());



/***/ }),

/***/ "./src/app/metrics/metrics.component.ts":
/*!**********************************************!*\
  !*** ./src/app/metrics/metrics.component.ts ***!
  \**********************************************/
/*! exports provided: MetricsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MetricsComponent", function() { return MetricsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var ngx_toastr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngx-toastr */ "./node_modules/ngx-toastr/fesm5/ngx-toastr.js");
/* harmony import */ var rxjs_add_operator_debounceTime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs/add/operator/debounceTime */ "./node_modules/rxjs-compat/_esm5/add/operator/debounceTime.js");
/* harmony import */ var _swimlane_ngx_datatable__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @swimlane/ngx-datatable */ "./node_modules/@swimlane/ngx-datatable/release/index.js");
/* harmony import */ var _swimlane_ngx_datatable__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_swimlane_ngx_datatable__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _metrics_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./metrics.service */ "./src/app/metrics/metrics.service.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var MetricsComponent = /** @class */ (function () {
    function MetricsComponent(metricsService, toastrService, utils, cdr) {
        this.metricsService = metricsService;
        this.toastrService = toastrService;
        this.utils = utils;
        this.cdr = cdr;
        this.appMetrics = [];
        this.appFilter = '';
        this.workflowMetrics = [];
        this.availableApps = [];
    }
    MetricsComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.appSelectConfig = {
            width: '100%',
            placeholder: 'Select an App to view its Metrics',
        };
        this.recalculateTableCallback = function (e) {
            _this.recalculateTable(e);
        };
        $(document).on('shown.bs.tab', 'a[data-toggle="tab"]', this.recalculateTableCallback);
        this.getAppMetrics();
        this.getWorkflowMetrics();
    };
    /**
     * Closes our SSEs on component destroy.
     */
    MetricsComponent.prototype.ngOnDestroy = function () {
        if (this.recalculateTableCallback) {
            $(document).off('shown.bs.tab', 'a[data-toggle="tab"]', this.recalculateTableCallback);
        }
    };
    /**
     * This angular function is used primarily to recalculate column widths for execution results table.
     */
    MetricsComponent.prototype.recalculateTable = function (event) {
        var table;
        switch (event.target.getAttribute('href')) {
            case '#apps':
                table = this.appMetricsTable;
                break;
            case '#workflows':
                table = this.workflowMetricsTable;
        }
        if (table && table.recalculate) {
            this.cdr.detectChanges();
            if (Array.isArray(table.rows))
                table.rows = table.rows.slice();
            table.recalculate();
        }
    };
    /**
     * Grabs case events from the server for the selected case (from the JS event supplied).
     * Will update the case events data table with the new case events.
     * @param event JS event from the select2 case select box
     */
    MetricsComponent.prototype.appSelectChange = function (event) {
        if (!event.value || event.value === '') {
            this.appFilter = '';
        }
        else {
            this.appFilter = event.value;
        }
    };
    MetricsComponent.prototype.getFilteredAppMetrics = function () {
        var _this = this;
        if (!this.appFilter || this.appFilter == 'all')
            return this.appMetrics;
        return this.appMetrics.filter(function (appMetric) { return appMetric.name == _this.appFilter; });
    };
    MetricsComponent.prototype.displayAppMetrics = function () {
        var metrics = [];
        this.getFilteredAppMetrics().forEach(function (appMetric) {
            appMetric.actions.forEach(function (actionMetric) {
                metrics.push({
                    app: appMetric.name,
                    action: actionMetric.name,
                    success: actionMetric.success_metrics.display_text,
                    error: actionMetric.error_metrics.display_text,
                    total_count: actionMetric.success_metrics.count + actionMetric.error_metrics.count
                });
            });
        });
        return metrics;
    };
    /**
     * Grabs all the existing cases in the DB for use in populating the cases datatable.
     * Will also populate the case select2 data for use on the case events tab.
     */
    MetricsComponent.prototype.getAppMetrics = function () {
        var _this = this;
        this.metricsService
            .getAppMetrics()
            .then(function (appMetrics) {
            _this.appMetrics = appMetrics;
            _this.availableApps = [{ id: '', text: '' }, { id: 'all', text: 'All' }].concat(appMetrics.map(function (m) { return ({ id: m.name, text: m.name }); }));
            _this.displayAppMetrics();
        })
            .catch(function (e) { return _this.toastrService.error("Error retrieving app metrics: " + e.message); });
    };
    /**
     * Grabs all the existing cases in the DB for use in populating the cases datatable.
     * Will also populate the case select2 data for use on the case events tab.
     */
    MetricsComponent.prototype.getWorkflowMetrics = function () {
        var _this = this;
        this.metricsService
            .getWorkflowMetrics()
            .then(function (workflowMetrics) {
            _this.workflowMetrics = workflowMetrics;
        })
            .catch(function (e) { return _this.toastrService.error("Error retrieving workflow metrics: " + e.message); });
    };
    /**
     * Returns a string of concatenated array values.
     * E.g. ['some', 'text', 'here'] => 'some, text, here'
     * @param input Array of strings to concat into a friendly string
     */
    MetricsComponent.prototype.getFriendlyArray = function (input) {
        return input.join(', ');
    };
    /**
     * Converts an input object to a JSON string, removing the quotes for better reading.
     * @param input Input object to convert
     */
    MetricsComponent.prototype.getFriendlyObject = function (input) {
        var out = JSON.stringify(input, null, 1);
        out = out.substr(1, out.length - 2).replace(/"/g, '');
        return out;
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('appMetricsTable'),
        __metadata("design:type", _swimlane_ngx_datatable__WEBPACK_IMPORTED_MODULE_3__["DatatableComponent"])
    ], MetricsComponent.prototype, "appMetricsTable", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('workflowMetricsTable'),
        __metadata("design:type", _swimlane_ngx_datatable__WEBPACK_IMPORTED_MODULE_3__["DatatableComponent"])
    ], MetricsComponent.prototype, "workflowMetricsTable", void 0);
    MetricsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'metrics-component',
            template: __webpack_require__(/*! ./metrics.html */ "./src/app/metrics/metrics.html"),
            encapsulation: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewEncapsulation"].None,
            styles: [__webpack_require__(/*! ./metrics.scss */ "./src/app/metrics/metrics.scss")],
            providers: [_metrics_service__WEBPACK_IMPORTED_MODULE_4__["MetricsService"]],
        }),
        __metadata("design:paramtypes", [_metrics_service__WEBPACK_IMPORTED_MODULE_4__["MetricsService"], ngx_toastr__WEBPACK_IMPORTED_MODULE_1__["ToastrService"],
            _utilities_service__WEBPACK_IMPORTED_MODULE_5__["UtilitiesService"], _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"]])
    ], MetricsComponent);
    return MetricsComponent;
}());



/***/ }),

/***/ "./src/app/metrics/metrics.html":
/*!**************************************!*\
  !*** ./src/app/metrics/metrics.html ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div id=\"main\" class=\"metricsMain\">\r\n\t<ul class=\"nav nav-tabs\" role=\"tablist\">\r\n\t\t<li class=\"nav-item\"><a class=\"nav-link active\" href=\"#workflows\" data-toggle=\"tab\" role=\"tab\">Workflow Metrics</a></li>\r\n\t\t<li class=\"nav-item\"><a class=\"nav-link\" href=\"#apps\" data-toggle=\"tab\" role=\"tab\">App Metrics</a></li>\r\n\t</ul>\r\n\t<div class=\"tab-content\">\r\n\t\t<div id=\"workflows\" class=\"tab-pane fade show active\">\r\n\t\t\t<h1>Workflow Metrics</h1>\r\n\r\n\t\t\t<ngx-datatable #workflowMetricsTable class='material expandable workflowMetricsTable' [columnMode]=\"'flex'\" [rows]=\"workflowMetrics\"\r\n\t\t\t [headerHeight]=\"50\" [footerHeight]=\"50\" [rowHeight]=\"undefined\" [sorts]=\"[{prop: 'name', dir: 'asc'}]\" [limit]=\"25\">\r\n\t\t\t\t<!-- Column Templates -->\r\n\t\t\t\t<ngx-datatable-column name=\"Name\" prop=\"name\" [flexGrow]=\"4\"></ngx-datatable-column>\r\n                <ngx-datatable-column name=\"Executions (Average Time)\" prop=\"display_text\" [flexGrow]=\"1\"></ngx-datatable-column>\r\n\t\t\t</ngx-datatable>\r\n\t\t</div>\r\n\t\t<div id=\"apps\" class=\"tab-pane fade\">\r\n\t\t\t<h1>App Metrics</h1>\r\n\r\n\t\t\t<div class=\"row\">\r\n\t\t\t\t<div class=\"col-offset-7 col-5\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<select2 [data]=\"availableApps\" [value]=\"\" [options]=\"appSelectConfig\" (valueChanged)=\"appSelectChange($event)\"></select2>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<ngx-datatable #appMetricsTable class='material expandable appMetricsTable' [columnMode]=\"'flex'\" [rows]=\"displayAppMetrics()\" [sortType]=\"'multi'\"\r\n\t\t\t\t[headerHeight]=\"50\" [footerHeight]=\"50\" [rowHeight]=\"undefined\" [sorts]=\"[{prop: 'app', dir: 'asc'}, {prop: 'action', dir: 'asc'}]\" [limit]=\"25\">\r\n\t\t\t\t<!-- Column Templates -->\r\n\t\t\t\t<ngx-datatable-column name=\"App\" prop=\"app\" [flexGrow]=\"2\"></ngx-datatable-column>\r\n\t\t\t\t<ngx-datatable-column name=\"Action\" prop=\"action\" [flexGrow]=\"2\"></ngx-datatable-column>\r\n\t\t\t\t<ngx-datatable-column name=\"Successful Executions (Average Time)\" prop=\"success\" [flexGrow]=\"1\"></ngx-datatable-column>\r\n\t\t\t\t<ngx-datatable-column name=\"Failed Executions (Average Time)\" prop=\"error\" [flexGrow]=\"1\"></ngx-datatable-column>\r\n\t\t\t</ngx-datatable>\r\n\t\t</div>\r\n\t</div>\r\n</div>"

/***/ }),

/***/ "./src/app/metrics/metrics.scss":
/*!**************************************!*\
  !*** ./src/app/metrics/metrics.scss ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "#main.metricsMain {\n  padding: 10px 15px; }\n\n.metricsMain .box-title {\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n  font-weight: bold; }\n\n.metricsMain .form-control.input-sm {\n  margin-left: 10px; }\n\n.metricsMain ngx-datatable datatable-body datatable-body-row datatable-body-cell .datatable-body-cell-label {\n  white-space: initial; }\n"

/***/ }),

/***/ "./src/app/metrics/metrics.service.ts":
/*!********************************************!*\
  !*** ./src/app/metrics/metrics.service.ts ***!
  \********************************************/
/*! exports provided: MetricsService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MetricsService", function() { return MetricsService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var rxjs_add_operator_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs/add/operator/map */ "./node_modules/rxjs-compat/_esm5/add/operator/map.js");
/* harmony import */ var rxjs_add_operator_toPromise__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/add/operator/toPromise */ "./node_modules/rxjs-compat/_esm5/add/operator/toPromise.js");
/* harmony import */ var rxjs_add_operator_toPromise__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(rxjs_add_operator_toPromise__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _models_metric_appMetric__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../models/metric/appMetric */ "./src/app/models/metric/appMetric.ts");
/* harmony import */ var _models_metric_workflowMetric__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../models/metric/workflowMetric */ "./src/app/models/metric/workflowMetric.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







// import { ActionMetric } from '../models/metric/actionMetric';

var MetricsService = /** @class */ (function () {
    function MetricsService(http, utils) {
        this.http = http;
        this.utils = utils;
    }
    /**
     * Gets an array of AppMetric objects specified in the DB.
     */
    MetricsService.prototype.getAppMetrics = function () {
        return this.http.get('/api/metrics/apps')
            .toPromise()
            .then(function (res) { return res.apps; })
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_4__["plainToClass"])(_models_metric_appMetric__WEBPACK_IMPORTED_MODULE_5__["AppMetric"], data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Gets an array of WorkflowMetric objects specified in the  DB.
     */
    MetricsService.prototype.getWorkflowMetrics = function () {
        return this.http.get('/api/metrics/workflows')
            .toPromise()
            .then(function (res) { return res.workflows; })
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_4__["plainToClass"])(_models_metric_workflowMetric__WEBPACK_IMPORTED_MODULE_6__["WorkflowMetric"], data); })
            .catch(this.utils.handleResponseError);
    };
    MetricsService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_angular_common_http__WEBPACK_IMPORTED_MODULE_1__["HttpClient"], _utilities_service__WEBPACK_IMPORTED_MODULE_7__["UtilitiesService"]])
    ], MetricsService);
    return MetricsService;
}());



/***/ }),

/***/ "./src/app/models/accessToken.ts":
/*!***************************************!*\
  !*** ./src/app/models/accessToken.ts ***!
  \***************************************/
/*! exports provided: AccessToken */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AccessToken", function() { return AccessToken; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _userClaims__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./userClaims */ "./src/app/models/userClaims.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var AccessToken = /** @class */ (function () {
    function AccessToken() {
    }
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _userClaims__WEBPACK_IMPORTED_MODULE_1__["UserClaims"]; }),
        __metadata("design:type", _userClaims__WEBPACK_IMPORTED_MODULE_1__["UserClaims"])
    ], AccessToken.prototype, "user_claims", void 0);
    return AccessToken;
}());



/***/ }),

/***/ "./src/app/models/api/actionApi.ts":
/*!*****************************************!*\
  !*** ./src/app/models/api/actionApi.ts ***!
  \*****************************************/
/*! exports provided: ActionType, ActionApi */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ActionType", function() { return ActionType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ActionApi", function() { return ActionApi; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _parameterApi__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parameterApi */ "./src/app/models/api/parameterApi.ts");
/* harmony import */ var _returnApi__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./returnApi */ "./src/app/models/api/returnApi.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var ActionType;
(function (ActionType) {
    ActionType["ACTION"] = "ACTION";
    ActionType["CONDITION"] = "CONDITION";
    ActionType["TRANSFORM"] = "TRANSFORM";
    ActionType["TRIGGER"] = "TRIGGER";
})(ActionType || (ActionType = {}));
var ActionApi = /** @class */ (function () {
    function ActionApi() {
        this.parameters = [];
        this.returns = [];
        this.node_type = ActionType.ACTION;
    }
    Object.defineProperty(ActionApi.prototype, "parallelParameters", {
        get: function () {
            return this.parameters.filter(function (p) { return p.parallelizable; });
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ActionApi.prototype, "canRunInParallel", {
        get: function () {
            return this.parallelParameters.length > 0;
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _parameterApi__WEBPACK_IMPORTED_MODULE_1__["ParameterApi"]; }),
        __metadata("design:type", Array)
    ], ActionApi.prototype, "parameters", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _returnApi__WEBPACK_IMPORTED_MODULE_2__["ReturnApi"]; }),
        __metadata("design:type", Array)
    ], ActionApi.prototype, "returns", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        __metadata("design:type", String)
    ], ActionApi.prototype, "app_name", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        __metadata("design:type", String)
    ], ActionApi.prototype, "app_version", void 0);
    return ActionApi;
}());



/***/ }),

/***/ "./src/app/models/api/appApi.ts":
/*!**************************************!*\
  !*** ./src/app/models/api/appApi.ts ***!
  \**************************************/
/*! exports provided: AppApi */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppApi", function() { return AppApi; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _actionApi__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./actionApi */ "./src/app/models/api/actionApi.ts");
/* harmony import */ var _conditionApi__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./conditionApi */ "./src/app/models/api/conditionApi.ts");
/* harmony import */ var _transformApi__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./transformApi */ "./src/app/models/api/transformApi.ts");
/* harmony import */ var _deviceApi__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./deviceApi */ "./src/app/models/api/deviceApi.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var AppApi = /** @class */ (function () {
    function AppApi() {
        this.action_apis = [];
        this.condition_apis = [];
        this.transform_apis = [];
        this.device_apis = [];
        // info: AppInfo;
        // tags: Tag[] = [];
        // external_docs: ExternalDoc[] = [];
    }
    AppApi.prototype.getFilteredActionApis = function (searchTerm) {
        var _this = this;
        searchTerm = searchTerm.trim().toLowerCase();
        return (searchTerm) ?
            this.action_apis.filter(function (api) { return api.name.toLowerCase().includes(searchTerm) || _this.name.toLowerCase().includes(searchTerm); }) :
            this.action_apis;
    };
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Expose"])({ name: 'id_' }),
        __metadata("design:type", String)
    ], AppApi.prototype, "id", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Expose"])({ name: 'actions' }),
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _actionApi__WEBPACK_IMPORTED_MODULE_1__["ActionApi"]; }),
        __metadata("design:type", Array)
    ], AppApi.prototype, "action_apis", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _conditionApi__WEBPACK_IMPORTED_MODULE_2__["ConditionApi"]; }),
        __metadata("design:type", Array)
    ], AppApi.prototype, "condition_apis", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _transformApi__WEBPACK_IMPORTED_MODULE_3__["TransformApi"]; }),
        __metadata("design:type", Array)
    ], AppApi.prototype, "transform_apis", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _deviceApi__WEBPACK_IMPORTED_MODULE_4__["DeviceApi"]; }),
        __metadata("design:type", Array)
    ], AppApi.prototype, "device_apis", void 0);
    return AppApi;
}());



/***/ }),

/***/ "./src/app/models/api/conditionApi.ts":
/*!********************************************!*\
  !*** ./src/app/models/api/conditionApi.ts ***!
  \********************************************/
/*! exports provided: ConditionApi */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConditionApi", function() { return ConditionApi; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _parameterApi__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parameterApi */ "./src/app/models/api/parameterApi.ts");
/* harmony import */ var _returnApi__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./returnApi */ "./src/app/models/api/returnApi.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var ConditionApi = /** @class */ (function () {
    function ConditionApi() {
        this.parameters = [];
        this.returns = [];
        // external_docs: ExternalDoc[] = [];
    }
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _parameterApi__WEBPACK_IMPORTED_MODULE_1__["ParameterApi"]; }),
        __metadata("design:type", Array)
    ], ConditionApi.prototype, "parameters", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _returnApi__WEBPACK_IMPORTED_MODULE_2__["ReturnApi"]; }),
        __metadata("design:type", Array)
    ], ConditionApi.prototype, "returns", void 0);
    return ConditionApi;
}());



/***/ }),

/***/ "./src/app/models/api/deviceApi.ts":
/*!*****************************************!*\
  !*** ./src/app/models/api/deviceApi.ts ***!
  \*****************************************/
/*! exports provided: DeviceApi */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeviceApi", function() { return DeviceApi; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _deviceFieldApi__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./deviceFieldApi */ "./src/app/models/api/deviceFieldApi.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var DeviceApi = /** @class */ (function () {
    function DeviceApi() {
        this.fields = [];
    }
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _deviceFieldApi__WEBPACK_IMPORTED_MODULE_1__["DeviceFieldApi"]; }),
        __metadata("design:type", Array)
    ], DeviceApi.prototype, "fields", void 0);
    return DeviceApi;
}());



/***/ }),

/***/ "./src/app/models/api/deviceFieldApi.ts":
/*!**********************************************!*\
  !*** ./src/app/models/api/deviceFieldApi.ts ***!
  \**********************************************/
/*! exports provided: DeviceFieldApi */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeviceFieldApi", function() { return DeviceFieldApi; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _parameterSchema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parameterSchema */ "./src/app/models/api/parameterSchema.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var DeviceFieldApi = /** @class */ (function () {
    function DeviceFieldApi() {
        this.required = false;
    }
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _parameterSchema__WEBPACK_IMPORTED_MODULE_1__["ParameterSchema"]; }),
        __metadata("design:type", _parameterSchema__WEBPACK_IMPORTED_MODULE_1__["ParameterSchema"])
    ], DeviceFieldApi.prototype, "schema", void 0);
    return DeviceFieldApi;
}());



/***/ }),

/***/ "./src/app/models/api/parameterApi.ts":
/*!********************************************!*\
  !*** ./src/app/models/api/parameterApi.ts ***!
  \********************************************/
/*! exports provided: ParameterApi */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ParameterApi", function() { return ParameterApi; });
var ParameterApi = /** @class */ (function () {
    function ParameterApi() {
        this.required = false;
        this.parallelizable = false;
    }
    return ParameterApi;
}());



/***/ }),

/***/ "./src/app/models/api/parameterSchema.ts":
/*!***********************************************!*\
  !*** ./src/app/models/api/parameterSchema.ts ***!
  \***********************************************/
/*! exports provided: ParameterSchema */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ParameterSchema", function() { return ParameterSchema; });
var ParameterSchema = /** @class */ (function () {
    function ParameterSchema() {
    }
    return ParameterSchema;
}());



/***/ }),

/***/ "./src/app/models/api/returnApi.ts":
/*!*****************************************!*\
  !*** ./src/app/models/api/returnApi.ts ***!
  \*****************************************/
/*! exports provided: ReturnApi */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReturnApi", function() { return ReturnApi; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _parameterSchema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parameterSchema */ "./src/app/models/api/parameterSchema.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var ReturnApi = /** @class */ (function () {
    function ReturnApi() {
        this.failure = false;
    }
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _parameterSchema__WEBPACK_IMPORTED_MODULE_1__["ParameterSchema"]; }),
        __metadata("design:type", _parameterSchema__WEBPACK_IMPORTED_MODULE_1__["ParameterSchema"])
    ], ReturnApi.prototype, "schema", void 0);
    return ReturnApi;
}());



/***/ }),

/***/ "./src/app/models/api/transformApi.ts":
/*!********************************************!*\
  !*** ./src/app/models/api/transformApi.ts ***!
  \********************************************/
/*! exports provided: TransformApi */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TransformApi", function() { return TransformApi; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _parameterApi__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parameterApi */ "./src/app/models/api/parameterApi.ts");
/* harmony import */ var _returnApi__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./returnApi */ "./src/app/models/api/returnApi.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var TransformApi = /** @class */ (function () {
    function TransformApi() {
        this.parameters = [];
        this.returns = [];
        // external_docs: ExternalDoc[] = [];
    }
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _parameterApi__WEBPACK_IMPORTED_MODULE_1__["ParameterApi"]; }),
        __metadata("design:type", Array)
    ], TransformApi.prototype, "parameters", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _returnApi__WEBPACK_IMPORTED_MODULE_2__["ReturnApi"]; }),
        __metadata("design:type", Array)
    ], TransformApi.prototype, "returns", void 0);
    return TransformApi;
}());



/***/ }),

/***/ "./src/app/models/availableResourceAction.ts":
/*!***************************************************!*\
  !*** ./src/app/models/availableResourceAction.ts ***!
  \***************************************************/
/*! exports provided: AvailableResourceAction */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AvailableResourceAction", function() { return AvailableResourceAction; });
var AvailableResourceAction = /** @class */ (function () {
    function AvailableResourceAction() {
        this.actions = [];
    }
    return AvailableResourceAction;
}());



/***/ }),

/***/ "./src/app/models/buckets/bucket.ts":
/*!******************************************!*\
  !*** ./src/app/models/buckets/bucket.ts ***!
  \******************************************/
/*! exports provided: Bucket */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Bucket", function() { return Bucket; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var rxjs_add_operator_toPromise__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs/add/operator/toPromise */ "./node_modules/rxjs-compat/_esm5/add/operator/toPromise.js");
/* harmony import */ var rxjs_add_operator_toPromise__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(rxjs_add_operator_toPromise__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _trigger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./trigger */ "./src/app/models/buckets/trigger.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var Bucket = /** @class */ (function () {
    function Bucket() {
        this.triggers = [];
        this.isHidden = true;
    }
    Bucket.prototype.clone = function () {
        return Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["classToClass"])(this, { ignoreDecorators: true });
    };
    Bucket.prototype.emitTriggerChange = function (bucketService, data) {
        var _this = this;
        if (this.observer)
            bucketService.getAllTriggers().then(function (triggers) { return _this.observer.next(triggers); });
        return data;
    };
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _trigger__WEBPACK_IMPORTED_MODULE_3__["BucketTrigger"]; }),
        __metadata("design:type", Array)
    ], Bucket.prototype, "triggers", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        __metadata("design:type", Boolean)
    ], Bucket.prototype, "isHidden", void 0);
    Bucket = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])({
            providedIn: 'root',
        }),
        __metadata("design:paramtypes", [])
    ], Bucket);
    return Bucket;
}());



/***/ }),

/***/ "./src/app/models/buckets/trigger.ts":
/*!*******************************************!*\
  !*** ./src/app/models/buckets/trigger.ts ***!
  \*******************************************/
/*! exports provided: BucketTrigger */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BucketTrigger", function() { return BucketTrigger; });
var BucketTrigger = /** @class */ (function () {
    function BucketTrigger() {
    }
    return BucketTrigger;
}());



/***/ }),

/***/ "./src/app/models/configuration.ts":
/*!*****************************************!*\
  !*** ./src/app/models/configuration.ts ***!
  \*****************************************/
/*! exports provided: Configuration */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Configuration", function() { return Configuration; });
var Configuration = /** @class */ (function () {
    function Configuration() {
    }
    Configuration.getDefaultConfiguration = function () {
        return {
            access_token_duration: 15,
            refresh_token_duration: 30
        };
    };
    return Configuration;
}());



/***/ }),

/***/ "./src/app/models/dashboard/dashboard.ts":
/*!***********************************************!*\
  !*** ./src/app/models/dashboard/dashboard.ts ***!
  \***********************************************/
/*! exports provided: Dashboard */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Dashboard", function() { return Dashboard; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _dashboardWidget__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dashboardWidget */ "./src/app/models/dashboard/dashboardWidget.ts");
/* harmony import */ var angular2_uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! angular2-uuid */ "./node_modules/angular2-uuid/index.js");
/* harmony import */ var angular2_uuid__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(angular2_uuid__WEBPACK_IMPORTED_MODULE_2__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var Dashboard = /** @class */ (function () {
    function Dashboard() {
        this.widgets = [];
        this.id = angular2_uuid__WEBPACK_IMPORTED_MODULE_2__["UUID"].UUID();
    }
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Expose"])({ name: "id_" }),
        __metadata("design:type", String)
    ], Dashboard.prototype, "id", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _dashboardWidget__WEBPACK_IMPORTED_MODULE_1__["DashboardWidget"]; }, {
            keepDiscriminatorProperty: true,
            discriminator: {
                property: "type_",
                subTypes: [
                    { value: _dashboardWidget__WEBPACK_IMPORTED_MODULE_1__["BarChartWidget"], name: "bar" },
                    { value: _dashboardWidget__WEBPACK_IMPORTED_MODULE_1__["PieChartWidget"], name: "pie" },
                    { value: _dashboardWidget__WEBPACK_IMPORTED_MODULE_1__["LineChartWidget"], name: "line" },
                    { value: _dashboardWidget__WEBPACK_IMPORTED_MODULE_1__["TextWidget"], name: "text" },
                    { value: _dashboardWidget__WEBPACK_IMPORTED_MODULE_1__["TableWidget"], name: "table" },
                    { value: _dashboardWidget__WEBPACK_IMPORTED_MODULE_1__["KibanaWidget"], name: "kibana" },
                ]
            }
        }),
        __metadata("design:type", Array)
    ], Dashboard.prototype, "widgets", void 0);
    return Dashboard;
}());



/***/ }),

/***/ "./src/app/models/dashboard/dashboardWidget.ts":
/*!*****************************************************!*\
  !*** ./src/app/models/dashboard/dashboardWidget.ts ***!
  \*****************************************************/
/*! exports provided: DashboardWidget, ChartWidget, BarChartWidget, PieChartWidget, LineChartWidget, TableWidget, TextWidget, KibanaWidget */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DashboardWidget", function() { return DashboardWidget; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChartWidget", function() { return ChartWidget; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BarChartWidget", function() { return BarChartWidget; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PieChartWidget", function() { return PieChartWidget; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LineChartWidget", function() { return LineChartWidget; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TableWidget", function() { return TableWidget; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextWidget", function() { return TextWidget; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KibanaWidget", function() { return KibanaWidget; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var DashboardWidget = /** @class */ (function () {
    function DashboardWidget(x, y, cols, rows) {
        if (x === void 0) { x = 0; }
        if (y === void 0) { y = 0; }
        if (cols === void 0) { cols = 4; }
        if (rows === void 0) { rows = 4; }
        this.x = x;
        this.y = y;
        this.cols = cols;
        this.rows = rows;
        this.type_ = 'text';
        this.name = "";
        this.options = {};
        this.metadata = {};
    }
    Object.defineProperty(DashboardWidget.prototype, "type", {
        get: function () {
            return this.type_;
        },
        enumerable: true,
        configurable: true
    });
    DashboardWidget.prototype.setMetadata = function (results) {
        this.metadata = results;
    };
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Expose"])({ name: "id_" }),
        __metadata("design:type", String)
    ], DashboardWidget.prototype, "id", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        __metadata("design:type", Object)
    ], DashboardWidget.prototype, "metadata", void 0);
    return DashboardWidget;
}());

var ChartWidget = /** @class */ (function (_super) {
    __extends(ChartWidget, _super);
    function ChartWidget() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.chartOptions = {
            scaleShowVerticalLines: false,
            responsive: true
        };
        _this.showLegend = false;
        return _this;
    }
    ChartWidget.prototype.setMetadata = function (results) {
        this.metadata = {
            chartLabels: results.headers,
            chartData: [{
                    data: results.rows[0],
                    label: (this.options.units) ? this.options.units : 'Count'
                }]
        };
    };
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        __metadata("design:type", Array)
    ], ChartWidget.prototype, "chartLabels", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        __metadata("design:type", Array)
    ], ChartWidget.prototype, "chartData", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        __metadata("design:type", Object)
    ], ChartWidget.prototype, "chartOptions", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        __metadata("design:type", Boolean)
    ], ChartWidget.prototype, "showLegend", void 0);
    return ChartWidget;
}(DashboardWidget));

var BarChartWidget = /** @class */ (function (_super) {
    __extends(BarChartWidget, _super);
    function BarChartWidget() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.type_ = 'bar';
        _this.chartLabels = ['192.168.1.105', '192.168.1.103', '192.168.1.102', '192.168.1.104', '192.168.1.1', 'fe80::219:e3ff:fee7:5d23', 'fe80::2c23:b96c:78d:e116', '169.254.225.22', '0.0.0.0', '255.255.255.255'];
        _this.chartData = [
            { data: [951, 914, 896, 81, 427, 35, 34, 28, 4, 1, 1], label: 'Yesterday' },
            { data: [560, 800, 1200, 43, 500, 80, 25, 50, 10, 0, 0], label: 'Today' },
        ];
        return _this;
    }
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        __metadata("design:type", Array)
    ], BarChartWidget.prototype, "chartLabels", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        __metadata("design:type", Array)
    ], BarChartWidget.prototype, "chartData", void 0);
    return BarChartWidget;
}(ChartWidget));

var PieChartWidget = /** @class */ (function (_super) {
    __extends(PieChartWidget, _super);
    function PieChartWidget() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.type_ = 'pie';
        _this.chartLabels = ['UDP', 'TCP', 'ICMP'];
        _this.chartData = [1881, 1408, 2];
        return _this;
    }
    PieChartWidget.prototype.setMetadata = function (results) {
        this.metadata = {
            chartLabels: results.headers,
            chartData: results.rows[0]
        };
    };
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        __metadata("design:type", Array)
    ], PieChartWidget.prototype, "chartLabels", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        __metadata("design:type", Array)
    ], PieChartWidget.prototype, "chartData", void 0);
    return PieChartWidget;
}(ChartWidget));

var LineChartWidget = /** @class */ (function (_super) {
    __extends(LineChartWidget, _super);
    function LineChartWidget() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.type_ = 'line';
        _this.chartLabels = ['80', '53', '138', '137', '67', '5353', '443', '547', '995', '37'];
        _this.chartData = [
            { data: [1316, 1271, 270, 159, 71, 68, 44, 17, 17, 16], label: 'Count' },
        ];
        return _this;
    }
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        __metadata("design:type", Array)
    ], LineChartWidget.prototype, "chartLabels", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        __metadata("design:type", Array)
    ], LineChartWidget.prototype, "chartData", void 0);
    return LineChartWidget;
}(ChartWidget));

var TableWidget = /** @class */ (function (_super) {
    __extends(TableWidget, _super);
    function TableWidget() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.type_ = 'table';
        return _this;
    }
    TableWidget.prototype.setMetadata = function (results) {
        var columns = results.headers.map(function (h) { return ({ prop: h }); });
        this.metadata = {
            columns: columns,
            rows: results.data
        };
    };
    return TableWidget;
}(DashboardWidget));

var TextWidget = /** @class */ (function (_super) {
    __extends(TextWidget, _super);
    function TextWidget() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.type_ = 'text';
        return _this;
    }
    return TextWidget;
}(DashboardWidget));

var KibanaWidget = /** @class */ (function (_super) {
    __extends(KibanaWidget, _super);
    function KibanaWidget() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.type_ = 'kibana';
        return _this;
    }
    return KibanaWidget;
}(DashboardWidget));



/***/ }),

/***/ "./src/app/models/execution/consoleLog.ts":
/*!************************************************!*\
  !*** ./src/app/models/execution/consoleLog.ts ***!
  \************************************************/
/*! exports provided: ConsoleLog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConsoleLog", function() { return ConsoleLog; });
var ConsoleLog = /** @class */ (function () {
    function ConsoleLog() {
    }
    // action_name: string;
    //
    // app_name: string;
    //
    // workflow: string;
    //
    // level: string;
    ConsoleLog.prototype.toNewConsoleLog = function () {
        var out = new ConsoleLog();
        out.message = this.message;
        // out.action_name = this.action_name;
        // out.app_name = this.app_name;
        // out.workflow = this.workflow;
        // out.level = this.level;
        return out;
    };
    return ConsoleLog;
}());



/***/ }),

/***/ "./src/app/models/execution/nodeStatus.ts":
/*!************************************************!*\
  !*** ./src/app/models/execution/nodeStatus.ts ***!
  \************************************************/
/*! exports provided: NodeStatuses, NodeStatus */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NodeStatuses", function() { return NodeStatuses; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NodeStatus", function() { return NodeStatus; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _playbook_argument__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../playbook/argument */ "./src/app/models/playbook/argument.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var NodeStatuses;
(function (NodeStatuses) {
    //PAUSED = "PAUSED",
    NodeStatuses["AWAITING_DATA"] = "AWAITING_DATA";
    //PENDING = "PENDING",
    //COMPLETED = "COMPLETED",
    //ABORTED = "ABORTED",
    NodeStatuses["EXECUTING"] = "EXECUTING";
    NodeStatuses["SUCCESS"] = "SUCCESS";
    NodeStatuses["FAILURE"] = "FAILURE";
})(NodeStatuses || (NodeStatuses = {}));
var NodeStatus = /** @class */ (function () {
    function NodeStatus() {
        this.arguments = [];
    }
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _playbook_argument__WEBPACK_IMPORTED_MODULE_1__["Argument"]; }),
        __metadata("design:type", Array)
    ], NodeStatus.prototype, "arguments", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])({ toPlainOnly: true }),
        __metadata("design:type", String)
    ], NodeStatus.prototype, "localized_started_at", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])({ toPlainOnly: true }),
        __metadata("design:type", String)
    ], NodeStatus.prototype, "localized_completed_at", void 0);
    return NodeStatus;
}());



/***/ }),

/***/ "./src/app/models/execution/nodeStatusEvent.ts":
/*!*****************************************************!*\
  !*** ./src/app/models/execution/nodeStatusEvent.ts ***!
  \*****************************************************/
/*! exports provided: NodeStatusEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NodeStatusEvent", function() { return NodeStatusEvent; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _playbook_argument__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../playbook/argument */ "./src/app/models/playbook/argument.ts");
/* harmony import */ var _nodeStatus__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./nodeStatus */ "./src/app/models/execution/nodeStatus.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var NodeStatusEvent = /** @class */ (function () {
    function NodeStatusEvent() {
        this.arguments = [];
    }
    NodeStatusEvent.prototype.toNewNodeStatus = function () {
        var out = new _nodeStatus__WEBPACK_IMPORTED_MODULE_2__["NodeStatus"]();
        out.execution_id = this.execution_id;
        out.node_id = this.node_id;
        out.name = this.name;
        out.app_name = this.app_name;
        out.label = this.label;
        out.status = this.status;
        out.started_at = this.started_at;
        out.completed_at = this.completed_at;
        out.arguments = this.arguments;
        out.result = this.result;
        return out;
    };
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Expose"])({ name: 'node_id' }),
        __metadata("design:type", String)
    ], NodeStatusEvent.prototype, "node_id", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _playbook_argument__WEBPACK_IMPORTED_MODULE_1__["Argument"]; }),
        __metadata("design:type", Array)
    ], NodeStatusEvent.prototype, "arguments", void 0);
    return NodeStatusEvent;
}());



/***/ }),

/***/ "./src/app/models/execution/nodeStatusSummary.ts":
/*!*******************************************************!*\
  !*** ./src/app/models/execution/nodeStatusSummary.ts ***!
  \*******************************************************/
/*! exports provided: NodeStatusSummary */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NodeStatusSummary", function() { return NodeStatusSummary; });
var NodeStatusSummary = /** @class */ (function () {
    function NodeStatusSummary() {
    }
    return NodeStatusSummary;
}());



/***/ }),

/***/ "./src/app/models/execution/workflowStatus.ts":
/*!****************************************************!*\
  !*** ./src/app/models/execution/workflowStatus.ts ***!
  \****************************************************/
/*! exports provided: WorkflowStatuses, WorkflowStatus */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WorkflowStatuses", function() { return WorkflowStatuses; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WorkflowStatus", function() { return WorkflowStatus; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _nodeStatus__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./nodeStatus */ "./src/app/models/execution/nodeStatus.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _nodeStatusSummary__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./nodeStatusSummary */ "./src/app/models/execution/nodeStatusSummary.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var WorkflowStatuses;
(function (WorkflowStatuses) {
    WorkflowStatuses["PAUSED"] = "PAUSED";
    WorkflowStatuses["AWAITING_DATA"] = "AWAITING_DATA";
    WorkflowStatuses["PENDING"] = "PENDING";
    WorkflowStatuses["COMPLETED"] = "COMPLETED";
    WorkflowStatuses["ABORTED"] = "ABORTED";
    WorkflowStatuses["EXECUTING"] = "EXECUTING";
    //SUCCESS = "SUCCESS",
    //FAILURE = "FAILURE",
})(WorkflowStatuses || (WorkflowStatuses = {}));
var WorkflowStatus = /** @class */ (function () {
    function WorkflowStatus() {
        this.node_statuses = [];
    }
    Object.defineProperty(WorkflowStatus.prototype, "completed_at_local", {
        get: function () {
            if (this.completed_at)
                return moment__WEBPACK_IMPORTED_MODULE_2__(this.completed_at).format('LL LTS');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(WorkflowStatus.prototype, "completed_at_relative", {
        get: function () {
            if (this.completed_at)
                return moment__WEBPACK_IMPORTED_MODULE_2__(this.completed_at).toNow();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(WorkflowStatus.prototype, "started_at_local", {
        get: function () {
            if (this.started_at)
                return moment__WEBPACK_IMPORTED_MODULE_2__(this.started_at).format('LL LTS');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(WorkflowStatus.prototype, "started_at_relative", {
        get: function () {
            if (this.started_at)
                return moment__WEBPACK_IMPORTED_MODULE_2__(this.started_at).toNow();
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _nodeStatusSummary__WEBPACK_IMPORTED_MODULE_3__["NodeStatusSummary"]; }),
        __metadata("design:type", _nodeStatusSummary__WEBPACK_IMPORTED_MODULE_3__["NodeStatusSummary"])
    ], WorkflowStatus.prototype, "node_status", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _nodeStatus__WEBPACK_IMPORTED_MODULE_1__["NodeStatus"]; }),
        __metadata("design:type", Array)
    ], WorkflowStatus.prototype, "node_statuses", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])({ toPlainOnly: true }),
        __metadata("design:type", String)
    ], WorkflowStatus.prototype, "localized_started_at", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])({ toPlainOnly: true }),
        __metadata("design:type", String)
    ], WorkflowStatus.prototype, "localized_completed_at", void 0);
    return WorkflowStatus;
}());



/***/ }),

/***/ "./src/app/models/execution/workflowStatusEvent.ts":
/*!*********************************************************!*\
  !*** ./src/app/models/execution/workflowStatusEvent.ts ***!
  \*********************************************************/
/*! exports provided: WorkflowStatusEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WorkflowStatusEvent", function() { return WorkflowStatusEvent; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _workflowStatus__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./workflowStatus */ "./src/app/models/execution/workflowStatus.ts");
/* harmony import */ var _nodeStatusSummary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./nodeStatusSummary */ "./src/app/models/execution/nodeStatusSummary.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var WorkflowStatusEvent = /** @class */ (function () {
    function WorkflowStatusEvent() {
    }
    WorkflowStatusEvent.prototype.toNewWorkflowStatus = function () {
        var out = new _workflowStatus__WEBPACK_IMPORTED_MODULE_1__["WorkflowStatus"]();
        out.execution_id = this.execution_id;
        out.workflow_id = this.workflow_id;
        out.name = this.name;
        out.status = this.status;
        out.node_status = this.node_status;
        return out;
    };
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _nodeStatusSummary__WEBPACK_IMPORTED_MODULE_2__["NodeStatusSummary"]; }),
        __metadata("design:type", _nodeStatusSummary__WEBPACK_IMPORTED_MODULE_2__["NodeStatusSummary"])
    ], WorkflowStatusEvent.prototype, "node_status", void 0);
    return WorkflowStatusEvent;
}());



/***/ }),

/***/ "./src/app/models/global.ts":
/*!**********************************!*\
  !*** ./src/app/models/global.ts ***!
  \**********************************/
/*! exports provided: Global */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Global", function() { return Global; });
var Global = /** @class */ (function () {
    function Global() {
        this.fields = [];
    }
    return Global;
}());



/***/ }),

/***/ "./src/app/models/message/message.ts":
/*!*******************************************!*\
  !*** ./src/app/models/message/message.ts ***!
  \*******************************************/
/*! exports provided: Message */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Message", function() { return Message; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _messageBody__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./messageBody */ "./src/app/models/message/messageBody.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var Message = /** @class */ (function () {
    function Message() {
        this.body = [];
        this.read_by = [];
    }
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _messageBody__WEBPACK_IMPORTED_MODULE_1__["MessageBody"]; }),
        __metadata("design:type", Array)
    ], Message.prototype, "body", void 0);
    return Message;
}());



/***/ }),

/***/ "./src/app/models/message/messageBody.ts":
/*!***********************************************!*\
  !*** ./src/app/models/message/messageBody.ts ***!
  \***********************************************/
/*! exports provided: MessageBody */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessageBody", function() { return MessageBody; });
var MessageBody = /** @class */ (function () {
    function MessageBody() {
    }
    return MessageBody;
}());



/***/ }),

/***/ "./src/app/models/message/messageListing.ts":
/*!**************************************************!*\
  !*** ./src/app/models/message/messageListing.ts ***!
  \**************************************************/
/*! exports provided: MessageListing */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessageListing", function() { return MessageListing; });
var MessageListing = /** @class */ (function () {
    function MessageListing() {
    }
    return MessageListing;
}());



/***/ }),

/***/ "./src/app/models/message/messageUpdate.ts":
/*!*************************************************!*\
  !*** ./src/app/models/message/messageUpdate.ts ***!
  \*************************************************/
/*! exports provided: MessageUpdate */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MessageUpdate", function() { return MessageUpdate; });
var MessageUpdate = /** @class */ (function () {
    function MessageUpdate() {
    }
    return MessageUpdate;
}());



/***/ }),

/***/ "./src/app/models/metric/actionMetric.ts":
/*!***********************************************!*\
  !*** ./src/app/models/metric/actionMetric.ts ***!
  \***********************************************/
/*! exports provided: ActionMetric */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ActionMetric", function() { return ActionMetric; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _metric__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./metric */ "./src/app/models/metric/metric.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var ActionMetric = /** @class */ (function () {
    function ActionMetric() {
        this.success_metrics = new _metric__WEBPACK_IMPORTED_MODULE_1__["Metric"]();
        this.error_metrics = new _metric__WEBPACK_IMPORTED_MODULE_1__["Metric"]();
    }
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _metric__WEBPACK_IMPORTED_MODULE_1__["Metric"]; }),
        __metadata("design:type", _metric__WEBPACK_IMPORTED_MODULE_1__["Metric"])
    ], ActionMetric.prototype, "success_metrics", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _metric__WEBPACK_IMPORTED_MODULE_1__["Metric"]; }),
        __metadata("design:type", _metric__WEBPACK_IMPORTED_MODULE_1__["Metric"])
    ], ActionMetric.prototype, "error_metrics", void 0);
    return ActionMetric;
}());



/***/ }),

/***/ "./src/app/models/metric/appMetric.ts":
/*!********************************************!*\
  !*** ./src/app/models/metric/appMetric.ts ***!
  \********************************************/
/*! exports provided: AppMetric */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppMetric", function() { return AppMetric; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _actionMetric__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./actionMetric */ "./src/app/models/metric/actionMetric.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var AppMetric = /** @class */ (function () {
    function AppMetric() {
        this.actions = [];
    }
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _actionMetric__WEBPACK_IMPORTED_MODULE_1__["ActionMetric"]; }),
        __metadata("design:type", Array)
    ], AppMetric.prototype, "actions", void 0);
    return AppMetric;
}());



/***/ }),

/***/ "./src/app/models/metric/metric.ts":
/*!*****************************************!*\
  !*** ./src/app/models/metric/metric.ts ***!
  \*****************************************/
/*! exports provided: Metric */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Metric", function() { return Metric; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);

var Metric = /** @class */ (function () {
    function Metric() {
        this.count = 0;
        this.avg_time = '0:00:00.000000';
    }
    Object.defineProperty(Metric.prototype, "display_avg_time", {
        get: function () {
            var duration = moment__WEBPACK_IMPORTED_MODULE_0__["duration"](this.avg_time);
            return duration.asSeconds() >= 1 ? duration.asSeconds() + ' s' : duration.asMilliseconds() + ' ms';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Metric.prototype, "display_text", {
        get: function () {
            return (this.count > 0) ? this.count + " (" + this.display_avg_time + ")" : '0';
        },
        enumerable: true,
        configurable: true
    });
    return Metric;
}());



/***/ }),

/***/ "./src/app/models/metric/workflowMetric.ts":
/*!*************************************************!*\
  !*** ./src/app/models/metric/workflowMetric.ts ***!
  \*************************************************/
/*! exports provided: WorkflowMetric */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WorkflowMetric", function() { return WorkflowMetric; });
/* harmony import */ var _metric__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./metric */ "./src/app/models/metric/metric.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var WorkflowMetric = /** @class */ (function (_super) {
    __extends(WorkflowMetric, _super);
    function WorkflowMetric() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return WorkflowMetric;
}(_metric__WEBPACK_IMPORTED_MODULE_0__["Metric"]));



/***/ }),

/***/ "./src/app/models/playbook/action.ts":
/*!*******************************************!*\
  !*** ./src/app/models/playbook/action.ts ***!
  \*******************************************/
/*! exports provided: Action */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Action", function() { return Action; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _argument__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./argument */ "./src/app/models/playbook/argument.ts");
/* harmony import */ var _graphPosition__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./graphPosition */ "./src/app/models/playbook/graphPosition.ts");
/* harmony import */ var _executionElement__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./executionElement */ "./src/app/models/playbook/executionElement.ts");
/* harmony import */ var _api_actionApi__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../api/actionApi */ "./src/app/models/api/actionApi.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var Action = /** @class */ (function (_super) {
    __extends(Action, _super);
    function Action() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.action_type = _api_actionApi__WEBPACK_IMPORTED_MODULE_4__["ActionType"].ACTION;
        _this.arguments = [];
        return _this;
    }
    Object.defineProperty(Action.prototype, "all_errors", {
        get: function () {
            var _a;
            return (_a = this.errors).concat.apply(_a, (this.arguments) ? this.arguments.map(function (argument) { return argument.all_errors; }) : []);
        },
        enumerable: true,
        configurable: true
    });
    Action.prototype.getArgument = function (name) {
        return this.arguments.find(function (a) { return a.name == name; });
    };
    Object.defineProperty(Action.prototype, "parallelized", {
        get: function () {
            return (this.parallel_parameter) ? true : false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Action.prototype, "parallel_parameter", {
        get: function () {
            var argument = this.arguments.find(function (a) { return a.parallelized == true; });
            return (argument) ? argument.name : null;
        },
        set: function (name) {
            this.arguments.forEach(function (a) { return a.parallelized = false; });
            var argument = this.arguments.find(function (a) { return a.name == name; });
            if (argument)
                argument.parallelized = true;
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        __metadata("design:type", String)
    ], Action.prototype, "action_type", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Expose"])({ name: 'label' }),
        __metadata("design:type", String)
    ], Action.prototype, "name", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _graphPosition__WEBPACK_IMPORTED_MODULE_2__["GraphPosition"]; }),
        __metadata("design:type", _graphPosition__WEBPACK_IMPORTED_MODULE_2__["GraphPosition"])
    ], Action.prototype, "position", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Expose"])({ name: 'name' }),
        __metadata("design:type", String)
    ], Action.prototype, "action_name", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Expose"])({ name: 'parameters' }),
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _argument__WEBPACK_IMPORTED_MODULE_1__["Argument"]; }),
        __metadata("design:type", Array)
    ], Action.prototype, "arguments", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Expose"])(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [])
    ], Action.prototype, "parallelized", null);
    return Action;
}(_executionElement__WEBPACK_IMPORTED_MODULE_3__["ExecutionElement"]));



/***/ }),

/***/ "./src/app/models/playbook/argument.ts":
/*!*********************************************!*\
  !*** ./src/app/models/playbook/argument.ts ***!
  \*********************************************/
/*! exports provided: Variant, Argument */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Variant", function() { return Variant; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Argument", function() { return Argument; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_transformer_TransformOperationExecutor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-transformer/TransformOperationExecutor */ "./node_modules/class-transformer/TransformOperationExecutor.js");
/* harmony import */ var class_transformer_TransformOperationExecutor__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_transformer_TransformOperationExecutor__WEBPACK_IMPORTED_MODULE_1__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var Variant;
(function (Variant) {
    Variant["STATIC_VALUE"] = "STATIC_VALUE";
    Variant["ACTION_RESULT"] = "ACTION_RESULT";
    Variant["WORKFLOW_VARIABLE"] = "WORKFLOW_VARIABLE";
    Variant["GLOBAL"] = "GLOBAL";
})(Variant || (Variant = {}));
var Argument = /** @class */ (function () {
    function Argument() {
        /**
         * The type of argument in question
         */
        this.variant = Variant.STATIC_VALUE;
        /**
         * If the worker should run this action in parallel based on this parameter or not
         */
        this.parallelized = false;
        /**
         * Array of errors returned from the server for this Argument
         */
        this.errors = [];
    }
    Object.defineProperty(Argument.prototype, "all_errors", {
        /**
         * Array of errors returned from the server for this Argument and any of its descendants
         */
        get: function () {
            return this.errors;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Argument.prototype, "has_errors", {
        /**
         * Returns true if this Argument or any of its descendants contain errors
         */
        get: function () {
            return (this.all_errors.length > 0) ? true : false;
        },
        enumerable: true,
        configurable: true
    });
    Argument.prototype.hasInput = function () {
        return this.value;
    };
    Argument.prototype.sanitize = function () {
        // First trim any string inputs for sanitation and so we can check against ''
        if (typeof (this.value) === 'string') {
            this.value = this.value.trim();
        }
    };
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Expose"])({ name: 'id_' }),
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])({ toPlainOnly: true }),
        __metadata("design:type", Number)
    ], Argument.prototype, "id", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Transform"])(function (value, obj, type) {
            switch (type) {
                case class_transformer_TransformOperationExecutor__WEBPACK_IMPORTED_MODULE_1__["TransformationType"].CLASS_TO_PLAIN:
                    if (value)
                        return value.split('.').map(function (v, i) { return ({ name: 'selection_' + i, value: v }); });
                    break;
                case class_transformer_TransformOperationExecutor__WEBPACK_IMPORTED_MODULE_1__["TransformationType"].PLAIN_TO_CLASS:
                    if (Array.isArray(value))
                        return value.map(function (v) { return v.value; }).join('.');
                    break;
                default:
                    if (value)
                        return value;
            }
        }),
        __metadata("design:type", Object)
    ], Argument.prototype, "selection", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        __metadata("design:type", Array)
    ], Argument.prototype, "errors", void 0);
    return Argument;
}());



/***/ }),

/***/ "./src/app/models/playbook/branch.ts":
/*!*******************************************!*\
  !*** ./src/app/models/playbook/branch.ts ***!
  \*******************************************/
/*! exports provided: Branch */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Branch", function() { return Branch; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _conditionalExpression__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./conditionalExpression */ "./src/app/models/playbook/conditionalExpression.ts");
/* harmony import */ var _executionElement__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./executionElement */ "./src/app/models/playbook/executionElement.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var Branch = /** @class */ (function (_super) {
    __extends(Branch, _super);
    function Branch() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(Branch.prototype, "all_errors", {
        get: function () {
            return this.errors.concat((this.condition) ? this.condition.all_errors : []);
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        __metadata("design:type", String)
    ], Branch.prototype, "status", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        __metadata("design:type", Number)
    ], Branch.prototype, "priority", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _conditionalExpression__WEBPACK_IMPORTED_MODULE_1__["ConditionalExpression"]; }),
        __metadata("design:type", _conditionalExpression__WEBPACK_IMPORTED_MODULE_1__["ConditionalExpression"])
    ], Branch.prototype, "condition", void 0);
    return Branch;
}(_executionElement__WEBPACK_IMPORTED_MODULE_2__["ExecutionElement"]));



/***/ }),

/***/ "./src/app/models/playbook/condition.ts":
/*!**********************************************!*\
  !*** ./src/app/models/playbook/condition.ts ***!
  \**********************************************/
/*! exports provided: Condition */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Condition", function() { return Condition; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _argument__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./argument */ "./src/app/models/playbook/argument.ts");
/* harmony import */ var _executionElement__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./executionElement */ "./src/app/models/playbook/executionElement.ts");
/* harmony import */ var _graphPosition__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./graphPosition */ "./src/app/models/playbook/graphPosition.ts");
/* harmony import */ var _api_actionApi__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../api/actionApi */ "./src/app/models/api/actionApi.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var Condition = /** @class */ (function (_super) {
    __extends(Condition, _super);
    function Condition() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.action_type = _api_actionApi__WEBPACK_IMPORTED_MODULE_4__["ActionType"].CONDITION;
        _this.name = 'Label';
        _this.app_name = 'Builtin';
        _this.action_name = 'Condition';
        _this.arguments = [];
        _this.conditional = '';
        return _this;
    }
    Object.defineProperty(Condition.prototype, "all_errors", {
        get: function () {
            var _a;
            return (_a = this.errors).concat.apply(_a, this.arguments.map(function (argument) { return argument.all_errors; }));
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        __metadata("design:type", String)
    ], Condition.prototype, "action_type", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Expose"])({ name: 'label' }),
        __metadata("design:type", String)
    ], Condition.prototype, "name", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Expose"])({ name: 'name' }),
        __metadata("design:type", String)
    ], Condition.prototype, "action_name", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _graphPosition__WEBPACK_IMPORTED_MODULE_3__["GraphPosition"]; }),
        __metadata("design:type", _graphPosition__WEBPACK_IMPORTED_MODULE_3__["GraphPosition"])
    ], Condition.prototype, "position", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _argument__WEBPACK_IMPORTED_MODULE_1__["Argument"]; }),
        __metadata("design:type", Array)
    ], Condition.prototype, "arguments", void 0);
    return Condition;
}(_executionElement__WEBPACK_IMPORTED_MODULE_2__["ExecutionElement"]));



/***/ }),

/***/ "./src/app/models/playbook/conditionalExpression.ts":
/*!**********************************************************!*\
  !*** ./src/app/models/playbook/conditionalExpression.ts ***!
  \**********************************************************/
/*! exports provided: ConditionalExpression */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConditionalExpression", function() { return ConditionalExpression; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _executionElement__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./executionElement */ "./src/app/models/playbook/executionElement.ts");
/* harmony import */ var _condition__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./condition */ "./src/app/models/playbook/condition.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var ConditionalExpression = /** @class */ (function (_super) {
    __extends(ConditionalExpression, _super);
    function ConditionalExpression() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.conditions = [];
        _this.child_expressions = [];
        return _this;
    }
    Object.defineProperty(ConditionalExpression.prototype, "all_errors", {
        get: function () {
            var _a, _b;
            return (_a = (_b = this.errors).concat.apply(_b, this.conditions.map(function (condition) { return condition.all_errors; }))).concat.apply(_a, this.child_expressions.map(function (expression) { return expression.all_errors; }));
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _condition__WEBPACK_IMPORTED_MODULE_2__["Condition"]; }),
        __metadata("design:type", Array)
    ], ConditionalExpression.prototype, "conditions", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return ConditionalExpression; }),
        __metadata("design:type", Array)
    ], ConditionalExpression.prototype, "child_expressions", void 0);
    return ConditionalExpression;
}(_executionElement__WEBPACK_IMPORTED_MODULE_1__["ExecutionElement"]));



/***/ }),

/***/ "./src/app/models/playbook/environmentVariable.ts":
/*!********************************************************!*\
  !*** ./src/app/models/playbook/environmentVariable.ts ***!
  \********************************************************/
/*! exports provided: EnvironmentVariable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EnvironmentVariable", function() { return EnvironmentVariable; });
/* harmony import */ var angular2_uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular2-uuid */ "./node_modules/angular2-uuid/index.js");
/* harmony import */ var angular2_uuid__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular2_uuid__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_1__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var EnvironmentVariable = /** @class */ (function () {
    function EnvironmentVariable() {
        this.id = angular2_uuid__WEBPACK_IMPORTED_MODULE_0__["UUID"].UUID();
    }
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["Expose"])({ name: "id_" }),
        __metadata("design:type", String)
    ], EnvironmentVariable.prototype, "id", void 0);
    return EnvironmentVariable;
}());



/***/ }),

/***/ "./src/app/models/playbook/executionElement.ts":
/*!*****************************************************!*\
  !*** ./src/app/models/playbook/executionElement.ts ***!
  \*****************************************************/
/*! exports provided: ExecutionElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExecutionElement", function() { return ExecutionElement; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var ExecutionElement = /** @class */ (function () {
    function ExecutionElement() {
        this.errors = [];
        //this.id = UUID.UUID()
    }
    Object.defineProperty(ExecutionElement.prototype, "all_errors", {
        get: function () {
            return this.errors;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ExecutionElement.prototype, "has_errors", {
        get: function () {
            return (this.all_errors.length > 0) ? true : false;
        },
        enumerable: true,
        configurable: true
    });
    ExecutionElement.prototype.clone = function () {
        return Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["classToClass"])(this, { ignoreDecorators: true });
    };
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Expose"])({ name: "id_" }),
        __metadata("design:type", String)
    ], ExecutionElement.prototype, "id", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])({ toPlainOnly: true }),
        __metadata("design:type", Array)
    ], ExecutionElement.prototype, "errors", void 0);
    return ExecutionElement;
}());



/***/ }),

/***/ "./src/app/models/playbook/graphPosition.ts":
/*!**************************************************!*\
  !*** ./src/app/models/playbook/graphPosition.ts ***!
  \**************************************************/
/*! exports provided: GraphPosition */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GraphPosition", function() { return GraphPosition; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var GraphPosition = /** @class */ (function () {
    function GraphPosition() {
    }
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Expose"])({ name: 'id_' }),
        __metadata("design:type", String)
    ], GraphPosition.prototype, "id", void 0);
    return GraphPosition;
}());



/***/ }),

/***/ "./src/app/models/playbook/playbook.ts":
/*!*********************************************!*\
  !*** ./src/app/models/playbook/playbook.ts ***!
  \*********************************************/
/*! exports provided: Playbook */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Playbook", function() { return Playbook; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _workflow__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./workflow */ "./src/app/models/playbook/workflow.ts");
/* harmony import */ var _executionElement__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./executionElement */ "./src/app/models/playbook/executionElement.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var Playbook = /** @class */ (function (_super) {
    __extends(Playbook, _super);
    function Playbook() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.workflows = [];
        return _this;
    }
    Object.defineProperty(Playbook.prototype, "all_errors", {
        get: function () {
            var _a;
            return (_a = this.errors).concat.apply(_a, this.workflows.map(function (workflow) { return workflow.all_errors; }));
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _workflow__WEBPACK_IMPORTED_MODULE_1__["Workflow"]; }),
        __metadata("design:type", Array)
    ], Playbook.prototype, "workflows", void 0);
    return Playbook;
}(_executionElement__WEBPACK_IMPORTED_MODULE_2__["ExecutionElement"]));



/***/ }),

/***/ "./src/app/models/playbook/transform.ts":
/*!**********************************************!*\
  !*** ./src/app/models/playbook/transform.ts ***!
  \**********************************************/
/*! exports provided: Transform */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Transform", function() { return Transform; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _argument__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./argument */ "./src/app/models/playbook/argument.ts");
/* harmony import */ var _executionElement__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./executionElement */ "./src/app/models/playbook/executionElement.ts");
/* harmony import */ var _graphPosition__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./graphPosition */ "./src/app/models/playbook/graphPosition.ts");
/* harmony import */ var _api_actionApi__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../api/actionApi */ "./src/app/models/api/actionApi.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var Transform = /** @class */ (function (_super) {
    __extends(Transform, _super);
    function Transform() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.action_type = _api_actionApi__WEBPACK_IMPORTED_MODULE_4__["ActionType"].TRANSFORM;
        _this.name = 'Label';
        _this.app_name = 'Builtin';
        _this.action_name = 'Transform';
        _this.arguments = [];
        _this.transform = '';
        return _this;
    }
    Object.defineProperty(Transform.prototype, "all_errors", {
        get: function () {
            var _a;
            return (_a = this.errors).concat.apply(_a, this.arguments.map(function (argument) { return argument.all_errors; }));
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        __metadata("design:type", String)
    ], Transform.prototype, "action_type", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Expose"])({ name: 'label' }),
        __metadata("design:type", String)
    ], Transform.prototype, "name", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Expose"])({ name: 'name' }),
        __metadata("design:type", String)
    ], Transform.prototype, "action_name", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _graphPosition__WEBPACK_IMPORTED_MODULE_3__["GraphPosition"]; }),
        __metadata("design:type", _graphPosition__WEBPACK_IMPORTED_MODULE_3__["GraphPosition"])
    ], Transform.prototype, "position", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _argument__WEBPACK_IMPORTED_MODULE_1__["Argument"]; }),
        __metadata("design:type", Array)
    ], Transform.prototype, "arguments", void 0);
    return Transform;
}(_executionElement__WEBPACK_IMPORTED_MODULE_2__["ExecutionElement"]));



/***/ }),

/***/ "./src/app/models/playbook/trigger.ts":
/*!********************************************!*\
  !*** ./src/app/models/playbook/trigger.ts ***!
  \********************************************/
/*! exports provided: Trigger */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Trigger", function() { return Trigger; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _argument__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./argument */ "./src/app/models/playbook/argument.ts");
/* harmony import */ var _executionElement__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./executionElement */ "./src/app/models/playbook/executionElement.ts");
/* harmony import */ var _graphPosition__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./graphPosition */ "./src/app/models/playbook/graphPosition.ts");
/* harmony import */ var _api_actionApi__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../api/actionApi */ "./src/app/models/api/actionApi.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var Trigger = /** @class */ (function (_super) {
    __extends(Trigger, _super);
    function Trigger() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.action_type = _api_actionApi__WEBPACK_IMPORTED_MODULE_4__["ActionType"].TRIGGER;
        _this.name = 'Label';
        _this.app_name = 'Builtin';
        _this.action_name = 'Trigger';
        _this.arguments = [];
        _this.trigger_schema = {};
        return _this;
    }
    Object.defineProperty(Trigger.prototype, "all_errors", {
        get: function () {
            var _a;
            return (_a = this.errors).concat.apply(_a, this.arguments.map(function (argument) { return argument.all_errors; }));
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        __metadata("design:type", String)
    ], Trigger.prototype, "action_type", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Expose"])({ name: 'label' }),
        __metadata("design:type", String)
    ], Trigger.prototype, "name", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Expose"])({ name: 'name' }),
        __metadata("design:type", String)
    ], Trigger.prototype, "action_name", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _graphPosition__WEBPACK_IMPORTED_MODULE_3__["GraphPosition"]; }),
        __metadata("design:type", _graphPosition__WEBPACK_IMPORTED_MODULE_3__["GraphPosition"])
    ], Trigger.prototype, "position", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Exclude"])(),
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _argument__WEBPACK_IMPORTED_MODULE_1__["Argument"]; }),
        __metadata("design:type", Array)
    ], Trigger.prototype, "arguments", void 0);
    return Trigger;
}(_executionElement__WEBPACK_IMPORTED_MODULE_2__["ExecutionElement"]));



/***/ }),

/***/ "./src/app/models/playbook/workflow.ts":
/*!*********************************************!*\
  !*** ./src/app/models/playbook/workflow.ts ***!
  \*********************************************/
/*! exports provided: Workflow */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Workflow", function() { return Workflow; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _action__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./action */ "./src/app/models/playbook/action.ts");
/* harmony import */ var _branch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./branch */ "./src/app/models/playbook/branch.ts");
/* harmony import */ var _executionElement__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./executionElement */ "./src/app/models/playbook/executionElement.ts");
/* harmony import */ var _environmentVariable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./environmentVariable */ "./src/app/models/playbook/environmentVariable.ts");
/* harmony import */ var _condition__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./condition */ "./src/app/models/playbook/condition.ts");
/* harmony import */ var _trigger__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./trigger */ "./src/app/models/playbook/trigger.ts");
/* harmony import */ var _transform__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./transform */ "./src/app/models/playbook/transform.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var Workflow = /** @class */ (function (_super) {
    __extends(Workflow, _super);
    function Workflow() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        /**
         * Name of the workflow. Updated by passing in new_name in POST.
         */
        _this.tags = [];
        /**
         * Array of actions specified in the workflow.
         */
        _this.actions = [];
        /**
         * Array of branches between actions.
         */
        _this.branches = [];
        /**
         * Array of conditions between actions.
         */
        _this.conditions = [];
        /**
         * Array of triggers between actions.
         */
        _this.triggers = [];
        /**
         * Array of triggers between actions.
         */
        _this.transforms = [];
        /**
         * Array of environment variables.
         */
        _this.environment_variables = [];
        return _this;
    }
    Object.defineProperty(Workflow.prototype, "nodes", {
        get: function () {
            return [].concat(this.actions, this.conditions, this.triggers, this.transforms);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Workflow.prototype, "all_errors", {
        /**
         * Array of errors returned from the server for this Argument and any of its descendants
         */
        get: function () {
            var _a;
            return (_a = this.errors).concat.apply(_a, this.nodes.map(function (action) { return action.all_errors; }));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Workflow.prototype, "all_arguments", {
        get: function () {
            var allArgs = [];
            this.nodes.forEach(function (action) { return allArgs = allArgs.concat(action.arguments); });
            return allArgs;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Workflow.prototype, "referenced_variables", {
        get: function () {
            var _this = this;
            if (!this.environment_variables)
                return [];
            return this.environment_variables.filter(function (variable) { return _this.all_arguments.some(function (arg) { return arg.value == variable.id; }); });
        },
        enumerable: true,
        configurable: true
    });
    Workflow.prototype.addNode = function (node) {
        if (node instanceof _action__WEBPACK_IMPORTED_MODULE_1__["Action"])
            this.actions.push(node);
        else if (node instanceof _condition__WEBPACK_IMPORTED_MODULE_5__["Condition"])
            this.conditions.push(node);
        else if (node instanceof _trigger__WEBPACK_IMPORTED_MODULE_6__["Trigger"])
            this.triggers.push(node);
        else if (node instanceof _transform__WEBPACK_IMPORTED_MODULE_7__["Transform"])
            this.transforms.push(node);
    };
    Workflow.prototype.removeNode = function (nodeId) {
        this.actions = this.actions.filter(function (a) { return a.id !== nodeId; });
        this.conditions = this.conditions.filter(function (a) { return a.id !== nodeId; });
        this.triggers = this.triggers.filter(function (a) { return a.id !== nodeId; });
        this.transforms = this.transforms.filter(function (a) { return a.id !== nodeId; });
        this.branches = this.branches.filter(function (b) { return !(b.source_id === nodeId || b.destination_id === nodeId); });
    };
    Workflow.prototype.deleteVariable = function (deletedVariable) {
        this.environment_variables = this.environment_variables.filter(function (variable) { return variable.id !== deletedVariable.id; });
        this.all_arguments.filter(function (arg) { return arg.value == deletedVariable.id; }).forEach(function (arg) { return arg.value = ''; });
    };
    Workflow.prototype.getNextActionName = function (actionName) {
        var numActions = this.nodes.filter(function (a) { return a.action_name === actionName && a.name; }).length;
        return numActions ? actionName + "_" + ++numActions : actionName;
    };
    Workflow.prototype.getPreviousActions = function (action) {
        var _this = this;
        return this.branches
            .filter(function (b) { return b.destination_id == action.id; })
            .map(function (b) { return _this.nodes.find(function (a) { return a.id == b.source_id; }); })
            .reduce(function (previous, action) { return previous.concat([action], _this.getPreviousActions(action)).filter(function (v, i, a) { return a.indexOf(v) == i; }); }, []);
    };
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _action__WEBPACK_IMPORTED_MODULE_1__["Action"]; }),
        __metadata("design:type", Array)
    ], Workflow.prototype, "actions", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _branch__WEBPACK_IMPORTED_MODULE_2__["Branch"]; }),
        __metadata("design:type", Array)
    ], Workflow.prototype, "branches", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _condition__WEBPACK_IMPORTED_MODULE_5__["Condition"]; }),
        __metadata("design:type", Array)
    ], Workflow.prototype, "conditions", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _trigger__WEBPACK_IMPORTED_MODULE_6__["Trigger"]; }),
        __metadata("design:type", Array)
    ], Workflow.prototype, "triggers", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _transform__WEBPACK_IMPORTED_MODULE_7__["Transform"]; }),
        __metadata("design:type", Array)
    ], Workflow.prototype, "transforms", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _environmentVariable__WEBPACK_IMPORTED_MODULE_4__["EnvironmentVariable"]; }),
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Expose"])({ name: 'workflow_variables' }),
        __metadata("design:type", Array)
    ], Workflow.prototype, "environment_variables", void 0);
    return Workflow;
}(_executionElement__WEBPACK_IMPORTED_MODULE_3__["ExecutionElement"]));



/***/ }),

/***/ "./src/app/models/resource.ts":
/*!************************************!*\
  !*** ./src/app/models/resource.ts ***!
  \************************************/
/*! exports provided: Resource */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Resource", function() { return Resource; });
var Resource = /** @class */ (function () {
    function Resource() {
        this.permissions = [];
    }
    return Resource;
}());



/***/ }),

/***/ "./src/app/models/role.ts":
/*!********************************!*\
  !*** ./src/app/models/role.ts ***!
  \********************************/
/*! exports provided: Role */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Role", function() { return Role; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _resource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./resource */ "./src/app/models/resource.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var Role = /** @class */ (function () {
    function Role() {
        this.resources = [];
    }
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _resource__WEBPACK_IMPORTED_MODULE_1__["Resource"]; }),
        __metadata("design:type", Array)
    ], Role.prototype, "resources", void 0);
    return Role;
}());



/***/ }),

/***/ "./src/app/models/scheduler/scheduledTask.ts":
/*!***************************************************!*\
  !*** ./src/app/models/scheduler/scheduledTask.ts ***!
  \***************************************************/
/*! exports provided: ScheduledTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ScheduledTask", function() { return ScheduledTask; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _scheduledTaskTrigger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scheduledTaskTrigger */ "./src/app/models/scheduler/scheduledTaskTrigger.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var ScheduledTask = /** @class */ (function () {
    function ScheduledTask() {
        this.workflows = [];
        this.task_trigger = new _scheduledTaskTrigger__WEBPACK_IMPORTED_MODULE_1__["ScheduledTaskTrigger"]();
    }
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _scheduledTaskTrigger__WEBPACK_IMPORTED_MODULE_1__["ScheduledTaskTrigger"]; }),
        __metadata("design:type", _scheduledTaskTrigger__WEBPACK_IMPORTED_MODULE_1__["ScheduledTaskTrigger"])
    ], ScheduledTask.prototype, "task_trigger", void 0);
    return ScheduledTask;
}());



/***/ }),

/***/ "./src/app/models/scheduler/scheduledTaskCron.ts":
/*!*******************************************************!*\
  !*** ./src/app/models/scheduler/scheduledTaskCron.ts ***!
  \*******************************************************/
/*! exports provided: ScheduledTaskCron */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ScheduledTaskCron", function() { return ScheduledTaskCron; });
var ScheduledTaskCron = /** @class */ (function () {
    function ScheduledTaskCron() {
    }
    return ScheduledTaskCron;
}());



/***/ }),

/***/ "./src/app/models/scheduler/scheduledTaskDate.ts":
/*!*******************************************************!*\
  !*** ./src/app/models/scheduler/scheduledTaskDate.ts ***!
  \*******************************************************/
/*! exports provided: ScheduledTaskDate */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ScheduledTaskDate", function() { return ScheduledTaskDate; });
var ScheduledTaskDate = /** @class */ (function () {
    function ScheduledTaskDate() {
    }
    return ScheduledTaskDate;
}());



/***/ }),

/***/ "./src/app/models/scheduler/scheduledTaskInterval.ts":
/*!***********************************************************!*\
  !*** ./src/app/models/scheduler/scheduledTaskInterval.ts ***!
  \***********************************************************/
/*! exports provided: ScheduledTaskInterval */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ScheduledTaskInterval", function() { return ScheduledTaskInterval; });
var ScheduledTaskInterval = /** @class */ (function () {
    function ScheduledTaskInterval() {
    }
    return ScheduledTaskInterval;
}());



/***/ }),

/***/ "./src/app/models/scheduler/scheduledTaskTrigger.ts":
/*!**********************************************************!*\
  !*** ./src/app/models/scheduler/scheduledTaskTrigger.ts ***!
  \**********************************************************/
/*! exports provided: ScheduledTaskTrigger */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ScheduledTaskTrigger", function() { return ScheduledTaskTrigger; });
var ScheduledTaskTrigger = /** @class */ (function () {
    function ScheduledTaskTrigger() {
    }
    return ScheduledTaskTrigger;
}());



/***/ }),

/***/ "./src/app/models/user.ts":
/*!********************************!*\
  !*** ./src/app/models/user.ts ***!
  \********************************/
/*! exports provided: User */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "User", function() { return User; });
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _role__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./role */ "./src/app/models/role.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var User = /** @class */ (function () {
    function User() {
        this.roles = [];
    }
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_0__["Type"])(function () { return _role__WEBPACK_IMPORTED_MODULE_1__["Role"]; }),
        __metadata("design:type", Array)
    ], User.prototype, "roles", void 0);
    return User;
}());



/***/ }),

/***/ "./src/app/models/userClaims.ts":
/*!**************************************!*\
  !*** ./src/app/models/userClaims.ts ***!
  \**************************************/
/*! exports provided: UserClaims */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserClaims", function() { return UserClaims; });
var UserClaims = /** @class */ (function () {
    function UserClaims() {
    }
    return UserClaims;
}());



/***/ }),

/***/ "./src/app/models/variable.ts":
/*!************************************!*\
  !*** ./src/app/models/variable.ts ***!
  \************************************/
/*! exports provided: Variable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Variable", function() { return Variable; });
/* harmony import */ var angular2_uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! angular2-uuid */ "./node_modules/angular2-uuid/index.js");
/* harmony import */ var angular2_uuid__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(angular2_uuid__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_1__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var Variable = /** @class */ (function () {
    function Variable() {
        this.isHidden = true;
        this.id = angular2_uuid__WEBPACK_IMPORTED_MODULE_0__["UUID"].UUID();
    }
    Variable.prototype.clone = function () {
        return Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["classToClass"])(this, { ignoreDecorators: true });
    };
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["Expose"])({ name: "id_" }),
        __metadata("design:type", String)
    ], Variable.prototype, "id", void 0);
    __decorate([
        Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["Exclude"])(),
        __metadata("design:type", Boolean)
    ], Variable.prototype, "isHidden", void 0);
    return Variable;
}());



/***/ }),

/***/ "./src/app/models/workingGlobal.ts":
/*!*****************************************!*\
  !*** ./src/app/models/workingGlobal.ts ***!
  \*****************************************/
/*! exports provided: WorkingGlobal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WorkingGlobal", function() { return WorkingGlobal; });
/* harmony import */ var _global__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./global */ "./src/app/models/global.ts");

var WorkingGlobal = /** @class */ (function () {
    function WorkingGlobal() {
        this.fields = {};
    }
    WorkingGlobal.toGlobal = function (workingGlobal) {
        var out = new _global__WEBPACK_IMPORTED_MODULE_0__["Global"]();
        out.id = workingGlobal.id;
        out.name = workingGlobal.name;
        out.description = workingGlobal.description;
        out.app_name = workingGlobal.app_name;
        out.type = workingGlobal.type;
        out.fields = [];
        Object.keys(workingGlobal.fields).forEach(function (key) {
            out.fields.push({ name: key, value: workingGlobal.fields[key] });
        });
        return out;
    };
    WorkingGlobal.fromGlobal = function (global) {
        var out = new WorkingGlobal();
        out.id = global.id;
        out.name = global.name;
        out.description = global.description;
        out.app_name = global.app_name;
        out.type = global.type;
        out.fields = {};
        global.fields.forEach(function (element) {
            out.fields[element.name] = element.value !== undefined ? element.value : null;
        });
        return out;
    };
    return WorkingGlobal;
}());



/***/ }),

/***/ "./src/app/models/workingUser.ts":
/*!***************************************!*\
  !*** ./src/app/models/workingUser.ts ***!
  \***************************************/
/*! exports provided: WorkingUser */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WorkingUser", function() { return WorkingUser; });
/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./user */ "./src/app/models/user.ts");

var WorkingUser = /** @class */ (function () {
    function WorkingUser() {
        this.role_ids = [];
    }
    WorkingUser.toUser = function (workingUser) {
        var returnUser = new _user__WEBPACK_IMPORTED_MODULE_0__["User"]();
        returnUser.id = workingUser.id;
        returnUser.username = workingUser.username;
        returnUser.roles = workingUser.role_ids.map(function (id) { return ({ id: id }); });
        returnUser.active = workingUser.active;
        returnUser.old_password = workingUser.currentPassword;
        returnUser.password = workingUser.newPassword;
        return returnUser;
    };
    WorkingUser.fromUser = function (user) {
        var returnUser = new WorkingUser();
        returnUser.id = user.id;
        returnUser.username = user.username;
        // returnUser.roles = user.roles;
        Array.isArray(user.roles) ?
            returnUser.role_ids = user.roles.map(function (r) { return r.id; }) :
            returnUser.role_ids = [];
        returnUser.active = user.active;
        return returnUser;
    };
    return WorkingUser;
}());



/***/ }),

/***/ "./src/app/pipes/keys.pipe.ts":
/*!************************************!*\
  !*** ./src/app/pipes/keys.pipe.ts ***!
  \************************************/
/*! exports provided: KeysPipe */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KeysPipe", function() { return KeysPipe; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

var KeysPipe = /** @class */ (function () {
    function KeysPipe() {
    }
    KeysPipe.prototype.transform = function (value, args) {
        var keys = [];
        for (var key in value) {
            if (value.hasOwnProperty(key)) {
                keys.push(key);
            }
        }
        return keys;
    };
    KeysPipe = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Pipe"])({ name: 'keys', pure: false })
    ], KeysPipe);
    return KeysPipe;
}());



/***/ }),

/***/ "./src/app/pipes/safeEmbed.pipe.ts":
/*!*****************************************!*\
  !*** ./src/app/pipes/safeEmbed.pipe.ts ***!
  \*****************************************/
/*! exports provided: SafeEmbedPipe */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SafeEmbedPipe", function() { return SafeEmbedPipe; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var SafeEmbedPipe = /** @class */ (function () {
    function SafeEmbedPipe(sanitizer) {
        this.sanitizer = sanitizer;
    }
    SafeEmbedPipe.prototype.transform = function (url) {
        return this.sanitizer.bypassSecurityTrustResourceUrl(url);
    };
    SafeEmbedPipe = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Pipe"])({ name: 'safeEmbed' }),
        __metadata("design:paramtypes", [_angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__["DomSanitizer"]])
    ], SafeEmbedPipe);
    return SafeEmbedPipe;
}());



/***/ }),

/***/ "./src/app/playbook/import.modal.component.ts":
/*!****************************************************!*\
  !*** ./src/app/playbook/import.modal.component.ts ***!
  \****************************************************/
/*! exports provided: ImportModalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ImportModalComponent", function() { return ImportModalComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var ImportModalComponent = /** @class */ (function () {
    function ImportModalComponent(activeModal) {
        this.activeModal = activeModal;
        this.submitted = false;
    }
    /**
     * Sets our playbook to import based on a file input change.
     * @param event JS Event for the playbook file input
     */
    ImportModalComponent.prototype.onImportSelectChange = function (event) {
        this.importFile = event.srcElement.files[0];
        console.log(this.importFile);
    };
    ImportModalComponent.prototype.submit = function () {
        this.submitted = true;
        if (this.importFile)
            this.activeModal.close(this.importFile);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('myForm'),
        __metadata("design:type", _angular_forms__WEBPACK_IMPORTED_MODULE_2__["NgForm"])
    ], ImportModalComponent.prototype, "myForm", void 0);
    ImportModalComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'import-modal-component',
            template: __webpack_require__(/*! ./import.modal.html */ "./src/app/playbook/import.modal.html"),
        }),
        __metadata("design:paramtypes", [_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__["NgbActiveModal"]])
    ], ImportModalComponent);
    return ImportModalComponent;
}());



/***/ }),

/***/ "./src/app/playbook/import.modal.html":
/*!********************************************!*\
  !*** ./src/app/playbook/import.modal.html ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal-header\">\r\n    <h4 class=\"modal-title\">Import Workflow</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n    <form #myForm=\"ngForm\" [class.was-validated]=\"submitted\" novalidate>\r\n        <div class=\"form-group\">\r\n            <h6>Select import file:</h6>\r\n            <input name=\"file\" type=\"file\" class=\"form-control-file\" (change)=\"onImportSelectChange($event)\" required>\r\n            <div class=\"invalid-feedback\">\r\n                Please select import file.\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class=\"modal-footer\">\r\n    <button type=\"button\" class=\"btn btn-secondary\" (click)=\"activeModal.dismiss()\">Cancel</button>\r\n    <button ngbAutofocus type=\"button\" class=\"btn btn-primary\" (click)=\"submit()\">Import</button>\r\n</div>"

/***/ }),

/***/ "./src/app/playbook/metadata.modal.component.ts":
/*!******************************************************!*\
  !*** ./src/app/playbook/metadata.modal.component.ts ***!
  \******************************************************/
/*! exports provided: MetadataModalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MetadataModalComponent", function() { return MetadataModalComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var _models_playbook_workflow__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../models/playbook/workflow */ "./src/app/models/playbook/workflow.ts");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var MetadataModalComponent = /** @class */ (function () {
    function MetadataModalComponent(activeModal) {
        this.activeModal = activeModal;
        this.workflow = new _models_playbook_workflow__WEBPACK_IMPORTED_MODULE_2__["Workflow"]();
        this.existingWorkflows = [];
        this.currentTags = [];
        this.existing = false;
        this.tagSelectOptions = {
            multiple: true,
            tags: true,
            width: '100%',
            placeholder: 'Add Tags...'
        };
    }
    MetadataModalComponent.prototype.tagsChanged = function ($event) {
        this.workflow.tags = $event.value;
    };
    MetadataModalComponent.prototype.submit = function () {
        var _this = this;
        var compareWorkflow = function (w) {
            return w.name.toLocaleLowerCase() == _this.workflow.name.toLocaleLowerCase() && w.id != _this.workflow.id;
        };
        if (!this.workflow.name) {
            this.workflowNameModel.control.setErrors({ 'required': true });
        }
        else if (this.existingWorkflows.find(compareWorkflow)) {
            this.workflowNameModel.control.setErrors({ 'unique': true });
        }
        if (this.myForm.valid)
            this.activeModal.close(this.workflow);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _models_playbook_workflow__WEBPACK_IMPORTED_MODULE_2__["Workflow"])
    ], MetadataModalComponent.prototype, "workflow", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], MetadataModalComponent.prototype, "existingWorkflows", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], MetadataModalComponent.prototype, "currentTags", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean)
    ], MetadataModalComponent.prototype, "existing", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('myForm'),
        __metadata("design:type", _angular_forms__WEBPACK_IMPORTED_MODULE_3__["NgForm"])
    ], MetadataModalComponent.prototype, "myForm", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('workflowName'),
        __metadata("design:type", _angular_forms__WEBPACK_IMPORTED_MODULE_3__["NgModel"])
    ], MetadataModalComponent.prototype, "workflowNameModel", void 0);
    MetadataModalComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'metadata-modal-component',
            template: __webpack_require__(/*! ./metadata.modal.html */ "./src/app/playbook/metadata.modal.html"),
        }),
        __metadata("design:paramtypes", [_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__["NgbActiveModal"]])
    ], MetadataModalComponent);
    return MetadataModalComponent;
}());



/***/ }),

/***/ "./src/app/playbook/metadata.modal.html":
/*!**********************************************!*\
  !*** ./src/app/playbook/metadata.modal.html ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal-header\">\r\n    <h4 class=\"modal-title\">{{ existing ? 'Edit Workflow' : 'Create Workflow' }}</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n    <form #myForm=\"ngForm\" novalidate>\r\n        <div class=\"form-group\" *ngIf=\"existing && workflow.id\">\r\n            <h6>Workflow ID</h6>\r\n            <input type=\"text\" readonly class=\"form-control-plaintext px-2\"  [value]=\"workflow.id\">\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <h6>Enter a Workflow Name</h6>\r\n            <input name=\"name\" type=\"text\" [(ngModel)]=\"workflow.name\" class=\"form-control\" placeholder=\"Workflow Name\"\r\n            ngbAutoFocus #workflowName=\"ngModel\" [class.is-invalid]=\"workflowName.touched && workflowName.invalid\">\r\n            <div class=\"invalid-feedback\">\r\n                <span *ngIf=\"workflowName.hasError('unique')\">\r\n                    Workflow with name already exists.\r\n                </span>\r\n                <span *ngIf=\"workflowName.hasError('required')\">\r\n                    Please enter a unique workflow name.\r\n                </span>\r\n            </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <h6>Enter a Description (Optional)</h6>\r\n            <textarea name=\"description\" rows=\"3\" [(ngModel)]=\"workflow.description\" class=\"form-control\"\r\n                placeholder=\"Description (Optional)\"></textarea>\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <h6>Add Tags (Optional)</h6>\r\n            <select2 [data]=\"currentTags\" [value]=\"workflow.tags\" [options]=\"tagSelectOptions\"\r\n                (valueChanged)=\"tagsChanged($event)\"></select2>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class=\"modal-footer\">\r\n    <button type=\"button\" class=\"btn btn-secondary\" (click)=\"activeModal.dismiss()\">Cancel</button>\r\n    <button type=\"button\" class=\"btn btn-primary\" (click)=\"submit()\">{{ existing ? 'Save' : 'Continue' }}</button>\r\n</div>"

/***/ }),

/***/ "./src/app/playbook/playbook.argument.component.ts":
/*!*********************************************************!*\
  !*** ./src/app/playbook/playbook.argument.component.ts ***!
  \*********************************************************/
/*! exports provided: PlaybookArgumentComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlaybookArgumentComponent", function() { return PlaybookArgumentComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _models_playbook_workflow__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../models/playbook/workflow */ "./src/app/models/playbook/workflow.ts");
/* harmony import */ var _models_playbook_action__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../models/playbook/action */ "./src/app/models/playbook/action.ts");
/* harmony import */ var _models_api_parameterApi__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../models/api/parameterApi */ "./src/app/models/api/parameterApi.ts");
/* harmony import */ var _models_playbook_argument__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../models/playbook/argument */ "./src/app/models/playbook/argument.ts");
/* harmony import */ var ang_jsoneditor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ang-jsoneditor */ "./node_modules/ang-jsoneditor/fesm5/ang-jsoneditor.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var AVAILABLE_TYPES = ['string', 'number', 'boolean'];
var PlaybookArgumentComponent = /** @class */ (function () {
    // tslint:disable-next-line:no-empty
    function PlaybookArgumentComponent() {
        this.createVariable = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.valueType = _models_playbook_argument__WEBPACK_IMPORTED_MODULE_4__["Variant"].STATIC_VALUE;
        this.propertyName = '';
        this.availableTypes = AVAILABLE_TYPES;
        this.arrayTypes = [];
        this.objectTypes = {};
        this.editorOptionsData = {
            mode: 'code',
            modes: ['code', 'tree'],
            history: false,
            search: false,
            // mainMenuBar: false,
            navigationBar: false,
            statusBar: false,
            enableSort: false,
            enableTransform: false,
        };
    }
    /**
     * On init, we want to ensure our data is correctly formatted.
     * If reference is null, set it to empty string for editing.
     * If our value is of type array or object and is null, initalize them as such.
     * Additionally, if we're array or object types, track the types of the values that currently exist.
     * Initialize user and role selects if necessary (if schema type user or role is used).
     */
    PlaybookArgumentComponent.prototype.ngOnChanges = function () {
        this.initParameterSchema();
        this.initTypeSelector();
        this.initUserSelect();
        this.initRoleSelect();
    };
    PlaybookArgumentComponent.prototype.initParameterSchema = function () {
        this.parameterSchema = this.parameterApi.schema;
        if (this.argument.value == null) {
            if (this.parameterSchema.type === 'array') {
                this.argument.value = [];
            }
            else if (this.parameterSchema.type === 'object') {
                this.argument.value = {};
            }
            else if (this.parameterSchema.type === 'boolean') {
                this.argument.value = false;
            }
        }
        else if (this.argument.value && this.parameterSchema.type === 'array') {
            for (var _i = 0, _a = this.argument.value; _i < _a.length; _i++) {
                var item = _a[_i];
                this.arrayTypes.push(typeof (item));
            }
        }
        else if (this.argument.value && this.parameterSchema.type === 'object') {
            for (var key in this.argument.value) {
                if (this.argument.value.hasOwnProperty(key)) {
                    this.objectTypes[key] = typeof (this.argument.value[key]);
                }
            }
        }
        // Store initial value for use in JSONeditor widget
        this.initialValue = this.argument.value;
        if (this.parameterSchema)
            this.editorOptionsData.schema = this.parameterSchema;
    };
    PlaybookArgumentComponent.prototype.initTypeSelector = function () {
        this.valueTypes = [
            { id: _models_playbook_argument__WEBPACK_IMPORTED_MODULE_4__["Variant"].STATIC_VALUE, name: 'Static Value' },
            { id: _models_playbook_argument__WEBPACK_IMPORTED_MODULE_4__["Variant"].ACTION_RESULT, name: 'Action Output' },
            { id: _models_playbook_argument__WEBPACK_IMPORTED_MODULE_4__["Variant"].WORKFLOW_VARIABLE, name: 'Workflow Variable' },
            { id: _models_playbook_argument__WEBPACK_IMPORTED_MODULE_4__["Variant"].GLOBAL, name: 'Global' }
        ];
        if (this.argument.variant)
            this.valueType = this.argument.variant;
        this.selectedType = this.availableTypes[0];
    };
    /**
     * Initializes the user select2 box for arguments that have { type: 'user' } ParameterSchemas.
     */
    PlaybookArgumentComponent.prototype.initUserSelect = function () {
        if (!this.isUserSelect) {
            return;
        }
        this.selectData = this.users.map(function (user) {
            return { id: user.id.toString(), text: user.username };
        });
        this.selectConfig = {
            width: '100%',
            placeholder: 'Select user',
        };
        this.selectInitialValue = JSON.parse(JSON.stringify(this.argument.value));
        if (this.parameterSchema.type === 'array') {
            this.selectConfig.placeholder += '(s)';
            this.selectConfig.multiple = true;
            this.selectConfig.allowClear = true;
            this.selectConfig.closeOnSelect = false;
            if (Array.isArray(this.argument.value))
                this.selectInitialValue = this.argument.value.map(function (val) { return val.toString(); });
        }
    };
    /**
     * Initializes the role select2 box for arguments that have { type: 'role' } ParameterSchemas.
     */
    PlaybookArgumentComponent.prototype.initRoleSelect = function () {
        if (!this.isRoleSelect) {
            return;
        }
        this.selectData = this.roles.map(function (role) {
            return { id: role.id.toString(), text: role.name };
        });
        this.selectConfig = {
            width: '100%',
            placeholder: 'Select role',
        };
        this.selectInitialValue = JSON.parse(JSON.stringify(this.argument.value));
        if (this.parameterSchema.type === 'array') {
            this.selectConfig.placeholder += '(s)';
            this.selectConfig.multiple = true;
            this.selectConfig.allowClear = true;
            this.selectConfig.closeOnSelect = false;
            if (Array.isArray(this.argument.value))
                this.selectInitialValue = this.argument.value.map(function (val) { return val.toString(); });
        }
    };
    PlaybookArgumentComponent.prototype.updateValue = function ($event) {
        this.argument.value = $event;
    };
    /**
     * Event fired on the select2 change for users/roles. Updates the value based on the event value.
     * @param $event JS Event Fired
     */
    PlaybookArgumentComponent.prototype.selectChange = function ($event) {
        // Convert strings to numbers here
        if (this.parameterSchema.type === 'array') {
            var array = $event.value.map(function (id) { return +id; });
            this.argument.value = array;
        }
        else {
            this.argument.value = +$event.value;
        }
    };
    /**
     * Event fired on the select2 change for users/roles. Updates the value based on the event value.
     * @param $event JS Event Fired
     */
    PlaybookArgumentComponent.prototype.clearValue = function () {
        this.argument.value = '';
    };
    /**
     * Adds an item to an array if the argument parameter is array.
     */
    PlaybookArgumentComponent.prototype.addItem = function () {
        if (!this.argument.value)
            this.argument.value = [];
        switch (this.selectedType) {
            case 'string':
                this.argument.value.push('');
                break;
            case 'number':
                this.argument.value.push(null);
                break;
            case 'boolean':
                this.argument.value.push(false);
                break;
            default:
                return;
        }
        this.arrayTypes.push(this.selectedType);
    };
    /**
     * Moves a selected index in an array "up" (by swapping it with the ID before).
     * @param index Index to move
     */
    PlaybookArgumentComponent.prototype.moveUp = function (index) {
        var idAbove = index - 1;
        var toBeSwapped = this.argument.value[idAbove];
        var arrayTypeToBeSwapped = this.arrayTypes[idAbove];
        this.argument.value[idAbove] = this.argument.value[index];
        this.argument.value[index] = toBeSwapped;
        this.arrayTypes[idAbove] = this.arrayTypes[index];
        this.arrayTypes[index] = arrayTypeToBeSwapped;
    };
    /**
     * Moves a selected index in an array "down" (by swapping it with the ID after).
     * @param index Index to move
     */
    PlaybookArgumentComponent.prototype.moveDown = function (index) {
        var idBelow = index + 1;
        var toBeSwapped = this.argument.value[idBelow];
        var arrayTypeToBeSwapped = this.arrayTypes[idBelow];
        this.argument.value[idBelow] = this.argument.value[index];
        this.argument.value[index] = toBeSwapped;
        this.arrayTypes[idBelow] = this.arrayTypes[index];
        this.arrayTypes[index] = arrayTypeToBeSwapped;
    };
    /**
     * Removes a value at a given index of the argument value (if the value is an array).
     * @param index Index to remove
     */
    PlaybookArgumentComponent.prototype.removeItem = function (index) {
        this.argument.value.splice(index, 1);
        this.arrayTypes.splice(index, 1);
    };
    /**
     * Adds a new property to an our argument's value object of a given name and type.
     */
    PlaybookArgumentComponent.prototype.addProperty = function () {
        if (this.argument.value.hasOwnProperty(this.propertyName)) {
            return;
        }
        this.propertyName = this.propertyName.trim();
        switch (this.selectedType) {
            case 'string':
                this.argument.value[this.propertyName] = '';
                break;
            case 'number':
                this.argument.value[this.propertyName] = null;
                break;
            case 'boolean':
                this.argument.value[this.propertyName] = false;
                break;
            default:
                return;
        }
        this.objectTypes[this.propertyName] = this.selectedType;
        this.propertyName = '';
    };
    /**
     * Removes a property from our argument's value object by key.
     * @param key Key to remove
     */
    PlaybookArgumentComponent.prototype.removeProperty = function (key) {
        delete this.argument.value[key];
        delete this.objectTypes[key];
    };
    /**
     * Track by function for arrays.
     * Needed to track by index for primitives (since normally it tracks by reference for objects/arrays).
     * @param index Index to track by
     * @param item Item in array by index
     */
    PlaybookArgumentComponent.prototype.trackArraysBy = function (index, item) {
        return index;
    };
    // TODO: maybe somehow recursively find actions that may occur before. Right now it just returns all of them.
    PlaybookArgumentComponent.prototype.getPreviousActions = function () {
        return this.loadedWorkflow.getPreviousActions(this.selectedAction);
    };
    /**
     * Gets the minimum value to check against for JSON Schema minimum / exclusiveMinimum parameters
     * @param schema JSON Schema object
     */
    PlaybookArgumentComponent.prototype.getMin = function (schema) {
        if (schema.minimum === undefined) {
            return null;
        }
        if (schema.exclusiveMinimum) {
            return schema.minimum + 1;
        }
        return schema.minimum;
    };
    /**
     * Gets the maximum value to check against for JSON Schema maximum / exclusiveMaximum parameters
     * @param schema JSON Schema Object
     */
    PlaybookArgumentComponent.prototype.getMax = function (schema) {
        if (schema.maximum === undefined) {
            return null;
        }
        if (schema.exclusiveMaximum) {
            return schema.maximum - 1;
        }
        return schema.maximum;
    };
    /**
     * Checks if this array is an array of primitives only.
     * Returns false if the schema is not an array or if it contains user/role types.
     * @param schema JSON Schema Object to check against
     */
    PlaybookArgumentComponent.prototype.isNormalArray = function (schema) {
        if (schema.type !== 'array') {
            return false;
        }
        if (Array.isArray(schema.items)) {
            schema.items.forEach(function (i) {
                if (i.type === 'user' || i.type === 'role') {
                    return false;
                }
            });
        }
        else if (schema.items && (schema.items.type === 'user' || schema.items.type === 'role')) {
            return false;
        }
        return true;
    };
    Object.defineProperty(PlaybookArgumentComponent.prototype, "isUserSelect", {
        /**
         * Checks if this schema represents a user select (single or multiple via array type).
         * @param schema JSON Schema Object to check against
         */
        get: function () {
            return this.parameterSchema &&
                (this.parameterSchema.type === 'user' ||
                    (this.parameterSchema.type === 'array' && this.parameterSchema.items &&
                        !Array.isArray(this.parameterSchema.items) && this.parameterSchema.items.type === 'user'));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PlaybookArgumentComponent.prototype, "isRoleSelect", {
        /**
         * Checks if this schema represents a role select (single or multiple via array type).
         * @param schema JSON Schema Object to check against
         */
        get: function () {
            return this.parameterSchema &&
                (this.parameterSchema.type === 'role' ||
                    (this.parameterSchema.type === 'array' && this.parameterSchema.items &&
                        !Array.isArray(this.parameterSchema.items) && this.parameterSchema.items.type === 'role'));
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PlaybookArgumentComponent.prototype, "isReference", {
        get: function () {
            return [_models_playbook_argument__WEBPACK_IMPORTED_MODULE_4__["Variant"].STATIC_VALUE, _models_playbook_argument__WEBPACK_IMPORTED_MODULE_4__["Variant"].GLOBAL, _models_playbook_argument__WEBPACK_IMPORTED_MODULE_4__["Variant"].WORKFLOW_VARIABLE].indexOf(this.argument.variant) == -1;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PlaybookArgumentComponent.prototype, "isStatic", {
        get: function () {
            return this.argument.variant == _models_playbook_argument__WEBPACK_IMPORTED_MODULE_4__["Variant"].STATIC_VALUE;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PlaybookArgumentComponent.prototype, "isActionSelect", {
        get: function () {
            return this.argument.variant == _models_playbook_argument__WEBPACK_IMPORTED_MODULE_4__["Variant"].ACTION_RESULT;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PlaybookArgumentComponent.prototype, "isVariableSelect", {
        get: function () {
            return this.argument.variant == _models_playbook_argument__WEBPACK_IMPORTED_MODULE_4__["Variant"].WORKFLOW_VARIABLE;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PlaybookArgumentComponent.prototype, "isStringSelect", {
        get: function () {
            return this.isStatic && this.parameterSchema && this.parameterSchema.type === 'string' && !this.parameterSchema.enum;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PlaybookArgumentComponent.prototype, "isNumberSelect", {
        get: function () {
            return this.isStatic && this.parameterSchema && (this.parameterSchema.type === 'number' || this.parameterSchema.type === 'integer');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PlaybookArgumentComponent.prototype, "isEnumSelect", {
        get: function () {
            return this.isStatic && this.parameterSchema && this.parameterSchema.enum;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PlaybookArgumentComponent.prototype, "isBooleanSelect", {
        get: function () {
            return this.isStatic && this.parameterSchema && this.parameterSchema.type === 'boolean';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PlaybookArgumentComponent.prototype, "isGlobalSelect", {
        get: function () {
            return this.argument.variant == _models_playbook_argument__WEBPACK_IMPORTED_MODULE_4__["Variant"].GLOBAL;
        },
        enumerable: true,
        configurable: true
    });
    PlaybookArgumentComponent.prototype.addVariable = function () {
        this.createVariable.emit(this.argument);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Number)
    ], PlaybookArgumentComponent.prototype, "id", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _models_playbook_argument__WEBPACK_IMPORTED_MODULE_4__["Argument"])
    ], PlaybookArgumentComponent.prototype, "argument", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _models_api_parameterApi__WEBPACK_IMPORTED_MODULE_3__["ParameterApi"])
    ], PlaybookArgumentComponent.prototype, "parameterApi", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _models_playbook_action__WEBPACK_IMPORTED_MODULE_2__["Action"])
    ], PlaybookArgumentComponent.prototype, "selectedAction", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _models_playbook_workflow__WEBPACK_IMPORTED_MODULE_1__["Workflow"])
    ], PlaybookArgumentComponent.prototype, "loadedWorkflow", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], PlaybookArgumentComponent.prototype, "users", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], PlaybookArgumentComponent.prototype, "roles", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], PlaybookArgumentComponent.prototype, "globals", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], PlaybookArgumentComponent.prototype, "branchCounters", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('jsonEditor'),
        __metadata("design:type", ang_jsoneditor__WEBPACK_IMPORTED_MODULE_5__["JsonEditorComponent"])
    ], PlaybookArgumentComponent.prototype, "jsonEditor", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PlaybookArgumentComponent.prototype, "createVariable", void 0);
    PlaybookArgumentComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'playbook-argument-component',
            template: __webpack_require__(/*! ./playbook.argument.html */ "./src/app/playbook/playbook.argument.html"),
            styleUrls: [],
            encapsulation: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewEncapsulation"].None,
            providers: [],
        }),
        __metadata("design:paramtypes", [])
    ], PlaybookArgumentComponent);
    return PlaybookArgumentComponent;
}());



/***/ }),

/***/ "./src/app/playbook/playbook.argument.html":
/*!*************************************************!*\
  !*** ./src/app/playbook/playbook.argument.html ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"form-group argument {{id % 2 ? 'odd' : 'even'}}\">\r\n\t<!-- Label for argument with optional required icon -->\r\n\t<label for=\"{{argument.name}}\">\r\n\t\t<b class=\"text-capitalize\">{{argument.name}}</b> ({{parameterSchema.type}})\r\n\t\t<i *ngIf=\"parameterApi.required\" class=\"fa fa-asterisk required m-0\" title=\"This field is required.\"></i>\r\n\t\t<small class=\"form-text text-muted\">{{ parameterApi.description }}</small>\r\n\t</label>\r\n\r\n\t<!-- Columns for allowing users to specify outputs of other action as arguments for this one -->\r\n\t<div class=\"row\">\r\n\t\t<div class=\"col-4\">\r\n\t\t\t<select name=\"playbookSelect\" class=\"form-control\" [(ngModel)]=\"argument.variant\" (change)=\"clearValue()\">\r\n\t\t\t\t<option *ngFor=\"let i of valueTypes\" [ngValue]=\"i.id\" [label]=\"i.name\">{{i.name}}</option>\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t\t<div class=\"col-8 d-flex align-items-center\">\r\n\t\t\t<!-- Normal string text entries -->\r\n\t\t\t<input *ngIf=\"isStringSelect\" class=\"form-control\" name=\"{{argument.name}}\" [(ngModel)]=\"argument.value\"\r\n\t\t\t\ttype=\"text\" [attr.minlength]=\"parameterSchema.minLength > 0 ? parameterSchema.minLength : null\" [attr.maxlength]=\"parameterSchema.maxLength > 0 ? parameterSchema.maxLength : null\"\r\n\t\t\t\t[attr.pattern]=\"parameterSchema.pattern ? parameterSchema.pattern : null\" [attr.required]=\"parameterApi.required\" [attr.placeholder]=\"parameterApi.placeholder\">\r\n\r\n\t\t\t<!-- Enum types, make a select box -->\r\n\t\t\t<select *ngIf=\"isEnumSelect\" class=\"form-control\" name=\"{{argument.name}}\" [(ngModel)]=\"argument.value\"  [attr.required]=\"parameterApi.required\">\r\n\t\t\t\t<option *ngIf=\"!parameterApi.required\" value=\"\"></option>\r\n\t\t\t\t<option *ngFor=\"let i of parameterSchema.enum\" [value]=\"i\" [label]=\"i\">{{i}}</option>\r\n\t\t\t</select>\r\n\r\n\t\t\t<!-- For numbers enter number info -->\r\n\t\t\t<input *ngIf=\"isNumberSelect\" class=\"form-control\" name=\"{{argument.name}}\" [(ngModel)]=\"argument.value\" \r\n\t\t\t type=\"number\" [attr.min]=\"getMin(parameterSchema)\" [attr.max]=\"getMax(parameterSchema)\"\r\n\t\t\t\t[attr.step]=\"parameterSchema.multipleOf > 0 ? parameterSchema.multipleOf : null\" [attr.required]=\"parameterApi.required\"\r\n\t\t\t\t[attr.placeholder]=\"parameterApi.placeholder\">\r\n\r\n\t\t\t<!-- Checkbox for boolean values -->\r\n\t\t\t<div *ngIf=\"isBooleanSelect\">  \r\n\t\t\t\t<span class=\"switch\">\r\n\t\t\t\t\t<input type=\"checkbox\" class=\"switch\" [name]=\"argument.name\" [(ngModel)]=\"argument.value\" [id]=\"argument.id\">\r\n\t\t\t\t\t<label class=\"m-0\" [for]=\"argument.id\">{{ argument.value ? 'True' : 'False'}}</label>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<!-- <input *ngIf=\"isBooleanSelect\" type=\"checkbox\" class=\"form-control\" name=\"{{argument.name}}\" [(ngModel)]=\"argument.value\"> -->\r\n\r\n\t\t\t<!-- User select -->\r\n\t\t\t<select2 *ngIf=\"isStatic && isUserSelect\" [data]=\"selectData\" [value]=\"selectInitialValue\" [options]=\"selectConfig\"\r\n\t\t\t\t(valueChanged)=\"selectChange($event)\"></select2>\r\n\r\n\t\t\t<!-- Role select -->\r\n\t\t\t<select2 *ngIf=\"isStatic && isRoleSelect\" [data]=\"selectData\" [value]=\"selectInitialValue\" [options]=\"selectConfig\"\r\n\t\t\t\t(valueChanged)=\"selectChange($event)\"></select2>\r\n\r\n\t\t\t<!-- Global select -->\r\n\t\t\t<select *ngIf=\"isGlobalSelect\" class=\"form-control\" [(ngModel)]=\"argument.value\">\r\n\t\t\t\t<option [ngValue]=\"''\"></option>\r\n\t\t\t\t<option *ngFor=\"let i of globals\" [ngValue]=\"i.id\" [label]=\"i.name\">{{i.name}}</option>\r\n\t\t\t</select>\r\n\r\n\t\t\t<!-- Branch Counter select -->\r\n\t\t\t<!-- <select *ngIf=\"isBranchCounterSelect\" class=\"form-control\" [(ngModel)]=\"argument.reference\">\r\n\t\t\t\t<option [ngValue]=\"0\"></option>\r\n\t\t\t\t<option *ngFor=\"let i of branchCounters\" [ngValue]=\"i.id\" [label]=\"i.text\">{{i.text}}</option>\r\n\t\t\t</select> -->\r\n\t\t\t\r\n\t\t\t<!-- Action select -->\r\n\t\t\t<ng-container *ngIf=\"isActionSelect\">\r\n\t\t\t\t<select class=\"form-control\" [(ngModel)]=\"argument.value\">\r\n                \t<option [ngValue]=\"''\"></option>\r\n                \t<option *ngFor=\"let i of getPreviousActions()\" [ngValue]=\"i.id\" [label]=\"i.name\">{{i.name}}</option>\r\n\t\t\t\t</select>\r\n\t\t\t\t<!-- <input type=\"text\" class=\"form-control\" [(ngModel)]=\"argument.selection\" name=\"selection\" placeholder=\"(Optional) Dot Notation selection into objects\"> -->\r\n\t\t\t</ng-container>\r\n\r\n\t\t\t<!-- Action select -->\r\n\t\t\t<ng-container *ngIf=\"isVariableSelect\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<select class=\"form-control\" [(ngModel)]=\"argument.value\" [disabled]=\"!loadedWorkflow?.environment_variables?.length > 0\">\r\n\t\t\t\t\t\t<option [ngValue]=\"''\">\r\n\t\t\t\t\t\t\t<span *ngIf=\"!loadedWorkflow?.environment_variables?.length > 0\">\r\n\t\t\t\t\t\t\t\tNone Created\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option *ngFor=\"let i of loadedWorkflow.environment_variables\" [ngValue]=\"i.id\" [label]=\"i.name\">{{ i.name }}</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t</ng-container>\r\n\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n<div *ngIf=\"isStatic && (isNormalArray(parameterSchema) || parameterSchema.type === 'object')\" class=\"mb-3\">\r\n\t<json-editor #jsonEditor [options]=\"editorOptionsData\" [data]=\"initialValue\" (change)=\"updateValue($event)\"></json-editor>\r\n</div>\r\n\r\n<div *ngIf=\"false && isStatic && isNormalArray(parameterSchema)\" class=\"indent\">\r\n\t<div class=\"row\">\r\n\t\t<div class=\"col-6\">\r\n\t\t\t<select class=\"form-control\" [(ngModel)]=\"selectedType\" name=\"selectedType\">\r\n\t\t\t\t\t<option *ngFor=\"let i of availableTypes\" [value]=\"i\" [label]=\"i\">{{i}}</option>\r\n\t\t\t\t</select>\r\n\t\t</div>\r\n\t\t<div class=\"col-6\">\r\n\t\t\t<div class=\"form-group\">\r\n\t\t\t\t<button class=\"btn btn-primary pull-right\" (click)=\"addItem()\" [disabled]=\"!selectedType\">\r\n\t\t\t\t\t<i class=\"fa fa-plus\"></i>Add Items\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class=\"form-group argument arrayItem {{itemId % 2 ? 'odd' : 'even'}}\" *ngFor=\"let item of argument.value; let itemId = index; trackBy:trackArraysBy\">\r\n\t\t<div class=\"row propertyHeader\">\r\n\t\t\t<div class=\"col-6\">\r\n\t\t\t\t<label>Item {{itemId+1}}:</label>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"col-6\">\r\n\t\t\t\t<div class=\"pull-right\">\r\n\t\t\t\t\t<button *ngIf=\"itemId > 0\" class=\"btn btn-primary\" (click)=\"moveUp(itemId)\" title=\"Move Up\"><i class=\"fa fa-arrow-up\"></i></button>\r\n\t\t\t\t\t<button *ngIf=\"itemId < argument.value.length - 1\" class=\"btn ml-1 btn-primary\" (click)=\"moveDown(itemId)\" title=\"Move Down\"><i class=\"fa fa-arrow-down\"></i></button>\r\n\t\t\t\t\t<button class=\"btn ml-1 btn-danger\" (click)=\"removeItem(itemId)\" title=\"Remove Item\"><i class=\"fa fa-close\"></i></button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<input *ngIf=\"arrayTypes[itemId] === 'string'\" type=\"text\" class=\"form-control\" [(ngModel)]=\"argument.value[itemId]\">\r\n\t\t<input *ngIf=\"arrayTypes[itemId] === 'number'\" type=\"number\" class=\"form-control\" [(ngModel)]=\"argument.value[itemId]\">\r\n\t\t<input *ngIf=\"arrayTypes[itemId] === 'boolean'\" type=\"checkbox\" class=\"form-control\" [(ngModel)]=\"argument.value[itemId]\">\r\n\t</div>\r\n</div>\r\n\r\n<div *ngIf=\"false && isStatic && parameterSchema.type === 'object'\" class=\"indent\">\r\n\t<div class=\"row\">\r\n\t\t<div class=\"col-6\">\r\n\t\t\t<input type=\"text\" class=\"form-control\" [(ngModel)]=\"propertyName\" placeholder=\"Enter a parameter name\">\r\n\t\t</div>\r\n\t\t<div class=\"col-3\">\r\n\t\t\t<select class=\"form-control\" [(ngModel)]=\"selectedType\" name=\"selectedType\">\r\n\t\t\t\t<option *ngFor=\"let i of availableTypes\" [value]=\"i\" [label]=\"i\">{{i}}</option>\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t\t<div class=\"col-3\">\r\n\t\t\t<div class=\"form-group\">\r\n\t\t\t\t<button class=\"btn btn-primary pull-right\" (click)=\"addProperty()\" [disabled]=\"!propertyName.trim() || !selectedType\">\r\n\t\t\t\t\t<i class=\"fa fa-plus\"></i>Add Property\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class=\"form-group argument {{itemId % 2 ? 'odd' : 'even'}}\" *ngFor=\"let key of argument.value | keys; let itemId = index\">\r\n\t\t<div class=\"row propertyHeader\">\r\n\t\t\t<div class=\"col-6\">\r\n\t\t\t\t<label>Property \"{{key}}\":</label>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"col-6\">\r\n\t\t\t\t<div class=\"pull-right\">\r\n\t\t\t\t\t<button class=\"btn btn-danger\" (click)=\"removeProperty(key)\" title=\"Remove Item\"><i class=\"fa fa-close\"></i></button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<input *ngIf=\"objectTypes[key] === 'string'\" type=\"text\" class=\"form-control\" [(ngModel)]=\"argument.value[key]\">\r\n\t\t<input *ngIf=\"objectTypes[key] === 'number'\" type=\"number\" class=\"form-control\" [(ngModel)]=\"argument.value[key]\">\r\n\t\t<input *ngIf=\"objectTypes[key] === 'boolean'\" type=\"checkbox\" class=\"form-control\" [(ngModel)]=\"argument.value[key]\">\r\n\t</div>\r\n</div>"

/***/ }),

/***/ "./src/app/playbook/playbook.component.ts":
/*!************************************************!*\
  !*** ./src/app/playbook/playbook.component.ts ***!
  \************************************************/
/*! exports provided: PlaybookComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlaybookComponent", function() { return PlaybookComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var rxjs_Rx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs/Rx */ "./node_modules/rxjs-compat/_esm5/Rx.js");
/* harmony import */ var fuse_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fuse.js */ "./node_modules/fuse.js/dist/fuse.js");
/* harmony import */ var fuse_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fuse_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var file_saver__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! file-saver */ "./node_modules/file-saver/FileSaver.js");
/* harmony import */ var file_saver__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(file_saver__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var angular2_uuid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! angular2-uuid */ "./node_modules/angular2-uuid/index.js");
/* harmony import */ var angular2_uuid__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(angular2_uuid__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var ngx_toastr__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ngx-toastr */ "./node_modules/ngx-toastr/fesm5/ngx-toastr.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../auth/auth.service */ "./src/app/auth/auth.service.ts");
/* harmony import */ var _playbook_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./playbook.service */ "./src/app/playbook/playbook.service.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
/* harmony import */ var _globals_globals_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../globals/globals.service */ "./src/app/globals/globals.service.ts");
/* harmony import */ var _settings_settings_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../settings/settings.service */ "./src/app/settings/settings.service.ts");
/* harmony import */ var _models_playbook_workflow__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../models/playbook/workflow */ "./src/app/models/playbook/workflow.ts");
/* harmony import */ var _models_execution_workflowStatus__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../models/execution/workflowStatus */ "./src/app/models/execution/workflowStatus.ts");
/* harmony import */ var _metadata_modal_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./metadata.modal.component */ "./src/app/playbook/metadata.modal.component.ts");
/* harmony import */ var _import_modal_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./import.modal.component */ "./src/app/playbook/import.modal.component.ts");
/* harmony import */ var _models_execution_workflowStatusEvent__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../models/execution/workflowStatusEvent */ "./src/app/models/execution/workflowStatusEvent.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};




















var PlaybookComponent = /** @class */ (function () {
    function PlaybookComponent(playbookService, authService, toastrService, utils, modalService, router) {
        this.playbookService = playbookService;
        this.authService = authService;
        this.toastrService = toastrService;
        this.utils = utils;
        this.modalService = modalService;
        this.router = router;
        this.workflowsLoaded = false;
        this.workflows = [];
        this.filterQuery = new _angular_forms__WEBPACK_IMPORTED_MODULE_7__["FormControl"]();
        this.filteredWorkflows = [];
    }
    /**
     * On component initialization, we grab arrays of globals, app apis, and playbooks/workflows (id, name pairs).
     * We also initialize an EventSoruce for Action Statuses for the execution results table.
     * Also initialize cytoscape event bindings.
     */
    PlaybookComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.getPlaybooksWithWorkflows();
        this.filterQuery
            .valueChanges
            .debounceTime(500)
            .subscribe(function () { return _this.filterWorkflows(); });
    };
    /**
     * Closes our SSEs on component destroy.
     */
    PlaybookComponent.prototype.ngOnDestroy = function () {
        if (this.eventSource && this.eventSource.close) {
            this.eventSource.close();
        }
    };
    ///------------------------------------------------------------------------------------------------------
    /// Playbook CRUD etc functions
    ///------------------------------------------------------------------------------------------------------
    /**
     * Sets up the EventStream for receiving stream actions from the server. Binds various events to the event handler.
     * Will currently return ALL stream actions and not just the ones manually executed.
     */
    PlaybookComponent.prototype.getWorkflowStatusSSE = function (executionId) {
        var _this = this;
        if (this.eventSource)
            this.eventSource.close();
        return this.authService.getEventSource("/api/streams/workflowqueue/workflow_status")
            .then(function (eventSource) {
            _this.eventSource = eventSource;
            _this.eventSource.onerror = function (e) { return _this.eventSource.close(); };
            Object.values(_models_execution_workflowStatus__WEBPACK_IMPORTED_MODULE_16__["WorkflowStatuses"])
                .forEach(function (status) { return _this.eventSource.addEventListener(status, function (e) { return _this.workflowStatusEventHandler(e, executionId); }); });
        });
    };
    /**
     * Handles an EventSource message for Workflow Status.
     * Updates existing workflow statuses for status updates or adds new ones to the list for display.
     * @param message EventSource message for workflow status
     */
    PlaybookComponent.prototype.workflowStatusEventHandler = function (message, executionId) {
        var workflowStatusEvent = Object(class_transformer__WEBPACK_IMPORTED_MODULE_8__["plainToClass"])(_models_execution_workflowStatusEvent__WEBPACK_IMPORTED_MODULE_19__["WorkflowStatusEvent"], JSON.parse(message.data));
        if (executionId != workflowStatusEvent.execution_id)
            return;
        switch (workflowStatusEvent.status) {
            case _models_execution_workflowStatus__WEBPACK_IMPORTED_MODULE_16__["WorkflowStatuses"].COMPLETED:
                this.eventSource.close();
                this.toastrService.success("<b>" + workflowStatusEvent.name + "</b> completed");
                break;
            case _models_execution_workflowStatus__WEBPACK_IMPORTED_MODULE_16__["WorkflowStatuses"].ABORTED:
                this.eventSource.close();
                this.toastrService.warning("<b>" + workflowStatusEvent.name + "</b> aborted");
                break;
        }
    };
    /**
     * Executes the loaded workflow as it exists on the server. Will not currently execute the workflow as it stands.
     */
    PlaybookComponent.prototype.executeWorkflow = function (workflow) {
        return __awaiter(this, void 0, void 0, function () {
            var executionId, e_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 3, , 4]);
                        executionId = angular2_uuid__WEBPACK_IMPORTED_MODULE_4__["UUID"].UUID();
                        return [4 /*yield*/, this.getWorkflowStatusSSE(executionId)];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.playbookService.addWorkflowToQueue(workflow.id, executionId)];
                    case 2:
                        _a.sent();
                        this.toastrService.success("Starting <b>" + workflow.name + "</b>");
                        return [3 /*break*/, 4];
                    case 3:
                        e_1 = _a.sent();
                        this.toastrService.error("Error starting <b>" + workflow.name + "</b>: " + e_1.message);
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    PlaybookComponent.prototype.routeToWorkflow = function (workflow) {
        this.router.navigateByUrl("/workflows/" + workflow.id);
    };
    /**
     * Gets a list of all the loaded playbooks along with their workflows.
     */
    PlaybookComponent.prototype.getPlaybooksWithWorkflows = function () {
        var _this = this;
        this.playbookService.getWorkflows()
            .then(function (workflows) {
            _this.workflowsLoaded = true;
            _this.workflows = workflows;
            _this.filterWorkflows();
            _this.playbookService.workflowsChange.subscribe(function (workflows) {
                _this.workflows = workflows;
                _this.filterWorkflows();
            });
        });
    };
    /**
     * Downloads a playbook as a JSON representation.
     * @param event JS Event fired from button
     * @param playbook Playbook to export (id, name pair)
     */
    PlaybookComponent.prototype.exportWorkflow = function (workflow) {
        return __awaiter(this, void 0, void 0, function () {
            var blob, e_2;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 2, , 3]);
                        return [4 /*yield*/, this.playbookService.exportWorkflow(workflow.id)];
                    case 1:
                        blob = _a.sent();
                        Object(file_saver__WEBPACK_IMPORTED_MODULE_3__["saveAs"])(blob, workflow.name + ".json");
                        return [3 /*break*/, 3];
                    case 2:
                        e_2 = _a.sent();
                        this.toastrService.error("Error exporting workflow \"" + workflow.name + "\": " + e_2.message);
                        return [3 /*break*/, 3];
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * Opens a modal to add a new workflow to a given playbook or under a new playbook.
     */
    PlaybookComponent.prototype.createWorkflow = function () {
        var _this = this;
        var modalRef = this.modalService.open(_metadata_modal_component__WEBPACK_IMPORTED_MODULE_17__["MetadataModalComponent"]);
        modalRef.componentInstance.workflow = new _models_playbook_workflow__WEBPACK_IMPORTED_MODULE_15__["Workflow"]();
        modalRef.componentInstance.currentTags = this.currentTags;
        modalRef.componentInstance.existingWorkflows = this.workflows;
        modalRef.result.then(function (workflow) {
            _this.playbookService.workflowToCreate = workflow;
            _this.router.navigateByUrl("/workflows/new");
        }).catch(function () { return null; });
    };
    /**
     * Opens a modal to add a new workflow to a given playbook or under a new playbook.
     */
    PlaybookComponent.prototype.editDescription = function (workflow) {
        return __awaiter(this, void 0, void 0, function () {
            var modalRef;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.playbookService.loadWorkflow(workflow.id)];
                    case 1:
                        workflow = _a.sent();
                        modalRef = this.modalService.open(_metadata_modal_component__WEBPACK_IMPORTED_MODULE_17__["MetadataModalComponent"]);
                        modalRef.componentInstance.existing = true;
                        modalRef.componentInstance.workflow = workflow;
                        modalRef.componentInstance.currentTags = this.currentTags;
                        modalRef.componentInstance.existingWorkflows = this.workflows;
                        modalRef.result.then(function (w) {
                            _this.playbookService.saveWorkflow(w)
                                .then(function (w) { return _this.toastrService.success("Updated <b>" + workflow.name + "</b>"); })
                                .catch(function (e) { return _this.toastrService.error("Error loading workflow \"" + workflow.name + "\": " + e.message); });
                        }).catch(function () { return null; });
                        return [2 /*return*/];
                }
            });
        });
    };
    PlaybookComponent.prototype.duplicateWorkflow = function (workflow) {
        return __awaiter(this, void 0, void 0, function () {
            var name, duplicateWorkflow, e_3;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.utils.prompt('Enter a name for the duplicate workflow')];
                    case 1:
                        name = _a.sent();
                        _a.label = 2;
                    case 2:
                        _a.trys.push([2, 4, , 5]);
                        return [4 /*yield*/, this.playbookService.duplicateWorkflow(workflow.id, name)];
                    case 3:
                        duplicateWorkflow = _a.sent();
                        this.toastrService.success("Duplicated <b>" + duplicateWorkflow.name + "</b>");
                        return [3 /*break*/, 5];
                    case 4:
                        e_3 = _a.sent();
                        this.toastrService.error("Error duplicating workflow \"" + name + "\": " + e_3.message);
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * Opens a modal to delete a given workflow and performs the delete action on submit.
     * @param playbook Playbook the workflow resides under
     * @param workflow Workflow to delete
     */
    PlaybookComponent.prototype.deleteWorkflow = function (workflow) {
        return __awaiter(this, void 0, void 0, function () {
            var e_4;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.utils.confirm("Are you sure you want to delete <b>" + workflow.name + "</b>?")];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2:
                        _a.trys.push([2, 4, , 5]);
                        return [4 /*yield*/, this.playbookService.deleteWorkflow(workflow.id)];
                    case 3:
                        _a.sent();
                        this.toastrService.success("Deleted <b>" + workflow.name + "</b>");
                        return [3 /*break*/, 5];
                    case 4:
                        e_4 = _a.sent();
                        this.toastrService.error("Error deleting \"" + workflow.name + "\": " + e_4.message);
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    PlaybookComponent.prototype.importWorkflow = function () {
        var _this = this;
        var modalRef = this.modalService.open(_import_modal_component__WEBPACK_IMPORTED_MODULE_18__["ImportModalComponent"]);
        modalRef.result.then(function (importFile) {
            _this.playbookService.importWorkflow(importFile).then(function (workflow) {
                _this.toastrService.success("Imported <b>" + workflow.name + "</b>");
            }).catch(function (e) {
                _this.toastrService.error("Error importing workflow \"" + importFile.name + "\": " + e.message);
            });
        }).catch(function () { return null; });
    };
    PlaybookComponent.prototype.filterWorkflows = function () {
        var searchFilter = this.filterQuery.value ? this.filterQuery.value.toLocaleLowerCase() : '';
        var fuse = new fuse_js__WEBPACK_IMPORTED_MODULE_2__(this.workflows, { tokenize: true, matchAllTokens: true, threshold: 0.5, keys: ['name', 'description', 'tags'] });
        this.filteredWorkflows = (searchFilter) ? fuse.search(searchFilter.trim()) : this.workflows;
    };
    Object.defineProperty(PlaybookComponent.prototype, "currentTags", {
        get: function () {
            var tags = [];
            this.workflows.forEach(function (w) { return tags = tags.concat(w.tags); });
            return tags.filter(function (v, i, a) { return a.indexOf(v) == i; });
        },
        enumerable: true,
        configurable: true
    });
    PlaybookComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'playbook-component',
            template: __webpack_require__(/*! ./playbook.html */ "./src/app/playbook/playbook.html"),
            styles: [__webpack_require__(/*! ./playbook.scss */ "./src/app/playbook/playbook.scss")],
            encapsulation: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewEncapsulation"].None,
            providers: [_auth_auth_service__WEBPACK_IMPORTED_MODULE_10__["AuthService"], _globals_globals_service__WEBPACK_IMPORTED_MODULE_13__["GlobalsService"], _settings_settings_service__WEBPACK_IMPORTED_MODULE_14__["SettingsService"]],
        }),
        __metadata("design:paramtypes", [_playbook_service__WEBPACK_IMPORTED_MODULE_11__["PlaybookService"], _auth_auth_service__WEBPACK_IMPORTED_MODULE_10__["AuthService"],
            ngx_toastr__WEBPACK_IMPORTED_MODULE_6__["ToastrService"], _utilities_service__WEBPACK_IMPORTED_MODULE_12__["UtilitiesService"],
            _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_9__["NgbModal"], _angular_router__WEBPACK_IMPORTED_MODULE_5__["Router"]])
    ], PlaybookComponent);
    return PlaybookComponent;
}());



/***/ }),

/***/ "./src/app/playbook/playbook.conditional.expression.component.ts":
/*!***********************************************************************!*\
  !*** ./src/app/playbook/playbook.conditional.expression.component.ts ***!
  \***********************************************************************/
/*! exports provided: PlaybookConditionalExpressionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlaybookConditionalExpressionComponent", function() { return PlaybookConditionalExpressionComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _models_playbook_conditionalExpression__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../models/playbook/conditionalExpression */ "./src/app/models/playbook/conditionalExpression.ts");
/* harmony import */ var _models_playbook_workflow__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../models/playbook/workflow */ "./src/app/models/playbook/workflow.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var PlaybookConditionalExpressionComponent = /** @class */ (function () {
    // tslint:disable-next-line:no-empty
    function PlaybookConditionalExpressionComponent() {
        this.createVariable = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
    }
    PlaybookConditionalExpressionComponent.prototype.ngOnInit = function () {
        this.availableOperators = ['and', 'or', 'xor'];
        if (this.conditionalExpression && !this.conditionalExpression.operator) {
            this.conditionalExpression.operator = 'and';
        }
    };
    /**
     * Adds a new blank conditional expression to our child expressions array.
     */
    PlaybookConditionalExpressionComponent.prototype.addChildExpression = function () {
        this.conditionalExpression.child_expressions.push(new _models_playbook_conditionalExpression__WEBPACK_IMPORTED_MODULE_1__["ConditionalExpression"]());
    };
    /**
     * Moves a selected index in our child expressions array "up" (by swapping it with the ID before).
     * @param index Index to move
     */
    PlaybookConditionalExpressionComponent.prototype.moveUp = function (index) {
        var idAbove = index - 1;
        var toBeSwapped = this.conditionalExpression.child_expressions[idAbove];
        this.conditionalExpression.child_expressions[idAbove] = this.conditionalExpression.child_expressions[index];
        this.conditionalExpression.child_expressions[index] = toBeSwapped;
    };
    /**
     * Moves a selected index in our child expressions array "down" (by swapping it with the ID after).
     * @param index Index to move
     */
    PlaybookConditionalExpressionComponent.prototype.moveDown = function (index) {
        var idBelow = index + 1;
        var toBeSwapped = this.conditionalExpression.child_expressions[idBelow];
        this.conditionalExpression.child_expressions[idBelow] = this.conditionalExpression.child_expressions[index];
        this.conditionalExpression.child_expressions[index] = toBeSwapped;
    };
    /**
     * Removes a child expression from our child expressions array by a given index.
     * @param index Index to remove
     */
    PlaybookConditionalExpressionComponent.prototype.removeChildExpression = function (index) {
        this.conditionalExpression.child_expressions.splice(index, 1);
    };
    PlaybookConditionalExpressionComponent.prototype.onCreateVariable = function (argument) {
        this.createVariable.emit(argument);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], PlaybookConditionalExpressionComponent.prototype, "selectedAppName", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _models_playbook_conditionalExpression__WEBPACK_IMPORTED_MODULE_1__["ConditionalExpression"])
    ], PlaybookConditionalExpressionComponent.prototype, "conditionalExpression", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], PlaybookConditionalExpressionComponent.prototype, "appApis", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _models_playbook_workflow__WEBPACK_IMPORTED_MODULE_2__["Workflow"])
    ], PlaybookConditionalExpressionComponent.prototype, "loadedWorkflow", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PlaybookConditionalExpressionComponent.prototype, "createVariable", void 0);
    PlaybookConditionalExpressionComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'playbook-conditional-expression-component',
            template: __webpack_require__(/*! ./playbook.conditional.expression.html */ "./src/app/playbook/playbook.conditional.expression.html"),
            styleUrls: [],
            encapsulation: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewEncapsulation"].None,
            providers: [],
        }),
        __metadata("design:paramtypes", [])
    ], PlaybookConditionalExpressionComponent);
    return PlaybookConditionalExpressionComponent;
}());



/***/ }),

/***/ "./src/app/playbook/playbook.conditional.expression.html":
/*!***************************************************************!*\
  !*** ./src/app/playbook/playbook.conditional.expression.html ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"indent\">\r\n\t<!-- Basic Info -->\r\n\t<div class=\"row\">\r\n\t\t<div class=\"col-6\">\r\n\t\t\t<div class=\"form-group\">\r\n\t\t\t\t<label>Operator</label>\r\n\t\t\t\t<select class=\"form-control\" [(ngModel)]=\"conditionalExpression.operator\">\r\n\t\t\t\t\t<option *ngFor=\"let i of availableOperators\" [value]=\"i\" [label]=\"i.toUpperCase()\">{{i.toUpperCase()}}</option>\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"col-6\">\r\n\t\t\t<div class=\"form-group\">\r\n\t\t\t\t<label>Negated</label>\r\n\t\t\t\t<input type=\"checkbox\" class=\"form-control\" [(ngModel)]=\"conditionalExpression.is_negated\">\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<!-- Conditions Component -->\r\n\t<div>\r\n\t\t<h4>Conditions</h4>\r\n\t\t<playbook-conditions-component [conditions]=\"conditionalExpression.conditions\" [appApis]=\"appApis\" [loadedWorkflow]=\"loadedWorkflow\"\r\n\t\t [selectedAppName]=\"selectedAppName\" (createVariable)=\"onCreateVariable($event)\"></playbook-conditions-component>\r\n\t</div>\r\n\t<!-- Add Child Expressions Header -->\r\n\t<div class=\"row\">\r\n\t\t<div class=\"col-6\">\r\n\t\t\t<h4>Child Expressions</h4>\r\n\t\t</div>\r\n\t\t<div class=\"col-6\">\r\n\t\t\t<div class=\"form-group\">\r\n\t\t\t\t<button class=\"btn btn-primary pull-right\" (click)=\"addChildExpression()\">\r\n\t\t\t\t\t<i class=\"fa fa-plus\"></i>Add Child Expression\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<!-- Child expressions control and component -->\r\n\t<div *ngFor=\"let childExpression of conditionalExpression.child_expressions; let id = index\">\r\n\t\t<div class=\"row\">\r\n\t\t\t<div class=\"col-6\">\r\n\t\t\t\t<label>Child Expression {{id+1}}</label>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"col-6\">\r\n\t\t\t\t<div class=\"pull-right\">\r\n\t\t\t\t\t<button *ngIf=\"id > 0\" class=\"btn btn-primary\" (click)=\"moveUp(id)\" title=\"Move Up\">\r\n\t\t\t\t\t\t<i class=\"fa fa-arrow-up\"></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button *ngIf=\"id < conditionalExpression.child_expressions.length - 1\" class=\"btn btn-primary\" (click)=\"moveDown(id)\" title=\"Move Down\">\r\n\t\t\t\t\t\t<i class=\"fa fa-arrow-down\"></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button class=\"btn btn-danger\" (click)=\"removeChildExpression(id)\" title=\"Remove Conditional Expression\">\r\n\t\t\t\t\t\t<i class=\"fa fa-close\"></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<playbook-conditional-expression-component [conditionalExpression]=\"childExpression\" [appApis]=\"appApis\" [selectedAppName]=\"selectedAppName\"\r\n\t\t [loadedWorkflow]=\"loadedWorkflow\" (createVariable)=\"onCreateVariable($event)\"></playbook-conditional-expression-component>\r\n\t</div>\r\n</div>"

/***/ }),

/***/ "./src/app/playbook/playbook.conditions.component.ts":
/*!***********************************************************!*\
  !*** ./src/app/playbook/playbook.conditions.component.ts ***!
  \***********************************************************/
/*! exports provided: PlaybookConditionsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlaybookConditionsComponent", function() { return PlaybookConditionsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _models_playbook_workflow__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../models/playbook/workflow */ "./src/app/models/playbook/workflow.ts");
/* harmony import */ var _models_playbook_argument__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../models/playbook/argument */ "./src/app/models/playbook/argument.ts");
/* harmony import */ var _models_playbook_condition__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../models/playbook/condition */ "./src/app/models/playbook/condition.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var PlaybookConditionsComponent = /** @class */ (function () {
    // tslint:disable-next-line:no-empty
    function PlaybookConditionsComponent() {
        this.createVariable = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
    }
    PlaybookConditionsComponent.prototype.ngOnInit = function () {
        var _this = this;
        var appsWithConditions = this.appApis.filter(function (app) { return app.condition_apis && app.condition_apis.length; });
        // If our selected app doesn't have conditions, just auto select the first one
        if (!appsWithConditions.find(function (a) { return a.name === _this.selectedAppName; })) {
            var firstApp = appsWithConditions[0];
            if (firstApp) {
                this.selectedAppName = firstApp.name;
            }
        }
        this.appNamesWithConditions = appsWithConditions.map(function (app) { return app.name; });
        this.resetConditionSelection(this.selectedAppName);
    };
    /**
     * Sets/resets the condition selection to the initial condition in the list on load/after adding a condition.
     * @param appName App name to reset the conditions for
     */
    PlaybookConditionsComponent.prototype.resetConditionSelection = function (appName) {
        var app = this.appApis.find(function (a) { return a.name === appName; });
        if (app.condition_apis && app.condition_apis.length) {
            this.selectedConditionApi = app.condition_apis[0].name;
        }
    };
    /**
     * Adds a new condition of a given selected app/action to our conditions array.
     */
    PlaybookConditionsComponent.prototype.addCondition = function () {
        if (!this.selectedAppName || !this.selectedConditionApi) {
            return;
        }
        var newCondition = new _models_playbook_condition__WEBPACK_IMPORTED_MODULE_4__["Condition"]();
        newCondition.app_name = this.selectedAppName;
        newCondition.action_name = this.selectedConditionApi;
        // newCondition.arguments = [];
        this.conditions.push(newCondition);
    };
    /**
     * Moves a selected index in our conditions array "up" (by swapping it with the ID before).
     * @param index Index to move
     */
    PlaybookConditionsComponent.prototype.moveUp = function (index) {
        var idAbove = index - 1;
        var toBeSwapped = this.conditions[idAbove];
        this.conditions[idAbove] = this.conditions[index];
        this.conditions[index] = toBeSwapped;
    };
    /**
     * Moves a selected index in our conditions array "down" (by swapping it with the ID after).
     * @param index Index to move
     */
    PlaybookConditionsComponent.prototype.moveDown = function (index) {
        var idBelow = index + 1;
        var toBeSwapped = this.conditions[idBelow];
        this.conditions[idBelow] = this.conditions[index];
        this.conditions[index] = toBeSwapped;
    };
    /**
     * Removes a condition from our conditions array by a given index.
     * @param index Index to remove
     */
    PlaybookConditionsComponent.prototype.removeCondition = function (index) {
        this.conditions.splice(index, 1);
    };
    /**
     * Returns a ConditionApi by app name and condition name.
     * @param appName App name to find
     * @param conditionName Condition name to find
     */
    PlaybookConditionsComponent.prototype.getConditionApi = function (appName, conditionName) {
        var conditionApi = this.appApis.find(function (a) { return a.name === appName; }).condition_apis.find(function (c) { return c.name === conditionName; });
        // Filter out the data_in parameter
        conditionApi.parameters = conditionApi.parameters.filter(function (p) { return p.name !== conditionApi.data_in; });
        return conditionApi;
    };
    /**
     * For a given condition and parameter api, return the argument that already exists (by parameter name),
     * or create, add, and return an argument with the default values specified in the parameter API.
     * @param condition Condition to query/mutate
     * @param parameterApi ParameterApi to use as the basis
     */
    PlaybookConditionsComponent.prototype.getOrInitializeArgument = function (condition, parameterApi) {
        // Find an existing argument
        var argument = condition.arguments.find(function (a) { return a.name === parameterApi.name; });
        if (argument) {
            return argument;
        }
        argument = this.getDefaultArgument(parameterApi);
        condition.arguments.push(argument);
        return argument;
    };
    /**
     * Returns an argument based upon a given parameter API and its default value.
     * @param parameterApi Parameter API used to generate the default argument
     */
    PlaybookConditionsComponent.prototype.getDefaultArgument = function (parameterApi) {
        return Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["plainToClass"])(_models_playbook_argument__WEBPACK_IMPORTED_MODULE_3__["Argument"], {
            name: parameterApi.name,
            value: parameterApi.schema.default != null ? parameterApi.schema.default : null,
            reference: '',
            selection: '',
        });
    };
    /**
     * Returns a list of condition names for the selected app name. Used to populate a select.
     */
    PlaybookConditionsComponent.prototype.getConditionNamesForApp = function () {
        var _this = this;
        return this.appApis.find(function (a) { return a.name === _this.selectedAppName; }).condition_apis.map(function (c) { return c.name; });
    };
    PlaybookConditionsComponent.prototype.onCreateVariable = function (argument) {
        this.createVariable.emit(argument);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], PlaybookConditionsComponent.prototype, "selectedAppName", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], PlaybookConditionsComponent.prototype, "conditions", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], PlaybookConditionsComponent.prototype, "appApis", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _models_playbook_workflow__WEBPACK_IMPORTED_MODULE_2__["Workflow"])
    ], PlaybookConditionsComponent.prototype, "loadedWorkflow", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PlaybookConditionsComponent.prototype, "createVariable", void 0);
    PlaybookConditionsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'playbook-conditions-component',
            template: __webpack_require__(/*! ./playbook.conditions.html */ "./src/app/playbook/playbook.conditions.html"),
            styleUrls: [],
            encapsulation: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewEncapsulation"].None,
            providers: [],
        }),
        __metadata("design:paramtypes", [])
    ], PlaybookConditionsComponent);
    return PlaybookConditionsComponent;
}());



/***/ }),

/***/ "./src/app/playbook/playbook.conditions.html":
/*!***************************************************!*\
  !*** ./src/app/playbook/playbook.conditions.html ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div *ngIf=\"appNamesWithConditions.length\">\r\n\t<div class=\"row addBar\">\r\n\t\t<div class=\"col-4\">\r\n\t\t\t<label>App</label>\r\n\t\t\t<select class=\"form-control\" [(ngModel)]=\"selectedAppName\" (change)=\"resetConditionSelection($event.target.value)\">\r\n\t\t\t\t<option *ngFor=\"let i of appNamesWithConditions\" [value]=\"i\" [label]=\"i\">{{i}}</option>\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t\t<div class=\"col-4\">\r\n\t\t\t<label>Action</label>\r\n\t\t\t<select class=\"form-control\" [(ngModel)]=\"selectedConditionApi\">\r\n\t\t\t\t<option *ngFor=\"let i of getConditionNamesForApp()\" [value]=\"i\" [label]=\"i\">{{i}}</option>\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t\t<div class=\"col-4\">\r\n\t\t\t<div class=\"form-group\">\r\n\t\t\t\t<button class=\"btn btn-primary pull-right\" (click)=\"addCondition()\">\r\n\t\t\t\t\t<i class=\"fa fa-plus\"></i>Add Condition\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div *ngFor=\"let condition of conditions; let id = index\">\r\n\t\t<div class=\"row\">\r\n\t\t\t<div class=\"col-4\">\r\n\t\t\t\t<label>Condition {{id+1}}: {{condition.app_name}} - {{condition.action_name}}</label>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"col-4\">\r\n\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t<label>Negated</label>\r\n\t\t\t\t\t<input type=\"checkbox\" class=\"form-control\" [(ngModel)]=\"condition.is_negated\">\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"col-4\">\r\n\t\t\t\t<div class=\"pull-right\">\r\n\t\t\t\t\t<button *ngIf=\"id > 0\" class=\"btn btn-primary\" (click)=\"moveUp(id)\" title=\"Move Up\">\r\n\t\t\t\t\t\t<i class=\"fa fa-arrow-up\"></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button *ngIf=\"id < conditions.length - 1\" class=\"btn btn-primary\" (click)=\"moveDown(id)\" title=\"Move Down\">\r\n\t\t\t\t\t\t<i class=\"fa fa-arrow-down\"></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button class=\"btn btn-danger\" (click)=\"removeCondition(id)\" title=\"Remove Condition\">\r\n\t\t\t\t\t\t<i class=\"fa fa-close\"></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<playbook-argument-component *ngFor=\"let parameterApi of getConditionApi(condition.app_name, condition.action_name).parameters; let id = index\"\r\n\t\t [loadedWorkflow]=\"loadedWorkflow\" [argument]=\"getOrInitializeArgument(condition, parameterApi)\" [parameterApi]=\"parameterApi\"\r\n\t\t [id]=\"id\" (createVariable)=\"onCreateVariable($event)\"></playbook-argument-component>\r\n\t\t<div>\r\n\t\t\t<h4>Transforms</h4>\r\n\t\t\t<playbook-transforms-component [transforms]=\"condition.transforms\" [appApis]=\"appApis\" [selectedAppName]=\"selectedAppName\"\r\n\t\t\t [loadedWorkflow]=\"loadedWorkflow\" (createVariable)=\"onCreateVariable($event)\"></playbook-transforms-component>\r\n\t\t</div>\r\n\t</div>\r\n</div>"

/***/ }),

/***/ "./src/app/playbook/playbook.environment.variable.modal.component.ts":
/*!***************************************************************************!*\
  !*** ./src/app/playbook/playbook.environment.variable.modal.component.ts ***!
  \***************************************************************************/
/*! exports provided: PlaybookEnvironmentVariableModalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlaybookEnvironmentVariableModalComponent", function() { return PlaybookEnvironmentVariableModalComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var _models_playbook_environmentVariable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../models/playbook/environmentVariable */ "./src/app/models/playbook/environmentVariable.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var PlaybookEnvironmentVariableModalComponent = /** @class */ (function () {
    function PlaybookEnvironmentVariableModalComponent(activeModal) {
        this.activeModal = activeModal;
        this.variable = new _models_playbook_environmentVariable__WEBPACK_IMPORTED_MODULE_2__["EnvironmentVariable"]();
        this.existing = false;
    }
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _models_playbook_environmentVariable__WEBPACK_IMPORTED_MODULE_2__["EnvironmentVariable"])
    ], PlaybookEnvironmentVariableModalComponent.prototype, "variable", void 0);
    PlaybookEnvironmentVariableModalComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'playbook-environment-variable-modal-component',
            template: __webpack_require__(/*! ./playbook.environment.variable.modal.html */ "./src/app/playbook/playbook.environment.variable.modal.html"),
        }),
        __metadata("design:paramtypes", [_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__["NgbActiveModal"]])
    ], PlaybookEnvironmentVariableModalComponent);
    return PlaybookEnvironmentVariableModalComponent;
}());



/***/ }),

/***/ "./src/app/playbook/playbook.environment.variable.modal.html":
/*!*******************************************************************!*\
  !*** ./src/app/playbook/playbook.environment.variable.modal.html ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal-header\">\r\n    <h4 class=\"modal-title\">{{ existing ? 'Edit' : 'Add' }} Workflow Variable</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n    <div class=\"container-fluid\">\r\n        <div class=\"row\">\r\n            <div class=\"col-6\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"name\">Name</label>\r\n                    <input name=\"name\" type=\"text\" [(ngModel)]=\"variable.name\" class=\"form-control\">\r\n                </div>\r\n            </div>\r\n            <div class=\"col-6\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"value\">Default Value</label>\r\n                    <input name=\"value\" type=\"text\" [(ngModel)]=\"variable.value\" class=\"form-control\">\r\n                </div>\r\n            </div>\r\n            <div class=\"col-12\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"description\">Description (optional)</label>\r\n                    <textarea name=\"description\" rows=\"2\" [(ngModel)]=\"variable.description\" class=\"form-control\"></textarea>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"modal-footer\">\r\n    <button type=\"button\" class=\"btn btn-secondary\" (click)=\"activeModal.dismiss()\">Close</button>\r\n    <button type=\"button\" class=\"btn btn-primary\" (click)=\"activeModal.close(variable)\">Save</button>\r\n</div>"

/***/ }),

/***/ "./src/app/playbook/playbook.html":
/*!****************************************!*\
  !*** ./src/app/playbook/playbook.html ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div id=\"main\" class=\"playbookMain\">\r\n    <!-- <h1 *ngIf=\"false\" class=\"d-flex mt-2 mb-4\">\r\n        <span class=\"mr-3\">Workflows</span>\r\n        <div class=\"d-flex align-items-center\">\r\n            <button (click)=\"createWorkflow()\" class=\"btn btn-outline-primary mr-2\">Create New</button>\r\n            <button (click)=\"importWorkflow()\" class=\"btn btn-outline-primary\">Import Workflow</button>\r\n        </div>\r\n        <div *ngIf=\"workflows.length > 0\" class=\"col-4 my-1 my-lg-none ml-auto pr-0\">\r\n                <input class=\"form-control\" [formControl]=\"filterQuery\" placeholder=\"Filter Workflows...\" />\r\n            </div>\r\n    </h1> -->\r\n    <div class=\"d-flex align-items-center\">\r\n        <nav aria-label=\"breadcrumb\">\r\n            <ol id=\"playbookBreadcrumbs\" class=\"breadcrumb\">\r\n                <li class=\"breadcrumb-item\">Workflows</li>\r\n                <li class=\"breadcrumb-item d-flex align-items-center\">\r\n                    <a routerLink=\"\" (click)=\"createWorkflow()\">Create New</a>\r\n                    <button (click)=\"importWorkflow()\" class=\"ml-3 btn btn-sm btn-outline-primary\">Import Workflow</button>\r\n                </li>\r\n            </ol>\r\n        </nav>\r\n        <div *ngIf=\"workflows.length > 0\" class=\"col-4 my-1 my-lg-none ml-auto pr-0\">\r\n            <input class=\"form-control\" [formControl]=\"filterQuery\" placeholder=\"Filter Workflows...\" />\r\n        </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"workflows.length > 0\" class=\"row\">\r\n\r\n        <div *ngFor=\"let w of filteredWorkflows\" class=\"col-md-6 col-lg-4 col-xl-3 my-4\">\r\n            <div class=\"card workflow-card shadow\">\r\n                <div ngbDropdown placement=\"bottom-right\" class=\"d-inline-block workflow-menu mt-3\">\r\n                    <a class=\"workflow-menu-link text-muted h2 px-3\" ngbDropdownToggle><i\r\n                            class=\"fa fa-ellipsis-v\"></i></a>\r\n                    <div ngbDropdownMenu aria-labelledby=\"dropdownBasic1\">\r\n                        <button class=\"dropdown-item\" (click)=\"editDescription(w)\">Edit Description...</button>\r\n                        <button class=\"dropdown-item\" (click)=\"duplicateWorkflow(w)\">Duplicate</button>\r\n                        <button class=\"dropdown-item\" (click)=\"exportWorkflow(w)\">Export</button>\r\n                        <button class=\"dropdown-item\" (click)=\"deleteWorkflow(w)\">Delete</button>\r\n                    </div>\r\n                </div>\r\n                <div class=\"card-body d-flex flex-column\">\r\n\r\n                    <h5 class=\"card-title\">\r\n                        {{ w.name }}\r\n                        <div *ngIf=\"w.tags?.length > 0\" class=\"small mt-1\">\r\n                            <span *ngFor=\"let tag of w.tags\" class=\"badge badge-pill badge-primary small mr-1\">\r\n                                {{ tag }} </span>\r\n                        </div>\r\n                    </h5>\r\n\r\n                    <p class=\"card-text flex-grow-1\">{{ w.description }}</p>\r\n                    <div class=\"d-flex justify-content-around\">\r\n                        <button class=\"btn btn-outline-primary mr-1\" (click)=\"routeToWorkflow(w)\"><i\r\n                                class=\"fa fa-sitemap\"></i> Workflow Editor</button>\r\n                        <button class=\"btn btn-outline-primary\" (click)=\"executeWorkflow(w)\" [disabled]=\"!w.is_valid\"><i\r\n                                class=\"fa fa-play-circle\"></i> Execute Workflow</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <div *ngIf=\"workflowsLoaded && workflows.length == 0\" class=\"instruction-container d-flex justify-content-center align-items-center\">\r\n        <div class=\"card bg-light shadow-lg\">\r\n            <div class=\"card-body\">\r\n                <h4 class=\"mb-3\">Welcome to WALKOFF</h4>\r\n                <p>\r\n                    <b>WALKOFF</b> is a flexible, easy to use,\r\n                    automation framework allowing users to integrate their capabilities and devices to cut through the\r\n                    repetitive,\r\n                    tedious tasks slowing them down.\r\n                </p>\r\n                <p>\r\n                    Use the <b>Create New</b> link above to create your first workflow or\r\n                    visit the <a href=\"https://walkoff.readthedocs.io\" target=\"_blank\"><b>website</b></a> for additional\r\n                    documentation.\r\n                </p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>"

/***/ }),

/***/ "./src/app/playbook/playbook.scss":
/*!****************************************!*\
  !*** ./src/app/playbook/playbook.scss ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "/* @import '/client/node_modules/cytoscape-panzoom/cytoscape.js-panzoom.css';\r\n@import '/client/node_modules/ng2-dnd/bundles/style.css'; */\n#main.playbookMain {\n  padding: 10px 15px 0 15px;\n  position: relative; }\n#main.playbookMain:before {\n  content: \"\\f0e8\";\n  font-family: FontAwesome;\n  font-style: normal;\n  font-weight: normal;\n  text-decoration: inherit;\n  position: fixed;\n  font-size: 50rem;\n  color: #38607724;\n  right: 4rem;\n  margin-top: -8rem;\n  z-index: -1; }\n.playbookMain .parametersEditor .failure {\n  color: crimson; }\n.instruction-container {\n  height: 500px;\n  width: 100%; }\n.instruction-container > .card {\n    max-width: 50%; }\n#playbookBreadcrumbs {\n  background-color: unset;\n  -webkit-margin-after: unset;\n          margin-block-end: unset;\n  -webkit-padding-start: unset;\n          padding-inline-start: unset;\n  font-weight: bold;\n  font-size: 1.5rem; }\n#playbookBreadcrumbs a {\n    text-decoration: none; }\n.workflow-card {\n  height: 100%;\n  max-height: 300px; }\n.workflow-card .card-body {\n    overflow: hidden; }\n.workflow-card .card-text {\n    min-height: 0;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n#playbookToolbar {\n  background-color: #aecbdc;\n  margin-left: 0;\n  margin-bottom: 5px;\n  border: 1px solid #8b9aa3;\n  border-radius: 5px; }\n#playbookToolbar .btn-default {\n  background-color: #aecbdc;\n  border-color: #aecbdc; }\n#playbookToolbar .btn-default:hover {\n  background-color: #eaf2f6;\n  border-color: #eaf2f6;\n  margin: 0;\n  border-radius: 0; }\n#playbookToolbar .btn-group {\n  border-right: 1px solid #8b9aa3; }\n#playbookToolbar .btn-group > .btn:first-child {\n  margin: 0;\n  padding: 10px; }\n#playbookToolbar .btn-toolbar > .btn, .btn-toolbar > .btn-group, .btn-toolbar > .input-group {\n  margin-left: 0; }\n#playbookToolbar .form-control.workflowNameInput {\n  display: inline-block;\n  width: auto; }\n#currentWorkflowText {\n  margin-top: 10px;\n  font-size: 18px; }\n.consoleRow {\n  padding: 10px; }\n/* Console Row = 200px */\n.playbookMain .graphEditorRow, .playbookMain .graphEditorColumn {\n  height: calc(100vh - 310px);\n  overflow: auto; }\n.playbookMain .panel-heading.playbook-heading {\n  cursor: pointer; }\n.workflow-menu {\n  cursor: pointer;\n  padding: unset;\n  position: absolute;\n  top: 0px;\n  right: 0px; }\n.workflow-menu .workflow-menu-link::after {\n    content: none; }\n#playbookEditorTabs {\n  display: inline-block;\n  vertical-align: top;\n  height: 100%;\n  width: 100%;\n  position: inherit;\n  background: transparent; }\n#cy {\n  /* display: inline-block; */\n  /* vertical-align: top; */\n  width: 100%;\n  height: 100%; }\n/* Need to do this else panzoom appears above modals */\n#cy .cy-panzoom {\n  z-index: 10; }\n#cy-instructions {\n  padding: 20px;\n  font-size: 25px; }\n#cy-json-data {\n  background-color: white;\n  color: black;\n  font-weight: normal;\n  height: 630px;\n  width: 500px;\n  resize: none; }\n.playbookMain #accordion .card-heading .card-title:after {\n  /* symbol for \"opening\" panels */\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  content: \"\\f078\";\n  /* adjust as needed, taken from bootstrap.css */\n  float: right;\n  /* adjust as needed */\n  color: grey;\n  /* adjust as needed */ }\n.no-transition {\n  transition: none !important; }\n.playbookMain #accordion .card-heading.collapsed .card-title:after {\n  /* symbol for \"collapsed\" panels */\n  content: \"\\f054\";\n  /* adjust as needed, taken from bootstrap.css */ }\n.playbookMain .card-default > .card-heading {\n  background-color: #eaf2f6;\n  font-weight: bolder; }\n.playbookMain .parametersEditor input[type=checkbox].form-control {\n  width: 34px;\n  margin: 0 5px; }\n.playbookMain .parametersEditor .form-group.argument {\n  margin-bottom: 5px;\n  padding: 5px; }\n.playbookMain .parametersEditor .form-group.argument.odd {\n  background-color: #EEE; }\n.playbookMain .parametersEditor .indent {\n  border-left: 3px solid #DDD;\n  border-top: 1px solid #DDD;\n  border-bottom: 1px solid #DDD;\n  padding: 5px 0 5px 15px;\n  margin-top: 5px;\n  margin-bottom: 5px; }\n.playbookMain .parametersEditor .addBar {\n  margin-bottom: 10px; }\n.playbookMain .parametersEditor .addBar button {\n  margin-top: 25px; }\n.playbookMain .parametersEditor .propertyHeader {\n  margin-bottom: 5px; }\n.playbookMain .parametersEditor .required {\n  color: crimson;\n  margin-left: 5px; }\n.playbookMain ngx-datatable datatable-body datatable-body-row datatable-body-cell .datatable-body-cell-label {\n  white-space: initial; }\n#workflowsModal .workflowPanel a {\n  cursor: pointer; }\n#workflowsModal .card-heading h4 {\n  min-height: 30px; }\n#workflowsModal .importContainer {\n  margin-bottom: 5px; }\n#workflowsModal .importContainer h5 {\n  display: inline-block; }\n#workflowsModal .importPlaybookInput {\n  display: inline-block; }\n#workflowsModal > .modal-dialog {\n  max-width: 600px; }\n#workflowsModal .modal-title,\n#executionResultsModal .modal-title,\n#playbookAndWorkflowActionModal .modal-title {\n  display: inline-block; }\n#executionResultsModal > .modal-dialog {\n  max-width: 95%; }\n"

/***/ }),

/***/ "./src/app/playbook/playbook.service.ts":
/*!**********************************************!*\
  !*** ./src/app/playbook/playbook.service.ts ***!
  \**********************************************/
/*! exports provided: PlaybookService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlaybookService", function() { return PlaybookService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var _models_playbook_workflow__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../models/playbook/workflow */ "./src/app/models/playbook/workflow.ts");
/* harmony import */ var _models_playbook_playbook__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../models/playbook/playbook */ "./src/app/models/playbook/playbook.ts");
/* harmony import */ var _models_api_appApi__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../models/api/appApi */ "./src/app/models/api/appApi.ts");
/* harmony import */ var _globals_globals_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../globals/globals.service */ "./src/app/globals/globals.service.ts");
/* harmony import */ var _execution_execution_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../execution/execution.service */ "./src/app/execution/execution.service.ts");
/* harmony import */ var _settings_settings_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../settings/settings.service */ "./src/app/settings/settings.service.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
/* harmony import */ var angular2_uuid__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! angular2-uuid */ "./node_modules/angular2-uuid/index.js");
/* harmony import */ var angular2_uuid__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(angular2_uuid__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var rxjs_Observable__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/Observable */ "./node_modules/rxjs-compat/_esm5/Observable.js");
/* harmony import */ var rxjs_add_operator_catch__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs/add/operator/catch */ "./node_modules/rxjs-compat/_esm5/add/operator/catch.js");
/* harmony import */ var rxjs_add_operator_map__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs/add/operator/map */ "./node_modules/rxjs-compat/_esm5/add/operator/map.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};














var PlaybookService = /** @class */ (function () {
    function PlaybookService(http, utils, executionService, globalsService, settingsService) {
        var _this = this;
        this.http = http;
        this.utils = utils;
        this.executionService = executionService;
        this.globalsService = globalsService;
        this.settingsService = settingsService;
        this.workflowsChange = new rxjs_Observable__WEBPACK_IMPORTED_MODULE_11__["Observable"](function (observer) {
            _this.observer = observer;
            _this.getWorkflows().then(function (workflows) { return _this.observer.next(workflows); });
        });
    }
    PlaybookService.prototype.emitChange = function (data) {
        var _this = this;
        if (this.observer)
            this.getWorkflows().then(function (workflows) { return _this.observer.next(workflows); });
        return data;
    };
    /**
     * Returns all playbooks and their child workflows in minimal form (id, name).
     */
    PlaybookService.prototype.getPlaybooks = function () {
        return this.http.get('/api/playbooks')
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["plainToClass"])(_models_playbook_playbook__WEBPACK_IMPORTED_MODULE_4__["Playbook"], data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Saves a new playbook.
     * @param playbook New playbook to be saved
     */
    PlaybookService.prototype.newPlaybook = function (playbook) {
        return this.http.post('/api/playbooks', Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["classToPlain"])(playbook))
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["plainToClass"])(_models_playbook_playbook__WEBPACK_IMPORTED_MODULE_4__["Playbook"], data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Renames an existing playbook.
     * @param playbookId Current playbook ID to change
     * @param newName New name for the updated playbook
     */
    PlaybookService.prototype.renamePlaybook = function (playbookId, newName) {
        return this.http.patch('/api/playbooks', { id: playbookId, name: newName })
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["plainToClass"])(_models_playbook_playbook__WEBPACK_IMPORTED_MODULE_4__["Playbook"], data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Duplicates and saves an existing playbook, it's workflows, actions, branches, etc. under a new name.
     * @param playbookId ID of the playbook to duplicate
     * @param newName Name of the new copy to be saved
     */
    PlaybookService.prototype.duplicatePlaybook = function (playbookId, newName) {
        return this.http.post("/api/playbooks?source=" + playbookId, { name: newName })
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["plainToClass"])(_models_playbook_playbook__WEBPACK_IMPORTED_MODULE_4__["Playbook"], data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Deletes a playbook by name.
     * @param playbookIdToDelete ID of playbook to be deleted.
     */
    PlaybookService.prototype.deletePlaybook = function (playbookIdToDelete) {
        return this.http.delete("/api/playbooks/" + playbookIdToDelete)
            .toPromise()
            .catch(this.utils.handleResponseError);
    };
    /**
     * Exports a playbook as an Observable (component handles the actual 'save').
     * @param playbookId: ID of playbook to export
     */
    PlaybookService.prototype.exportPlaybook = function (playbookId) {
        return this.http.get("/api/playbooks/" + playbookId + "?mode=export", { responseType: 'blob' })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Exports a playbook as an Observable (component handles the actual 'save').
     * @param workflowId: ID of playbook to export
     */
    PlaybookService.prototype.exportWorkflow = function (workflowId) {
        return this.http.get("/api/workflows/" + workflowId + "?mode=export", { responseType: 'blob' })
            .toPromise()
            .catch(this.utils.handleResponseError);
    };
    /**
     * Imports a playbook from a supplied file.
     * @param fileToImport File to be imported
     */
    PlaybookService.prototype.importPlaybook = function (fileToImport) {
        var formData = new FormData();
        formData.append('file', fileToImport, fileToImport.name);
        var headers = { 'Accept': 'application/json' };
        return this.http.post('/api/playbooks', formData, { headers: headers })
            .map(function (res) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["plainToClass"])(_models_playbook_playbook__WEBPACK_IMPORTED_MODULE_4__["Playbook"], res); })
            .catch(function (error) { return rxjs_Observable__WEBPACK_IMPORTED_MODULE_11__["Observable"].throw(error); });
    };
    /**
     * Imports a playbook from a supplied file.
     * @param fileToImport File to be imported
     */
    PlaybookService.prototype.importWorkflow = function (fileToImport) {
        return __awaiter(this, void 0, void 0, function () {
            var headers, body, _a, _b, _c;
            var _this = this;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        headers = { 'Accept': 'application/json', 'Content-Type': 'application/json' };
                        _b = (_a = JSON).parse;
                        return [4 /*yield*/, this.utils.readUploadedFileAsText(fileToImport)];
                    case 1:
                        body = _b.apply(_a, [_d.sent()]);
                        _c = body;
                        return [4 /*yield*/, this.nextWorkflowName(body.name)];
                    case 2:
                        _c.name = _d.sent();
                        return [2 /*return*/, this.http.post('/api/workflows', body, { headers: headers })
                                .toPromise()
                                .then(function (data) { return _this.emitChange(data); })
                                .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["plainToClass"])(_models_playbook_workflow__WEBPACK_IMPORTED_MODULE_3__["Workflow"], data); })
                                .catch(this.utils.handleResponseError)];
                }
            });
        });
    };
    PlaybookService.prototype.nextWorkflowName = function (name) {
        return __awaiter(this, void 0, void 0, function () {
            var workflows, count;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getWorkflows()];
                    case 1:
                        workflows = _a.sent();
                        count = workflows.filter(function (w) { return w.name.match(new RegExp("^" + name.replace(/[.*+?^${}()|[\]\\]/g, '\\$&') + "( (d+))?$")); }).length;
                        return [2 /*return*/, (count > 0) ? name + " (" + count + ")" : name];
                }
            });
        });
    };
    /**
     * Returns all playbooks and their child workflows in minimal form (id, name).
     */
    PlaybookService.prototype.getWorkflows = function () {
        return this.http.get('/api/workflows')
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["plainToClass"])(_models_playbook_workflow__WEBPACK_IMPORTED_MODULE_3__["Workflow"], data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Duplicates a workflow under a given playbook, it's actions, branches, etc. under a new name.
     * @param sourceWorkflowId Current workflow ID to be duplicated
     * @param destinationPlaybookId ID of playbook the workflow will be duplicated to
     * @param newName Name for the new copy to be saved
     */
    PlaybookService.prototype.duplicateWorkflow = function (sourceWorkflowId, newName) {
        var _this = this;
        return this.http.post("/api/workflows?source=" + sourceWorkflowId, { name: newName })
            .toPromise()
            .then(function (data) { return _this.emitChange(data); })
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["plainToClass"])(_models_playbook_workflow__WEBPACK_IMPORTED_MODULE_3__["Workflow"], data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Deletes a given workflow under a given playbook.
     * @param workflowIdToDelete ID of the workflow to be deleted
     */
    PlaybookService.prototype.deleteWorkflow = function (workflowIdToDelete) {
        var _this = this;
        return this.http.delete("/api/workflows/" + workflowIdToDelete)
            .toPromise()
            .then(function (data) { return _this.emitChange(data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Creates a new workflow under a given playbook.
     * @param playbookId ID of the playbook the new workflow should be added under
     * @param workflow Workflow to be saved
     */
    PlaybookService.prototype.newWorkflow = function (workflow) {
        var _this = this;
        workflow.id = angular2_uuid__WEBPACK_IMPORTED_MODULE_10__["UUID"].UUID();
        return this.http.post('/api/workflows', Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["classToPlain"])(workflow))
            .toPromise()
            .then(function (data) { return _this.emitChange(data); })
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["plainToClass"])(_models_playbook_workflow__WEBPACK_IMPORTED_MODULE_3__["Workflow"], data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Saves the data of a given workflow specified under a given playbook.
     * @param workflow Data to be saved under the workflow (actions, etc.)
     */
    PlaybookService.prototype.saveWorkflow = function (workflow) {
        var _this = this;
        return this.http.put("/api/workflows/" + workflow.id, Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["classToPlain"])(workflow))
            .toPromise()
            .then(function (data) { return _this.emitChange(data); })
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["plainToClass"])(_models_playbook_workflow__WEBPACK_IMPORTED_MODULE_3__["Workflow"], data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Loads the data of a given workflow under a given playbook.
     * @param workflowId ID of the workflow to load
     */
    PlaybookService.prototype.loadWorkflow = function (workflowId) {
        return this.http.get("/api/workflows/" + workflowId)
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["plainToClass"])(_models_playbook_workflow__WEBPACK_IMPORTED_MODULE_3__["Workflow"], data); })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Notifies the server to execute a given workflow.
     * Note that execution results are not returned here, but on a separate stream-actions EventSource.
     * @param workflowId ID of the workflow to execute
     */
    PlaybookService.prototype.addWorkflowToQueue = function (workflowId, executionId) {
        if (executionId === void 0) { executionId = null; }
        return this.executionService.addWorkflowToQueue(workflowId, executionId);
    };
    /**
     * For a given executing workflow, asyncronously perform some action to change its status.
     * Only returns success
     * @param executionId Execution ID to act upon
     * @param action Action to take (e.g. abort, resume, pause)
     */
    PlaybookService.prototype.performWorkflowTrigger = function (executionId, trigger, data) {
        if (data === void 0) { data = {}; }
        return this.http.patch("api/workflowqueue/" + executionId, { status: 'trigger', trigger_id: trigger, trigger_data: data })
            .toPromise()
            .then(function () { return null; })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Returns an array of all globals within the DB.
     */
    PlaybookService.prototype.getGlobals = function () {
        return this.globalsService.getAllGlobals();
    };
    /**
     * Gets all app apis from the server.
     */
    PlaybookService.prototype.getApis = function () {
        return this.http.get('/api/apps/apis')
            .toPromise()
            // .then((data: any[]) => {
            // 	return [{
            // 		id_: '30f06bd4-3703-f8a9-47e0-8853ea916913',
            // 		name: 'Builtin',
            // 		description: 'Walkoff built-in functions',
            // 		app_version: '1.0.1',
            // 		walkoff_version: '1.0.0',
            // 		contact_info: {email: "walkoff@nsa.gov", name: "Walkoff Team", url: "https://github.com/nsacyber/walkoff"},
            // 		license_info: {name: "Creative Commons", url: "https://github.com/nsacyber/WALKOFF/blob/master/LICENSE.md"},
            // 		external_docs: {},
            // 		actions: [
            // 			{
            // 				id_: '7a1c6838-1b14-4ddc-7d84-935fcbc260ca',
            // 				name: 'Condition',
            // 				node_type: ActionType.CONDITION,
            // 			},
            // 			{
            // 				id_: '21f7c721-448f-da7b-fea9-9b781824e7d3',
            // 				name: 'Trigger',
            // 				node_type: ActionType.TRIGGER,
            // 			},
            // 			{
            // 				id_: '40a9e8ee-9a4f-ffb7-0a01-0cd25a6bd3a2',
            // 				name: 'Transform',
            // 				node_type: ActionType.TRANSFORM,
            // 			}
            // 		]
            // 	}].concat(data);
            // })
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["plainToClass"])(_models_api_appApi__WEBPACK_IMPORTED_MODULE_5__["AppApi"], data); })
            .then(function (appApis) {
            appApis.forEach(function (app) { return app.action_apis.map(function (action) {
                action.app_name = app.name;
                action.app_version = app.app_version;
                return action;
            }); });
            return appApis;
        })
            .catch(this.utils.handleResponseError);
    };
    /**
     * Returns an array of all users within the DB.
     */
    PlaybookService.prototype.getUsers = function () {
        return this.settingsService.getAllUsers();
    };
    /**
     * Returns an array of all roles within the application.
     */
    PlaybookService.prototype.getRoles = function () {
        return this.settingsService.getRoles();
    };
    Object.defineProperty(PlaybookService.prototype, "workflowToCreate", {
        get: function () {
            var w = this.tempStoredWorkflow;
            //this.tempStoredWorkflow = null;
            return w;
        },
        set: function (workflow) {
            this.tempStoredWorkflow = workflow;
        },
        enumerable: true,
        configurable: true
    });
    PlaybookService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])({
            providedIn: 'root'
        }),
        __metadata("design:paramtypes", [_angular_common_http__WEBPACK_IMPORTED_MODULE_2__["HttpClient"], _utilities_service__WEBPACK_IMPORTED_MODULE_9__["UtilitiesService"], _execution_execution_service__WEBPACK_IMPORTED_MODULE_7__["ExecutionService"],
            _globals_globals_service__WEBPACK_IMPORTED_MODULE_6__["GlobalsService"], _settings_settings_service__WEBPACK_IMPORTED_MODULE_8__["SettingsService"]])
    ], PlaybookService);
    return PlaybookService;
}());



/***/ }),

/***/ "./src/app/playbook/playbook.transforms.component.ts":
/*!***********************************************************!*\
  !*** ./src/app/playbook/playbook.transforms.component.ts ***!
  \***********************************************************/
/*! exports provided: PlaybookTransformsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlaybookTransformsComponent", function() { return PlaybookTransformsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _models_playbook_workflow__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../models/playbook/workflow */ "./src/app/models/playbook/workflow.ts");
/* harmony import */ var _models_playbook_argument__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../models/playbook/argument */ "./src/app/models/playbook/argument.ts");
/* harmony import */ var _models_playbook_transform__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../models/playbook/transform */ "./src/app/models/playbook/transform.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var PlaybookTransformsComponent = /** @class */ (function () {
    // tslint:disable-next-line:no-empty
    function PlaybookTransformsComponent() {
        this.createVariable = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
    }
    PlaybookTransformsComponent.prototype.ngOnInit = function () {
        var _this = this;
        var appsWithTransforms = this.appApis.filter(function (app) { return app.transform_apis && app.transform_apis.length; });
        // If our selected app doesn't have transforms, just auto select the first one
        if (!appsWithTransforms.find(function (a) { return a.name === _this.selectedAppName; })) {
            var firstApp = appsWithTransforms[0];
            if (firstApp) {
                this.selectedAppName = firstApp.name;
            }
        }
        this.appNamesWithTransforms = appsWithTransforms.map(function (app) { return app.name; });
        this.resetTransformSelection(this.selectedAppName);
    };
    /**
     * Sets/resets the transform selection to the initial transform in the list on load/after adding a transform.
     * @param appName App name to reset the transforms for
     */
    PlaybookTransformsComponent.prototype.resetTransformSelection = function (appName) {
        var app = this.appApis.find(function (a) { return a.name === appName; });
        if (app.transform_apis && app.transform_apis.length) {
            this.selectedTransformApi = app.transform_apis[0].name;
        }
    };
    /**
     * Adds a new transform of a given selected app/action to our transforms array.
     */
    PlaybookTransformsComponent.prototype.addTransform = function () {
        if (!this.selectedAppName || !this.selectedTransformApi) {
            return;
        }
        var newTransform = new _models_playbook_transform__WEBPACK_IMPORTED_MODULE_4__["Transform"]();
        newTransform.app_name = this.selectedAppName;
        newTransform.action_name = this.selectedTransformApi;
        // newTransform.arguments = args;
        this.transforms.push(newTransform);
    };
    /**
     * Moves a selected index in our transforms array "up" (by swapping it with the ID before).
     * @param index Index to move
     */
    PlaybookTransformsComponent.prototype.moveUp = function (index) {
        var idAbove = index - 1;
        var toBeSwapped = this.transforms[idAbove];
        this.transforms[idAbove] = this.transforms[index];
        this.transforms[index] = toBeSwapped;
    };
    /**
     * Moves a selected index in our transforms array "down" (by swapping it with the ID after).
     * @param index Index to move
     */
    PlaybookTransformsComponent.prototype.moveDown = function (index) {
        var idBelow = index + 1;
        var toBeSwapped = this.transforms[idBelow];
        this.transforms[idBelow] = this.transforms[index];
        this.transforms[index] = toBeSwapped;
    };
    /**
     * Removes a transform from our transforms array by a given index.
     * @param index Index to remove
     */
    PlaybookTransformsComponent.prototype.removeTransform = function (index) {
        this.transforms.splice(index, 1);
    };
    /**
     * Returns a TransformApi by app name and condition name.
     * @param appName App name to find
     * @param transformName Transform name to find
     */
    PlaybookTransformsComponent.prototype.getTransformApi = function (appName, transformName) {
        var transformApi = this.appApis.find(function (a) { return a.name === appName; }).transform_apis.find(function (t) { return t.name === transformName; });
        // Filter out the data_in parameter
        transformApi.parameters = transformApi.parameters.filter(function (p) { return p.name !== transformApi.data_in; });
        return transformApi;
    };
    /**
     * For a given condition and parameter api, return the argument that already exists (by parameter name),
     * or create, add, and return an argument with the default values specified in the parameter API.
     * @param condition Condition to query/mutate
     * @param parameterApi ParameterApi to use as the basis
     */
    PlaybookTransformsComponent.prototype.getOrInitializeArgument = function (transform, parameterApi) {
        // Find an existing argument
        var argument = transform.arguments.find(function (a) { return a.name === parameterApi.name; });
        if (argument) {
            return argument;
        }
        argument = this.getDefaultArgument(parameterApi);
        transform.arguments.push(argument);
        return argument;
    };
    /**
     * Returns an argument based upon a given parameter API and its default value.
     * @param parameterApi Parameter API used to generate the default argument
     */
    PlaybookTransformsComponent.prototype.getDefaultArgument = function (parameterApi) {
        return Object(class_transformer__WEBPACK_IMPORTED_MODULE_1__["plainToClass"])(_models_playbook_argument__WEBPACK_IMPORTED_MODULE_3__["Argument"], {
            name: parameterApi.name,
            value: parameterApi.schema.default != null ? parameterApi.schema.default : null,
            reference: '',
            selection: '',
        });
    };
    /**
     * Returns a list of transform names for the selected app name. Used to populate a select.
     */
    PlaybookTransformsComponent.prototype.getTransformNamesForApp = function () {
        var _this = this;
        return this.appApis.find(function (a) { return a.name === _this.selectedAppName; }).transform_apis.map(function (c) { return c.name; });
    };
    PlaybookTransformsComponent.prototype.onCreateVariable = function (argument) {
        this.createVariable.emit(argument);
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], PlaybookTransformsComponent.prototype, "selectedAppName", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], PlaybookTransformsComponent.prototype, "transforms", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], PlaybookTransformsComponent.prototype, "appApis", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _models_playbook_workflow__WEBPACK_IMPORTED_MODULE_2__["Workflow"])
    ], PlaybookTransformsComponent.prototype, "loadedWorkflow", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", Object)
    ], PlaybookTransformsComponent.prototype, "createVariable", void 0);
    PlaybookTransformsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'playbook-transforms-component',
            template: __webpack_require__(/*! ./playbook.transforms.html */ "./src/app/playbook/playbook.transforms.html"),
            styleUrls: [],
            encapsulation: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewEncapsulation"].None,
            providers: [],
        }),
        __metadata("design:paramtypes", [])
    ], PlaybookTransformsComponent);
    return PlaybookTransformsComponent;
}());



/***/ }),

/***/ "./src/app/playbook/playbook.transforms.html":
/*!***************************************************!*\
  !*** ./src/app/playbook/playbook.transforms.html ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div *ngIf=\"appNamesWithTransforms.length\" class=\"indent\">\r\n\t<div class=\"row addBar\">\r\n\t\t<div class=\"col-4\">\r\n\t\t\t<label>App</label>\r\n\t\t\t<select class=\"form-control\" [(ngModel)]=\"selectedAppName\" (change)=\"resetTransformSelection($event.target.value)\">\r\n\t\t\t\t<option *ngFor=\"let i of appNamesWithTransforms\" [value]=\"i\" [label]=\"i\">{{i}}</option>\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t\t<div class=\"col-4\">\r\n\t\t\t<label>Action</label>\r\n\t\t\t<select class=\"form-control\" [(ngModel)]=\"selectedTransformApi\">\r\n\t\t\t\t<option *ngFor=\"let i of getTransformNamesForApp()\" [value]=\"i\" [label]=\"i\">{{i}}</option>\r\n\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t<div class=\"col-4\">\r\n\t\t\t<div class=\"form-group\">\r\n\t\t\t\t<button class=\"btn btn-primary pull-right\" (click)=\"addTransform()\"><i class=\"fa fa-plus\"></i>Add Transform</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div *ngFor=\"let transform of transforms; let id = index\">\r\n\t\t<div class=\"row\">\r\n\t\t\t<div class=\"col-6\">\r\n\t\t\t\t<label>Transform {{id+1}}: {{transform.app_name}} - {{transform.action_name}}</label>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"col-6\">\r\n\t\t\t\t<div class=\"pull-right\">\r\n\t\t\t\t\t<button *ngIf=\"id > 0\" class=\"btn btn-primary\" (click)=\"moveUp(id)\" title=\"Move Up\"><i class=\"fa fa-arrow-up\"></i></button>\r\n\t\t\t\t\t<button *ngIf=\"id < transforms.length - 1\" class=\"btn btn-primary\" (click)=\"moveDown(id)\" title=\"Move Down\"><i class=\"fa fa-arrow-down\"></i></button>\r\n\t\t\t\t\t<button class=\"btn btn-danger\" (click)=\"removeTransform(id)\" title=\"Remove Transform\"><i class=\"fa fa-close\"></i></button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<playbook-argument-component *ngFor=\"let parameterApi of getTransformApi(transform.app_name, transform.action_name).parameters; let id = index\"\r\n\t\t[loadedWorkflow]=\"loadedWorkflow\" [argument]=\"getOrInitializeArgument(transform, parameterApi)\" [parameterApi]=\"parameterApi\"\r\n\t\t[id]=\"id\" (createVariable)=\"onCreateVariable($event)\"></playbook-argument-component>\r\n\t</div>\r\n</div>"

/***/ }),

/***/ "./src/app/playbook/workflow.editor.component.ts":
/*!*******************************************************!*\
  !*** ./src/app/playbook/workflow.editor.component.ts ***!
  \*******************************************************/
/*! exports provided: WorkflowEditorComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WorkflowEditorComponent", function() { return WorkflowEditorComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var ngx_toastr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ngx-toastr */ "./node_modules/ngx-toastr/fesm5/ngx-toastr.js");
/* harmony import */ var _swimlane_ngx_datatable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @swimlane/ngx-datatable */ "./node_modules/@swimlane/ngx-datatable/release/index.js");
/* harmony import */ var _swimlane_ngx_datatable__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_swimlane_ngx_datatable__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var angular2_uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! angular2-uuid */ "./node_modules/angular2-uuid/index.js");
/* harmony import */ var angular2_uuid__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(angular2_uuid__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_Rx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/Rx */ "./node_modules/rxjs-compat/_esm5/Rx.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var cytoscape__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! cytoscape */ "./node_modules/cytoscape/dist/cytoscape.cjs.js");
/* harmony import */ var cytoscape__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(cytoscape__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var cytoscape_clipboard__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! cytoscape-clipboard */ "./node_modules/cytoscape-clipboard/cytoscape-clipboard.js");
/* harmony import */ var cytoscape_clipboard__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(cytoscape_clipboard__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var cytoscape_edgehandles__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! cytoscape-edgehandles */ "./node_modules/cytoscape-edgehandles/cytoscape-edgehandles.js");
/* harmony import */ var cytoscape_edgehandles__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(cytoscape_edgehandles__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var cytoscape_grid_guide__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! cytoscape-grid-guide */ "./node_modules/cytoscape-grid-guide/src/index.js");
/* harmony import */ var cytoscape_grid_guide__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(cytoscape_grid_guide__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var cytoscape_panzoom__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! cytoscape-panzoom */ "./node_modules/cytoscape-panzoom/cytoscape-panzoom.js");
/* harmony import */ var cytoscape_panzoom__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(cytoscape_panzoom__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var cytoscape_undo_redo__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! cytoscape-undo-redo */ "./node_modules/cytoscape-undo-redo/cytoscape-undo-redo.js");
/* harmony import */ var cytoscape_undo_redo__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(cytoscape_undo_redo__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _playbook_service__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./playbook.service */ "./src/app/playbook/playbook.service.ts");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../auth/auth.service */ "./src/app/auth/auth.service.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
/* harmony import */ var _globals_globals_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../globals/globals.service */ "./src/app/globals/globals.service.ts");
/* harmony import */ var _settings_settings_service__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../settings/settings.service */ "./src/app/settings/settings.service.ts");
/* harmony import */ var _models_api_actionApi__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../models/api/actionApi */ "./src/app/models/api/actionApi.ts");
/* harmony import */ var _models_playbook_action__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../models/playbook/action */ "./src/app/models/playbook/action.ts");
/* harmony import */ var _models_playbook_branch__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../models/playbook/branch */ "./src/app/models/playbook/branch.ts");
/* harmony import */ var _models_playbook_graphPosition__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../models/playbook/graphPosition */ "./src/app/models/playbook/graphPosition.ts");
/* harmony import */ var _models_playbook_argument__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../models/playbook/argument */ "./src/app/models/playbook/argument.ts");
/* harmony import */ var _models_execution_nodeStatus__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../models/execution/nodeStatus */ "./src/app/models/execution/nodeStatus.ts");
/* harmony import */ var _models_playbook_conditionalExpression__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../models/playbook/conditionalExpression */ "./src/app/models/playbook/conditionalExpression.ts");
/* harmony import */ var _models_execution_nodeStatusEvent__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../models/execution/nodeStatusEvent */ "./src/app/models/execution/nodeStatusEvent.ts");
/* harmony import */ var _models_execution_consoleLog__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../models/execution/consoleLog */ "./src/app/models/execution/consoleLog.ts");
/* harmony import */ var _playbook_environment_variable_modal_component__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./playbook.environment.variable.modal.component */ "./src/app/playbook/playbook.environment.variable.modal.component.ts");
/* harmony import */ var _ctrl_ngx_codemirror__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @ctrl/ngx-codemirror */ "./node_modules/@ctrl/ngx-codemirror/fesm5/ctrl-ngx-codemirror.js");
/* harmony import */ var _metadata_modal_component__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./metadata.modal.component */ "./src/app/playbook/metadata.modal.component.ts");
/* harmony import */ var _models_playbook_condition__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../models/playbook/condition */ "./src/app/models/playbook/condition.ts");
/* harmony import */ var _models_playbook_trigger__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../models/playbook/trigger */ "./src/app/models/playbook/trigger.ts");
/* harmony import */ var _models_playbook_transform__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../models/playbook/transform */ "./src/app/models/playbook/transform.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};





































var WorkflowEditorComponent = /** @class */ (function () {
    function WorkflowEditorComponent(playbookService, authService, toastrService, activeRoute, cdr, utils, modalService, router) {
        this.playbookService = playbookService;
        this.authService = authService;
        this.toastrService = toastrService;
        this.activeRoute = activeRoute;
        this.cdr = cdr;
        this.utils = utils;
        this.modalService = modalService;
        this.router = router;
        this.globals = [];
        this.relevantGlobals = [];
        this.playbooks = [];
        this.workflows = [];
        this.appApis = [];
        this.offset = Object(class_transformer__WEBPACK_IMPORTED_MODULE_6__["plainToClass"])(_models_playbook_graphPosition__WEBPACK_IMPORTED_MODULE_24__["GraphPosition"], { x: -330, y: -170 });
        this.nodeStatuses = [];
        this.consoleLog = [];
        this.waitingOnData = false;
        this.nodeStatusStartedRelativeTimes = {};
        this.nodeStatusCompletedRelativeTimes = {};
        this.actionFilter = '';
        this.actionFilterControl = new _angular_forms__WEBPACK_IMPORTED_MODULE_8__["FormControl"]();
        this.actionTypes = _models_api_actionApi__WEBPACK_IMPORTED_MODULE_21__["ActionType"];
        this.showConsole = false;
        this.tags = [];
        this.conditionalOptions = {
            tabSize: 4,
            indentUnit: 4,
            mode: 'python',
            placeholder: "# Python to set selected_node to an output action\n# For example:\n# \t\t\n# if input_1.result > input_2.result:\n#     selected_node = output_1\n# else:\n#     selected_node = output_2"
        };
        this.transformOptions = {
            tabSize: 4,
            indentUnit: 4,
            mode: 'python',
            placeholder: "# Python to transform previous nodes results using python code\n# For example:\n# \t\t\n# result = input.result.get(\"key\")"
        };
    }
    /**
     * On component initialization, we grab arrays of globals, app apis, and playbooks/workflows (id, name pairs).
     * We also initialize an EventSoruce for Action Statuses for the execution results table.
     * Also initialize cytoscape event bindings.
     */
    WorkflowEditorComponent.prototype.ngOnInit = function () {
        var _this = this;
        var cyDummy = cytoscape__WEBPACK_IMPORTED_MODULE_10__();
        if (!cyDummy.clipboard) {
            cytoscape_clipboard__WEBPACK_IMPORTED_MODULE_11__(cytoscape__WEBPACK_IMPORTED_MODULE_10__, $);
        }
        if (!cyDummy.edgehandles) {
            cytoscape__WEBPACK_IMPORTED_MODULE_10__["use"](cytoscape_edgehandles__WEBPACK_IMPORTED_MODULE_12__);
        }
        if (!cyDummy.gridGuide) {
            cytoscape__WEBPACK_IMPORTED_MODULE_10__["use"](cytoscape_grid_guide__WEBPACK_IMPORTED_MODULE_13__);
        }
        if (!cyDummy.panzoom) {
            cytoscape__WEBPACK_IMPORTED_MODULE_10__["use"](cytoscape_panzoom__WEBPACK_IMPORTED_MODULE_14__);
        }
        if (!cyDummy.undoRedo) {
            cytoscape__WEBPACK_IMPORTED_MODULE_10__["use"](cytoscape_undo_redo__WEBPACK_IMPORTED_MODULE_15__);
        }
        this.playbookService.getGlobals().then(function (globals) { return _this.globals = globals; });
        this.playbookService.getApis().then(function (appApis) { return _this.appApis = appApis.sort(function (a, b) { return a.name > b.name ? 1 : -1; }); });
        this.getPlaybooksWithWorkflows();
        this._addCytoscapeEventBindings();
        rxjs__WEBPACK_IMPORTED_MODULE_4__["Observable"].interval(30000).subscribe(function () {
            _this.recalculateRelativeTimes();
        });
        /**
         * Filter app list by application and action names
         */
        this.actionFilterControl.valueChanges.debounceTime(100).distinctUntilChanged().subscribe(function (query) {
            _this.actionFilter = query.trim();
            setTimeout(function () {
                $('.action-panel')
                    .addClass('no-transition')
                    .collapse((_this.actionFilter) ? 'show' : 'hide')
                    .removeClass('no-transition');
            }, 0);
        });
    };
    /**
     * This angular function is used primarily to recalculate column widths for execution results table.
     */
    WorkflowEditorComponent.prototype.ngAfterViewChecked = function () { };
    /**
     * Closes our SSEs on component destroy.
     */
    WorkflowEditorComponent.prototype.ngOnDestroy = function () {
        if (this.eventSource && this.eventSource.close) {
            this.eventSource.close();
        }
        if (this.consoleEventSource && this.consoleEventSource.close) {
            this.consoleEventSource.close();
        }
    };
    WorkflowEditorComponent.prototype.changed = function (data) {
        this.tags = data.value;
    };
    ///------------------------------------------------------------------------------------------------------
    /// Console functions
    ///------------------------------------------------------------------------------------------------------
    /**
     * Sets up the EventStream for receiving console logs from the server. Binds various events to the event handler.
     * Will currently return ALL stream actions and not just the ones manually executed.
     */
    WorkflowEditorComponent.prototype.getConsoleSSE = function (workflowExecutionId) {
        var _this = this;
        if (this.consoleEventSource)
            this.consoleEventSource.close();
        return this.authService.getEventSource("/api/streams/console/log?workflow_execution_id=" + workflowExecutionId)
            .then(function (eventSource) {
            _this.consoleEventSource = eventSource;
            _this.consoleEventSource.onerror = function (e) { return _this.statusEventErrorHandler(e); };
            _this.consoleEventSource.addEventListener('log', function (e) { return _this.consoleEventHandler(e); });
        });
    };
    WorkflowEditorComponent.prototype.consoleEventHandler = function (message) {
        if (this.sseErrorTimeout) {
            clearTimeout(this.sseErrorTimeout);
            delete this.sseErrorTimeout;
        }
        console.log('c', message);
        var consoleEvent = Object(class_transformer__WEBPACK_IMPORTED_MODULE_6__["plainToClass"])(_models_execution_consoleLog__WEBPACK_IMPORTED_MODULE_29__["ConsoleLog"], JSON.parse(message.data));
        var newConsoleLog = consoleEvent.toNewConsoleLog();
        // Induce change detection by slicing array
        this.consoleLog.push(newConsoleLog);
        this.consoleLog = this.consoleLog.slice();
    };
    Object.defineProperty(WorkflowEditorComponent.prototype, "consoleContent", {
        get: function () {
            var content = "******************************* Console Output *******************************\n";
            this.consoleLog.forEach(function (log) {
                content += log.message;
            });
            return content;
        },
        enumerable: true,
        configurable: true
    });
    ///------------------------------------------------------------------------------------------------------
    /// Playbook CRUD etc functions
    ///------------------------------------------------------------------------------------------------------
    /**
     * Sets up the EventStream for receiving stream actions from the server. Binds various events to the event handler.
     * Will currently return ALL stream actions and not just the ones manually executed.
     */
    WorkflowEditorComponent.prototype.getNodeStatusSSE = function (workflowExecutionId) {
        var _this = this;
        if (this.eventSource)
            this.eventSource.close();
        return this.authService.getEventSource("/api/streams/workflowqueue/actions?workflow_execution_id=" + workflowExecutionId)
            .then(function (eventSource) {
            _this.eventSource = eventSource;
            _this.eventSource.onerror = function (e) { return _this.statusEventErrorHandler(e); };
            Object.values(_models_execution_nodeStatus__WEBPACK_IMPORTED_MODULE_26__["NodeStatuses"])
                .forEach(function (status) { return _this.eventSource.addEventListener(status, function (e) { return _this.nodeStatusEventHandler(e); }); });
        });
    };
    /**
     * For an incoming action, will try to find the matching action in the graph (if applicable).
     * Will style nodes based on the action status (executing/success/failure).
     * Will update the information in the action statuses table as well, adding new rows or updating existing ones.
     */
    WorkflowEditorComponent.prototype.nodeStatusEventHandler = function (message) {
        if (this.sseErrorTimeout) {
            clearTimeout(this.sseErrorTimeout);
            delete this.sseErrorTimeout;
        }
        var nodeStatusEvent = Object(class_transformer__WEBPACK_IMPORTED_MODULE_6__["plainToClass"])(_models_execution_nodeStatusEvent__WEBPACK_IMPORTED_MODULE_28__["NodeStatusEvent"], JSON.parse(message.data));
        console.log('action', nodeStatusEvent);
        // If we have a graph loaded, find the matching node for this event and style it appropriately if possible.
        if (this.cy) {
            var matchingNode = this.cy.elements("node[_id=\"" + nodeStatusEvent.node_id + "\"]");
            var nodeType = matchingNode.data('type');
            var incomingEdges_1 = matchingNode.incomers('edge');
            var outgoingEdges_1 = matchingNode.outgoers('edge');
            if (matchingNode) {
                switch (nodeStatusEvent.status) {
                    case _models_execution_nodeStatus__WEBPACK_IMPORTED_MODULE_26__["NodeStatuses"].EXECUTING:
                        matchingNode.removeClass('success-highlight');
                        matchingNode.removeClass('failure-highlight');
                        matchingNode.addClass('executing-highlight');
                        matchingNode.removeClass('awaiting-data-highlight');
                        incomingEdges_1.addClass(['success-highlight', 'transitioning']);
                        setTimeout(function () { return incomingEdges_1.removeClass('transitioning'); }, 500);
                        break;
                    case _models_execution_nodeStatus__WEBPACK_IMPORTED_MODULE_26__["NodeStatuses"].SUCCESS:
                        matchingNode.addClass('success-highlight');
                        matchingNode.removeClass('failure-highlight');
                        matchingNode.removeClass('executing-highlight');
                        matchingNode.removeClass('awaiting-data-highlight');
                        //incomingEdges.addClass('success-highlight');
                        //incomingEdges.removeClass('executing-highlight');
                        if (nodeType != _models_api_actionApi__WEBPACK_IMPORTED_MODULE_21__["ActionType"].CONDITION) {
                            outgoingEdges_1.addClass(['success-highlight', 'transitioning']);
                            setTimeout(function () { return outgoingEdges_1.removeClass('transitioning'); }, 500);
                        }
                        break;
                    case _models_execution_nodeStatus__WEBPACK_IMPORTED_MODULE_26__["NodeStatuses"].FAILURE:
                        matchingNode.removeClass('success-highlight');
                        matchingNode.addClass('failure-highlight');
                        matchingNode.removeClass('executing-highlight');
                        matchingNode.removeClass('awaiting-data-highlight');
                        break;
                    case _models_execution_nodeStatus__WEBPACK_IMPORTED_MODULE_26__["NodeStatuses"].AWAITING_DATA:
                        matchingNode.removeClass('success-highlight');
                        matchingNode.removeClass('failure-highlight');
                        matchingNode.removeClass('executing-highlight');
                        matchingNode.addClass('awaiting-data-highlight');
                    default:
                        break;
                }
            }
        }
        // Additionally, add or update the actionstatus in our datatable.
        var matchingNodeStatus = this.nodeStatuses
            .find(function (as) { return as.execution_id === nodeStatusEvent.execution_id && as.node_id == nodeStatusEvent.node_id; });
        if (matchingNodeStatus) {
            matchingNodeStatus.status = nodeStatusEvent.status;
            switch (message.type) {
                case _models_execution_nodeStatus__WEBPACK_IMPORTED_MODULE_26__["NodeStatuses"].EXECUTING:
                    // shouldn't happen
                    matchingNodeStatus.started_at = nodeStatusEvent.started_at;
                    break;
                case _models_execution_nodeStatus__WEBPACK_IMPORTED_MODULE_26__["NodeStatuses"].SUCCESS:
                case _models_execution_nodeStatus__WEBPACK_IMPORTED_MODULE_26__["NodeStatuses"].FAILURE:
                    matchingNodeStatus.completed_at = nodeStatusEvent.completed_at;
                    matchingNodeStatus.result = nodeStatusEvent.result;
                    break;
                case _models_execution_nodeStatus__WEBPACK_IMPORTED_MODULE_26__["NodeStatuses"].AWAITING_DATA:
                    // don't think anything needs to happen here
                    break;
                default:
                    this.toastrService.warning("Unknown Action Status SSE Type: " + message.type + ".");
                    break;
            }
            this.recalculateRelativeTimes(matchingNodeStatus);
            this.calculateLocalizedTimes(matchingNodeStatus);
        }
        else {
            var newNodeStatus = nodeStatusEvent.toNewNodeStatus();
            this.calculateLocalizedTimes(newNodeStatus);
            this.nodeStatuses.push(newNodeStatus);
        }
        // Induce change detection by slicing array
        this.nodeStatuses = this.nodeStatuses.slice();
    };
    WorkflowEditorComponent.prototype.statusEventErrorHandler = function (e) {
        var _this = this;
        if (this.sseErrorTimeout)
            return;
        this.sseErrorTimeout = setTimeout(function () { return __awaiter(_this, void 0, void 0, function () {
            var e_1, options;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 2, , 3]);
                        return [4 /*yield*/, this.playbookService.getApis()];
                    case 1:
                        _a.sent();
                        delete this.sseErrorTimeout;
                        return [3 /*break*/, 3];
                    case 2:
                        e_1 = _a.sent();
                        if (this.eventSource && this.eventSource.close)
                            this.eventSource.close();
                        if (this.consoleEventSource && this.consoleEventSource.close)
                            this.consoleEventSource.close();
                        options = { backdrop: undefined, closeButton: false, buttons: { ok: { label: 'Reload Page' } } };
                        this.utils
                            .alert('The server stopped responding. Reload the page to try again.', options)
                            .then(function () { return location.reload(true); });
                        return [3 /*break*/, 3];
                    case 3: return [2 /*return*/];
                }
            });
        }); }, 5 * 1000);
    };
    Object.defineProperty(WorkflowEditorComponent.prototype, "selectedActionResults", {
        get: function () {
            var _this = this;
            if (this.selectedAction) {
                var nodeStatus = this.nodeStatuses.find(function (n) { return n.node_id == _this.selectedAction.id; });
                if (nodeStatus && nodeStatus.status == _models_execution_nodeStatus__WEBPACK_IMPORTED_MODULE_26__["NodeStatuses"].SUCCESS)
                    return nodeStatus.result;
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Executes the loaded workflow as it exists on the server. Will not currently execute the workflow as it stands.
     */
    WorkflowEditorComponent.prototype.executeWorkflow = function () {
        var _this = this;
        if (!this.loadedWorkflow) {
            return;
        }
        this.clearExecutionHighlighting();
        var executionId = angular2_uuid__WEBPACK_IMPORTED_MODULE_3__["UUID"].UUID();
        Promise.all([
            this.getNodeStatusSSE(executionId),
            this.getConsoleSSE(executionId)
        ]).then(function () {
            _this.playbookService.addWorkflowToQueue(_this.loadedWorkflow.id, executionId)
                .then(function (workflowStatus) {
                _this.toastrService.success("Starting <b>" + _this.loadedWorkflow.name + "</b>");
            })
                .catch(function (e) { return _this.toastrService.error("Error starting execution of " + _this.loadedWorkflow.name + ": " + e.message); });
        });
    };
    /**
     * Loads a workflow from a given playbook / workflow name pair and calls function to set up graph.
     * @param playbook Playbook to load
     * @param workflow Workflow to load
     */
    WorkflowEditorComponent.prototype.loadWorkflow = function (workflow) {
        var _this = this;
        this.closeWorkflow();
        if (workflow.id) {
            this.playbookService.loadWorkflow(workflow.id)
                .then(function (loadedWorkflow) {
                _this.loadedWorkflow = loadedWorkflow;
                _this.setupGraph();
            })
                .catch(function (e) { return _this.toastrService.error("Error loading workflow \"" + workflow.name + "\": " + e.message); });
        }
        else {
            this.loadedWorkflow = workflow;
            this.setupGraph();
        }
    };
    WorkflowEditorComponent.prototype.returnToWorkflows = function () {
        var _this = this;
        this.utils.confirm('Are you sure you? Any unsaved changes will be lost!').then(function () {
            _this.router.navigateByUrl("/workflows");
        });
        return false;
    };
    WorkflowEditorComponent.prototype.routeToWorkflow = function (workflow) {
        this.router.navigateByUrl("/workflows/" + workflow.id);
    };
    WorkflowEditorComponent.prototype.setupGraph = function (options) {
        var _this = this;
        if (options === void 0) { options = {}; }
        // Convert our selection arrays to a string
        if (!this.loadedWorkflow.actions) {
            this.loadedWorkflow.actions = [];
        }
        // Refresh the console log so that it displays correctly after being hidden
        setTimeout(function () {
            if (_this.consoleArea && _this.consoleArea.codeMirror)
                _this.consoleArea.codeMirror.refresh();
        });
        var defaults = {
            container: document.getElementById('cy'),
            boxSelectionEnabled: false,
            autounselectify: false,
            wheelSensitivity: 0.1,
            layout: { name: 'preset' },
            style: [
                {
                    selector: 'node',
                    css: {
                        'content': 'data(label)',
                        'text-valign': 'center',
                        'text-halign': 'center',
                        'shape': 'roundrectangle',
                        'background-color': '#bbb',
                        'selection-box-color': 'red',
                        'font-family': 'Segoe UI, Tahoma, Geneva, Verdana, sans-serif, sans-serif',
                        'font-weight': 'lighter',
                        'font-size': '15px',
                        'width': 'label',
                        'height': 'label',
                        'padding': '10px'
                    },
                },
                {
                    selector: "node[type=\"" + _models_api_actionApi__WEBPACK_IMPORTED_MODULE_21__["ActionType"].ACTION + "\"]",
                    css: {
                        'shape': 'roundrectangle',
                        'padding': '15px'
                    },
                },
                {
                    selector: "node[type=\"" + _models_api_actionApi__WEBPACK_IMPORTED_MODULE_21__["ActionType"].CONDITION + "\"]",
                    css: {
                        'shape': 'diamond',
                        'padding': '25px'
                    },
                },
                {
                    selector: "node[type=\"" + _models_api_actionApi__WEBPACK_IMPORTED_MODULE_21__["ActionType"].TRIGGER + "\"]",
                    css: {
                        'shape': 'polygon',
                        'shape-polygon-points': '-1, -1, 1, -1, 0, 1',
                        'text-margin-y': '-15px',
                        'padding': '25px'
                    },
                },
                {
                    selector: "node[type=\"" + _models_api_actionApi__WEBPACK_IMPORTED_MODULE_21__["ActionType"].TRANSFORM + "\"]",
                    css: {
                        'shape': 'ellipse',
                        'padding': '20px'
                    },
                },
                {
                    selector: 'node[type="eventAction"]',
                    css: {
                        'shape': 'star',
                        'background-color': '#edbd21',
                    },
                },
                {
                    selector: 'node[?isStartNode]',
                    css: {
                        'border-width': '3px',
                        'border-color': '#991818',
                    },
                },
                {
                    selector: "node[?isParallelized]",
                    css: {
                        'ghost': 'yes',
                        'ghost-offset-x': '7px',
                        'ghost-offset-y': '-7px',
                        'ghost-opacity': '.7'
                    },
                },
                {
                    selector: 'node[?hasErrors]',
                    css: {
                        'color': '#991818',
                        'font-style': 'italic',
                    },
                },
                {
                    selector: 'node:selected',
                    css: {
                        'background-color': '#77b0d0',
                    },
                },
                {
                    selector: '.success-highlight',
                    css: {
                        'background-color': '#399645',
                        'transition-property': 'background-color',
                        'transition-duration': '0.5s',
                    },
                },
                {
                    selector: '.failure-highlight',
                    css: {
                        'background-color': '#8e3530',
                        'transition-property': 'background-color',
                        'transition-duration': '0.5s',
                    },
                },
                {
                    selector: '.executing-highlight',
                    css: {
                        'background-color': '#ffef47',
                        'transition-property': 'background-color',
                        'transition-duration': '0.25s',
                    },
                },
                {
                    selector: '.awaiting-data-highlight',
                    css: {
                        'background-color': '#f4ad42',
                        'transition-property': 'background-color',
                        'transition-duration': '0.5s',
                    },
                },
                {
                    selector: '$node > node',
                    css: {
                        'padding-top': '10px',
                        'padding-left': '10px',
                        'padding-bottom': '10px',
                        'padding-right': '10px',
                        'text-valign': 'top',
                        'text-halign': 'center',
                    },
                },
                {
                    selector: 'edge',
                    css: {
                        'target-arrow-shape': 'triangle',
                        'curve-style': 'bezier',
                    },
                },
                {
                    selector: 'edge.transitioning',
                    css: {
                        'transition-property': 'line-color, width',
                        'transition-duration': '0.5s',
                    },
                },
                {
                    selector: 'edge.executing-highlight',
                    css: {
                        'width': '5px',
                        'target-arrow-color': '#ffef47',
                        'line-color': '#ffef47',
                    },
                },
                {
                    selector: 'edge.success-highlight',
                    css: {
                        'width': '5px',
                        'target-arrow-color': '#399645',
                        'line-color': '#399645',
                    },
                },
                {
                    selector: 'edge[?hasErrors]',
                    css: {
                        'target-arrow-color': '#991818',
                        'line-color': '#991818',
                        'line-style': 'dashed'
                    },
                },
                {
                    selector: '.eh-handle',
                    style: {
                        'background-color': '#337ab7',
                        'width': '1',
                        'height': '1',
                        'shape': 'ellipse',
                        'overlay-opacity': '0',
                    }
                },
                {
                    selector: '.eh-source',
                    style: {
                        'border-width': '3',
                        'border-color': '#337ab7'
                    }
                },
                {
                    selector: '.eh-target',
                    style: {
                        'border-width': '3',
                        'border-color': '#337ab7'
                    }
                },
                {
                    selector: '.eh-preview, .eh-ghost-edge',
                    style: {
                        'background-color': '#337ab7',
                        'line-color': '#337ab7',
                        'target-arrow-color': '#337ab7',
                        'source-arrow-color': '#337ab7'
                    }
                }
            ],
        };
        // Create the Cytoscape graph
        cytoscape__WEBPACK_IMPORTED_MODULE_10__["warnings"](false);
        // Create new elements before recreating the new graph
        var elements = this.getGraphElements();
        this.cy = cytoscape__WEBPACK_IMPORTED_MODULE_10__(Object.assign({}, defaults, options));
        // Enable various Cytoscape extensions
        // Undo/Redo extension
        this.ur = this.cy.undoRedo({});
        this.ur.action('add-walkoff-node', function (args) {
            args.addedNode = _this.insertNode(args);
            return args;
        }, function (args) {
            _this.cy.elements("[_id=\"" + args.addedNode.data._id + "\"]").remove();
            return args;
        });
        // Panzoom extension
        this.cy.panzoom({});
        // Extension for drawing edges
        this.edgeHandler = this.cy.edgehandles({
            handleNodes: function (el) { return el.isNode() && !el.hasClass('just-created'); },
            preview: false,
            toggleOffOnLeave: true,
            complete: function (sourceNode, targetNodes, addedEntities) {
                if (!_this.loadedWorkflow.branches) {
                    _this.loadedWorkflow.branches = [];
                }
                var _loop_1 = function (i) {
                    var tempId = angular2_uuid__WEBPACK_IMPORTED_MODULE_3__["UUID"].UUID();
                    var sourceId = sourceNode.data('_id');
                    var destinationId = targetNodes[i].data('_id');
                    addedEntities[i].data({
                        _id: tempId,
                        // We set temp because this actually triggers onEdgeRemove since we manually remove and re-add the edge later
                        // There is logic in onEdgeRemove to bypass that logic if temp is true
                        temp: true,
                    });
                    //If we attempt to draw an edge that already exists, please remove it and take no further action
                    if (_this.loadedWorkflow.branches.find(function (b) { return b.source_id === sourceId && b.destination_id === destinationId; })) {
                        _this.cy.remove(addedEntities);
                        return { value: void 0 };
                    }
                    var sourceAction = _this.loadedWorkflow.nodes.find(function (a) { return a.id === sourceId; });
                    var sourceActionApi = _this._getAction(sourceAction.app_name, sourceAction.app_version, sourceAction.action_name);
                    // Get our default status either from the default return if specified, or the first return status
                    var defaultStatus_1 = '';
                    if (sourceActionApi.default_return) {
                        defaultStatus_1 = sourceActionApi.default_return;
                    }
                    else if (sourceActionApi.returns && sourceActionApi.returns.length) {
                        defaultStatus_1 = sourceActionApi.returns[0].status;
                    }
                    var newBranch = new _models_playbook_branch__WEBPACK_IMPORTED_MODULE_23__["Branch"]();
                    newBranch.id = tempId;
                    newBranch.source_id = sourceId;
                    newBranch.destination_id = destinationId;
                    newBranch.status = defaultStatus_1;
                    newBranch.priority = 1;
                    // Add our branch to the actual loadedWorkflow model
                    _this.loadedWorkflow.branches.push(newBranch);
                    targetNodes[i].addClass('just-created');
                };
                // The edge handles extension is not integrated into the undo/redo extension.
                // So in order that adding edges is contained in the undo stack,
                // remove the edge just added and add back in again using the undo/redo
                // extension. Also add info to edge which is displayed when user clicks on it.
                for (var i = 0; i < targetNodes.length; i++) {
                    var state_1 = _loop_1(i);
                    if (typeof state_1 === "object")
                        return state_1.value;
                }
                _this.cy.remove(addedEntities);
                // Get rid of our temp flag
                addedEntities.forEach(function (ae) { return ae.data('temp', false); });
                // Re-add with the undo-redo extension.
                _this.ur.do('add', addedEntities); // Added back in using undo/redo extension
            },
        });
        // Extension for copy and paste
        this.cy.clipboard();
        //Extension for grid and guidelines
        this.cy.gridGuide({
            snapToGridDuringDrag: true,
            zoomDash: true,
            panGrid: true,
            centerToEdgeAlignment: true,
            distributionGuidelines: true,
            geometricGuideline: true,
            // Guidelines
            guidelinesStackOrder: 4,
            guidelinesTolerance: 2.00,
            guidelinesStyle: {
                strokeStyle: '#8b7d6b',
                geometricGuidelineRange: 400,
                range: 100,
                minDistRange: 10,
                distGuidelineOffset: 10,
                horizontalDistColor: '#ff0000',
                verticalDistColor: '#00ff00',
                initPosAlignmentColor: '#0000ff',
                lineDash: [0, 0],
                horizontalDistLine: [0, 0],
                verticalDistLine: [0, 0],
                initPosAlignmentLine: [0, 0],
            },
        });
        this.cy.add(elements);
        if (!options.zoom || !options.pan)
            setImmediate(function () { return _this.cy.fit(null, 50); });
        this.setStartNode(this.loadedWorkflow.start);
        // Note: these bindings need to use arrow notation
        // to actually be able to use 'this' to refer to the PlaybookComponent.
        // Configure handler when user clicks on node or edge
        this.cy.on('select', 'node', function (e) { return _this.onNodeSelect(e); });
        this.cy.on('select', 'edge', function (e) { return _this.onEdgeSelect(e); });
        this.cy.on('unselect', function (e) { return _this.onUnselect(e); });
        // Configure handlers when nodes/edges are added or removed
        this.cy.on('add', 'node', function (e) { return _this.onNodeAdded(e); });
        this.cy.on('free', 'node', function (e) { return _this.onNodeMoved(e); });
        this.cy.on('remove', 'node', function (e) { return _this.onNodeRemoved(e); });
        this.cy.on('remove', 'edge', function (e) { return _this.onEdgeRemove(e); });
        // Allow right clicking to create an edge
        this.cy.on('mouseover mouseout', 'node', function (e) { return e.target.removeClass('just-created'); });
        this.cy.on('cxttapstart', 'node', function (e) { return _this.edgeHandler.start(e.target); });
        this.cy.on('cxttapend', 'node', function (e) { return _this.edgeHandler.stop(); });
        this.cy.on('cxtdragover', 'node', function (e) { return _this.edgeHandler.preview(e.target); });
        this.cy.on('cxtdragout', 'node', function (e) {
            if (_this.edgeHandler.options.snap && e.target.same(_this.edgeHandler.targetNode)) {
                // then keep the preview
            }
            else {
                _this.edgeHandler.unpreview(e.target);
            }
        });
        // this.cyJsonData = JSON.stringify(this.loadedWorkflow, null, 2);
    };
    // Load the data into the graph
    WorkflowEditorComponent.prototype.getGraphElements = function () {
        var _this = this;
        // If a node does not have a label field, set it to
        // the action. The label is what is displayed in the graph.
        var edges = this.loadedWorkflow.branches.map(function (branch) {
            var edge = { group: 'edges' };
            edge.data = {
                id: branch.id,
                _id: branch.id,
                source: branch.source_id,
                target: branch.destination_id,
                hasErrors: branch.has_errors
            };
            return edge;
        });
        var nodes = this.loadedWorkflow.nodes.map(function (action) {
            var node = { group: 'nodes', position: _this.utils.cloneDeep(action.position) };
            node.data = {
                id: action.id,
                _id: action.id,
                label: action.name,
                isStartNode: action.id === _this.loadedWorkflow.start,
                isParallelized: action instanceof _models_playbook_action__WEBPACK_IMPORTED_MODULE_22__["Action"] && action.parallelized,
                hasErrors: action.has_errors,
                type: action.action_type
            };
            return node;
        });
        var elements = [].concat(nodes, edges);
        var oldElements = (this.cy) ? this.cy.elements().jsons() : [];
        oldElements.filter(function (old) { return old.classes; }).forEach(function (old) {
            elements
                .filter(function (el) { return el.data.id == old.data.id; })
                .forEach(function (el) { return el.classes = old.classes.replace('transitioning', ''); });
        });
        return elements;
    };
    /**
     * Closes the active workflow and clears all relevant variables.
     */
    WorkflowEditorComponent.prototype.closeWorkflow = function () {
        // this.loadedPlaybook = null;
        this.loadedWorkflow = null;
        this.selectedBranchParams = null;
        this.selectedAction = null;
    };
    /**
     * Triggers the save action based on the editor option selected.
     */
    WorkflowEditorComponent.prototype.save = function () {
        this.saveWorkflow(this.cy.elements().jsons());
    };
    /**
     * Saves the workflow loaded in the editor.
     * Updates the graph positions from the cytoscape model and sanitizes data beforehand.
     * @param cyData Nodes and edges from the cytoscape graph. Only really used to grab the new positions of nodes.
     */
    WorkflowEditorComponent.prototype.saveWorkflow = function (cyData) {
        var _this = this;
        // Unselect anything selected first (will trigger onUnselect)
        this.cy.$(':selected').unselect();
        // Clone the loadedWorkflow first, so we don't change the parameters
        // in the editor when converting it to the format the backend expects.
        var workflowToSave = Object(class_transformer__WEBPACK_IMPORTED_MODULE_6__["classToClass"])(this.loadedWorkflow, { ignoreDecorators: true });
        if (!workflowToSave.start) {
            this.toastrService.warning('Workflow cannot be saved without a starting action.');
            return;
        }
        // Go through our workflow and update some parameters
        workflowToSave.nodes.forEach(function (action) {
            // Set action name if empty
            if (!action.name)
                action.name = workflowToSave.getNextActionName(action.action_name);
            // Set the new cytoscape positions on our loadedworkflow
            action.position = cyData.find(function (cyAction) { return cyAction.data._id === action.id; }).position;
            // Properly sanitize arguments through the tree
            if (action.arguments)
                _this._sanitizeArgumentsForSave(action, workflowToSave);
        });
        workflowToSave.branches.forEach(function (branch) {
            _this._sanitizeExpressionAndChildren(branch.condition);
        });
        if (this.loadedWorkflow.id) {
            this.playbookService.saveWorkflow(workflowToSave).then(function (savedWorkflow) {
                _this.loadedWorkflow = savedWorkflow;
                _this.setupGraph();
                _this.toastrService.success("Saved <b>" + savedWorkflow.name + "</b>");
            }).catch(function (e) { return _this.toastrService.error("Error saving workflow " + workflowToSave.name + ": " + e.message); });
        }
        else {
            this.playbookService.newWorkflow(workflowToSave).then(function (savedWorkflow) {
                //this.loadedWorkflow = savedWorkflow;
                //this.setupGraph()
                _this.toastrService.success("Saved <b>" + savedWorkflow.name + "</b>");
                _this.router.navigateByUrl("/workflows/" + savedWorkflow.id);
            }).catch(function (e) { return _this.toastrService.error("Error saving workflow " + workflowToSave.name + ": " + e.message); });
        }
        this.clearExecutionResults();
    };
    /**
     * Gets a list of all the loaded playbooks along with their workflows.
     */
    WorkflowEditorComponent.prototype.getPlaybooksWithWorkflows = function () {
        var _this = this;
        this.playbookService.getWorkflows()
            .then(function (workflows) {
            _this.workflows = workflows;
            _this.activeRoute.params.subscribe(function (params) {
                if (params.workflowId) {
                    _this.playbookService.loadWorkflow(params.workflowId)
                        .then(function (workflow) { return _this.loadWorkflow(workflow); })
                        .catch(function (e) { return _this.router.navigateByUrl("/workflows"); });
                }
                else {
                    var workflowToCreate = _this.playbookService.workflowToCreate;
                    if (!workflowToCreate) {
                        return _this.router.navigateByUrl("/workflows");
                    }
                    _this.loadWorkflow(workflowToCreate);
                }
            });
        });
    };
    WorkflowEditorComponent.prototype._sanitizeExpressionAndChildren = function (expression) {
        var _this = this;
        if (!expression) {
            return;
        }
        if (expression.conditions && expression.conditions.length) {
            expression.conditions.forEach(function (condition) {
                //this._sanitizeArgumentsForSave(condition.arguments);
                // condition.transforms.forEach(transform => {
                // 	this._sanitizeArgumentsForSave(transform.arguments);
                // });
            });
        }
        if (expression.child_expressions && expression.child_expressions.length) {
            expression.child_expressions.forEach(function (childExpr) {
                childExpr.conditions.forEach(function (condition) {
                    //this._sanitizeArgumentsForSave(condition.arguments);
                    // condition.transforms.forEach(transform => {
                    // 	this._sanitizeArgumentsForSave(transform.arguments);
                    // });
                });
                _this._sanitizeExpressionAndChildren(childExpr);
            });
        }
    };
    /**
     * Sanitizes an argument so we don't have bad data on save, such as a value when reference is specified.
     * @param argument The argument to sanitize
     */
    WorkflowEditorComponent.prototype._sanitizeArgumentsForSave = function (action, workflow) {
        var args = action.arguments;
        // Filter out any arguments that are blank, essentially
        var idsToRemove = [];
        for (var _i = 0, args_1 = args; _i < args_1.length; _i++) {
            var argument = args_1[_i];
            // First trim any string inputs for sanitation and so we can check against ''
            if (typeof (argument.value) === 'string') {
                argument.value = argument.value.trim();
            }
            // If value and reference are blank, add this argument's ID in the array to the list
            // Add them in reverse so we don't have problems with the IDs sliding around on the splice
            if (!argument.value && argument.value !== false) {
                idsToRemove.unshift(args.indexOf(argument));
            }
            // Make sure reference is valid for this action
            if (argument.variant == _models_playbook_argument__WEBPACK_IMPORTED_MODULE_25__["Variant"].ACTION_RESULT) {
                var validReferences = workflow.getPreviousActions(action).map(function (a) { return a.id; });
                if (!validReferences.includes(argument.value)) {
                    idsToRemove.unshift(args.indexOf(argument));
                }
            }
        }
        // Actually splice out all the args
        for (var _a = 0, idsToRemove_1 = idsToRemove; _a < idsToRemove_1.length; _a++) {
            var id = idsToRemove_1[_a];
            args.splice(id, 1);
        }
    };
    /**
     * Specifies a new conditional expression for a given action.
     * @param action Action to specify the trigger for
     */
    // specifyTrigger(action: Action): void {
    // 	if (action.trigger) { return; }
    // 	action.trigger = new ConditionalExpression();
    // }
    /**
     * Deletes the conditional expression for a given action.
     * @param action Action to remove the trigger for
     */
    // removeTrigger(action: Action): void {
    // 	delete action.trigger;
    // }
    /**
     * Specifies a new conditional expression for a given action.
     * @param branch Branch to specify the trigger for
     */
    WorkflowEditorComponent.prototype.specifyCondition = function (branch) {
        if (branch.condition) {
            return;
        }
        branch.condition = new _models_playbook_conditionalExpression__WEBPACK_IMPORTED_MODULE_27__["ConditionalExpression"]();
    };
    /**
     * Specifies a new conditional expression for a given branch.
     * @param branch Branch to specify the trigger for
     */
    WorkflowEditorComponent.prototype.removeCondition = function (branch) {
        delete branch.condition;
    };
    ///------------------------------------------------------------------------------------------------------
    /// Cytoscape functions
    ///------------------------------------------------------------------------------------------------------
    /**
     * This function displays a form next to the graph for editing a node when clicked upon
     * @param e JS Event fired
     */
    WorkflowEditorComponent.prototype.onNodeSelect = function (e) {
        var _this = this;
        this.selectedBranchParams = null;
        var data = e.target.data();
        // Unselect anything else we might have selected (via ctrl+click basically)
        this.cy.elements("[_id!=\"" + data._id + "\"]").unselect();
        var action = this.loadedWorkflow.nodes.find(function (a) { return a.id === data._id; });
        if (!action) {
            return;
        }
        var actionApi = this._getAction(action.app_name, action.app_version, action.action_name);
        var queryPromises = [];
        if (!this.users &&
            (actionApi.parameters.findIndex(function (p) { return p.schema.type === 'user'; }) > -1 ||
                actionApi.parameters.findIndex(function (p) { return p.schema.items && p.schema.items.type === 'user'; }) > -1)) {
            this.waitingOnData = true;
            queryPromises.push(this.playbookService.getUsers().then(function (users) { return _this.users = users; }));
        }
        if (!this.roles &&
            (actionApi.parameters.findIndex(function (p) { return p.schema.type === 'role'; }) > -1 ||
                actionApi.parameters.findIndex(function (p) { return p.schema.items && p.schema.items.type === 'role'; }) > -1)) {
            this.waitingOnData = true;
            queryPromises.push(this.playbookService.getRoles().then(function (roles) { return _this.roles = roles; }));
        }
        if (queryPromises.length) {
            Promise.all(queryPromises)
                .then(function () {
                _this.waitingOnData = false;
            })
                .catch(function (error) {
                _this.waitingOnData = false;
                _this.toastrService.error("Error grabbing users or roles: " + error.message);
            });
        }
        this.selectedAction = action;
        this.selectedActionApi = actionApi;
        // TODO: maybe scope out relevant globals by action, but for now we're just only scoping out by app
        this.relevantGlobals = this.globals; //.filter(d => d.app_name === this.selectedAction.app_name);
    };
    /**
     * This function displays a form next to the graph for editing an edge when clicked upon.
     * @param e JS Event fired
     */
    WorkflowEditorComponent.prototype.onEdgeSelect = function (e) {
        this.selectedAction = null;
        this.selectedBranchParams = null;
        var id = e.target.data('_id');
        // Unselect anything else we might have selected (via ctrl+click basically)
        this.cy.elements("[_id!=\"" + id + "\"]").unselect();
        var branch = this.loadedWorkflow.branches.find(function (b) { return b.id === id; });
        var sourceAction = this.loadedWorkflow.nodes.find(function (a) { return a.id === branch.source_id; });
        this.selectedBranchParams = {
            branch: branch,
            returnTypes: this._getAction(sourceAction.app_name, sourceAction.app_version, sourceAction.action_name).returns,
            appName: sourceAction.app_name,
            actionName: sourceAction.action_name,
        };
    };
    /**
     * This function unselects any selected nodes/edges and updates the label if necessary.
     * @param e JS Event fired
     */
    WorkflowEditorComponent.prototype.onUnselect = function (event) {
        // Update our labels if possible
        if (this.selectedAction) {
            this.cy.elements("node[_id=\"" + this.selectedAction.id + "\"]").data('label', this.selectedAction.name);
        }
        if (!this.cy.$(':selected').length) {
            this.selectedAction = null;
            this.selectedBranchParams = null;
        }
    };
    /**
     * This function checks when an edge is removed and removes branches as appropriate.
     * @param e JS Event fired
     */
    WorkflowEditorComponent.prototype.onEdgeRemove = function (event) {
        var edgeData = event.target.data();
        // Do nothing if this is a temporary edge
        // (edgehandles do not have paramters, and we mark temp edges on edgehandle completion)
        if (!edgeData || edgeData.temp) {
            return;
        }
        var sourceId = edgeData.source;
        var destinationId = edgeData.target;
        // Filter out the one that matches
        this.loadedWorkflow.branches = this.loadedWorkflow.branches
            .filter(function (b) { return !(b.source_id === sourceId && b.destination_id === destinationId); });
    };
    /**
     * This function checks when a node is added and sets start node if no other nodes exist.
     * @param e JS Event fired
     */
    WorkflowEditorComponent.prototype.onNodeAdded = function (event) {
        var node = event.target;
        // If the number of nodes in the graph is one, set the start node to it.
        if (node.isNode() && this.cy.nodes().size() === 1) {
            this.setStartNode(node.data('_id'));
        }
    };
    /**
     * This function checks when a node is added and sets start node if no other nodes exist.
     * @param e JS Event fired
     */
    WorkflowEditorComponent.prototype.onNodeMoved = function (event) {
        var node = event.target.json();
        this.loadedWorkflow.nodes.find(function (n) { return n.id == node.data.id; }).position = node.position;
    };
    /**
     * This function fires when a node is removed. If the node was the start node, it sets it to a new root node.
     * It also removes the corresponding action from the workflow.
     * @param e JS Event fired
     */
    WorkflowEditorComponent.prototype.onNodeRemoved = function (event) {
        var node = event.target;
        var data = node.data();
        // If the start node was deleted, set it to one of the roots of the graph
        if (data && node.isNode() && this.loadedWorkflow.start === data._id) {
            this.setStartNode(null);
        }
        if (this.selectedAction && this.selectedAction.id === data._id) {
            this.selectedAction = null;
        }
        // Delete the action from the workflow and delete any branches that reference this action
        this.loadedWorkflow.removeNode(data._id);
    };
    /**
     * This function fires when an action is dropped onto the graph and fires the insertNode function.
     * @param e JS Event fired
     */
    WorkflowEditorComponent.prototype.handleDropEvent = function (e) {
        if (this.cy === null) {
            return;
        }
        var appName = e.dragData.appName;
        var actionApi = e.dragData.actionApi;
        // The following coordinates is where the user dropped relative to the
        // top-left of the graph
        var dropPosition = Object(class_transformer__WEBPACK_IMPORTED_MODULE_6__["plainToClass"])(_models_playbook_graphPosition__WEBPACK_IMPORTED_MODULE_24__["GraphPosition"], {
            x: e.mouseEvent.layerX,
            y: e.mouseEvent.layerY,
        });
        this.ur.do('add-walkoff-node', {
            appName: appName,
            appVersion: actionApi.app_version,
            actionName: actionApi.name,
            location: dropPosition,
            shouldUseRenderedPosition: true
        });
    };
    /**
     * This function is fired when an action on the left-hand list is double clicked.
     * It drops a new node of that action in the center of the visible graph.
     * @param appName App name the action resides under
     * @param actionName Name of the action that was double clicked
     */
    WorkflowEditorComponent.prototype.handleDoubleClickEvent = function (actionApi) {
        if (this.cy === null) {
            return;
        }
        var extent = this.cy.extent();
        var centerGraphPosition = Object(class_transformer__WEBPACK_IMPORTED_MODULE_6__["plainToClass"])(_models_playbook_graphPosition__WEBPACK_IMPORTED_MODULE_24__["GraphPosition"], { x: this.avg(extent.x1, extent.x2), y: this.avg(extent.y1, extent.y2) });
        this.ur.do('add-walkoff-node', {
            appName: actionApi.app_name,
            appVersion: actionApi.app_version,
            actionName: actionApi.name,
            location: centerGraphPosition,
            shouldUseRenderedPosition: false
        });
    };
    /**
     * Simple average function to get the avg. of 2 numbers.
     * @param a 1st number
     * @param b 2nd number
     */
    WorkflowEditorComponent.prototype.avg = function (a, b) {
        return (a + b) / 2;
    };
    /**
     * Inserts node into the graph and adds a corresponding action to the loadedworkflow.
     * @param appName App name the action resides under
     * @param actionName Name of the action to add
     * @param location Graph Position, where to create the node
     * @param shouldUseRenderedPosition Whether or not to use rendered or "real" graph position
     */
    WorkflowEditorComponent.prototype.insertNode = function (_a) {
        var _this = this;
        var appName = _a.appName, appVersion = _a.appVersion, actionName = _a.actionName, location = _a.location, shouldUseRenderedPosition = _a.shouldUseRenderedPosition, firstTime = _a.firstTime, addedNode = _a.addedNode;
        // Grab a new ID for both the ID of the node and the ID of the action in the workflow
        var newActionUuid = (firstTime) ? angular2_uuid__WEBPACK_IMPORTED_MODULE_3__["UUID"].UUID() : addedNode.data._id;
        var args = [];
        var actionApi = this._getAction(appName, appVersion, actionName);
        // TODO: might be able to remove this entirely
        // due to the argument component auto-initializing default values
        if (actionApi && actionApi.parameters) {
            actionApi.parameters.forEach(function (parameter) {
                args.push(_this.getDefaultArgument(parameter));
            });
        }
        var actionType = this._getAction(appName, appVersion, actionName).node_type;
        var uniqueActionName = this.loadedWorkflow.getNextActionName(actionName);
        var newNode;
        switch (actionType) {
            case _models_api_actionApi__WEBPACK_IMPORTED_MODULE_21__["ActionType"].CONDITION:
                newNode = new _models_playbook_condition__WEBPACK_IMPORTED_MODULE_33__["Condition"]();
                break;
            case _models_api_actionApi__WEBPACK_IMPORTED_MODULE_21__["ActionType"].TRIGGER:
                newNode = new _models_playbook_trigger__WEBPACK_IMPORTED_MODULE_34__["Trigger"]();
                break;
            case _models_api_actionApi__WEBPACK_IMPORTED_MODULE_21__["ActionType"].TRANSFORM:
                newNode = new _models_playbook_transform__WEBPACK_IMPORTED_MODULE_35__["Transform"]();
                break;
            default:
                newNode = new _models_playbook_action__WEBPACK_IMPORTED_MODULE_22__["Action"]();
        }
        newNode.id = newActionUuid;
        newNode.name = uniqueActionName;
        newNode.app_name = appName;
        newNode.app_version = appVersion;
        newNode.action_name = actionName;
        newNode.arguments = args;
        newNode.position = location;
        this.loadedWorkflow.addNode(newNode);
        // Add the node with the new ID to the graph in the location dropped into by the mouse.
        var nodeToBeAdded = {
            group: 'nodes',
            data: {
                id: newActionUuid,
                _id: newActionUuid,
                label: uniqueActionName,
                type: actionType
            },
            renderedPosition: null,
            position: null,
        };
        if (shouldUseRenderedPosition) {
            nodeToBeAdded.renderedPosition = location;
        }
        else {
            nodeToBeAdded.position = location;
        }
        //this.ur.do('add', nodeToBeAdded);
        this.cy.add(nodeToBeAdded);
        return nodeToBeAdded;
    };
    // TODO: update this to properly "cut" actions from the loadedWorkflow.
    /**
     * Cytoscape cut method.
     */
    // cut(): void {
    // 	const selecteds = this.cy.$(':selected');
    // 	if (selecteds.length > 0) {
    // 		this.cy.clipboard().copy(selecteds);
    // 		this.ur.do('remove', selecteds);
    // 	}
    // }
    /**
     * Cytoscape copy method.
     */
    WorkflowEditorComponent.prototype.copy = function () {
        this.cy.clipboard().copy(this.cy.$(':selected'));
    };
    /**
     * Cytoscape paste method.
     */
    WorkflowEditorComponent.prototype.paste = function () {
        var _this = this;
        var newNodes = this.ur.do('paste');
        newNodes.forEach(function (n) {
            // Get a copy of the action we just copied
            var pastedAction = _this.loadedWorkflow.nodes.find(function (a) { return a.id === n.data('_id'); }).clone();
            var newActionUuid = angular2_uuid__WEBPACK_IMPORTED_MODULE_3__["UUID"].UUID();
            pastedAction.id = newActionUuid;
            pastedAction.name = _this.loadedWorkflow.getNextActionName(pastedAction.action_name);
            pastedAction.arguments.forEach(function (argument) { return delete argument.id; });
            _this.loadedWorkflow.addNode(pastedAction);
            n.data({
                id: newActionUuid,
                _id: newActionUuid,
                label: pastedAction.name,
                isStartNode: false,
            });
            n.emit('select');
        });
    };
    /**
     * Clears execution results table and execution highlighting
     */
    WorkflowEditorComponent.prototype.clearExecutionResults = function () {
        this.clearExecutionHighlighting();
        this.consoleLog = [];
        this.nodeStatuses = [];
    };
    /**
     * Clears the red/green highlighting in the cytoscape graph.
     */
    WorkflowEditorComponent.prototype.clearExecutionHighlighting = function () {
        this.cy.elements().removeClass('success-highlight failure-highlight executing-highlight transitioning');
    };
    /**
     * Sets the start action / node to be the one matching the ID specified.
     * Not specifying a ID just grabs the first root.
     * @param start DB ID of the new start node (optional)
     */
    WorkflowEditorComponent.prototype.setStartNode = function (start) {
        // If no start was given set it to one of the root nodes
        if (start) {
            this.loadedWorkflow.start = start;
        }
        else {
            var roots = this.cy.nodes().roots();
            if (roots.size() > 0) {
                this.loadedWorkflow.start = roots[0].data('_id');
            }
        }
        // Clear start node highlighting of the previous start node(s)
        this.cy.elements('node[?isStartNode]').data('isStartNode', false);
        // Apply start node highlighting to the new start node.
        this.cy.elements("node[_id=\"" + this.loadedWorkflow.start + "\"]").data('isStartNode', true);
    };
    WorkflowEditorComponent.prototype.updateParallelizedNode = function (action) {
        this.cy.elements("node[_id=\"" + action.id + "\"]").data('isParallelized', action.parallelized);
    };
    /**
     * Removes all selected nodes and edges.
     */
    WorkflowEditorComponent.prototype.removeSelectedNodes = function () {
        var selecteds = this.cy.$(':selected');
        // Unselect the elements first to remove the parameters editor if need be
        // Because deleting elements doesn't unselect them for some reason
        this.cy.elements(':selected').unselect();
        if (selecteds.length > 0) {
            this.ur.do('remove', selecteds);
        }
    };
    /**
     * Adds keyboard event bindings for cut/copy/paste/etc.
     */
    WorkflowEditorComponent.prototype._addCytoscapeEventBindings = function () {
        var _this = this;
        // Handle keyboard presses on graph
        document.addEventListener('keydown', function (e) {
            // If we aren't "focused" on a body or button tag, don't do anything
            // to prevent events from being fired while in the parameters editor
            var tagName = document.activeElement.tagName;
            if (!(tagName === 'BODY' || tagName === 'BUTTON')) {
                return;
            }
            if (_this.cy === null) {
                return;
            }
            if (e.which === 46) { // Delete
                _this.removeSelectedNodes();
            }
            else if (e.ctrlKey) {
                //TODO: re-enable undo/redo once we restructure how branches / edges are stored
                // if (e.which === 90) // 'Ctrl+Z', Undo
                //     ur.undo();
                // else if (e.which === 89) // 'Ctrl+Y', Redo
                //     ur.redo();
                if (e.which === 67) {
                    // Ctrl + C, Copy
                    _this.copy();
                }
                else if (e.which === 86) {
                    // Ctrl + V, Paste
                    _this.paste();
                }
                // else if (e.which === 88) {
                // 	// Ctrl + X, Cut
                // 	this.cut();
                // }
                // else if (e.which == 65) { // 'Ctrl+A', Select All
                //     cy.elements().select();
                //     e.preventDefault();
                // }
            }
        });
    };
    ///------------------------------------------------------------------------------------------------------
    /// Utility functions
    ///------------------------------------------------------------------------------------------------------
    // /**
    //  * Gets a list of playbook names from our list of playbooks.
    //  */
    // getPlaybooks(): string[] {
    // 	return this.playbooks.map(pb => pb.name);
    // }
    /**
     * Gets an ActionApi object by app and action name
     * @param appName App name the action resides under
     * @param actionName Name of the ActionApi to query
     */
    WorkflowEditorComponent.prototype._getAction = function (appName, appVersion, actionName) {
        //return this.appApis.find(a => a.name === appName).action_apis.find(a => a.name === actionName);
        return this.appApis.find(function (a) { return a.name === appName && a.app_version == appVersion; })
            .action_apis.find(function (a) { return a.name === actionName; });
    };
    /**
     * Gets a given argument matching an inputted parameter API.
     * Adds a new argument to the selected action with default values if the argument doesn't exist.
     * @param parameterApi Parameter API object relating to the argument to return
     */
    WorkflowEditorComponent.prototype.getOrInitializeSelectedActionArgument = function (parameterApi) {
        // Find an existing argument
        if (!this.selectedAction.arguments)
            this.selectedAction.arguments = [];
        var argument = this.selectedAction.arguments.find(function (a) { return a.name === parameterApi.name; });
        if (argument) {
            return argument;
        }
        argument = this.getDefaultArgument(parameterApi);
        this.selectedAction.arguments.push(argument);
        return argument;
    };
    /**
     * Returns an argument based upon a given parameter API and its default value.
     * @param parameterApi Parameter API used to generate the default argument
     */
    WorkflowEditorComponent.prototype.getDefaultArgument = function (parameterApi) {
        var initialValue = null;
        if (parameterApi.schema.type === 'array') {
            initialValue = [];
        }
        else if (parameterApi.schema.type === 'object') {
            initialValue = {};
        }
        else if (parameterApi.schema.type === 'boolean') {
            initialValue = false;
        }
        return Object(class_transformer__WEBPACK_IMPORTED_MODULE_6__["plainToClass"])(_models_playbook_argument__WEBPACK_IMPORTED_MODULE_25__["Argument"], {
            name: parameterApi.name,
            variant: _models_playbook_argument__WEBPACK_IMPORTED_MODULE_25__["Variant"].STATIC_VALUE,
            value: (parameterApi.schema.default) ? parameterApi.schema.default : initialValue,
        });
    };
    /**
     * Gets a list of ConditionApis from a given app name.
     * @param appName App name to query
     */
    WorkflowEditorComponent.prototype.getConditionApis = function (appName) {
        return this.appApis.find(function (a) { return a.name === appName; }).condition_apis;
    };
    /**
     * Gets a list of TransformApis from a given app name.
     * @param appName App name to query
     */
    WorkflowEditorComponent.prototype.getTransformApis = function (appName) {
        return this.appApis.find(function (a) { return a.name === appName; }).transform_apis;
    };
    /**
     * Gets a list of TransformApis from a given app name.
     * @param appName App name to query
     */
    WorkflowEditorComponent.prototype.getGlobalApis = function (appName) {
        return this.appApis.find(function (a) { return a.name === appName; }).device_apis;
    };
    /**
     * Gets an parameterApi matching the app, action, and input names specified.
     * @param appName App name the ActionApi resides under
     * @param actionName Name of the ActionApi to query
     * @param inputName Name of the action input to query
     */
    WorkflowEditorComponent.prototype.getInputApiArgs = function (appName, appVersion, actionName, inputName) {
        return this._getAction(appName, appVersion, actionName).parameters.find(function (a) { return a.name === inputName; });
    };
    /**
     * Filters only the apps that have actions specified
     */
    WorkflowEditorComponent.prototype.getAppsWithActions = function () {
        var _this = this;
        return this.appApis.filter(function (a) { return a.action_apis && a.getFilteredActionApis(_this.actionFilter).length; });
    };
    /**
     * Converts an input object/value to a friendly string for display in the workflow status table.
     * @param input Input object / value to convert
     */
    WorkflowEditorComponent.prototype.getFriendlyJSON = function (input) {
        if (!input) {
            return 'N/A';
        }
        var out = JSON.stringify(input, null, 1);
        out = out.replace(/[\{\[\}\]"]/g, '').trim();
        if (!out) {
            return 'N/A';
        }
        return out;
    };
    /**
     * Converts an input argument array to a friendly string for display in the workflow status table.
     * @param args Array of arguments to convert
     */
    WorkflowEditorComponent.prototype.getFriendlyArguments = function (args) {
        if (!args || !args.length) {
            return 'N/A';
        }
        var obj = {};
        args.forEach(function (element) {
            if (element.value) {
                obj[element.name] = element.value;
            }
        });
        var out = JSON.stringify(obj, null, 1);
        out = out.replace(/[\{\}"]/g, '');
        return out;
    };
    /**
     * Removes the white space in a given string.
     * @param input Input string to remove the whitespace of
     */
    WorkflowEditorComponent.prototype.removeWhitespace = function (input) {
        return input.replace(/\s/g, '');
    };
    /**
     * Recalculates the relative times shown for start/end date timestamps (e.g. '5 hours ago').
     */
    WorkflowEditorComponent.prototype.recalculateRelativeTimes = function (specificStatus) {
        var _this = this;
        var targetStatuses;
        if (specificStatus) {
            targetStatuses = [specificStatus];
        }
        else {
            targetStatuses = this.nodeStatuses;
        }
        if (!targetStatuses || !targetStatuses.length) {
            return;
        }
        targetStatuses.forEach(function (nodeStatus) {
            if (nodeStatus.started_at) {
                _this.nodeStatusStartedRelativeTimes[nodeStatus.execution_id] =
                    _this.utils.getRelativeLocalTime(nodeStatus.started_at);
            }
            if (nodeStatus.completed_at) {
                _this.nodeStatusCompletedRelativeTimes[nodeStatus.execution_id] =
                    _this.utils.getRelativeLocalTime(nodeStatus.completed_at);
            }
        });
    };
    /**
     * Adds/updates localized time strings to a status object.
     * @param status Action Status to mutate
     */
    WorkflowEditorComponent.prototype.calculateLocalizedTimes = function (status) {
        if (status.started_at) {
            status.localized_started_at = this.utils.getLocalTime(status.started_at);
        }
        if (status.completed_at) {
            status.localized_completed_at = this.utils.getLocalTime(status.completed_at);
        }
    };
    /**
     * Returns errors in the loaded workflow
     */
    WorkflowEditorComponent.prototype.getErrors = function () {
        if (!this.loadedWorkflow)
            return [];
        return this.loadedWorkflow.all_errors.map(function (error) { return ({ error: error }); });
    };
    WorkflowEditorComponent.prototype.toggleConsole = function () {
        var _this = this;
        this.showConsole = !this.showConsole;
        var options = { zoom: this.cy.zoom(), pan: this.cy.pan() };
        setTimeout(function () { return _this.setupGraph(options); }, 255);
    };
    WorkflowEditorComponent.prototype.switchConsoleTabs = function ($e) {
        var _this = this;
        this.showConsole = true;
        var options = { zoom: this.cy.zoom(), pan: this.cy.pan() };
        setTimeout(function () {
            _this.setupGraph(options);
            _this.recalculateConsoleTable($e);
        }, 255);
    };
    /**
     * This function is used primarily to recalculate column widths for execution results table.
     */
    WorkflowEditorComponent.prototype.recalculateConsoleTable = function ($e) {
        var _this = this;
        var table;
        setImmediate(function () {
            switch ($e.nextId) {
                case 'console-tab':
                    table = _this.consoleTable;
                    break;
                case 'execution-tab':
                    table = _this.workflowResultsTable;
                    break;
                case 'error-tab':
                    table = _this.errorLogTable;
                    break;
                case 'variable-tab':
                    table = _this.environmentVariableTable;
                    break;
            }
            if (table && table.recalculate) {
                console.log('changing: ' + $e.nextId);
                _this.cdr.detectChanges();
                if (Array.isArray(table.rows))
                    table.rows = table.rows.slice();
                table.recalculate();
            }
        });
    };
    /**
     * Returns errors in the loaded workflow
     */
    WorkflowEditorComponent.prototype.getVariables = function () {
        if (!this.loadedWorkflow)
            return [];
        return this.loadedWorkflow.environment_variables;
    };
    /**
     * Returns errors in the loaded workflow
     */
    WorkflowEditorComponent.prototype.deleteVariable = function (selectedVariable) {
        this.loadedWorkflow.deleteVariable(selectedVariable);
        if (this.loadedWorkflow.environment_variables.length == 0)
            $('.nav-tabs a[href="#console"], a[href="#errorLog"]').tab('show');
    };
    WorkflowEditorComponent.prototype.editVariableModal = function (selectedVariable) {
        var _this = this;
        var modalRef = this.modalService.open(_playbook_environment_variable_modal_component__WEBPACK_IMPORTED_MODULE_30__["PlaybookEnvironmentVariableModalComponent"]);
        modalRef.componentInstance.existing = true;
        modalRef.componentInstance.variable = selectedVariable;
        modalRef.result.then(function (variable) {
            _this.loadedWorkflow.environment_variables = _this.loadedWorkflow.environment_variables.slice();
        }).catch(function () { return null; });
    };
    WorkflowEditorComponent.prototype.onCreateVariable = function (argument) {
        var _this = this;
        var modalRef = this.modalService.open(_playbook_environment_variable_modal_component__WEBPACK_IMPORTED_MODULE_30__["PlaybookEnvironmentVariableModalComponent"]);
        modalRef.result.then(function (variable) {
            console.log(_this.loadedWorkflow.environment_variables, variable);
            if (!_this.loadedWorkflow.environment_variables)
                _this.loadedWorkflow.environment_variables = [];
            _this.loadedWorkflow.environment_variables.push(variable);
            _this.loadedWorkflow.environment_variables = _this.loadedWorkflow.environment_variables.slice();
            argument.value = variable.id;
        }).catch(function () { return argument.value = ''; });
    };
    WorkflowEditorComponent.prototype.workflowVariablesModal = function () {
        var _this = this;
        var modalRef = this.modalService.open(_playbook_environment_variable_modal_component__WEBPACK_IMPORTED_MODULE_30__["PlaybookEnvironmentVariableModalComponent"]);
        modalRef.result.then(function (variable) {
            console.log(_this.loadedWorkflow.environment_variables, variable);
            if (!_this.loadedWorkflow.environment_variables)
                _this.loadedWorkflow.environment_variables = [];
            _this.loadedWorkflow.environment_variables.push(variable);
            _this.loadedWorkflow.environment_variables = _this.loadedWorkflow.environment_variables.slice();
        }).catch(function () { return null; });
    };
    /**
     * Opens a modal to add a new workflow to a given playbook or under a new playbook.
     */
    WorkflowEditorComponent.prototype.editDescription = function () {
        var _this = this;
        var modalRef = this.modalService.open(_metadata_modal_component__WEBPACK_IMPORTED_MODULE_32__["MetadataModalComponent"]);
        modalRef.componentInstance.existing = true;
        modalRef.componentInstance.currentTags = this.currentTags;
        modalRef.componentInstance.existingWorkflows = this.workflows;
        modalRef.componentInstance.workflow = this.loadedWorkflow.clone();
        modalRef.result.then(function (workflow) { return _this.loadedWorkflow = workflow; }).catch(function () { return null; });
        return false;
    };
    Object.defineProperty(WorkflowEditorComponent.prototype, "currentTags", {
        get: function () {
            var tags = this.loadedWorkflow.tags || [];
            this.workflows.forEach(function (w) { return tags = tags.concat(w.tags); });
            return tags.filter(function (v, i, a) { return a.indexOf(v) == i; });
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('cyRef'),
        __metadata("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"])
    ], WorkflowEditorComponent.prototype, "cyRef", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('workflowResultsTable'),
        __metadata("design:type", _swimlane_ngx_datatable__WEBPACK_IMPORTED_MODULE_2__["DatatableComponent"])
    ], WorkflowEditorComponent.prototype, "workflowResultsTable", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('consoleContainer'),
        __metadata("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"])
    ], WorkflowEditorComponent.prototype, "consoleContainer", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('consoleTable'),
        __metadata("design:type", _swimlane_ngx_datatable__WEBPACK_IMPORTED_MODULE_2__["DatatableComponent"])
    ], WorkflowEditorComponent.prototype, "consoleTable", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('errorLogTable'),
        __metadata("design:type", _swimlane_ngx_datatable__WEBPACK_IMPORTED_MODULE_2__["DatatableComponent"])
    ], WorkflowEditorComponent.prototype, "errorLogTable", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('environmentVariableTable'),
        __metadata("design:type", _swimlane_ngx_datatable__WEBPACK_IMPORTED_MODULE_2__["DatatableComponent"])
    ], WorkflowEditorComponent.prototype, "environmentVariableTable", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('importFile'),
        __metadata("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"])
    ], WorkflowEditorComponent.prototype, "importFile", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('accordion'),
        __metadata("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"])
    ], WorkflowEditorComponent.prototype, "apps_actions", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewChild"])('consoleArea'),
        __metadata("design:type", _ctrl_ngx_codemirror__WEBPACK_IMPORTED_MODULE_31__["CodemirrorComponent"])
    ], WorkflowEditorComponent.prototype, "consoleArea", void 0);
    WorkflowEditorComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'workflow-editor-component',
            template: __webpack_require__(/*! ./workflow.editor.html */ "./src/app/playbook/workflow.editor.html"),
            styles: [__webpack_require__(/*! ./workflow.editor.scss */ "./src/app/playbook/workflow.editor.scss"), __webpack_require__(/*! ../../../node_modules/cytoscape-panzoom/cytoscape.js-panzoom.css */ "./node_modules/cytoscape-panzoom/cytoscape.js-panzoom.css"), __webpack_require__(/*! ../../../node_modules/ng2-dnd/bundles/style.css */ "./node_modules/ng2-dnd/bundles/style.css")],
            encapsulation: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewEncapsulation"].None,
            providers: [_auth_auth_service__WEBPACK_IMPORTED_MODULE_17__["AuthService"], _globals_globals_service__WEBPACK_IMPORTED_MODULE_19__["GlobalsService"], _settings_settings_service__WEBPACK_IMPORTED_MODULE_20__["SettingsService"]],
        }),
        __metadata("design:paramtypes", [_playbook_service__WEBPACK_IMPORTED_MODULE_16__["PlaybookService"], _auth_auth_service__WEBPACK_IMPORTED_MODULE_17__["AuthService"],
            ngx_toastr__WEBPACK_IMPORTED_MODULE_1__["ToastrService"], _angular_router__WEBPACK_IMPORTED_MODULE_9__["ActivatedRoute"],
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["ChangeDetectorRef"], _utilities_service__WEBPACK_IMPORTED_MODULE_18__["UtilitiesService"],
            _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_7__["NgbModal"], _angular_router__WEBPACK_IMPORTED_MODULE_9__["Router"]])
    ], WorkflowEditorComponent);
    return WorkflowEditorComponent;
}());



/***/ }),

/***/ "./src/app/playbook/workflow.editor.html":
/*!***********************************************!*\
  !*** ./src/app/playbook/workflow.editor.html ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div [hidden]=\"!loadedWorkflow\" id=\"main\" class=\"workflowEditorMain\">\r\n\r\n    <div *ngIf=\"false\" class=\"d-flex align-items-center\">\r\n        <nav aria-label=\"breadcrumb\">\r\n            <ol id=\"playbookBreadcrumbs\" class=\"breadcrumb\">\r\n                <li class=\"breadcrumb-item\"><a href=\"\" (click)=\"returnToWorkflows()\">Workflows</a></li>\r\n                <li class=\"breadcrumb-item\">{{ loadedWorkflow?.name }}\r\n                    <label *ngIf=\"loadedWorkflow && !loadedWorkflow?.is_valid\" class=\"my-auto\"\r\n                        id=\"currentWorkflowText\">(Incomplete)</label>\r\n                </li>\r\n            </ol>\r\n        </nav>\r\n        <div class=\"my-1 my-lg-none ml-auto pr-0\">\r\n            <button class=\"btn btn-primary\" [disabled]=\"!loadedWorkflow\" (click)=\"save()\">Save Workflow</button>\r\n            <!-- <input class=\"form-control\" [formControl]=\"filterQuery\" placeholder=\"Filter Workflows...\" /> -->\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Graph editor toolbar -->\r\n    <div id=\"playbookToolbar\" class=\"btn-toolbar d-flex align-items-center\" role=toolbar>\r\n        <!-- <div class=\"btn-group\" role=\"group\">\r\n            <button id=\"new-button\" type=\"button\" class=\"btn btn-default\" data-toggle=\"tooltip\" title=\"New Workflow\"\r\n                (click)=\"newWorkflowModal()\">\r\n                <i class=\"fa fa-file-o\"></i>\r\n            </button>\r\n        </div>\r\n        <div class=\"btn-group\" role=\"group\">\r\n            <button id=\"load-button\" type=\"button\" class=\"btn btn-default\" data-toggle=\"modal\" data-target=\"#workflowsModal\"\r\n                title=\"Load Workflow\">\r\n                <i class=\"fa fa-folder-open-o\"></i>\r\n            </button>\r\n        </div> -->\r\n        <div class=\"btn-group\" role=\"group\">\r\n            <button id=\"save-button\" type=\"button\" class=\"btn btn-default\" placement=\"bottom-left\"\r\n                ngbTooltip=\"Save Workflow\" [disabled]=\"!loadedWorkflow\" (click)=\"save()\">\r\n                <i class=\"fa fa-save\"></i>\r\n            </button>\r\n        </div>\r\n        <div class=\"btn-group\" role=\"group\">\r\n            <button id=\"undo-button\" type=\"button\" class=\"btn btn-default\" placement=\"bottom-left\" ngbTooltip=\"Undo\"\r\n                [disabled]=\"!loadedWorkflow || (ur && ur.isUndoStackEmpty())\" (click)=\"ur.undo()\">\r\n                <i class=\"fa fa-undo\"></i>\r\n            </button>\r\n        </div>\r\n        <div class=\"btn-group\" role=\"group\">\r\n            <button id=\"redo-button\" type=\"button\" class=\"btn btn-default\" placement=\"bottom-left\" ngbTooltip=\"Redo\"\r\n                [disabled]=\"!loadedWorkflow || (ur && ur.isRedoStackEmpty())\" (click)=\"ur.redo()\">\r\n                <i class=\"fa fa-repeat\"></i>\r\n            </button>\r\n        </div>\r\n        <div class=\"btn-group\" role=\"group\">\r\n            <button id=\"remove-button\" type=\"button\" class=\"btn btn-default\" placement=\"bottom-left\" ngbTooltip=\"Delete\"\r\n                [disabled]=\"!loadedWorkflow\" (click)=\"removeSelectedNodes()\">\r\n                <i class=\"fa fa-trash-o\"></i>\r\n            </button>\r\n        </div>\r\n        <!-- <div class=\"btn-group\" role=\"group\">\r\n            <button id=\"cut-button\" type=\"button\" class=\"btn btn-default\" placement=\"bottom-left\" ngbTooltip=\"Cut\" [disabled]=\"!loadedWorkflow\"\r\n                (click)=\"cut()\">\r\n                <span class=\"fa fa-cut\" style=\"transform: rotate(-90deg);\"></span>\r\n            </button>\r\n        </div> -->\r\n        <div class=\"btn-group\" role=\"group\">\r\n            <button id=\"copy-button\" type=\"button\" class=\"btn btn-default\" placement=\"bottom-left\" ngbTooltip=\"Copy\"\r\n                [disabled]=\"!loadedWorkflow\" (click)=\"copy()\">\r\n                <i class=\"fa fa-copy\"></i>\r\n            </button>\r\n        </div>\r\n        <div class=\"btn-group\" role=\"group\">\r\n            <button id=\"paste-button\" type=\"button\" class=\"btn btn-default\" placement=\"bottom-left\" ngbTooltip=\"Paste\"\r\n                [disabled]=\"!loadedWorkflow\" (click)=\"paste()\">\r\n                <i class=\"fa fa-paste\"></i>\r\n            </button>\r\n        </div>\r\n        <div class=\"btn-group\" role=\"group\">\r\n            <button id=\"execute-button\" type=\"button\" class=\"btn btn-default\" placement=\"bottom-left\"\r\n                ngbTooltip=\"Execute Workflow\" [disabled]=\"!loadedWorkflow || !loadedWorkflow.is_valid\"\r\n                (click)=\"executeWorkflow()\">\r\n                <i class=\"fa fa-play-circle\"></i>\r\n            </button>\r\n        </div>\r\n        <div class=\"btn-group\" role=\"group\">\r\n            <button id=\"clear-execution-highlighting-button\" type=\"button\" class=\"btn btn-default\"\r\n                placement=\"bottom-left\" ngbTooltip=\"Clear Execution Results\"\r\n                [disabled]=\"!loadedWorkflow || !loadedWorkflow.is_valid\" (click)=\"clearExecutionResults()\">\r\n                <i class=\"fa fa-eraser\"></i>\r\n            </button>\r\n        </div>\r\n        <div class=\"btn-group\" role=\"group\">\r\n            <button id=\"copy-button\" type=\"button\" class=\"btn btn-default\" placement=\"bottom-left\"\r\n                ngbTooltip=\"Edit Description\" [disabled]=\"!loadedWorkflow\" (click)=\"editDescription()\">\r\n                <i class=\"fa fa-info-circle\"></i>\r\n            </button>\r\n        </div>\r\n        <div class=\"btn-group\" role=\"group\">\r\n            <button id=\"variable-button\" type=\"button\" class=\"btn btn-default\" placement=\"bottom-left\"\r\n                ngbTooltip=\"Create Variable\" [disabled]=\"!loadedWorkflow\" (click)=\"workflowVariablesModal()\">\r\n                <i class=\"fa fa-code\"></i>\r\n            </button>\r\n        </div>\r\n        <nav class=\"ml-auto\" aria-label=\"breadcrumb\">\r\n            <ol id=\"playbookBreadcrumbs\" class=\"breadcrumb py-0 px-3 d-flex align-items-center\">\r\n                <li class=\"breadcrumb-item\"><a href=\"\" (click)=\"returnToWorkflows()\">Workflows</a></li>\r\n                <li class=\"breadcrumb-item d-flex align-items-center\">\r\n                    <span>{{ loadedWorkflow?.name }}</span>\r\n                    <label *ngIf=\"loadedWorkflow && !loadedWorkflow?.is_valid\" class=\"\" id=\"currentWorkflowText\">\r\n                        (Incomplete)</label>\r\n                    <a id=\"copy-button\" class=\"ml-1\" href=\"\" placement=\"bottom-right\" ngbTooltip=\"Edit Description\"\r\n                        (click)=\"editDescription()\">\r\n                        <i class=\"fa fa-info-circle\"></i>\r\n                    </a>\r\n\r\n                </li>\r\n            </ol>\r\n        </nav>\r\n    </div>\r\n    <!-- Graph editor -->\r\n    <div class=\"row graphEditorRow\" [class.show-console]=\"showConsole\">\r\n        <!-- Column for app/action display for drag and drop -->\r\n        <div class=\"col-md-2 graphEditorColumn\">\r\n            <div class=\"panel-group\" id=\"accordion\" #accordion [hidden]=\"!loadedWorkflow\">\r\n                <div class=\"card my-1\">\r\n                    <input class=\"form-control\" placeholder=\"Filter Actions...\" [formControl]=\"actionFilterControl\" />\r\n                </div>\r\n                <div *ngFor=\"let app of getAppsWithActions()\" class=\"card card-default my-1\">\r\n                    <div class=\"card-heading playbook-heading collapsed p-2\" data-toggle=\"collapse\"\r\n                        [attr.data-target]=\"'#actionsCollapse-' + app.id\"\r\n                        [title]=\"app.info ? app.info.description : ''\">\r\n                        <h5 class=\"card-title my-auto\">{{app.name}}</h5>\r\n                        <small class=\"form-text text-muted\">{{ app.description }}</small>\r\n                    </div>\r\n                    <div id=\"actionsCollapse-{{app.id}}\" class=\"card-collapse collapse action-panel\">\r\n                        <div class=\"card-body my-auto p-3\">\r\n                            <div *ngFor=\"let actionApi of app.getFilteredActionApis(actionFilter)\"\r\n                                class=\"card card-default actionPanel my-1\" dnd-draggable [dragEnabled]=\"true\"\r\n                                [dragData]=\"{ appName: app.name, actionApi: actionApi }\"\r\n                                (dblclick)=\"handleDoubleClickEvent(actionApi)\" [title]=\"actionApi.description\">\r\n                                <div class=\"card-body my-auto p-2\">\r\n                                    <span>{{actionApi.name}}</span>\r\n                                    <small class=\"form-text text-muted\">{{ actionApi.description }}</small>\r\n                                    <!-- <i class=\"fa fa-bars pull-right\" aria-hidden=\"true\"></i> -->\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Actual cytoscape graph editor -->\r\n        <div class=\"col-md-7 graphEditorColumn graphArea\">\r\n            <div id=\"cy\" #cyRef dnd-droppable (onDropSuccess)=\"handleDropEvent($event)\" [hidden]=\"!loadedWorkflow\"\r\n                tabindex=\"0\"></div>\r\n        </div>\r\n\r\n        <!-- Parameter editors -->\r\n        <div class=\"col-md-3 graphEditorColumn\">\r\n            <!-- Editor for Actions -->\r\n            <div *ngIf=\"!waitingOnData && selectedAction\" class=\"parametersEditor\">\r\n                <div class=\"d-flex justify-content-between my-2\">\r\n                    <h4 class=\"mb-0\">Action Settings</h4>\r\n                    <button [disabled]=\"selectedAction.id === loadedWorkflow.start\" class=\"btn btn-sm btn-primary\"\r\n                        (click)=\"setStartNode(selectedAction.id)\">Set Start Action</button>\r\n\r\n                </div>\r\n\r\n                <div class=\"form-row\">\r\n                    <div class=\"col-12 col-xl-6\">\r\n                        <div class=\"input-group input-group-sm mb-3\" placement=\"bottom\"\r\n                            [ngbTooltip]=\"selectedAction.app_name\">\r\n                            <div class=\"input-group-prepend\">\r\n                                <span class=\"input-group-text text-white bg-primary\">App</span>\r\n                            </div>\r\n                            <input type=\"text\" disabled class=\"form-control\" [value]=\"selectedAction.app_name\">\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-12 col-xl-6\">\r\n                        <div class=\"input-group input-group-sm mb-3\" placement=\"bottom\"\r\n                            [ngbTooltip]=\"selectedAction.action_name\">\r\n                            <div class=\"input-group-prepend\">\r\n                                <span class=\"input-group-text text-white bg-primary\">Action</span>\r\n                            </div>\r\n                            <input type=\"text\" disabled class=\"form-control\" [value]=\"selectedAction.action_name\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"d-flex\">\r\n                    <div class=\"card border-0 flex-grow-1\">\r\n                        <div class=\"card-body p-1\">\r\n                            <p class=\"card-text\">{{ selectedActionApi.description }}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"form-group mt-3\">\r\n                    <label class=\"h5\" for=\"id\">ID</label>\r\n                    <input type=\"text\" readonly class=\"form-control-plaintext px-2\" [value]=\"selectedAction.id\"\r\n                        name=\"id\">\r\n                </div>\r\n\r\n                <div class=\"form-group mt-3\">\r\n                    <label class=\"h5\" for=\"name\">Name<i class=\"fa fa-asterisk required\"\r\n                            title=\"This field is required.\"></i></label>\r\n                    <input type=\"text\" class=\"form-control\" [(ngModel)]=\"selectedAction.name\" name=\"name\" required>\r\n                </div>\r\n                <!-- <div *ngIf=\"!selectedActionApi.global\" class=\"form-group globalArgument\">\r\n                    <label for=\"global_id\">Global\r\n                        <i class=\"fa fa-asterisk required\" title=\"This field is required.\"></i>\r\n                    </label>\r\n                    <playbook-argument-component [loadedWorkflow]=\"loadedWorkflow\" [argument]=\"selectedAction.global_id\"\r\n                        [id]=\"id\" [users]=\"users\" [roles]=\"roles\" [globals]=\"relevantGlobals\"></playbook-argument-component>\r\n                </div> -->\r\n                <!-- Inputs -->\r\n\r\n                <div *ngIf=\"selectedActionApi.parameters.length\">\r\n                    <h5>Arguments</h5>\r\n                    <playbook-argument-component\r\n                        *ngFor=\"let parameterApi of selectedActionApi.parameters; let id = index\"\r\n                        [selectedAction]=\"selectedAction\" [loadedWorkflow]=\"loadedWorkflow\"\r\n                        [argument]=\"getOrInitializeSelectedActionArgument(parameterApi)\" [globals]=\"globals\"\r\n                        [parameterApi]=\"parameterApi\" [id]=\"id\" [users]=\"users\" [roles]=\"roles\"\r\n                        (createVariable)=\"onCreateVariable($event)\"></playbook-argument-component>\r\n                </div>\r\n\r\n                <ng-template #conditionalTooltip>\r\n                    <pre>\r\nif input_1.result > input_2.result:\r\n    selected_node = output_1\r\nelse:\r\n    selected_node = output_2</pre>\r\n                </ng-template>\r\n                <div *ngIf=\"selectedActionApi.node_type == actionTypes.CONDITION\" class=\"form-group mt-3\">\r\n                    <label class=\"h5\" for=\"name\">Conditional\r\n                        <i class=\"fa fa-info-circle\" [autoClose]=\"'outside'\" [ngbPopover]=\"conditionalTooltip\"\r\n                            popoverTitle=\"Example Conditional\" container=\"body\"></i>\r\n                        <i class=\"fa fa-asterisk required\" title=\"This field is required.\"></i>\r\n                    </label>\r\n                    <ngx-codemirror [(ngModel)]=\"selectedAction.conditional\" [options]=\"conditionalOptions\">\r\n                    </ngx-codemirror>\r\n                </div>\r\n\r\n                <ng-template #transformTooltip>\r\n                    <pre>result = input.result.get(\"key\")</pre>\r\n                </ng-template>\r\n                <div *ngIf=\"selectedActionApi.node_type == actionTypes.TRANSFORM\" class=\"form-group mt-3\">\r\n                    <label class=\"h5\" for=\"name\">Transform\r\n                        <i class=\"fa fa-info-circle\" [autoClose]=\"'outside'\" [ngbPopover]=\"transformTooltip\"\r\n                            popoverTitle=\"Example Transform\" container=\"body\"></i>\r\n                        <i class=\"fa fa-asterisk required\" title=\"This field is required.\"></i>\r\n                    </label>\r\n                    <ngx-codemirror [(ngModel)]=\"selectedAction.transform\" [options]=\"transformOptions\">\r\n                    </ngx-codemirror>\r\n                </div>\r\n\r\n                <div *ngIf=\"selectedActionApi.canRunInParallel\" class=\"form-group mt-3\">\r\n                    <h5>Run In Parallel</h5>\r\n                    <div class=\"form-group row\">\r\n                        <label for=\"parallel_parameter\" class=\"col-sm-4 col-form-label\">Parallelization:</label>\r\n                        <div class=\"col-sm-8\">\r\n                            <select class=\"form-control\" name=\"parallel_parameter\"\r\n                                [(ngModel)]=\"selectedAction.parallel_parameter\"\r\n                                (change)=\"updateParallelizedNode(selectedAction)\">\r\n                                <option [value]=\"null\">No Parallelization</option>\r\n                                <option *ngFor=\"let parameterApi of selectedActionApi.parallelParameters\"\r\n                                    [value]=\"parameterApi.name\" [label]=\"'Parallelize on  ' + parameterApi.name\">\r\n                                    Parallize on <b>{{ parameterApi.name }}</b></option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div *ngIf=\"selectedActionApi?.returns?.schema?.type || selectedActionApi?.returns?.example || selectedActionResults\">\r\n                    <div class=\"form-group mt-3\">\r\n                        <label class=\"h5\">\r\n                            Returns: <span\r\n                                *ngIf=\"selectedActionApi?.returns?.schema?.type\">({{ selectedActionApi?.returns?.schema?.type }})</span>\r\n                        </label>\r\n                        <ngb-tabset justify=\"fill\" [activeId]=\"selectedActionResults ? 'returns-results-tab' : 'returns-example-tab'\">\r\n                            <ngb-tab id=\"returns-example-tab\" title=\"Example\" [disabled]=\"!selectedActionApi?.returns?.example\">\r\n                                <ng-template ngbTabContent>\r\n                                    <div class=\"d-flex m-2\" *ngIf=\"selectedActionApi?.returns?.example\">\r\n                                        <div class=\"card bg-light flex-grow-1\">\r\n                                            <div class=\"card-body\">\r\n                                                <pre class=\"card-text\">{{ selectedActionApi.returns.example }}</pre>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </ng-template>\r\n                            </ngb-tab>\r\n                            <ngb-tab id=\"returns-results-tab\" title=\"Execution Result\" [disabled]=\"!selectedActionResults\">\r\n                                <ng-template ngbTabContent>\r\n                                    <div class=\"d-flex m-2\" *ngIf=\"selectedActionResults\">\r\n                                        <div class=\"card bg-light flex-grow-1\">\r\n                                            <div class=\"card-body\">\r\n                                                <!-- <pre class=\"card-text\">{{ selectedActionResults }}</pre> -->\r\n                                                {{ getFriendlyJSON(selectedActionResults) }}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </ng-template>\r\n                            </ngb-tab>\r\n                        </ngb-tabset>\r\n                    </div>\r\n                </div>\r\n                <!-- Triggers -->\r\n                <div *ngIf=\"false\">\r\n                    <div class=\"row\">\r\n                        <div class=\"col-6\">\r\n                            <h4>Trigger Condition</h4>\r\n                        </div>\r\n                        <div class=\"col-6\">\r\n                            <div class=\"form-group\">\r\n                                <button *ngIf=\"!selectedAction.trigger\" class=\"btn btn-primary pull-right\"\r\n                                    (click)=\"specifyTrigger(selectedAction)\">\r\n                                    <i class=\"fa fa-plus\"></i>Specify Trigger Condition\r\n                                </button>\r\n                                <button *ngIf=\"selectedAction.trigger\" class=\"btn btn-danger pull-right\"\r\n                                    (click)=\"removeTrigger(selectedAction)\">\r\n                                    <i class=\"fa fa-close\"></i>Remove Trigger Condition\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <playbook-conditional-expression-component *ngIf=\"selectedAction.trigger\"\r\n                        [conditionalExpression]=\"selectedAction.trigger\" [appApis]=\"appApis\"\r\n                        [selectedAppName]=\"selectedAction.app_name\" [loadedWorkflow]=\"loadedWorkflow\"\r\n                        (createVariable)=\"onCreateVariable($event)\"></playbook-conditional-expression-component>\r\n                </div>\r\n            </div>\r\n            <!-- Editor for Branches (edges) -->\r\n            <div *ngIf=\"selectedBranchParams && selectedBranchParams.branch && false\" class=\"parametersEditor\">\r\n                <h3>Branch Parameters</h3>\r\n                <div class=\"form-group\">\r\n                    <label for=\"status\">Return Type\r\n                        <i class=\"fa fa-asterisk required\" title=\"This field is required.\"></i>\r\n                    </label>\r\n                    <select class=\"form-control\" [(ngModel)]=\"selectedBranchParams.branch.status\" name=\"status\">\r\n                        <option *ngFor=\"let i of selectedBranchParams.returnTypes\" [value]=\"i.status\" [label]=\"i.status\"\r\n                            [class.failure]=\"i.failure\">{{i.status}}</option>\r\n                    </select>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                    <label for=\"priority\">Priority\r\n                        <i class=\"fa fa-asterisk required\" title=\"This field is required.\"></i>\r\n                    </label>\r\n                    <input type=\"number\" max=\"999\" min=\"1\" class=\"form-control\"\r\n                        [(ngModel)]=\"selectedBranchParams.branch.priority\" name=\"priority\" required>\r\n                </div>\r\n                <div>\r\n                    <div class=\"row\">\r\n                        <div class=\"col-6\">\r\n                            <h4>Condition</h4>\r\n                        </div>\r\n                        <div class=\"col-6\">\r\n                            <div class=\"form-group\">\r\n                                <button *ngIf=\"!selectedBranchParams.branch.condition\"\r\n                                    class=\"btn btn-primary pull-right\"\r\n                                    (click)=\"specifyCondition(selectedBranchParams.branch)\">\r\n                                    <i class=\"fa fa-plus\"></i>Specify Condition\r\n                                </button>\r\n                                <button *ngIf=\"selectedBranchParams.branch.condition\" class=\"btn btn-danger pull-right\"\r\n                                    (click)=\"removeCondition(selectedBranchParams.branch)\">\r\n                                    <i class=\"fa fa-close\"></i>Remove Condition\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <playbook-conditional-expression-component *ngIf=\"selectedBranchParams.branch.condition\"\r\n                        [conditionalExpression]=\"selectedBranchParams.branch.condition\" [appApis]=\"appApis\"\r\n                        [selectedAppName]=\"selectedBranchParams.appName\" [loadedWorkflow]=\"loadedWorkflow\"\r\n                        (createVariable)=\"onCreateVariable($event)\"></playbook-conditional-expression-component>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"bottom-panel fixed-bottom mb-1 pt-1 border-top\" [class.show-console]=\"showConsole\">\r\n        <ngb-tabset destoryOnHide=\"false\" (tabChange)=\"switchConsoleTabs($event)\">\r\n            <ngb-tab id=\"console-tab\">\r\n                <ng-template ngbTabTitle>\r\n                    <div class=\"console-tab\" (click)=\"toggleConsole()\">Console\r\n                        <span *ngIf=\"consoleLog.length > 0\"\r\n                            class=\"badge badge-pill badge-primary\">{{ consoleLog.length }}</span>\r\n                    </div>\r\n                </ng-template>\r\n                <ng-template ngbTabContent>\r\n                    <ngx-codemirror #consoleArea [(ngModel)]=\"consoleContent\" [options]=\"{\r\n                        lineNumbers: true,\r\n                        mode: 'shell',\r\n                        theme: 'darcula',\r\n                        readOnly: true\r\n                    }\"></ngx-codemirror>\r\n                </ng-template>\r\n            </ngb-tab>\r\n\r\n            <ngb-tab *ngIf=\"loadedWorkflow?.id && !loadedWorkflow?.has_errors\" id=\"execution-tab\">\r\n                <ng-template ngbTabTitle>\r\n                    <div class=\"console-tab\" (click)=\"toggleConsole()\">Execution Results\r\n                        <span *ngIf=\"nodeStatuses.length > 0\"\r\n                            class=\"badge badge-pill badge-primary\">{{ nodeStatuses.length }}</span>\r\n                    </div>\r\n                </ng-template>\r\n                <ng-template ngbTabContent>\r\n                    <div id=\"executionResultsModal\">\r\n                        <div #workflowResultsContainer>\r\n                            <ngx-datatable #workflowResultsTable class='material expandable' [columnMode]=\"'flex'\"\r\n                                [rows]=\"nodeStatuses\" [sortType]=\"'multi'\" [footerHeight]=\"25\" [rowHeight]=\"undefined\"\r\n                                [sorts]=\"[{prop: 'started_at', dir: 'desc'}]\" [limit]=\"10\">\r\n                                <!-- Column Templates -->\r\n                                <ngx-datatable-column name=\"ID\" prop=\"node_id\" [flexGrow]=\"2\">\r\n                                </ngx-datatable-column>\r\n                                <ngx-datatable-column name=\"App Name\" prop=\"app_name\" [flexGrow]=\"1\">\r\n                                </ngx-datatable-column>\r\n                                <ngx-datatable-column name=\"Action Name\" prop=\"name\" [flexGrow]=\"1\">\r\n                                </ngx-datatable-column>\r\n                                <ngx-datatable-column name=\"Started At\" prop=\"started_at\" [flexGrow]=\"1\">\r\n                                    <ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n                                        <span [title]=\"row.localized_started_at\">\r\n                                            {{nodeStatusStartedRelativeTimes[row.execution_id]}}\r\n                                        </span>\r\n                                    </ng-template>\r\n                                </ngx-datatable-column>\r\n                                <ngx-datatable-column name=\"Completed At\" prop=\"completed_at\" [flexGrow]=\"1\">\r\n                                    <ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n                                        <span [title]=\"row.localized_completed_at\">\r\n                                            {{nodeStatusCompletedRelativeTimes[row.execution_id]}}\r\n                                        </span>\r\n                                    </ng-template>\r\n                                </ngx-datatable-column>\r\n                                <ngx-datatable-column name=\"Status\" prop=\"status\" [flexGrow]=\"1\"></ngx-datatable-column>\r\n                                <ngx-datatable-column name=\"Arguments\" [sortable]=\"false\" [flexGrow]=\"1\">\r\n                                    <ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n                                        {{getFriendlyArguments(row.arguments)}}\r\n                                    </ng-template>\r\n                                </ngx-datatable-column>\r\n                                <ngx-datatable-column name=\"Result\" [sortable]=\"false\" [flexGrow]=\"3\">\r\n                                    <ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n                                        {{getFriendlyJSON(row.result)}}\r\n                                    </ng-template>\r\n                                </ngx-datatable-column>\r\n                            </ngx-datatable>\r\n                        </div>\r\n                    </div>\r\n                </ng-template>\r\n            </ngb-tab>\r\n\r\n            <ngb-tab *ngIf=\"loadedWorkflow?.environment_variables?.length > 0\" id=\"variable-tab\">\r\n                <ng-template ngbTabTitle>\r\n                    <div class=\"console-tab\" (click)=\"toggleConsole()\">Workflow Variables</div>\r\n                </ng-template>\r\n                <ng-template ngbTabContent>\r\n                    <ngx-datatable #environmentVariableTable class='material expandable' [columnMode]=\"'flex'\"\r\n                        [rows]=\"getVariables()\" [sortType]=\"'multi'\" [footerHeight]=\"25\" [rowHeight]=\"undefined\"\r\n                        [sorts]=\"[]\" [limit]=\"10\">\r\n                        <ngx-datatable-column name=\"Name\" prop=\"name\" [sortable]=\"false\" [flexGrow]=\"2\">\r\n                        </ngx-datatable-column>\r\n                        <ngx-datatable-column name=\"ID\" prop=\"id\" [sortable]=\"false\" [flexGrow]=\"2\">\r\n                        </ngx-datatable-column>\r\n                        <ngx-datatable-column name=\"Default Value\" prop=\"value\" [sortable]=\"false\" [flexGrow]=\"2\">\r\n                        </ngx-datatable-column>\r\n                        <ngx-datatable-column name=\"Description\" prop=\"description\" [sortable]=\"false\" [flexGrow]=\"3\">\r\n                        </ngx-datatable-column>\r\n                        <ngx-datatable-column name=\"Actions\" [resizeable]=\"false\" [sortable]=\"false\" [draggable]=\"false\"\r\n                            [flexGrow]=\"1\">\r\n                            <ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n                                <button (click)=\"editVariableModal(row)\" class=\"btn btn-primary mx-1\"\r\n                                    title=\"Edit Variable\"><i class=\"fa fa-edit\"></i></button>\r\n                                <button (click)=\"deleteVariable(row)\" class=\"btn btn-danger mx-1\"\r\n                                    title=\"Delete Variable\"><i class=\"fa fa-times\"></i></button>\r\n                            </ng-template>\r\n                        </ngx-datatable-column>\r\n                    </ngx-datatable>\r\n                </ng-template>\r\n            </ngb-tab>\r\n\r\n            <ngb-tab *ngIf=\"loadedWorkflow?.has_errors\" id=\"error-tab\">\r\n                <ng-template ngbTabTitle>\r\n                    <div class=\"console-tab\" (click)=\"toggleConsole()\">Workflow Errors <span\r\n                            class=\"badge badge-pill badge-secondary\">{{ loadedWorkflow?.all_errors.length }}</span>\r\n                    </div>\r\n                </ng-template>\r\n                <ng-template ngbTabContent>\r\n                    <ngx-datatable #errorLogTable class='material expandable' [columnMode]=\"'flex'\" [rows]=\"getErrors()\"\r\n                        [sortType]=\"'multi'\" [footerHeight]=\"25\" [rowHeight]=\"undefined\" [sorts]=\"[]\" [limit]=\"10\">\r\n                        <ngx-datatable-column name=\"Error\" prop=\"error\" [sortable]=\"false\" [flexGrow]=\"1\">\r\n                        </ngx-datatable-column>\r\n                    </ngx-datatable>\r\n                </ng-template>\r\n            </ngb-tab>\r\n\r\n        </ngb-tabset>\r\n    </div>\r\n\r\n</div>"

/***/ }),

/***/ "./src/app/playbook/workflow.editor.scss":
/*!***********************************************!*\
  !*** ./src/app/playbook/workflow.editor.scss ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "/* @import '/client/node_modules/cytoscape-panzoom/cytoscape.js-panzoom.css';\r\n@import '/client/node_modules/ng2-dnd/bundles/style.css'; */\n#main.workflowEditorMain {\n  padding: 10px 15px 0 15px; }\n.workflowEditorMain .parametersEditor .failure {\n  color: crimson; }\n#playbookBreadcrumbs {\n  background-color: unset;\n  -webkit-margin-after: unset;\n          margin-block-end: unset;\n  -webkit-padding-start: unset;\n          padding-inline-start: unset;\n  font-weight: bold;\n  font-size: 1.5rem; }\n#playbookBreadcrumbs a {\n    text-decoration: none; }\n#playbookToolbar {\n  background-color: #aecbdc;\n  margin-left: 0;\n  margin-bottom: 5px;\n  border: 1px solid #8b9aa3;\n  border-radius: 5px; }\n#playbookToolbar .btn-default {\n  background-color: #aecbdc;\n  border-color: #aecbdc; }\n#playbookToolbar .btn-default:hover {\n  background-color: #eaf2f6;\n  border-color: #eaf2f6;\n  margin: 0;\n  border-radius: 0; }\n#playbookToolbar .btn-group {\n  border-right: 1px solid #8b9aa3; }\n#playbookToolbar .btn-group > .btn:first-child {\n  margin: 0;\n  padding: 10px; }\n#playbookToolbar .btn-toolbar > .btn, .btn-toolbar > .btn-group, .btn-toolbar > .input-group {\n  margin-left: 0; }\n#playbookToolbar .form-control.workflowNameInput {\n  display: inline-block;\n  width: auto; }\n#currentWorkflowText {\n  margin-top: 10px;\n  font-size: 18px; }\n.consoleRow {\n  padding: 10px; }\n/* Console Row = 200px */\n.workflowEditorMain .graphEditorRow {\n  height: calc(100vh - 170px);\n  transition: height 0.25s ease-in-out;\n  overflow: auto; }\n.workflowEditorMain .graphEditorRow.show-console {\n    height: calc(100vh - 470px); }\n.workflowEditorMain .graphEditorColumn {\n  height: 100%;\n  overflow: auto; }\n.workflowEditorMain .graphEditorColumn.graphArea {\n    overflow: hidden; }\n.workflowEditorMain .playbook-heading {\n  cursor: pointer; }\n#playbookEditorTabs {\n  display: inline-block;\n  vertical-align: top;\n  height: 100%;\n  width: 100%;\n  position: inherit;\n  background: transparent; }\n#cy {\n  /* display: inline-block; */\n  /* vertical-align: top; */\n  width: 100%;\n  height: 100%; }\n/* Need to do this else panzoom appears above modals */\n#cy .cy-panzoom {\n  z-index: 10; }\n#cy-instructions {\n  padding: 20px;\n  font-size: 25px; }\n#cy-json-data {\n  background-color: white;\n  color: black;\n  font-weight: normal;\n  height: 630px;\n  width: 500px;\n  resize: none; }\n.workflowEditorMain #accordion .card-heading .card-title:after {\n  /* symbol for \"opening\" panels */\n  font: normal normal normal 14px/1 FontAwesome;\n  font-size: inherit;\n  text-rendering: auto;\n  content: \"\\f078\";\n  /* adjust as needed, taken from bootstrap.css */\n  float: right;\n  /* adjust as needed */\n  color: grey;\n  /* adjust as needed */ }\n.no-transition {\n  transition: none !important; }\n.workflowEditorMain #accordion .card-heading.collapsed .card-title:after {\n  /* symbol for \"collapsed\" panels */\n  content: \"\\f054\";\n  /* adjust as needed, taken from bootstrap.css */ }\n.workflowEditorMain .card-default > .card-heading {\n  background-color: #eaf2f6;\n  font-weight: bolder; }\n.workflowEditorMain .parametersEditor input[type=checkbox].form-control {\n  width: 34px;\n  margin: 0 5px; }\n.workflowEditorMain .parametersEditor .form-group.argument {\n  margin-bottom: 5px;\n  padding: 5px; }\n.workflowEditorMain .parametersEditor .form-group.argument.odd {\n  background-color: #EEE; }\n.workflowEditorMain .parametersEditor .indent {\n  border-left: 3px solid #DDD;\n  border-top: 1px solid #DDD;\n  border-bottom: 1px solid #DDD;\n  padding: 5px 0 5px 15px;\n  margin-top: 5px;\n  margin-bottom: 5px; }\n.workflowEditorMain .parametersEditor .addBar {\n  margin-bottom: 10px; }\n.workflowEditorMain .parametersEditor .addBar button {\n  margin-top: 25px; }\n.workflowEditorMain .parametersEditor .propertyHeader {\n  margin-bottom: 5px; }\n.workflowEditorMain .parametersEditor .required {\n  color: crimson;\n  margin-left: 5px; }\n.workflowEditorMain .parametersEditor .CodeMirror {\n  color: #495057;\n  border: 1px solid #dee2e6;\n  border-radius: 0.25rem;\n  height: 10rem; }\n.workflowEditorMain .parametersEditor .CodeMirror-empty {\n  color: rgba(73, 80, 87, 0.65); }\n.workflowEditorMain .parametersEditor .CodeMirror-focused {\n  background-color: #fff;\n  border-color: #8bb8df;\n  outline: 0;\n  box-shadow: 0 0 0 0.2rem rgba(51, 122, 183, 0.25); }\n.workflowEditorMain ngx-datatable datatable-body datatable-body-row datatable-body-cell .datatable-body-cell-label {\n  white-space: initial; }\n#workflowsModal .workflowPanel a {\n  cursor: pointer; }\n#workflowsModal .card-heading h4 {\n  min-height: 30px; }\n#workflowsModal .importContainer {\n  margin-bottom: 5px; }\n#workflowsModal .importContainer h5 {\n  display: inline-block; }\n#workflowsModal .importPlaybookInput {\n  display: inline-block; }\n#workflowsModal > .modal-dialog {\n  max-width: 600px; }\n#workflowsModal .modal-title,\n#executionResultsModal .modal-title,\n#playbookAndWorkflowActionModal .modal-title {\n  display: inline-block; }\n#executionResultsModal > .modal-dialog {\n  max-width: 95%; }\n.bottom-panel .tab-content {\n  max-height: 0px;\n  height: 0px;\n  overflow-y: auto;\n  transition: all 0.25s ease-in-out; }\n.bottom-panel.show-console .tab-content {\n  max-height: 300px;\n  height: 300px; }\n.bottom-panel .nav-link {\n  padding: unset; }\n.bottom-panel .nav-link .console-tab {\n    padding: 0.5rem 1rem; }\nbody ngb-popover-window.popover {\n  max-width: 400px; }\n"

/***/ }),

/***/ "./src/app/refresh-token-interceptor.ts":
/*!**********************************************!*\
  !*** ./src/app/refresh-token-interceptor.ts ***!
  \**********************************************/
/*! exports provided: jwtTokenGetter, RefreshTokenInterceptor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "jwtTokenGetter", function() { return jwtTokenGetter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RefreshTokenInterceptor", function() { return RefreshTokenInterceptor; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _auth_auth_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./auth/auth.service */ "./src/app/auth/auth.service.ts");
/* harmony import */ var _auth0_angular_jwt__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @auth0/angular-jwt */ "./node_modules/@auth0/angular-jwt/index.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





function jwtTokenGetter() {
    return sessionStorage.getItem('access_token');
}
var RefreshTokenInterceptor = /** @class */ (function () {
    function RefreshTokenInterceptor(authService, jwtInterceptor) {
        this.authService = authService;
        this.jwtInterceptor = jwtInterceptor;
    }
    RefreshTokenInterceptor.prototype.intercept = function (req, next) {
        var _this = this;
        if (this.jwtInterceptor.isWhitelistedDomain(req) && !this.jwtInterceptor.isBlacklistedRoute(req) && this.authService.isAccessTokenExpired()) {
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__["from"])(this.authService.getAccessTokenRefreshed())
                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["mergeMap"])(function () { return _this.jwtInterceptor.intercept(req, next); }));
        }
        else {
            return next.handle(req);
        }
    };
    RefreshTokenInterceptor = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_auth_auth_service__WEBPACK_IMPORTED_MODULE_3__["AuthService"], _auth0_angular_jwt__WEBPACK_IMPORTED_MODULE_4__["JwtInterceptor"]])
    ], RefreshTokenInterceptor);
    return RefreshTokenInterceptor;
}());



/***/ }),

/***/ "./src/app/routing.ts":
/*!****************************!*\
  !*** ./src/app/routing.ts ***!
  \****************************/
/*! exports provided: RoutingModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RoutingModule", function() { return RoutingModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _playbook_playbook_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./playbook/playbook.component */ "./src/app/playbook/playbook.component.ts");
/* harmony import */ var _scheduler_scheduler_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./scheduler/scheduler.component */ "./src/app/scheduler/scheduler.component.ts");
/* harmony import */ var _globals_globals_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./globals/globals.component */ "./src/app/globals/globals.component.ts");
/* harmony import */ var _settings_settings_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./settings/settings.component */ "./src/app/settings/settings.component.ts");
/* harmony import */ var _dashboards_dashboards_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./dashboards/dashboards.component */ "./src/app/dashboards/dashboards.component.ts");
/* harmony import */ var _execution_execution_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./execution/execution.component */ "./src/app/execution/execution.component.ts");
/* harmony import */ var _dashboards_manage_dashboards_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./dashboards/manage.dashboards.component */ "./src/app/dashboards/manage.dashboards.component.ts");
/* harmony import */ var _playbook_workflow_editor_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./playbook/workflow.editor.component */ "./src/app/playbook/workflow.editor.component.ts");
/* harmony import */ var _buckets_buckets_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./buckets/buckets.component */ "./src/app/buckets/buckets.component.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};











//etc
var routes = [
    { path: '', redirectTo: '/workflows', pathMatch: 'full' },
    { path: 'workflows', component: _playbook_playbook_component__WEBPACK_IMPORTED_MODULE_2__["PlaybookComponent"] },
    { path: 'workflows/new', component: _playbook_workflow_editor_component__WEBPACK_IMPORTED_MODULE_9__["WorkflowEditorComponent"] },
    { path: 'workflows/:workflowId', component: _playbook_workflow_editor_component__WEBPACK_IMPORTED_MODULE_9__["WorkflowEditorComponent"] },
    { path: 'scheduler', component: _scheduler_scheduler_component__WEBPACK_IMPORTED_MODULE_3__["SchedulerComponent"] },
    { path: 'globals', component: _globals_globals_component__WEBPACK_IMPORTED_MODULE_4__["GlobalsComponent"] },
    { path: 'settings', component: _settings_settings_component__WEBPACK_IMPORTED_MODULE_5__["SettingsComponent"] },
    { path: 'execution', component: _execution_execution_component__WEBPACK_IMPORTED_MODULE_7__["ExecutionComponent"] },
    { path: 'dashboard/new', component: _dashboards_manage_dashboards_component__WEBPACK_IMPORTED_MODULE_8__["ManageDashboardsComponent"] },
    { path: 'dashboard/:dashboardId/edit', component: _dashboards_manage_dashboards_component__WEBPACK_IMPORTED_MODULE_8__["ManageDashboardsComponent"] },
    { path: 'dashboard/:dashboardId', component: _dashboards_dashboards_component__WEBPACK_IMPORTED_MODULE_6__["DashboardsComponent"] },
    { path: 'buckets', component: _buckets_buckets_component__WEBPACK_IMPORTED_MODULE_10__["BucketsComponent"] },
];
var RoutingModule = /** @class */ (function () {
    function RoutingModule() {
    }
    RoutingModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"])({
            imports: [_angular_router__WEBPACK_IMPORTED_MODULE_1__["RouterModule"].forRoot(routes)],
            exports: [_angular_router__WEBPACK_IMPORTED_MODULE_1__["RouterModule"]],
        })
    ], RoutingModule);
    return RoutingModule;
}());



/***/ }),

/***/ "./src/app/scheduler/scheduler.component.ts":
/*!**************************************************!*\
  !*** ./src/app/scheduler/scheduler.component.ts ***!
  \**************************************************/
/*! exports provided: SchedulerComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SchedulerComponent", function() { return SchedulerComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var ngx_toastr__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngx-toastr */ "./node_modules/ngx-toastr/fesm5/ngx-toastr.js");
/* harmony import */ var rxjs_add_operator_debounceTime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/add/operator/debounceTime */ "./node_modules/rxjs-compat/_esm5/add/operator/debounceTime.js");
/* harmony import */ var _scheduler_modal_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./scheduler.modal.component */ "./src/app/scheduler/scheduler.modal.component.ts");
/* harmony import */ var _scheduler_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./scheduler.service */ "./src/app/scheduler/scheduler.service.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};








var SchedulerComponent = /** @class */ (function () {
    function SchedulerComponent(schedulerService, modalService, toastrService, utils) {
        this.schedulerService = schedulerService;
        this.modalService = modalService;
        this.toastrService = toastrService;
        this.utils = utils;
        this.scheduledTasks = [];
        this.displayScheduledTasks = [];
        this.availableWorkflows = [];
        this.filterQuery = new _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormControl"]();
    }
    /**
     * On component initialization, get the scheduler status for display/actioning.
     * Get workflow names to add to a scheduled task.
     * Get scheduled tasks to display in the data table.
     * Initialize the search filter input to filter scheduled tasks.
     */
    SchedulerComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.getSchedulerStatus();
        this.getWorkflows();
        this.getScheduledTasks();
        this.filterQuery
            .valueChanges
            .debounceTime(500)
            .subscribe(function (event) { return _this.filterScheduledTasks(); });
    };
    /**
     * Based on the search filter input, filter out the scheduled tasks based on matching some parameters (name, desc.).
     */
    SchedulerComponent.prototype.filterScheduledTasks = function () {
        var searchFilter = this.filterQuery.value ? this.filterQuery.value.toLocaleLowerCase() : '';
        this.displayScheduledTasks = this.scheduledTasks.filter(function (s) {
            return (s.name.toLocaleLowerCase().includes(searchFilter) ||
                s.description.toString().includes(searchFilter));
        });
    };
    /**
     * Gets the scheduler status from the server (e.g. 'paused').
     */
    SchedulerComponent.prototype.getSchedulerStatus = function () {
        var _this = this;
        this.schedulerService
            .getSchedulerStatus()
            .then(function (schedulerStatus) { return _this.schedulerStatus = schedulerStatus; })
            .catch(function (e) { return _this.toastrService.error("Error retrieving scheduler status: " + e.message); });
    };
    /**
     * Changes the status of the scheduler and updates the local scheduler status to reflect that.
     * @param status Status to change to
     */
    SchedulerComponent.prototype.changeSchedulerStatus = function (status) {
        var _this = this;
        if (status === 'start' && this.schedulerStatus === 'paused') {
            status = 'resume';
        }
        this.schedulerService
            .changeSchedulerStatus(status)
            .then(function (newStatus) {
            if (newStatus) {
                _this.schedulerStatus = newStatus;
            }
        })
            .catch(function (e) { return _this.toastrService.error("Error changing scheduler status: " + e.message); });
    };
    /**
     * Gets a list of scheduled tasks from the server for display in our data table.
     */
    SchedulerComponent.prototype.getScheduledTasks = function () {
        var _this = this;
        this.schedulerService
            .getAllScheduledTasks()
            .then(function (scheduledTasks) { return _this.displayScheduledTasks = _this.scheduledTasks = scheduledTasks; })
            .catch(function (e) { return _this.toastrService.error("Error retrieving scheduled tasks: " + e.message); });
    };
    /**
     * Spawns a modal for adding a new scheduled task. Passes in our workflow names for usage in the modal.
     */
    SchedulerComponent.prototype.addScheduledTask = function () {
        var modalRef = this.modalService.open(_scheduler_modal_component__WEBPACK_IMPORTED_MODULE_5__["SchedulerModalComponent"], { size: 'lg' });
        modalRef.componentInstance.title = 'Schedule a New Task';
        modalRef.componentInstance.submitText = 'Add Scheduled Task';
        modalRef.componentInstance.availableWorkflows = this.availableWorkflows;
        this._handleModalClose(modalRef);
    };
    /**
     * Spawns a modal for editing an existing scheduled task. Passes in our workflow names for usage in the modal.
     */
    SchedulerComponent.prototype.editScheduledTask = function (task) {
        var modalRef = this.modalService.open(_scheduler_modal_component__WEBPACK_IMPORTED_MODULE_5__["SchedulerModalComponent"], { size: 'lg' });
        modalRef.componentInstance.title = "Edit Task " + task.name;
        modalRef.componentInstance.submitText = 'Save Changes';
        modalRef.componentInstance.availableWorkflows = this.availableWorkflows;
        modalRef.componentInstance.workingScheduledTask = this.utils.cloneDeep(task);
        delete modalRef.componentInstance.workingScheduledTask.$$index;
        this._handleModalClose(modalRef);
    };
    /**
     * After user confirmation, will delete a given scheduled task from the database.
     * Removes it from our list of scheduled tasks to display.
     * @param taskToDelete Scheduled Task to delete
     */
    SchedulerComponent.prototype.deleteScheduledTask = function (taskToDelete) {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.utils.confirm("Are you sure you want to delete <b>" + taskToDelete.name + "</b>?")];
                    case 1:
                        _a.sent();
                        this.schedulerService
                            .deleteScheduledTask(taskToDelete.id)
                            .then(function () {
                            _this.scheduledTasks = _this.scheduledTasks.filter(function (scheduledTask) { return scheduledTask.id !== taskToDelete.id; });
                            _this.filterScheduledTasks();
                            _this.toastrService.success("Scheduled Task \"" + taskToDelete.name + "\" successfully deleted.");
                        })
                            .catch(function (e) { return _this.toastrService.error("Error deleting task: " + e.message); });
                        return [2 /*return*/];
                }
            });
        });
    };
    /**
     * Tells the server to change the status of a scheduled task (e.g. 'pause').
     * Updates the local scheduled task on success to reflect this change.
     * @param task Scheduled Task to change the status of
     * @param actionName Action to take on the task
     */
    SchedulerComponent.prototype.changeScheduledTaskStatus = function (task, actionName) {
        var _this = this;
        var newStatus;
        switch (actionName) {
            case 'start':
                newStatus = 'running';
                break;
            case 'pause':
                newStatus = 'paused';
                break;
            case 'stop':
                newStatus = 'stopped';
                break;
            default:
                this.toastrService.error("Attempted to set an unknown status " + actionName);
                break;
        }
        if (!newStatus) {
            return;
        }
        this.schedulerService
            .changeScheduledTaskStatus(task.id, actionName)
            .then(function () {
            task.status = newStatus;
        })
            .catch(function (e) { return _this.toastrService.error("Error changing scheduler status: " + e.message); });
    };
    /**
     * Grabs an array of playbooks/workflows from the server (id, name pairs).
     * From this array, creates an array of Select2Option data with the id and playbook/workflow name.
     */
    SchedulerComponent.prototype.getWorkflows = function () {
        var _this = this;
        this.schedulerService
            .getWorkflows()
            .then(function (workflows) {
            workflows.forEach(function (workflow) {
                _this.availableWorkflows.push({
                    id: workflow.id,
                    text: "" + workflow.name,
                });
            });
        });
    };
    /**
     * Converts the task_trigger of a scheduled task into a readable string for display in the datatable.
     * @param scheduledTask Scheduled task to convert the task_trigger of
     */
    SchedulerComponent.prototype.getRule = function (scheduledTask) {
        //stringify only the truthy args (aka those specified) [seems that the server only returns args that are specified]
        // let out = _.pick(scheduledTask.task_trigger.args, function(value: any) {
        // 	return value;
        // });
        var rule = JSON.stringify(scheduledTask.task_trigger.args, null, 1);
        rule = rule.substr(1, rule.length - 2).replace(/"/g, '');
        return rule;
    };
    /**
     * Converts the workflow ids array of a scheduled task into a readable string for display in the datatable.
     * @param scheduledTask Scheduled task to convert the workflows of
     */
    SchedulerComponent.prototype.getFriendlyWorkflows = function (scheduledTask) {
        if (!this.availableWorkflows || !scheduledTask.workflows || !scheduledTask.workflows.length) {
            return '';
        }
        return this.availableWorkflows.filter(function (workflow) {
            return scheduledTask.workflows.indexOf(workflow.id) >= 0;
        }).map(function (workflow) { return workflow.text; }).join(', ');
    };
    /**
     * On closing an add/edit modal (on clicking save), we will add or update existing scheduled tasks for display.
     * @param modalRef Modal reference that is being closed
     */
    SchedulerComponent.prototype._handleModalClose = function (modalRef) {
        var _this = this;
        modalRef.result
            .then(function (result) {
            //Handle modal dismiss
            if (!result || !result.scheduledTask) {
                return;
            }
            //On edit, find and update the edited item
            if (result.isEdit) {
                var toUpdate = _this.scheduledTasks.find(function (st) { return st.id === result.scheduledTask.id; });
                Object.assign(toUpdate, result.scheduledTask);
                _this.filterScheduledTasks();
                _this.toastrService.success("Scheduled task \"" + result.scheduledTask.name + "\" successfully edited.");
            }
            else {
                _this.scheduledTasks.push(result.scheduledTask);
                _this.filterScheduledTasks();
                _this.toastrService.success("Scheduled task \"" + result.scheduledTask.name + "\" successfully added.");
            }
        }, function (error) { if (error) {
            _this.toastrService.error(error.message);
        } });
    };
    SchedulerComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'scheduler-component',
            template: __webpack_require__(/*! ./scheduler.html */ "./src/app/scheduler/scheduler.html"),
            styles: [__webpack_require__(/*! ./scheduler.scss */ "./src/app/scheduler/scheduler.scss"), __webpack_require__(/*! ../../../node_modules/ng-pick-datetime/styles/picker.min.css */ "./node_modules/ng-pick-datetime/styles/picker.min.css")],
            encapsulation: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewEncapsulation"].None,
            providers: [_scheduler_service__WEBPACK_IMPORTED_MODULE_6__["SchedulerService"]],
        }),
        __metadata("design:paramtypes", [_scheduler_service__WEBPACK_IMPORTED_MODULE_6__["SchedulerService"], _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbModal"],
            ngx_toastr__WEBPACK_IMPORTED_MODULE_3__["ToastrService"], _utilities_service__WEBPACK_IMPORTED_MODULE_7__["UtilitiesService"]])
    ], SchedulerComponent);
    return SchedulerComponent;
}());



/***/ }),

/***/ "./src/app/scheduler/scheduler.html":
/*!******************************************!*\
  !*** ./src/app/scheduler/scheduler.html ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div id=\"main\" class=\"schedulerMain container-fluid\">\r\n\t<h1>Scheduler</h1>\r\n\r\n\t<div class=\"row align-items-center mb-3\">\r\n\t\t<div class=\"col-auto\">\r\n\t\t\t<button (click)=\"addScheduledTask()\" class=\"btn btn-outline-primary\"><i class=\"fa fa-plus\"></i> Add To Schedule</button>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"col\">\r\n\t\t\t<div class=\"row\">\r\n\t\t\t\t<h4 class=\"my-auto mr-2\">Scheduler <span id=\"status\" class=\"text-capitalize\">{{schedulerStatus}}</span></h4>\r\n\t\t\t\t\r\n\t\t\t\t<button *ngIf=\"schedulerStatus && schedulerStatus !== 'running'\" (click)=\"changeSchedulerStatus('start')\" class=\"btn btn-primary mx-1\"\r\n\t\t\t\t\tid=\"startSchedulerBtn\" ngbTooltip=\"Start Scheduler\">\r\n\t\t\t\t\t<i class=\"fa fa-play\"></i>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button *ngIf=\"schedulerStatus && schedulerStatus === 'running'\" (click)=\"changeSchedulerStatus('pause')\" class=\"btn btn-warning mx-1\"\r\n\t\t\t\t\tid=\"pauseSchedulerBtn\" ngbTooltip=\"Pause Scheduler\">\r\n\t\t\t\t\t<i class=\"fa fa-pause\"></i>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button *ngIf=\"schedulerStatus && schedulerStatus === 'running'\" (click)=\"changeSchedulerStatus('stop')\" class=\"btn btn-danger\"\r\n\t\t\t\t\tid=\"stopSchedulerBtn\" ngbTooltip=\"Stop Scheduler\">\r\n\t\t\t\t\t<i class=\"fa fa-stop\"></i>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"col-4\">\r\n\t\t\t<input class=\"form-control\" placeholder=\"Filter Results...\" [formControl]=\"filterQuery\" />\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<ngx-datatable #scheduleTable class='material expandable scheduledTasksTable' [columnMode]=\"'flex'\" [rows]=\"displayScheduledTasks\"\r\n\t [sorts]=\"[{prop: 'name', dir: 'asc'}]\" [sortType]=\"'multi'\" [headerHeight]=\"50\" [footerHeight]=\"50\" [rowHeight]=\"undefined\" [limit]=\"25\">\r\n\t\t<!-- Column Templates -->\r\n\t\t<ngx-datatable-column name=\"Name\" prop=\"name\" [flexGrow]=\"2\">\r\n\t\t\t<ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n\t\t\t\t<span title=\"{{row.description}}\">{{row.name}}</span>\r\n\t\t\t</ng-template>\r\n\t\t</ngx-datatable-column>\r\n\t\t<ngx-datatable-column name=\"Workflow(s)\" [flexGrow]=\"3\" [sortable]=\"false\">\r\n\t\t\t<ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n\t\t\t\t{{getFriendlyWorkflows(row)}}\r\n\t\t\t</ng-template>\r\n\t\t</ngx-datatable-column>\r\n\t\t<ngx-datatable-column name=\"Status\" prop=\"status\" [flexGrow]=\"1\"></ngx-datatable-column>\r\n\t\t<ngx-datatable-column name=\"Type\" prop=\"task_trigger.type\" [flexGrow]=\"1\"></ngx-datatable-column>\r\n\t\t<ngx-datatable-column name=\"Rule\" [sortable]=\"false\" [flexGrow]=\"4\">\r\n\t\t\t<ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n\t\t\t\t{{getRule(row)}}\r\n\t\t\t</ng-template>\r\n\t\t</ngx-datatable-column>\r\n\t\t<ngx-datatable-column name=\"Actions\" [resizeable]=\"false\" [sortable]=\"false\" [draggable]=\"false\" [flexGrow]=\"2\">\r\n\t\t\t<ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n\t\t\t\t<button *ngIf=\"row.status === 'stopped' || row.status === 'paused'\" (click)=\"changeScheduledTaskStatus(row, 'start')\" title=\"Start Scheduled Task\"\r\n\t\t\t\t\tclass=\"mr-1 btn btn-primary\">\r\n\t\t\t\t\t<i class=\"fa fa-play\"></i>\r\n\t\t\t\t</button>\r\n\t\t\t\t<!--<button *ngIf=\"row.status === 'running''\" (click)=\"changeScheduledTaskStatus(row, 'pause')\" title=\"Pause Scheduled Task\"\r\n\t\t\t\t\tclass=\"btn btn-warning\">\r\n\t\t\t\t\t<i class=\"fa fa-pause\"></i>\r\n\t\t\t\t</button>-->\r\n\t\t\t\t<button *ngIf=\"row.status === 'running' || row.status === 'paused'\" (click)=\"changeScheduledTaskStatus(row, 'stop')\" title=\"Stop Scheduled Task\"\r\n\t\t\t\t\tclass=\"mr-1 btn btn-danger\">\r\n\t\t\t\t\t<i class=\"fa fa-stop\"></i>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button (click)=\"editScheduledTask(row)\" class=\"mr-1 btn btn-primary\" title=\"Edit Scheduled Task\">\r\n\t\t\t\t\t<i class=\"fa fa-edit\"></i>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button (click)=\"deleteScheduledTask(row)\" class=\"mr-1 btn btn-danger\" title=\"Delete Scheduled Task\">\r\n\t\t\t\t\t<i class=\"fa fa-times\"></i>\r\n\t\t\t\t</button>\r\n\t\t\t</ng-template>\r\n\t\t</ngx-datatable-column>\r\n\t</ngx-datatable>\r\n</div>"

/***/ }),

/***/ "./src/app/scheduler/scheduler.modal.component.ts":
/*!********************************************************!*\
  !*** ./src/app/scheduler/scheduler.modal.component.ts ***!
  \********************************************************/
/*! exports provided: SchedulerModalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SchedulerModalComponent", function() { return SchedulerModalComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var ngx_toastr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngx-toastr */ "./node_modules/ngx-toastr/fesm5/ngx-toastr.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _scheduler_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./scheduler.service */ "./src/app/scheduler/scheduler.service.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
/* harmony import */ var _models_scheduler_scheduledTask__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../models/scheduler/scheduledTask */ "./src/app/models/scheduler/scheduledTask.ts");
/* harmony import */ var _models_scheduler_scheduledTaskCron__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../models/scheduler/scheduledTaskCron */ "./src/app/models/scheduler/scheduledTaskCron.ts");
/* harmony import */ var _models_scheduler_scheduledTaskInterval__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../models/scheduler/scheduledTaskInterval */ "./src/app/models/scheduler/scheduledTaskInterval.ts");
/* harmony import */ var _models_scheduler_scheduledTaskDate__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../models/scheduler/scheduledTaskDate */ "./src/app/models/scheduler/scheduledTaskDate.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var SchedulerModalComponent = /** @class */ (function () {
    function SchedulerModalComponent(schedulerService, activeModal, toastrService) {
        this.schedulerService = schedulerService;
        this.activeModal = activeModal;
        this.toastrService = toastrService;
        this.workingScheduledTask = new _models_scheduler_scheduledTask__WEBPACK_IMPORTED_MODULE_6__["ScheduledTask"]();
        this.availableWorkflows = [];
        this.scheduledItemTriggerTypes = ['date', 'interval', 'cron'];
        this.cron = new _models_scheduler_scheduledTaskCron__WEBPACK_IMPORTED_MODULE_7__["ScheduledTaskCron"]();
        this.interval = new _models_scheduler_scheduledTaskInterval__WEBPACK_IMPORTED_MODULE_8__["ScheduledTaskInterval"]();
        this.date = new _models_scheduler_scheduledTaskDate__WEBPACK_IMPORTED_MODULE_9__["ScheduledTaskDate"]();
    }
    /**
     * Initializes the workflow select config for selecting workflows to schedule.
     */
    SchedulerModalComponent.prototype.ngOnInit = function () {
        this.workflowSelectConfig = {
            width: '100%',
            multiple: true,
            allowClear: true,
            placeholder: 'Select workflow(s) to run...',
            closeOnSelect: false,
        };
    };
    /**
     * Adds a new / updates an existing scheduled task. Will also convert fields under task trigger to int if applicable.
     */
    SchedulerModalComponent.prototype.submit = function () {
        var _this = this;
        var validationMessage = this.validate();
        if (validationMessage) {
            this.toastrService.error(validationMessage);
            return;
        }
        if (this.workingScheduledTask.task_trigger.type === 'cron') {
            this.convertStringsToInt(this.workingScheduledTask.task_trigger.args);
        }
        //If device has an ID, device already exists, call update
        if (this.workingScheduledTask.id) {
            this.schedulerService
                .editScheduledTask(this.workingScheduledTask)
                .then(function (scheduledTask) { return _this.activeModal.close({
                scheduledTask: scheduledTask,
                isEdit: true,
            }); })
                .catch(function (e) { return _this.toastrService.error(e.message); });
        }
        else {
            this.schedulerService
                .addScheduledTask(this.workingScheduledTask)
                .then(function (scheduledTask) { return _this.activeModal.close({
                scheduledTask: scheduledTask,
                isEdit: false,
            }); })
                .catch(function (e) { return _this.toastrService.error(e.message); });
        }
    };
    /**
     * Validates a scheduled task. Checks basic info (name, workflows specified).
     * Ensures args is specifies as well as a start date. Ensures that end date is not before start date.
     * If it's an interval or cron, checks if any other param exists in args.
     */
    SchedulerModalComponent.prototype.validate = function () {
        if (!this.workingScheduledTask.name) {
            return 'A name is required.';
        }
        if (!this.workingScheduledTask.workflows || !this.workingScheduledTask.workflows.length) {
            return 'Please specify at least one workflow to be run.';
        }
        var args = this.workingScheduledTask.task_trigger.args;
        if (!args) {
            return 'Please select a type and fill out the trigger parameters.';
        }
        if (!(args.start_date || args.run_date)) {
            return 'A start date is required.';
        }
        if (this.workingScheduledTask.task_trigger.type === 'interval' ||
            this.workingScheduledTask.task_trigger.type === 'cron') {
            var startDate = +args.start_date;
            var endDate = +args.end_date;
            if (startDate > endDate) {
                return 'The end date cannot be before the start date.';
            }
        }
        if (this.workingScheduledTask.task_trigger.type === 'interval') {
            if (!this._doesArgsHaveAnything(args)) {
                return 'You must specify some interval of time for the actions to occur.';
            }
        }
        if (this.workingScheduledTask.task_trigger.type === 'cron') {
            if (!this._doesArgsHaveAnything(args)) {
                return 'You must specify some cron parameters for the actions to occur.';
            }
        }
        return '';
    };
    /**
     * Checks if this args object has any value other than start/end date.
     * @param args Args object to check against
     */
    SchedulerModalComponent.prototype._doesArgsHaveAnything = function (args) {
        var ret = false;
        Object.keys(args).forEach(function (key) {
            // Will reject falsy values (including 0 as that is not an applicable value here)
            // Will also ignore start/end dates here
            if (ret || key === 'start_date' || key === 'end_date' || !args[key]) {
                return;
            }
            // For strings, trim and check if they're wildcards (0/*)
            if (typeof (args[key]) === 'string') {
                args[key] = args[key].trim();
                if (args[key] && !(args[key] === '0' || args[key] === '*')) {
                    ret = true;
                }
                // For other types (int), return true (aka it's != 0)
            }
            else {
                ret = true;
            }
        });
        return ret;
    };
    /**
     * Switches between the types of scheduled task on the working scheduled task
     * (all stored locally so we don't lose information if we switch type).
     * @param type Event value from the type select.
     */
    SchedulerModalComponent.prototype.changeType = function (type) {
        switch (type) {
            case 'cron':
                this.workingScheduledTask.task_trigger.args = this.cron;
                break;
            case 'interval':
                this.workingScheduledTask.task_trigger.args = this.interval;
                break;
            case 'date':
                this.workingScheduledTask.task_trigger.args = this.date;
                break;
            default:
                this.workingScheduledTask.task_trigger.args = null;
                break;
        }
    };
    /**
     * Updates the working scheduled task's workflows from the event value.
     * @param event JS Event from workflows select2
     */
    SchedulerModalComponent.prototype.workflowsSelectChanged = function (event) {
        this.workingScheduledTask.workflows = event.value;
    };
    /**
     * Returns today's date to be used in initializing the minimum date in our date selector.
     */
    SchedulerModalComponent.prototype.getToday = function () {
        return moment__WEBPACK_IMPORTED_MODULE_3__().format('YYYY-MM-DD');
    };
    /**
     * For each value in the args object that can convert to number, convert it to number.
     * @param args Args object to check
     */
    SchedulerModalComponent.prototype.convertStringsToInt = function (args) {
        if (typeof (args) !== 'object') {
            return;
        }
        for (var _i = 0, _a = Object.entries(args); _i < _a.length; _i++) {
            var _b = _a[_i], key = _b[0], value = _b[1];
            if (key === 'start_date' || key === 'end_date') {
                return;
            }
            if (isNaN(value)) {
                return;
            }
            args[key] = +value;
        }
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _models_scheduler_scheduledTask__WEBPACK_IMPORTED_MODULE_6__["ScheduledTask"])
    ], SchedulerModalComponent.prototype, "workingScheduledTask", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], SchedulerModalComponent.prototype, "title", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], SchedulerModalComponent.prototype, "submitText", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], SchedulerModalComponent.prototype, "availableWorkflows", void 0);
    SchedulerModalComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'scheduler-modal',
            template: __webpack_require__(/*! ./scheduler.modal.html */ "./src/app/scheduler/scheduler.modal.html"),
            styles: [__webpack_require__(/*! ./scheduler.scss */ "./src/app/scheduler/scheduler.scss")],
            providers: [_scheduler_service__WEBPACK_IMPORTED_MODULE_4__["SchedulerService"], _utilities_service__WEBPACK_IMPORTED_MODULE_5__["UtilitiesService"]],
        }),
        __metadata("design:paramtypes", [_scheduler_service__WEBPACK_IMPORTED_MODULE_4__["SchedulerService"], _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__["NgbActiveModal"],
            ngx_toastr__WEBPACK_IMPORTED_MODULE_2__["ToastrService"]])
    ], SchedulerModalComponent);
    return SchedulerModalComponent;
}());



/***/ }),

/***/ "./src/app/scheduler/scheduler.modal.html":
/*!************************************************!*\
  !*** ./src/app/scheduler/scheduler.modal.html ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal-header\">\r\n\t<h4 class=\"modal-title\">{{title}}</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n\t<div class=\"container-fluid\">\r\n\t\t<div class=\"form-group\">\r\n\t\t\t<label for=\"name\">Workflow(s)</label>\r\n\t\t\t<!--No two-way binding available - ng-select2 package has it but requires transpiling-->\r\n\t\t\t<select2 [data]=\"availableWorkflows\" [value]=\"workingScheduledTask.workflows\" [options]=\"workflowSelectConfig\"\r\n\t\t\t\tname=\"workflows\" tabindex=\"2\" (valueChanged)=\"workflowsSelectChanged($event)\"></select2>\r\n\t\t</div>\r\n\t\t<div class=\"row\">\r\n\t\t\t<div class=\"col-6\">\r\n\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t<label for=\"name\">Name</label>\r\n\t\t\t\t\t<input type=\"text\" class=\"form-control\" [(ngModel)]=\"workingScheduledTask.name\" name=\"name\" required tabindex=\"1\">\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t<label for=\"name\">Trigger Type</label>\r\n\t\t\t\t\t<select class=\"form-control\" [(ngModel)]=\"workingScheduledTask.task_trigger.type\" name=\"type\" tabindex=\"4\" (change)=\"changeType($event.target.value)\">\r\n\t\t\t\t\t\t<option value=\"\"></option>\r\n\t\t\t\t\t\t<option *ngFor=\"let i of scheduledItemTriggerTypes\" [value]=\"i\" [label]=\"i\">{{i}}</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"col-6\">\r\n\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t<label for=\"name\">Description</label>\r\n\t\t\t\t\t<textarea class=\"form-control\" [(ngModel)]=\"workingScheduledTask.description\" name=\"port\" required tabindex=\"2\" rows=\"5\"></textarea>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"row\" *ngIf=\"workingScheduledTask.task_trigger.type === 'date'\">\r\n\t\t\t<div class=\"col-12\">\r\n\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t<label for=\"name\">Run Datetime</label>\r\n\t\t\t\t\t<input class=\"form-control\" [value]=\"workingScheduledTask.task_trigger.args.run_date | date: 'short'\" [(ngModel)]=\"workingScheduledTask.task_trigger.args.run_date\"\r\n\t\t\t\t\t\tname=\"run_date\" [minMoment]=\"getToday()\" dateTimePicker required />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div *ngIf=\"workingScheduledTask.task_trigger.type === 'interval'\">\r\n\t\t\t<div class=\"row\">\r\n\t\t\t\t<div class=\"col-6\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"name\">Start Datetime</label>\r\n\t\t\t\t\t\t<input class=\"form-control\" [value]=\"workingScheduledTask.task_trigger.args.start_date | date: 'short'\" [(ngModel)]=\"workingScheduledTask.task_trigger.args.start_date\"\r\n\t\t\t\t\t\t\tname=\"start_date\" [minMoment]=\"getToday()\" dateTimePicker required />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"col-6\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"name\">End Datetime</label>\r\n\t\t\t\t\t\t<input class=\"form-control\" [value]=\"workingScheduledTask.task_trigger.args.end_date | date: 'short'\" [(ngModel)]=\"workingScheduledTask.task_trigger.args.end_date\"\r\n\t\t\t\t\t\t\tname=\"end_date\" [minMoment]=\"getToday()\" dateTimePicker />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"row\">\r\n\t\t\t\t<div class=\"col-2\">\r\n\t\t\t\t\t<h3>Occur every...</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"col-2\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"name\">Weeks</label>\r\n\t\t\t\t\t\t<input type=\"number\" min=\"0\" class=\"form-control\" [(ngModel)]=\"workingScheduledTask.task_trigger.args.weeks\" name=\"weeks\" required>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"col-2\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"name\">Days</label>\r\n\t\t\t\t\t\t<input type=\"number\" min=\"0\" class=\"form-control\" [(ngModel)]=\"workingScheduledTask.task_trigger.args.days\" name=\"days\" required>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"col-2\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"name\">Hours</label>\r\n\t\t\t\t\t\t<input type=\"number\" min=\"0\" class=\"form-control\" [(ngModel)]=\"workingScheduledTask.task_trigger.args.hours\" name=\"hours\" required>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"col-2\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"name\">Minutes</label>\r\n\t\t\t\t\t\t<input type=\"number\" min=\"0\" class=\"form-control\" [(ngModel)]=\"workingScheduledTask.task_trigger.args.minutes\" name=\"minutes\"\r\n\t\t\t\t\t\t\trequired>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"col-2\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"name\">Seconds</label>\r\n\t\t\t\t\t\t<input type=\"number\" min=\"0\" class=\"form-control\" [(ngModel)]=\"workingScheduledTask.task_trigger.args.seconds\" name=\"seconds\"\r\n\t\t\t\t\t\t\trequired>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div *ngIf=\"workingScheduledTask.task_trigger.type === 'cron'\">\r\n\t\t\t<div class=\"row\">\r\n\t\t\t\t<div class=\"col-6\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"name\">Start Datetime</label>\r\n\t\t\t\t\t\t<input class=\"form-control\" [value]=\"workingScheduledTask.task_trigger.args.start_date | date: 'short'\" [(ngModel)]=\"workingScheduledTask.task_trigger.args.start_date\"\r\n\t\t\t\t\t\t\tname=\"start_date\" [minMoment]=\"getToday()\" dateTimePicker required />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"col-6\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"name\">End Datetime</label>\r\n\t\t\t\t\t\t<input class=\"form-control\" [value]=\"workingScheduledTask.task_trigger.args.end_date | date: 'short'\" [(ngModel)]=\"workingScheduledTask.task_trigger.args.end_date\"\r\n\t\t\t\t\t\t\tname=\"end_date\" [minMoment]=\"getToday()\" dateTimePicker />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"row\">\r\n\t\t\t\t<div class=\"col-3\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"name\">Year</label>\r\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" [(ngModel)]=\"workingScheduledTask.task_trigger.args.year\" name=\"year\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"name\">Day</label>\r\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" [(ngModel)]=\"workingScheduledTask.task_trigger.args.day\" name=\"day\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"col-3\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"name\">Month</label>\r\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" [(ngModel)]=\"workingScheduledTask.task_trigger.args.month\" name=\"month\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"name\">Hour</label>\r\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" [(ngModel)]=\"workingScheduledTask.task_trigger.args.hour\" name=\"hour\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"col-3\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"name\">Week</label>\r\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" [(ngModel)]=\"workingScheduledTask.task_trigger.args.week\" name=\"week\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"name\">Minute</label>\r\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" [(ngModel)]=\"workingScheduledTask.task_trigger.args.minute\" name=\"minute\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"col-3\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"name\">Day of Week</label>\r\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" [(ngModel)]=\"workingScheduledTask.task_trigger.args.day_of_week\" name=\"day_of_week\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"name\">Second</label>\r\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" [(ngModel)]=\"workingScheduledTask.task_trigger.args.second\" name=\"second\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n<div class=\"modal-footer\">\r\n\t<button type=\"button\" class=\"btn btn-secondary\" (click)=\"activeModal.dismiss()\">Undo Changes and Close</button>\r\n\t<button type=\"button\" class=\"btn btn-primary\" (click)=\"submit()\">{{submitText}}</button>\r\n</div>"

/***/ }),

/***/ "./src/app/scheduler/scheduler.scss":
/*!******************************************!*\
  !*** ./src/app/scheduler/scheduler.scss ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "/* @import '/client/node_modules/ng-pick-datetime/styles/picker.min.css'; */\n.schedulerMain {\n  padding: 10px 15px; }\n.schedulerMain #schedulerStatus {\n  display: inline-block; }\n.schedulerMain ngx-datatable datatable-body datatable-body-row datatable-body-cell .datatable-body-cell-label {\n  white-space: initial; }\n"

/***/ }),

/***/ "./src/app/scheduler/scheduler.service.ts":
/*!************************************************!*\
  !*** ./src/app/scheduler/scheduler.service.ts ***!
  \************************************************/
/*! exports provided: SchedulerService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SchedulerService", function() { return SchedulerService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var rxjs_add_operator_map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs/add/operator/map */ "./node_modules/rxjs-compat/_esm5/add/operator/map.js");
/* harmony import */ var rxjs_add_operator_toPromise__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/add/operator/toPromise */ "./node_modules/rxjs-compat/_esm5/add/operator/toPromise.js");
/* harmony import */ var rxjs_add_operator_toPromise__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(rxjs_add_operator_toPromise__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _models_scheduler_scheduledTask__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../models/scheduler/scheduledTask */ "./src/app/models/scheduler/scheduledTask.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
/* harmony import */ var _models_playbook_workflow__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../models/playbook/workflow */ "./src/app/models/playbook/workflow.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var schedulerStatusNumberMapping = {
    0: 'stopped',
    1: 'running',
    2: 'paused',
};
var SchedulerService = /** @class */ (function () {
    function SchedulerService(http, utils) {
        this.http = http;
        this.utils = utils;
    }
    SchedulerService.prototype.getSchedulerStatus = function () {
        return this.http.get('/api/scheduler')
            .toPromise()
            .then(function (statusObj) { return schedulerStatusNumberMapping[statusObj.status]; })
            .catch(this.utils.handleResponseError);
    };
    SchedulerService.prototype.changeSchedulerStatus = function (status) {
        return this.http.put('/api/scheduler', { status: status })
            .toPromise()
            .then(function (statusObj) { return schedulerStatusNumberMapping[statusObj.status]; })
            .catch(this.utils.handleResponseError);
    };
    SchedulerService.prototype.getAllScheduledTasks = function () {
        return this.utils.paginateAll(this.getScheduledTasks.bind(this));
    };
    SchedulerService.prototype.getScheduledTasks = function (page) {
        if (page === void 0) { page = 1; }
        return this.http.get("/api/scheduledtasks?page=" + page)
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_4__["plainToClass"])(_models_scheduler_scheduledTask__WEBPACK_IMPORTED_MODULE_5__["ScheduledTask"], data); })
            .catch(this.utils.handleResponseError);
    };
    SchedulerService.prototype.addScheduledTask = function (scheduledTask) {
        return this.http.post('/api/scheduledtasks', scheduledTask)
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_4__["plainToClass"])(_models_scheduler_scheduledTask__WEBPACK_IMPORTED_MODULE_5__["ScheduledTask"], data); })
            .catch(this.utils.handleResponseError);
    };
    SchedulerService.prototype.editScheduledTask = function (scheduledTask) {
        return this.http.put('/api/scheduledtasks', scheduledTask)
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_4__["plainToClass"])(_models_scheduler_scheduledTask__WEBPACK_IMPORTED_MODULE_5__["ScheduledTask"], data); })
            .catch(this.utils.handleResponseError);
    };
    SchedulerService.prototype.deleteScheduledTask = function (scheduledTaskId) {
        return this.http.delete("/api/scheduledtasks/" + scheduledTaskId)
            .toPromise()
            .then(function () { return null; })
            .catch(this.utils.handleResponseError);
    };
    SchedulerService.prototype.changeScheduledTaskStatus = function (scheduledTaskId, actionName) {
        return this.http.patch('/api/scheduledtasks', { id: scheduledTaskId, action: actionName })
            .toPromise()
            .then(function () { return null; })
            .catch(this.utils.handleResponseError);
    };
    SchedulerService.prototype.getWorkflows = function () {
        return this.http.get('/api/workflows')
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_4__["plainToClass"])(_models_playbook_workflow__WEBPACK_IMPORTED_MODULE_7__["Workflow"], data); })
            .catch(this.utils.handleResponseError);
    };
    SchedulerService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_angular_common_http__WEBPACK_IMPORTED_MODULE_1__["HttpClient"], _utilities_service__WEBPACK_IMPORTED_MODULE_6__["UtilitiesService"]])
    ], SchedulerService);
    return SchedulerService;
}());



/***/ }),

/***/ "./src/app/settings/settings.component.ts":
/*!************************************************!*\
  !*** ./src/app/settings/settings.component.ts ***!
  \************************************************/
/*! exports provided: SettingsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SettingsComponent", function() { return SettingsComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var ngx_toastr__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngx-toastr */ "./node_modules/ngx-toastr/fesm5/ngx-toastr.js");
/* harmony import */ var rxjs_add_operator_debounceTime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/add/operator/debounceTime */ "./node_modules/rxjs-compat/_esm5/add/operator/debounceTime.js");
/* harmony import */ var _settings_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./settings.service */ "./src/app/settings/settings.service.ts");
/* harmony import */ var _settings_user_modal_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./settings.user.modal.component */ "./src/app/settings/settings.user.modal.component.ts");
/* harmony import */ var _models_configuration__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../models/configuration */ "./src/app/models/configuration.ts");
/* harmony import */ var _models_workingUser__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../models/workingUser */ "./src/app/models/workingUser.ts");
/* harmony import */ var _settings_timeout_modal_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./settings.timeout.modal.component */ "./src/app/settings/settings.timeout.modal.component.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};











var SettingsComponent = /** @class */ (function () {
    function SettingsComponent(settingsService, modalService, toastrService, utils) {
        var _this = this;
        this.settingsService = settingsService;
        this.modalService = modalService;
        this.toastrService = toastrService;
        this.utils = utils;
        this.configuration = new _models_configuration__WEBPACK_IMPORTED_MODULE_7__["Configuration"]();
        //User Data Table params
        this.users = [];
        this.displayUsers = [];
        this.filterQuery = new _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormControl"]();
        this.roles = [];
        this.getConfiguration();
        this.getUsers();
        this.getRoles();
        this.filterQuery
            .valueChanges
            .debounceTime(500)
            .subscribe(function (event) { return _this.filterUsers(); });
    }
    SettingsComponent.prototype.filterUsers = function () {
        var searchFilter = this.filterQuery.value ? this.filterQuery.value.toLocaleLowerCase() : '';
        this.displayUsers = this.users.filter(function (user) {
            return user.username.toLocaleLowerCase().includes(searchFilter);
        });
    };
    // System Settings
    SettingsComponent.prototype.getConfiguration = function () {
        var _this = this;
        this.settingsService
            .getConfiguration()
            .then(function (configuration) {
            Object.assign(_this.configuration, configuration);
        })
            .catch(function (e) { return _this.toastrService.error(e.message); });
    };
    SettingsComponent.prototype.updateConfiguration = function () {
        var _this = this;
        this.settingsService
            .updateConfiguration(this.configuration)
            .then(function (configuration) {
            Object.assign(_this.configuration, configuration);
            _this.toastrService.success('Configuration successfully updated.');
        })
            .catch(function (e) { return _this.toastrService.error(e.message); });
    };
    //TODO: add a better confirm dialog
    SettingsComponent.prototype.resetConfiguration = function () {
        if (!confirm("Are you sure you want to reset the configuration? \
			Note that you'll have to save the configuration after reset to update it on the server.")) {
            return;
        }
        Object.assign(this.configuration, _models_configuration__WEBPACK_IMPORTED_MODULE_7__["Configuration"].getDefaultConfiguration());
    };
    SettingsComponent.prototype.getRoles = function () {
        var _this = this;
        this.settingsService
            .getRoles()
            .then(function (roles) { return _this.roles = roles; })
            .catch(function (e) { return _this.toastrService.error("Error retrieving roles: " + e.message); });
    };
    SettingsComponent.prototype.getUsers = function () {
        var _this = this;
        this.settingsService
            .getAllUsers()
            .then(function (users) { return _this.displayUsers = _this.users = users; })
            .catch(function (e) { return _this.toastrService.error("Error retrieving users: " + e.message); });
    };
    SettingsComponent.prototype.addUser = function () {
        var modalRef = this.modalService.open(_settings_user_modal_component__WEBPACK_IMPORTED_MODULE_6__["SettingsUserModalComponent"]);
        modalRef.componentInstance.title = 'Add New User';
        modalRef.componentInstance.submitText = 'Add User';
        modalRef.componentInstance.roles = this.roles;
        var workingUser = new _models_workingUser__WEBPACK_IMPORTED_MODULE_8__["WorkingUser"]();
        workingUser.active = true;
        modalRef.componentInstance.workingUser = workingUser;
        this._handleModalClose(modalRef);
    };
    SettingsComponent.prototype.editTimeout = function () {
        var _this = this;
        var modalRef = this.modalService.open(_settings_timeout_modal_component__WEBPACK_IMPORTED_MODULE_9__["SettingsTimeoutModalComponent"]);
        modalRef.componentInstance.configuration = this.configuration;
        modalRef.result.then(function () { return _this.updateConfiguration(); }).catch(function () { return null; });
    };
    SettingsComponent.prototype.editUser = function (user) {
        var modalRef = this.modalService.open(_settings_user_modal_component__WEBPACK_IMPORTED_MODULE_6__["SettingsUserModalComponent"]);
        modalRef.componentInstance.title = "Edit User: " + user.username;
        modalRef.componentInstance.submitText = 'Save Changes';
        modalRef.componentInstance.roles = this.roles;
        modalRef.componentInstance.workingUser = _models_workingUser__WEBPACK_IMPORTED_MODULE_8__["WorkingUser"].fromUser(user);
        this._handleModalClose(modalRef);
    };
    SettingsComponent.prototype.deleteUser = function (userToDelete) {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.utils.confirm("Are you sure you want to delete <b>" + userToDelete.username + "</b>?")];
                    case 1:
                        _a.sent();
                        this.settingsService
                            .deleteUser(userToDelete.id)
                            .then(function () {
                            _this.users = _this.users.filter(function (user) { return user.id !== userToDelete.id; });
                            _this.filterUsers();
                            _this.toastrService.success("User \"" + userToDelete.username + "\" successfully deleted.");
                        })
                            .catch(function (e) { return _this.toastrService.error(e.message); });
                        return [2 /*return*/];
                }
            });
        });
    };
    SettingsComponent.prototype.getFriendlyRoles = function (roles) {
        return roles.map(function (r) { return r.name; }).join(', ');
    };
    SettingsComponent.prototype.getFriendlyBool = function (val) {
        return val ? 'Yes' : 'No';
    };
    SettingsComponent.prototype._handleModalClose = function (modalRef) {
        var _this = this;
        modalRef.result
            .then(function (result) {
            //Handle modal dismiss
            if (!result || !result.user) {
                return;
            }
            //On edit, find and update the edited item
            if (result.isEdit) {
                var toUpdate = _this.users.find(function (u) { return u.id === result.user.id; });
                Object.assign(toUpdate, result.user);
                _this.filterUsers();
                _this.toastrService.success("User \"" + result.user.username + "\" successfully edited.");
            }
            else {
                _this.users.push(result.user);
                _this.filterUsers();
                _this.toastrService.success("User \"" + result.user.username + "\" successfully added.");
            }
        }, function (error) { if (error) {
            _this.toastrService.error(error.message);
        } });
    };
    SettingsComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'settings-component',
            template: __webpack_require__(/*! ./settings.html */ "./src/app/settings/settings.html"),
            styles: [__webpack_require__(/*! ./settings.scss */ "./src/app/settings/settings.scss")],
            providers: [_settings_service__WEBPACK_IMPORTED_MODULE_5__["SettingsService"]],
        }),
        __metadata("design:paramtypes", [_settings_service__WEBPACK_IMPORTED_MODULE_5__["SettingsService"], _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbModal"],
            ngx_toastr__WEBPACK_IMPORTED_MODULE_3__["ToastrService"], _utilities_service__WEBPACK_IMPORTED_MODULE_10__["UtilitiesService"]])
    ], SettingsComponent);
    return SettingsComponent;
}());



/***/ }),

/***/ "./src/app/settings/settings.html":
/*!****************************************!*\
  !*** ./src/app/settings/settings.html ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div id=\"main\" class=\"settingsMain\">\r\n    <ul class=\"nav nav-tabs\" role=\"tablist\">\r\n        <li class=\"nav-item\"><a class=\"nav-link active\"href=\"#containerSettings\" data-toggle=\"tab\" role=\"tab\">Container Settings</a></li>\r\n        <li class=\"nav-item\"><a class=\"nav-link\"href=\"#userSettings\" data-toggle=\"tab\" role=\"tab\">User Settings</a></li>\r\n        <li class=\"nav-item\"><a class=\"nav-link\"href=\"#roleSettings\" data-toggle=\"tab\" role=\"tab\">Role Settings</a></li>\r\n    </ul>\r\n    <div class=\"tab-content\">\r\n        <div id=\"containerSettings\" class=\"tab-pane fade show active\">\r\n            <h1 class=\"settingsHeader\">Container Settings</h1>\r\n            <div class=\"d-flex justify-content-center align-items-center mt-5\">\r\n                    <div class=\"card bg-light border-0 shadow-sm w-50\">\r\n                            <div class=\"card-body\">\r\n                                <h4 class=\"mb-3\">Portainer.io</h4>\r\n                                <p>\r\n                                    Docker stack management and logs are provided by <a href=\"https://www.portainer.io/\" target=\"_blank\">portainer.io</a>.\r\n                                    Use the button below to view container information for this WALKOFF instance.\r\n                                </p>\r\n                                <p class=\"d-flex justify-content-center align-items-center\">\r\n                                    <a class=\"btn btn-primary\" href=\"/portainer/\" target=\"_blank\">Manage Stack</a>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n            </div>\r\n        </div>\r\n        <div id=\"userSettings\" class=\"tab-pane fade\">\r\n            <h1 class=\"settingsHeader\">User Settings</h1>\r\n\r\n            <div class=\"row\">\r\n                <div class=\"col-6\">\r\n                    <button (click)=\"addUser()\" class=\"btn btn-outline-primary mx-1\"><i class=\"fa fa-plus\"></i> Add User</button>\r\n                    <button (click)=\"editTimeout()\" class=\"btn btn-outline-primary mx-1\">Timeout Settings</button>\r\n                </div>\r\n                <div class=\"col-6\">\r\n                    <div class=\"form-group d-flex justify-content-end\">\r\n                        <div class=\"col-8 px-0\">\r\n                            <input class=\"form-control\" placeholder=\"Filter Users...\" [formControl]=\"filterQuery\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <ngx-datatable #userTable class='material expandable' [columnMode]=\"'flex'\" [rows]=\"displayUsers\"\r\n             [headerHeight]=\"50\" [footerHeight]=\"50\" [rowHeight]=\"undefined\" [sortType]=\"'multi'\" [sorts]=\"[{prop: 'username', dir: 'asc'}]\" [limit]=\"10\">\r\n                <!-- Column Templates -->\r\n                <ngx-datatable-column name=\"Username\" prop=\"username\" [flexGrow]=\"3\"></ngx-datatable-column>\r\n                <ngx-datatable-column name=\"Roles\" [sortable]=\"false\" [flexGrow]=\"3\">\r\n                    <ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n                        {{getFriendlyRoles(row.roles)}}\r\n                    </ng-template>\r\n                </ngx-datatable-column>\r\n                <ngx-datatable-column name=\"Active\" prop=\"active\" [flexGrow]=\"1\">\r\n                    <ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n                        {{getFriendlyBool(row.active)}}\r\n                    </ng-template>\r\n                </ngx-datatable-column>\r\n                <ngx-datatable-column name=\"Actions\" [resizeable]=\"false\" [sortable]=\"false\" [draggable]=\"false\" [flexGrow]=\"2\">\r\n                    <ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n                        <button (click)=\"editUser(row)\" class=\"btn btn-primary mx-1\" ngbTooltip=\"Edit User\">\r\n                            <i class=\"fa fa-edit\"></i>\r\n                        </button>\r\n                        <button (click)=\"deleteUser(row)\" class=\"btn btn-danger mx-1\" ngbTooltip=\"Delete User\">\r\n                            <i class=\"fa fa-times\"></i>\r\n                        </button>\r\n                    </ng-template>\r\n                </ngx-datatable-column>\r\n            </ngx-datatable>\r\n        </div>\r\n\r\n        <div id=\"roleSettings\" class=\"tab-pane fade\">\r\n            <settings-roles-component></settings-roles-component>\r\n        </div>\r\n    </div>\r\n</div>"

/***/ }),

/***/ "./src/app/settings/settings.roles.component.ts":
/*!******************************************************!*\
  !*** ./src/app/settings/settings.roles.component.ts ***!
  \******************************************************/
/*! exports provided: SettingsRolesComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SettingsRolesComponent", function() { return SettingsRolesComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var ngx_toastr__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ngx-toastr */ "./node_modules/ngx-toastr/fesm5/ngx-toastr.js");
/* harmony import */ var rxjs_add_operator_debounceTime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/add/operator/debounceTime */ "./node_modules/rxjs-compat/_esm5/add/operator/debounceTime.js");
/* harmony import */ var _settings_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./settings.service */ "./src/app/settings/settings.service.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
/* harmony import */ var _settings_roles_modal_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./settings.roles.modal.component */ "./src/app/settings/settings.roles.modal.component.ts");
/* harmony import */ var _models_role__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../models/role */ "./src/app/models/role.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};









var SettingsRolesComponent = /** @class */ (function () {
    function SettingsRolesComponent(settingsService, modalService, toastrService, utils) {
        var _this = this;
        this.settingsService = settingsService;
        this.modalService = modalService;
        this.toastrService = toastrService;
        this.utils = utils;
        this.availableResourceActions = [];
        //Role Data Table params
        this.roles = [];
        this.displayRoles = [];
        this.filterQuery = new _angular_forms__WEBPACK_IMPORTED_MODULE_1__["FormControl"]();
        this.getAvailableResourceActions();
        this.getRoles();
        this.filterQuery
            .valueChanges
            .debounceTime(500)
            .subscribe(function (event) { return _this.filterRoles(); });
    }
    SettingsRolesComponent.prototype.filterRoles = function () {
        var searchFilter = this.filterQuery.value ? this.filterQuery.value.toLocaleLowerCase() : '';
        this.displayRoles = this.roles.filter(function (user) {
            return user.name.toLocaleLowerCase().includes(searchFilter);
        });
    };
    SettingsRolesComponent.prototype.getAvailableResourceActions = function () {
        var _this = this;
        this.settingsService
            .getAvailableResourceActions()
            .then(function (availableResourceActions) { return _this.availableResourceActions = availableResourceActions; })
            .catch(function (e) { return _this.toastrService.error(e.message); });
    };
    SettingsRolesComponent.prototype.getRoles = function () {
        var _this = this;
        this.settingsService
            .getRoles()
            .then(function (roles) { return _this.displayRoles = _this.roles = roles; })
            .catch(function (e) { return _this.toastrService.error(e.message); });
    };
    SettingsRolesComponent.prototype.addRole = function () {
        var modalRef = this.modalService.open(_settings_roles_modal_component__WEBPACK_IMPORTED_MODULE_7__["SettingsRoleModalComponent"]);
        modalRef.componentInstance.title = 'Add New Role';
        modalRef.componentInstance.submitText = 'Add Role';
        modalRef.componentInstance.availableResourceActions = this.availableResourceActions;
        modalRef.componentInstance.workingRole = new _models_role__WEBPACK_IMPORTED_MODULE_8__["Role"]();
        this._handleModalClose(modalRef);
    };
    SettingsRolesComponent.prototype.editRole = function (role) {
        var modalRef = this.modalService.open(_settings_roles_modal_component__WEBPACK_IMPORTED_MODULE_7__["SettingsRoleModalComponent"]);
        modalRef.componentInstance.title = "Edit Role: " + role.name;
        modalRef.componentInstance.submitText = 'Save Changes';
        modalRef.componentInstance.availableResourceActions = this.availableResourceActions;
        modalRef.componentInstance.workingRole = this.utils.cloneDeep(role);
        this._handleModalClose(modalRef);
    };
    SettingsRolesComponent.prototype.deleteRole = function (roleToDelete) {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.utils.confirm("Are you sure you want to delete <b>" + roleToDelete.name + "</b>?")];
                    case 1:
                        _a.sent();
                        this.settingsService
                            .deleteRole(roleToDelete.id)
                            .then(function () {
                            _this.roles = _this.roles.filter(function (role) { return role.id !== roleToDelete.id; });
                            _this.filterRoles();
                            _this.toastrService.success("Role \"" + roleToDelete.name + "\" successfully deleted.");
                        })
                            .catch(function (e) { return _this.toastrService.error(e.message); });
                        return [2 /*return*/];
                }
            });
        });
    };
    SettingsRolesComponent.prototype.getFriendlyPermissions = function (role) {
        var obj = role.resources.reduce(function (accumulator, resource) {
            var key = resource.name;
            if (resource.app_name) {
                key += " - " + resource.app_name;
            }
            accumulator[key] = resource.permissions;
            return accumulator;
        }, {});
        var out = JSON.stringify(obj, null, 1);
        out = out.replace(/[\{\}"]/g, '').trim();
        return out;
    };
    SettingsRolesComponent.prototype._handleModalClose = function (modalRef) {
        var _this = this;
        modalRef.result
            .then(function (result) {
            //Handle modal dismiss
            if (!result || !result.role) {
                return;
            }
            //On edit, find and update the edited item
            if (result.isEdit) {
                var toUpdate = _this.roles.find(function (r) { return r.id === result.role.id; });
                Object.assign(toUpdate, result.role);
                _this.filterRoles();
                _this.toastrService.success("Role \"" + result.role.name + "\" successfully edited.");
            }
            else {
                _this.roles.push(result.role);
                _this.filterRoles();
                _this.toastrService.success("Role \"" + result.role.name + "\" successfully added.");
            }
        }, function (error) { if (error) {
            _this.toastrService.error(error.message);
        } });
    };
    SettingsRolesComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'settings-roles-component',
            template: __webpack_require__(/*! ./settings.roles.html */ "./src/app/settings/settings.roles.html"),
            styles: [__webpack_require__(/*! ./settings.scss */ "./src/app/settings/settings.scss")],
            encapsulation: _angular_core__WEBPACK_IMPORTED_MODULE_0__["ViewEncapsulation"].None,
            providers: [_settings_service__WEBPACK_IMPORTED_MODULE_5__["SettingsService"]],
        }),
        __metadata("design:paramtypes", [_settings_service__WEBPACK_IMPORTED_MODULE_5__["SettingsService"], _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_2__["NgbModal"],
            ngx_toastr__WEBPACK_IMPORTED_MODULE_3__["ToastrService"], _utilities_service__WEBPACK_IMPORTED_MODULE_6__["UtilitiesService"]])
    ], SettingsRolesComponent);
    return SettingsRolesComponent;
}());



/***/ }),

/***/ "./src/app/settings/settings.roles.html":
/*!**********************************************!*\
  !*** ./src/app/settings/settings.roles.html ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<h1 class=\"settingsHeader\">\r\n\tRole Settings</h1>\r\n\r\n<div class=\"row\">\r\n\t<div class=\"col-6\">\r\n\t\t<button (click)=\"addRole()\" class=\"btn btn-outline-primary\">\r\n\t\t\t<i class=\"fa fa-plus\"></i> Add Role</button>\r\n\t</div>\r\n\t<div class=\"col-6\">\r\n\t\t<div class=\"form-group d-flex justify-content-end\">\r\n\t\t\t\t<div class=\"col-8 px-0\">\r\n\t\t\t\t\t<input class=\"form-control\" placeholder=\"Filter Roles...\" [formControl]=\"filterQuery\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n<ngx-datatable #roleTable class='material expandable' [columnMode]=\"'flex'\" [rows]=\"displayRoles\" [headerHeight]=\"50\" [footerHeight]=\"50\"\r\n [rowHeight]=\"undefined\" [sorts]=\"[{prop: 'name', dir: 'asc'}]\" [limit]=\"10\">\r\n\t<!-- Column Templates -->\r\n\t<ngx-datatable-column name=\"Role Name\" prop=\"name\" [flexGrow]=\"1\"></ngx-datatable-column>\r\n\t<ngx-datatable-column name=\"Permissions\" [sortable]=\"false\" [flexGrow]=\"5\">\r\n\t\t<ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n\t\t\t<div *ngFor=\"let resource of row.resources\">\r\n\t\t\t\t{{resource.name}}: {{resource.permissions.join(', ')}}\r\n\t\t\t</div>\r\n\t\t</ng-template>\r\n\t</ngx-datatable-column>\r\n\t<ngx-datatable-column name=\"Actions\" [resizeable]=\"false\" [sortable]=\"false\" [draggable]=\"false\" [flexGrow]=\"2\">\r\n\t\t<ng-template let-row=\"row\" ngx-datatable-cell-template>\r\n\t\t\t<button (click)=\"editRole(row)\" class=\"btn btn-primary mx-1\" ngbTooltip=\"Edit Role\" [disabled]=\"row.name === 'admin'\">\r\n\t\t\t\t<i class=\"fa fa-edit\"></i>\r\n\t\t\t</button>\r\n\t\t\t<button (click)=\"deleteRole(row)\" class=\"btn btn-danger mx-1\" ngbTooltip=\"Delete Role\" [disabled]=\"row.name === 'admin'\">\r\n\t\t\t\t<i class=\"fa fa-times\"></i>\r\n\t\t\t</button>\r\n\t\t</ng-template>\r\n\t</ngx-datatable-column>\r\n</ngx-datatable>"

/***/ }),

/***/ "./src/app/settings/settings.roles.modal.component.ts":
/*!************************************************************!*\
  !*** ./src/app/settings/settings.roles.modal.component.ts ***!
  \************************************************************/
/*! exports provided: SettingsRoleModalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SettingsRoleModalComponent", function() { return SettingsRoleModalComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var ngx_toastr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngx-toastr */ "./node_modules/ngx-toastr/fesm5/ngx-toastr.js");
/* harmony import */ var _settings_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./settings.service */ "./src/app/settings/settings.service.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
/* harmony import */ var _models_role__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../models/role */ "./src/app/models/role.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var SettingsRoleModalComponent = /** @class */ (function () {
    function SettingsRoleModalComponent(settingsService, activeModal, toastrService, utils) {
        this.settingsService = settingsService;
        this.activeModal = activeModal;
        this.toastrService = toastrService;
        this.utils = utils;
        this.resourceNames = [];
        this.selectPermissionMapping = {};
        this.newResourceTempIdTracker = -1;
        this.permissionSelectConfig = {
            width: '100%',
            placeholder: 'Select permission(s) for this resource',
            multiple: true,
            allowClear: true,
            closeOnSelect: false,
        };
    }
    SettingsRoleModalComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.availableResourceActions.forEach(function (ara) {
            var typeName = ara.name;
            if (ara.app_name) {
                typeName += " - " + ara.app_name;
            }
            _this.resourceNames.push(typeName);
        });
        // On init, set up our select2 stuff first
        this.workingRole.resources.forEach(function (resource) {
            var matchingAvailableResourceAction = _this.availableResourceActions
                .find(function (a) { return a.name === resource.name && a.app_name === resource.app_name; });
            _this.selectPermissionMapping[resource.resource_id] = matchingAvailableResourceAction.actions.map(function (action) {
                return {
                    id: action,
                    text: action,
                };
            });
        });
    };
    SettingsRoleModalComponent.prototype.addResource = function () {
        var _this = this;
        var selectedAvailableResourceAction = this.availableResourceActions.find(function (a) {
            var selectedInfo = _this.selectedAvailableResourceActionName.split(' - ');
            if (selectedInfo.length === 1) {
                return a.name === selectedInfo[0];
            }
            return a.name === selectedInfo[0] && a.app_name === selectedInfo[1];
        });
        var newResource = {
            resource_id: this.newResourceTempIdTracker--,
            role_id: this.workingRole.id,
            name: selectedAvailableResourceAction.name,
            permissions: [],
        };
        if (selectedAvailableResourceAction.app_name) {
            newResource.app_name = selectedAvailableResourceAction.app_name;
        }
        this.selectPermissionMapping[newResource.resource_id] = selectedAvailableResourceAction.actions.map(function (action) {
            return {
                id: action,
                text: action,
            };
        });
        this.workingRole.resources.push(newResource);
    };
    SettingsRoleModalComponent.prototype.removeResource = function (resource) {
        this.workingRole.resources.splice(this.workingRole.resources.indexOf(resource), 1);
        // delete this.selectPermissionMapping[resource.resource_id];
    };
    SettingsRoleModalComponent.prototype.permissionSelectChange = function (event, resource) {
        resource.permissions = event.value;
    };
    SettingsRoleModalComponent.prototype.submit = function () {
        var _this = this;
        var validationMessage = this.validate();
        if (validationMessage) {
            this.toastrService.error(validationMessage);
            return;
        }
        var toSubmit = this.utils.cloneDeep(this.workingRole);
        // Remove temp Ids for new resources
        toSubmit.resources.forEach(function (resource) {
            if (resource.resource_id < 0) {
                delete resource.resource_id;
            }
        });
        //If role has an ID, it already exists, call update
        if (toSubmit.id) {
            this.settingsService
                .editRole(toSubmit)
                .then(function (role) { return _this.activeModal.close({
                role: role,
                isEdit: true,
            }); })
                .catch(function (e) { return _this.toastrService.error(e.message); });
        }
        else {
            this.settingsService
                .addRole(toSubmit)
                .then(function (role) { return _this.activeModal.close({
                role: role,
                isEdit: false,
            }); })
                .catch(function (e) { return _this.toastrService.error(e.message); });
        }
    };
    SettingsRoleModalComponent.prototype.validate = function () {
        return '';
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _models_role__WEBPACK_IMPORTED_MODULE_5__["Role"])
    ], SettingsRoleModalComponent.prototype, "workingRole", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], SettingsRoleModalComponent.prototype, "title", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], SettingsRoleModalComponent.prototype, "submitText", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], SettingsRoleModalComponent.prototype, "availableResourceActions", void 0);
    SettingsRoleModalComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'settings-role-modal',
            template: __webpack_require__(/*! ./settings.roles.modal.html */ "./src/app/settings/settings.roles.modal.html"),
            styles: [__webpack_require__(/*! ./settings.scss */ "./src/app/settings/settings.scss")],
            providers: [_settings_service__WEBPACK_IMPORTED_MODULE_3__["SettingsService"], _utilities_service__WEBPACK_IMPORTED_MODULE_4__["UtilitiesService"]],
        }),
        __metadata("design:paramtypes", [_settings_service__WEBPACK_IMPORTED_MODULE_3__["SettingsService"], _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__["NgbActiveModal"],
            ngx_toastr__WEBPACK_IMPORTED_MODULE_2__["ToastrService"],
            _utilities_service__WEBPACK_IMPORTED_MODULE_4__["UtilitiesService"]])
    ], SettingsRoleModalComponent);
    return SettingsRoleModalComponent;
}());



/***/ }),

/***/ "./src/app/settings/settings.roles.modal.html":
/*!****************************************************!*\
  !*** ./src/app/settings/settings.roles.modal.html ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal-header\">\r\n\t<h4 class=\"modal-title\">{{title}}</h4>\r\n</div>\r\n<div id=\"roleModalBody\" class=\"modal-body\">\r\n\t<div class=\"container-fluid\">\r\n\t\t<form #roleForm=\"ngForm\">\r\n\t\t\t<div class=\"row\">\r\n\t\t\t\t<div class=\"col-6\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"name\">\r\n\t\t\t\t\t\t\tName\r\n\t\t\t\t\t\t\t<i class=\"fa fa-asterisk required\" title=\"This field is required.\"></i>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" [(ngModel)]=\"workingRole.name\" name=\"name\" #name=\"ngModel\" required>\r\n\t\t\t\t\t\t<div *ngIf=\"name.errors && (name.dirty || name.touched)\" class=\"alert alert-danger\">\r\n\t\t\t\t\t\t\t<div [hidden]=\"!name.errors.required\">\r\n\t\t\t\t\t\t\t\tName is required.\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"col-6\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"description\">Description</label>\r\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" [(ngModel)]=\"workingRole.description\" name=\"ip\" tabindex=\"2\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"row\">\r\n\t\t\t\t<div class=\"col-6\">\r\n\t\t\t\t\t<label>Resource</label>\r\n\t\t\t\t\t<select class=\"form-control\" [(ngModel)]=\"selectedAvailableResourceActionName\" name=\"selectedAvailableResourceActionName\">\r\n\t\t\t\t\t\t<option *ngFor=\"let i of resourceNames\" [value]=\"i\" [label]=\"i\">{{i}}</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"col-6\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<button class=\"btn btn-primary pull-right\" (click)=\"addResource()\" [disabled]=\"!selectedAvailableResourceActionName\">\r\n\t\t\t\t\t\t\t<i class=\"fa fa-plus\"></i>Add Resource\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"resourceGroup form-group {{id % 2 ? 'odd' : 'even'}}\" *ngFor=\"let resource of workingRole.resources; let id = index\">\r\n\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t<div class=\"col-6\">\r\n\t\t\t\t\t\t<label>Resource {{id+1}}: {{resource.name}}{{resource.app_name ? ' (' + resource.app_name + ')' : ''}}</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"col-6\">\r\n\t\t\t\t\t\t<div class=\"pull-right\">\r\n\t\t\t\t\t\t\t<button class=\"btn btn-danger\" (click)=\"removeResource(resource)\" title=\"Remove Resource\"><i class=\"fa fa-close\"></i></button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<select2 [data]=\"selectPermissionMapping[resource.resource_id]\" [value]=\"resource.permissions\" [options]=\"permissionSelectConfig\"\r\n\t\t\t\t (valueChanged)=\"permissionSelectChange($event, resource)\"></select2>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t</div>\r\n</div>\r\n<div class=\"modal-footer\">\r\n\t<button type=\"button\" class=\"btn btn-secondary\" (click)=\"activeModal.dismiss()\">Undo Changes and Close</button>\r\n\t<button type=\"button\" class=\"btn btn-primary\" [disabled]=\"!roleForm.form.valid\" (click)=\"submit()\">{{submitText}}</button>\r\n</div>"

/***/ }),

/***/ "./src/app/settings/settings.scss":
/*!****************************************!*\
  !*** ./src/app/settings/settings.scss ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".settingsMain {\n  padding: 10px 15px; }\n\n.settingsMain ngx-datatable datatable-body datatable-body-row datatable-body-cell .datatable-body-cell-label {\n  white-space: initial; }\n\n#roleModalBody .resourceGroup {\n  padding: 5px; }\n\n#roleModalBody .resourceGroup.odd {\n  background-color: #EEE; }\n\n#roleModalBody .resourceGroup .row {\n  padding-bottom: 5px; }\n\n#roleModalBody .required,\n#userModalBody .required {\n  color: crimson;\n  margin-left: 5px; }\n\n.settingsMain input[type=checkbox].form-control,\n.settingsMain input[type=radio].form-control,\n#userModalBody input[type=checkbox].form-control,\n#userModalBody input[type=radio].form-control {\n  width: 34px;\n  margin: 0 5px; }\n"

/***/ }),

/***/ "./src/app/settings/settings.service.ts":
/*!**********************************************!*\
  !*** ./src/app/settings/settings.service.ts ***!
  \**********************************************/
/*! exports provided: SettingsService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SettingsService", function() { return SettingsService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common/http */ "./node_modules/@angular/common/fesm5/http.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! class-transformer */ "./node_modules/class-transformer/index.js");
/* harmony import */ var class_transformer__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(class_transformer__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _models_configuration__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../models/configuration */ "./src/app/models/configuration.ts");
/* harmony import */ var _models_user__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../models/user */ "./src/app/models/user.ts");
/* harmony import */ var _models_role__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../models/role */ "./src/app/models/role.ts");
/* harmony import */ var _models_availableResourceAction__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../models/availableResourceAction */ "./src/app/models/availableResourceAction.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var SettingsService = /** @class */ (function () {
    function SettingsService(http, utils) {
        this.http = http;
        this.utils = utils;
    }
    SettingsService.prototype.getConfiguration = function () {
        return this.http.get('/api/settings')
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["plainToClass"])(_models_configuration__WEBPACK_IMPORTED_MODULE_3__["Configuration"], data); })
            .catch(this.utils.handleResponseError);
    };
    SettingsService.prototype.updateConfiguration = function (configuration) {
        return this.http.put('/api/settings', configuration)
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["plainToClass"])(_models_configuration__WEBPACK_IMPORTED_MODULE_3__["Configuration"], data); })
            .catch(this.utils.handleResponseError);
    };
    SettingsService.prototype.getAllUsers = function () {
        return this.utils.paginateAll(this.getUsers.bind(this));
    };
    SettingsService.prototype.getUsers = function (page) {
        if (page === void 0) { page = 1; }
        return this.http.get("/api/users?page=" + page)
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["plainToClass"])(_models_user__WEBPACK_IMPORTED_MODULE_4__["User"], data); })
            .catch(this.utils.handleResponseError);
    };
    SettingsService.prototype.addUser = function (user) {
        return this.http.post('/api/users', user)
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["plainToClass"])(_models_user__WEBPACK_IMPORTED_MODULE_4__["User"], data); })
            .catch(this.utils.handleResponseError);
    };
    SettingsService.prototype.editUser = function (user) {
        return this.http.put("/api/users/" + user.id, user)
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["plainToClass"])(_models_user__WEBPACK_IMPORTED_MODULE_4__["User"], data); })
            .catch(this.utils.handleResponseError);
    };
    SettingsService.prototype.deleteUser = function (id) {
        return this.http.delete("/api/users/" + id)
            .toPromise()
            .then(function () { return null; })
            .catch(this.utils.handleResponseError);
    };
    SettingsService.prototype.getRoles = function () {
        return this.http.get('/api/roles')
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["plainToClass"])(_models_role__WEBPACK_IMPORTED_MODULE_5__["Role"], data); })
            .catch(this.utils.handleResponseError);
    };
    SettingsService.prototype.addRole = function (role) {
        return this.http.post('/api/roles', role)
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["plainToClass"])(_models_role__WEBPACK_IMPORTED_MODULE_5__["Role"], data); })
            .catch(this.utils.handleResponseError);
    };
    SettingsService.prototype.editRole = function (role) {
        return this.http.put("/api/roles/" + role.id, role)
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["plainToClass"])(_models_role__WEBPACK_IMPORTED_MODULE_5__["Role"], data); })
            .catch(this.utils.handleResponseError);
    };
    SettingsService.prototype.deleteRole = function (id) {
        return this.http.delete("/api/roles/" + id)
            .toPromise()
            .then(function () { return null; })
            .catch(this.utils.handleResponseError);
    };
    SettingsService.prototype.getAvailableResourceActions = function () {
        // const testData: AvailableResourceAction[] = [
        // 	{
        // 		name: 'workflow',
        // 		actions: [ 'create', 'read', 'update', 'delete', 'execute' ],
        // 	},
        // 	{
        // 		name: 'device',
        // 		actions: [ 'create', 'read', 'update', 'delete', 'import', 'export' ],
        // 	},
        // 	{
        // 		name: 'user',
        // 		actions: [ 'create', 'read', 'update', 'delete' ],
        // 	},
        // 	{
        // 		name: 'case',
        // 		actions: [ 'create', 'read', 'update', 'delete' ],
        // 	},
        // 	{
        // 		name: 'test',
        // 		actions: ['some', 'actions', 'go', 'here'],
        // 		app_name: 'Utilities',
        // 	},
        // ];
        // return Promise.resolve(testData);
        return this.http.get('/api/availableresourceactions')
            .toPromise()
            .then(function (data) { return Object(class_transformer__WEBPACK_IMPORTED_MODULE_2__["plainToClass"])(_models_availableResourceAction__WEBPACK_IMPORTED_MODULE_6__["AvailableResourceAction"], data); })
            .catch(this.utils.handleResponseError);
    };
    SettingsService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])({
            providedIn: 'root'
        }),
        __metadata("design:paramtypes", [_angular_common_http__WEBPACK_IMPORTED_MODULE_1__["HttpClient"], _utilities_service__WEBPACK_IMPORTED_MODULE_7__["UtilitiesService"]])
    ], SettingsService);
    return SettingsService;
}());



/***/ }),

/***/ "./src/app/settings/settings.timeout.modal.component.ts":
/*!**************************************************************!*\
  !*** ./src/app/settings/settings.timeout.modal.component.ts ***!
  \**************************************************************/
/*! exports provided: SettingsTimeoutModalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SettingsTimeoutModalComponent", function() { return SettingsTimeoutModalComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var _settings_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./settings.service */ "./src/app/settings/settings.service.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
/* harmony import */ var _models_configuration__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../models/configuration */ "./src/app/models/configuration.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var SettingsTimeoutModalComponent = /** @class */ (function () {
    function SettingsTimeoutModalComponent(activeModal) {
        this.activeModal = activeModal;
    }
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _models_configuration__WEBPACK_IMPORTED_MODULE_4__["Configuration"])
    ], SettingsTimeoutModalComponent.prototype, "configuration", void 0);
    SettingsTimeoutModalComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'timeout-modal',
            template: __webpack_require__(/*! ./settings.timeout.modal.html */ "./src/app/settings/settings.timeout.modal.html"),
            styles: [__webpack_require__(/*! ./settings.scss */ "./src/app/settings/settings.scss")],
            providers: [_settings_service__WEBPACK_IMPORTED_MODULE_2__["SettingsService"], _utilities_service__WEBPACK_IMPORTED_MODULE_3__["UtilitiesService"]],
        }),
        __metadata("design:paramtypes", [_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__["NgbActiveModal"]])
    ], SettingsTimeoutModalComponent);
    return SettingsTimeoutModalComponent;
}());



/***/ }),

/***/ "./src/app/settings/settings.timeout.modal.html":
/*!******************************************************!*\
  !*** ./src/app/settings/settings.timeout.modal.html ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal-header\">\r\n    <h4 class=\"modal-title\">Timeout Settings</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n    <div class=\"container-fluid\">\r\n        <div class=\"row\">\r\n            <div class=\"col-12\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"access_token_duration\">JWT Access Token Duration (in minutes)</label>\r\n                    <input type=\"number\" min=\"1\" class=\"form-control\" [(ngModel)]=\"configuration.access_token_duration\" name=\"access_token_duration\" required>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-12\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"refresh_token_duration\">JWT Refresh Token Duration (in days)</label>\r\n                    <input type=\"number\" min=\"1\" class=\"form-control\" [(ngModel)]=\"configuration.refresh_token_duration\" name=\"refresh_token_duration\" required>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"modal-footer\">\r\n    <button type=\"button\" class=\"btn btn-secondary\" (click)=\"activeModal.dismiss()\">Close</button>\r\n    <button type=\"button\" class=\"btn btn-primary\" (click)=\"activeModal.close(configuration)\">Save</button>\r\n</div>"

/***/ }),

/***/ "./src/app/settings/settings.user.modal.component.ts":
/*!***********************************************************!*\
  !*** ./src/app/settings/settings.user.modal.component.ts ***!
  \***********************************************************/
/*! exports provided: SettingsUserModalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SettingsUserModalComponent", function() { return SettingsUserModalComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ng-bootstrap/ng-bootstrap */ "./node_modules/@ng-bootstrap/ng-bootstrap/fesm5/ng-bootstrap.js");
/* harmony import */ var ngx_toastr__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ngx-toastr */ "./node_modules/ngx-toastr/fesm5/ngx-toastr.js");
/* harmony import */ var _settings_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./settings.service */ "./src/app/settings/settings.service.ts");
/* harmony import */ var _utilities_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utilities.service */ "./src/app/utilities.service.ts");
/* harmony import */ var _models_workingUser__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../models/workingUser */ "./src/app/models/workingUser.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var SettingsUserModalComponent = /** @class */ (function () {
    function SettingsUserModalComponent(settingsService, activeModal, toastrService) {
        this.settingsService = settingsService;
        this.activeModal = activeModal;
        this.toastrService = toastrService;
    }
    SettingsUserModalComponent.prototype.ngOnInit = function () {
        this.roleSelectData = this.roles.map(function (role) {
            return { id: role.id.toString(), text: role.name };
        });
        this.roleSelectConfig = {
            width: '100%',
            placeholder: 'Select role(s)',
            multiple: true,
            allowClear: true,
            closeOnSelect: false,
        };
        if (!this.workingUser.role_ids) {
            this.workingUser.role_ids = [];
        }
        this.roleSelectInitialValue = JSON.parse(JSON.stringify(this.workingUser.role_ids));
    };
    /**
     * Event fired on the select2 change for roles. Updates the value based on the event value.
     * @param $event JS Event Fired
     */
    SettingsUserModalComponent.prototype.roleSelectChange = function ($event) {
        // Convert strings to numbers here
        this.workingUser.role_ids = $event.value.map(function (id) { return +id; });
    };
    SettingsUserModalComponent.prototype.submit = function () {
        var _this = this;
        var validationMessage = this.validate();
        if (validationMessage) {
            this.toastrService.error(validationMessage);
            return;
        }
        var toSubmit = _models_workingUser__WEBPACK_IMPORTED_MODULE_5__["WorkingUser"].toUser(this.workingUser);
        //If user has an ID, user already exists, call update
        if (toSubmit.id) {
            this.settingsService
                .editUser(toSubmit)
                .then(function (user) { return _this.activeModal.close({
                user: user,
                isEdit: true,
            }); })
                .catch(function (e) { return _this.toastrService.error(e.message); });
        }
        else {
            this.settingsService
                .addUser(toSubmit)
                .then(function (user) { return _this.activeModal.close({
                user: user,
                isEdit: false,
            }); })
                .catch(function (e) { return _this.toastrService.error(e.message); });
        }
    };
    SettingsUserModalComponent.prototype.validate = function () {
        if (!this.workingUser) {
            return 'User is not specified.';
        }
        if (!this.workingUser.id && !this.workingUser.newPassword) {
            return 'You must specify a password.';
        }
        if (this.workingUser.confirmNewPassword !== this.workingUser.newPassword) {
            return 'Passwords do not match.';
        }
        return '';
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", _models_workingUser__WEBPACK_IMPORTED_MODULE_5__["WorkingUser"])
    ], SettingsUserModalComponent.prototype, "workingUser", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], SettingsUserModalComponent.prototype, "title", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], SettingsUserModalComponent.prototype, "submitText", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Array)
    ], SettingsUserModalComponent.prototype, "roles", void 0);
    SettingsUserModalComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'user-modal',
            template: __webpack_require__(/*! ./settings.user.modal.html */ "./src/app/settings/settings.user.modal.html"),
            styles: [__webpack_require__(/*! ./settings.scss */ "./src/app/settings/settings.scss")],
            providers: [_settings_service__WEBPACK_IMPORTED_MODULE_3__["SettingsService"], _utilities_service__WEBPACK_IMPORTED_MODULE_4__["UtilitiesService"]],
        }),
        __metadata("design:paramtypes", [_settings_service__WEBPACK_IMPORTED_MODULE_3__["SettingsService"], _ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_1__["NgbActiveModal"],
            ngx_toastr__WEBPACK_IMPORTED_MODULE_2__["ToastrService"]])
    ], SettingsUserModalComponent);
    return SettingsUserModalComponent;
}());



/***/ }),

/***/ "./src/app/settings/settings.user.modal.html":
/*!***************************************************!*\
  !*** ./src/app/settings/settings.user.modal.html ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"modal-header\">\r\n\t<h4 class=\"modal-title\">{{title}}</h4>\r\n</div>\r\n<div id=\"userModalBody\" class=\"modal-body\">\r\n\t<div class=\"container-fluid\">\r\n\t\t<form #userForm=\"ngForm\" (ngSubmit)=\"submit()\">\r\n\t\t\t<div class=\"row\">\r\n\t\t\t\t<div class=\"col-6\">\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"username\">\r\n\t\t\t\t\t\t\tUsername <i class=\"fa fa-asterisk required\" title=\"This field is required.\"></i>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" [class.is-invalid]=\"username.touched && username.invalid\" [(ngModel)]=\"workingUser.username\" name=\"username\" #username=\"ngModel\" required>\r\n\t\t\t\t\t\t<div class=\"invalid-feedback\">\r\n\t\t\t\t\t\t\tUsername is required.\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"role_ids\">\r\n\t\t\t\t\t\t\tRoles <i class=\"fa fa-asterisk required\" title=\"At least one role is required.\"></i>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<select2 [data]=\"roleSelectData\" [value]=\"roleSelectInitialValue\" [options]=\"roleSelectConfig\"\r\n\t\t\t\t\t\t(valueChanged)=\"roleSelectChange($event)\"></select2>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<span class=\"switch\">\r\n\t\t\t\t\t\t\t<input type=\"checkbox\" class=\"switch\" [(ngModel)]=\"workingUser.active\" name=\"is_active\" id=\"is_active\">\r\n\t\t\t\t\t\t\t<label class=\"m-0\" for=\"is_active\">{{ workingUser.active ? 'Active' : 'Inactive'}}</label>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"col-6\">\r\n\t\t\t\t\t<div class=\"form-group\" *ngIf=\"workingUser.id\">\r\n\t\t\t\t\t\t<label for=\"currentPassword\">Current Password</label>\r\n\t\t\t\t\t\t<input type=\"password\" class=\"form-control\" [(ngModel)]=\"workingUser.currentPassword\" #currentPassword=\"ngModel\" name=\"currentPassword\">\r\n\t\t\t\t\t\t<div *ngIf=\"currentPassword.errors && (currentPassword.dirty || currentPassword.touched)\" class=\"alert alert-danger\">\r\n\t\t\t\t\t\t\t<div [hidden]=\"!currentPassword.errors.required\">\r\n\t\t\t\t\t\t\t\tThe user's current password is required.\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"newPassword\">\r\n\t\t\t\t\t\t\tNew Password\r\n\t\t\t\t\t\t\t<i *ngIf=\"!this.workingUser.id\" class=\"fa fa-asterisk required\" title=\"This field is required.\"></i>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input type=\"password\" class=\"form-control\" [(ngModel)]=\"workingUser.newPassword\" #newPassword=\"ngModel\" name=\"newPassword\">\r\n\t\t\t\t\t\t<div *ngIf=\"(!workingUser.id || workingUser.currentPassword) && (newPassword.dirty || newPassword.touched) && !newPassword.value\"\r\n\t\t\t\t\t\t\tclass=\"alert alert-danger\">\r\n\t\t\t\t\t\t\tPassword is required.\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"confirmNewPassword\">\r\n\t\t\t\t\t\t\tConfirm New Password\r\n\t\t\t\t\t\t\t<i *ngIf=\"!this.workingUser.id\" class=\"fa fa-asterisk required\" title=\"This field is required.\"></i>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input type=\"password\" class=\"form-control\" [(ngModel)]=\"workingUser.confirmNewPassword\" #confirmNewPassword=\"ngModel\" name=\"confirmNewPassword\">\r\n\t\t\t\t\t\t<div *ngIf=\"confirmNewPassword.dirty && confirmNewPassword.touched && confirmNewPassword.value && newPassword.value !== confirmNewPassword.value\"\r\n\t\t\t\t\t\t\tclass=\"alert alert-danger\">\r\n\t\t\t\t\t\t\tPasswords do not match.\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div *ngIf=\"confirmNewPassword.dirty && confirmNewPassword.touched && !confirmNewPassword.value\" class=\"alert alert-danger\">\r\n\t\t\t\t\t\t\tYou must re-enter the new password to confirm.\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t</div>\r\n</div>\r\n<div class=\"modal-footer\">\r\n\t<button type=\"button\" class=\"btn btn-secondary\" (click)=\"activeModal.dismiss()\">Undo Changes and Close</button>\r\n\t<button type=\"button\" class=\"btn btn-primary\" [disabled]=\"!userForm.form.valid || !workingUser.role_ids.length\" (click)=\"submit()\">{{submitText}}</button>\r\n</div>"

/***/ }),

/***/ "./src/app/utilities.service.ts":
/*!**************************************!*\
  !*** ./src/app/utilities.service.ts ***!
  \**************************************/
/*! exports provided: UtilitiesService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UtilitiesService", function() { return UtilitiesService; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_http__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/http */ "./node_modules/@angular/http/fesm5/http.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__);
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};



var UtilitiesService = /** @class */ (function () {
    function UtilitiesService() {
    }
    /**
     * Returns a truncated input sting based on the length inputted.
     * Will simply return input if input length is less than or equal the length of the specified length.
     * @param input String to truncate, if applicable
     * @param length Length of truncated string (not including the ellipsis appended)
     * @param def Default value to use if the string is null of whitespace
     */
    UtilitiesService.prototype.getTruncatedString = function (input, length, def) {
        input = this.getDefaultString(input, def);
        if (input.length <= length) {
            return input;
        }
        return input.substr(0, length) + '...';
    };
    /**
     * Returns a trimmed and defaulted (if empty) string.
     * @param input String to return trimmed or defaulted
     * @param def Default value to use if the string is null of whitespace
     */
    UtilitiesService.prototype.getDefaultString = function (input, def) {
        if (!input) {
            input = '';
        }
        var trimmed = input.trim();
        if (!trimmed) {
            if (def) {
                return def;
            }
            return '';
        }
        return trimmed;
    };
    /**
     * Gets the current datetime as an ISO string
     */
    UtilitiesService.prototype.getCurrentIsoString = function () {
        return moment__WEBPACK_IMPORTED_MODULE_2__["utc"]().toISOString();
    };
    /**
     * Gets a locale string for a given UTC datetime object or string.
     * @param time Inputted date object or string representation of a UTC time
     */
    UtilitiesService.prototype.getLocalTime = function (time) {
        return moment__WEBPACK_IMPORTED_MODULE_2__["utc"](time).local().toLocaleString();
    };
    /**
     * Gets a relative time string for a given UTC datetime object or string (e.g. 5 hours ago).
     * @param time Inputted date object or string representation of a UTC time
     */
    UtilitiesService.prototype.getRelativeLocalTime = function (time) {
        return moment__WEBPACK_IMPORTED_MODULE_2__["utc"](time).local().fromNow();
    };
    /**
     * Clones JSON into a new value.
     * @param val Value to clone
     */
    UtilitiesService.prototype.cloneDeep = function (val) {
        return JSON.parse(JSON.stringify(val));
    };
    UtilitiesService.prototype.paginateAll = function (serviceCall, page, allResults) {
        var _this = this;
        if (page === void 0) { page = 1; }
        if (allResults === void 0) { allResults = []; }
        return serviceCall(page).then(function (results) {
            if (results.length > 0)
                return _this.paginateAll(serviceCall, page + 1, allResults.concat(results));
            else
                return allResults;
        });
    };
    UtilitiesService.prototype.extractResponseData = function (res) {
        var body = res.json();
        return body || {};
    };
    UtilitiesService.prototype.handleResponseError = function (error) {
        var errMsg;
        var err;
        if (error instanceof _angular_http__WEBPACK_IMPORTED_MODULE_1__["Response"]) {
            var body = error.json() || '';
            err = body.error || body.detail || JSON.stringify(body);
            errMsg = error.status + " - " + (error.statusText || '') + " " + err;
        }
        else {
            err = errMsg = error.message ? error.message : error.toString();
        }
        // console.error(errMsg);
        throw new Error(err);
    };
    UtilitiesService.prototype.alert = function (message, options) {
        if (options === void 0) { options = {}; }
        return new Promise(function (resolve) {
            var defaults = {
                message: message,
                backdrop: true,
                className: "mt-5 pt-5",
                callback: function () { resolve(); }
            };
            bootbox.alert(Object.assign({}, defaults, options));
        });
    };
    UtilitiesService.prototype.confirm = function (message, options) {
        if (options === void 0) { options = {}; }
        return new Promise(function (resolve) {
            var defaults = {
                message: message,
                backdrop: true,
                className: "mt-5 pt-5",
                callback: function (result) { if (result)
                    resolve(result); }
            };
            bootbox.confirm(Object.assign({}, defaults, options));
        });
    };
    UtilitiesService.prototype.prompt = function (title, options) {
        if (options === void 0) { options = {}; }
        return new Promise(function (resolve) {
            var defaults = {
                title: title,
                backdrop: true,
                className: "mt-5 pt-5",
                callback: function (result) { if (result)
                    resolve(result); }
            };
            bootbox.prompt(Object.assign({}, defaults, options));
        });
    };
    UtilitiesService.prototype.readUploadedFileAsText = function (inputFile) {
        var temporaryFileReader = new FileReader();
        return new Promise(function (resolve, reject) {
            temporaryFileReader.onerror = function () {
                temporaryFileReader.abort();
                reject(new DOMException("Problem parsing input file."));
            };
            temporaryFileReader.onload = function () {
                resolve(temporaryFileReader.result);
            };
            temporaryFileReader.readAsText(inputFile);
        });
    };
    UtilitiesService = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])({
            providedIn: 'root'
        })
    ], UtilitiesService);
    return UtilitiesService;
}());



/***/ }),

/***/ "./src/environments/environment.ts":
/*!*****************************************!*\
  !*** ./src/environments/environment.ts ***!
  \*****************************************/
/*! exports provided: environment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "environment", function() { return environment; });
// This file can be replaced during build by using the `fileReplacements` array.
// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.
// The list of file replacements can be found in `angular.json`.
var environment = {
    production: false
};
/*
 * For easier debugging in development mode, you can import the following file
 * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.
 *
 * This import should be commented out in production mode because it will have a negative impact
 * on performance if an error is thrown.
 */
// import 'zone.js/dist/zone-error';  // Included with Angular CLI.


/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser-dynamic */ "./node_modules/@angular/platform-browser-dynamic/fesm5/platform-browser-dynamic.js");
/* harmony import */ var _app_main_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/main.module */ "./src/app/main.module.ts");
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./environments/environment */ "./src/environments/environment.ts");




document.addEventListener('DOMContentLoaded', function (event) {
    if (sessionStorage.getItem('refresh_token')) {
        if (_environments_environment__WEBPACK_IMPORTED_MODULE_3__["environment"].production) {
            Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["enableProdMode"])();
        }
        Object(_angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_1__["platformBrowserDynamic"])().bootstrapModule(_app_main_module__WEBPACK_IMPORTED_MODULE_2__["MainModule"])
            .catch(function (err) { return console.log(err); });
    }
    else {
        location.href = '/login';
    }
});


/***/ }),

/***/ 0:
/*!***************************!*\
  !*** multi ./src/main.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! C:\Users\aheibel\Documents\GitHub\WALKOFF\api_gateway\client\src\main.ts */"./src/main.ts");


/***/ })

},[[0,"runtime","vendor"]]]);
//# sourceMappingURL=main.js.map